import{r as l,I as B,u as L,c as z,w as t,o as E,b as d,d as s,t as x,V as F,e as _,f as T,E as u,i as w,a0 as f,j as $,as as q,k as G}from"./app-a6680c3c.js";import{G as S,W}from"./WhiteLogo-ebef1f6b.js";import{c as j,a as y,e as A,F as D,b as V}from"./index.esm-961f65e8.js";import"./_plugin-vue_export-helper-c27b6911.js";const I={class:"mx-auto px-3 text-center",style:{"z-index":"1","max-width":"400px",width:"100%","margin-top":"100px"}},O={class:"text-subtitle-1 text-white"},H={class:"align-center"},Y={__name:"ResetPassword",setup(J){var g;const h=l("GRS Assets"),b=l("https://users.moikzz.tech"),P=l("grs-asset-wvukt"),m=l(!1),e=l({username:"",password_confirmation:"",password:"",url:P.value}),p=l(!1),n=l(""),k=B(),C=L(),c=l(!0);e.value.username=(g=k.query)==null?void 0:g.ecode,e.value.username&&(c.value=!1);const R=()=>{C.push({path:"/login"})},U=j({password:y().min(5).required(),password_confirmation:y().required().oneOf([A("password")],"Passwords do not match")}),N=async()=>{if(p.value=!1,n.value="",e.value.password==0){n.value="Enter Password",p.value=!0;return}m.value=!0,await axios.post(b.value+"/api/application/reset-password",e.value).then(v=>{e.value={password:"11111111111111111111111",password_confirmation:"11111111111111111111111"},c.value=!0,m.value=!1,n.value=v.data.msg}).catch(v=>{})};return(v,a)=>(E(),z(S,null,{default:t(()=>[d("div",I,[s(W,{width:"100%"}),d("div",O,x(h.value),1)]),s(G,{class:"mt-8 pa-3 rounded-lg elevation-3",width:"90%","max-width":"450"},{default:t(()=>[s(F,{class:"px-5 pb-0 primary--text"},{default:t(()=>[_("Reset Password")]),_:1}),s(T,{class:"py-4"},{default:t(()=>[s(u(D),{as:"v-form","validation-schema":u(U)},{default:t(()=>[s(u(V),{name:"username",modelValue:e.value.username,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.username=o)},{default:t(({field:o,errors:i})=>[s(w,f({modelValue:e.value.username,"onUpdate:modelValue":a[0]||(a[0]=r=>e.value.username=r)},o,{label:"Employee Code",variant:"outlined",density:"compact",disabled:"disabled"}),null,16,["modelValue"])]),_:1},8,["modelValue"]),s(u(V),{name:"password",modelValue:e.value.password,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.password=o)},{default:t(({field:o,errors:i})=>[s(w,f({modelValue:e.value.password,"onUpdate:modelValue":a[2]||(a[2]=r=>e.value.password=r)},o,{label:"Set New Password",type:"password",variant:"outlined",density:"compact","error-messages":i}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),s(u(V),{name:"password_confirmation",modelValue:e.value.password_confirmation,"onUpdate:modelValue":a[5]||(a[5]=o=>e.value.password_confirmation=o)},{default:t(({field:o,errors:i})=>[s(w,f({modelValue:e.value.password_confirmation,"onUpdate:modelValue":a[4]||(a[4]=r=>e.value.password_confirmation=r)},o,{label:"Confirm New Password",type:"password",variant:"outlined",density:"compact","error-messages":i}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),d("div",H,[s($,{onClick:N,width:"100%",color:"primary",height:"55",large:"",disabled:c.value,loading:m.value},{default:t(()=>[_("Reset Password")]),_:1},8,["disabled","loading"]),d("div",{class:"mt-5",style:{cursor:"pointer"},onClick:R},"back to Login")])]),_:1},8,["validation-schema"]),d("div",{class:q(`${p.value?"text-error":"text-success"}  mt-4 text-center`)},x(n.value),3)]),_:1})]),_:1})]),_:1}))}};export{Y as default};
