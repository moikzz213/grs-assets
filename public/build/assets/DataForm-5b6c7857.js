import{a as et,r as _,G as tt,u as at,O as le,I as lt,H as ye,o as i,c as h,w as d,d as o,v as st,k as j,V as ot,b as s,t as v,p as V,z as y,ae as ge,y as r,E as se,f as Q,s as g,j as x,e as T,J as I,i as K,q as z,F as N,P as Ve,R as oe,Q as H,M as dt,U as be,Y as it,C as J,D as ut,ag as rt,S as nt,T as ct,ac as pt,aZ as ke,a_ as we,a$ as xe,b0 as Se,b1 as vt,Z as _t,_ as mt,m as ft,n as O}from"./app-3ae0b9e3.js";import{_ as ht}from"./ApppageHeader-3d75e200.js";import{_ as Ce,r as Te}from"./Studio-7e0b90a7.js";import{_ as yt}from"./AppSnackBar-52fe84a0.js";import{Q as gt}from"./QrcodeReaderVue3.common-da4be6d5.js";import{d as Vt,e as bt}from"./encrypt-c6a575e2.js";import{u as Ae}from"./formatDate-559e9d83.js";const kt={key:0,class:"text-error text-h6"},wt={class:"v-col-12 v-col-md-8"},xt={key:0,class:"no-print"},St={class:"v-col-12 v-col-md-6"},Ct={class:"v-col-12 v-col-md-6"},Tt={class:"v-col-12 v-col-md-6"},At={class:"v-col-12 v-col-md-6 d-flex"},qt={class:"v-col-12"},Ut={class:"wd-100"},jt={class:"wd-60 text-caption"},Ot={class:"wd-40"},Et={class:"wd-60"},Dt={class:"wd-40"},Rt={class:"wd-100"},It={class:"v-col-12"},Nt=s("small",{class:"mx-5 text-info"},"UOM: ( pcs, pack, box, etc.. )",-1),Ft=s("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),Lt=s("div",{class:"wd-15"},"ASSET CODE",-1),zt=s("div",{class:"wd-5"},"QTY",-1),Mt=s("div",{class:"wd-10"},"UOM",-1),Pt=s("div",{class:"wd-10"},"WEIGHT",-1),Bt=s("div",{class:"wd-10"},"VALUE",-1),$t=s("div",{class:"wd-15"},"REASON FOR REQUEST",-1),Qt={class:"wd-30"},Yt={class:"wd-15"},Gt={class:"wd-5"},Kt={class:"wd-10"},Ht={class:"wd-10"},Jt={class:"wd-10"},Zt={class:"wd-15"},Wt={class:"v-col-12 v-col-md-1 px-1 no-print"},Xt={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},ea={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},ta={class:"v-col-12 pt-0 pb-0"},aa={class:"v-col-12 v-col-md-1 custom-width-description"},la={class:"v-col-12 v-col-md-2 d-flex"},sa={class:"v-col-12 v-col-md-1"},oa={class:"v-col-12 v-col-md-1 custom-width-uom"},da={class:"v-col-12 v-col-md-1 my-auto"},ia=s("br",null,null,-1),ua=s("small",null,"(KG)",-1),ra={class:"v-col-12 v-col-md-1 my-auto"},na=s("br",null,null,-1),ca=s("small",null,"(AED)",-1),pa={class:"v-col-12 v-col-md-2 d-flex"},va={key:0},_a=s("div",null,"Additional File can be upload here",-1),ma=["data"],fa={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},ha=s("div",null,"APPROVAL SETUP",-1),ya={key:0,class:"no-print"},ga=s("div",{class:"wd-20"},"Requestor",-1),Va={class:"wd-50"},ba=s("div",{class:"wd-10"},"Status",-1),ka=s("div",{class:"wd-20"},"Date Approved",-1),wa={class:"wd-20"},xa={class:"wd-50"},Sa={class:"wd-10"},Ca={class:"wd-20"},Ta=s("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),Aa={class:"v-col-12 v-col-md-6"},qa=s("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),Ua={key:0,class:"v-col-12 v-col-md-2"},ja={class:"v-col-12 v-col-md-2"},Oa={class:"v-col-12 v-col-md-6 d-flex"},Ea={class:"my-auto v-col-12 v-col-md-2"},Da={key:0,class:"v-col-12 v-col-md-2"},Ra={class:"v-col-12 no-print"},Ia={class:"v-col-12 text-error"},Na=s("div",{class:"v-col-12 no-print v-col-md-12 text-info"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),Qa={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(qe,{emit:Ue}){const A=qe,n=et(),de=_("Note: Administrator needs to setup signatories first."),Z=_(!1),W=_(!1),q=tt(),je=at(),u=_({}),b=_(!1),k=_([{qty:1,attachment:{}}]),Oe=_(new Date),X=_(["commercial-manager","superadmin"]),Ee=_(["Nos","Set","Pcs","Pack","Pallet","SqM"]),ee=l=>{if(l=="approve")return"Approved By";if(l=="reviewer")return"Reviewed By";if(l=="receiver")return"Received By";if(l=="transport")return"Transport Arranged By";if(l=="releasing")return"Released By";if(l=="verify")return"Verified By"},M=_(window.location.origin),De=(l,a)=>{k.value[l].attachment=a[0]},U=_([]),Re=l=>{let a=null;l.map(e=>{a=U.value.find(t=>t.id==e.id),a||U.value.push(e)})},Ie=l=>{U.value=U.value.filter(a=>a.id!==l)},F=_("image"),Ne=(l,a)=>{let e=l.path.split(".");F.value=e[e.length-1],P.value=a,L.value=!0},L=_(!1),P=_(1),Fe=l=>{P.value=l,L.value=!0},Le=l=>{k.value[l].attachment=""},ie=_(""),B=_(!1),ue=_([]),ze=async()=>{let l="request";A.headertitle=="Transfer Assets"&&(l="transfer"),await O(n.token).get("/api/fetch/approval-setups/non-paginated/data/"+l).then(a=>{var e,t;ue.value=a.data,ie.value=(t=(e=a.data.filter(p=>p.id==m.value.request_type_id))==null?void 0:e[0])==null?void 0:t.title}).catch(a=>{})},$=_(!1),re=_(0),Me=l=>{re.value=l,$.value=!0},ne=async(l,a)=>{let e=re.value;a!==void 0&&(e=a),await O(n.token).get("/api/fetch/asset-info/by/asset-code/"+l).then(t=>{k.value[e].item_description=t.data.asset_name,k.value[e].asset_code=l,$.value=!1}).catch(t=>{})},S=_({}),ce=_([]),Pe=async()=>{await O(n.token).get("/api/fetch/companies").then(l=>{ce.value=l.data}).catch(l=>{})},pe=_(""),ve=_(""),te=_([]),Be=async()=>{await O(n.token).get("/api/fetch/locations/non-paginated/data").then(l=>{var a,e,t,p;te.value=l.data,pe.value=(e=(a=l.data.filter(w=>w.id==m.value.transferred_from))==null?void 0:a[0])==null?void 0:e.title,ve.value=(p=(t=l.data.filter(w=>w.id==m.value.transferred_to))==null?void 0:t[0])==null?void 0:p.title}).catch(l=>{})},$e=()=>{k.value.push({qty:1,attachment:{}}),D()},Qe=()=>{W.value=!0,S.value={status:!0,type:"info",text:"Updating location..."};let l={authID:n.user.profile.id,data:u.value};O(n.token).post("/api/request-update/location",l).then(a=>{setTimeout(()=>{W.value=!1,S.value={status:!0,type:"success",text:"Location updated."}},1e3)}).catch(a=>{})},Ye=(l,a)=>{S.value={status:!0,type:"info",text:"Updating User..."};let e={authID:n.user.profile.id,id:u.value.id,profile_id:l,orders:a};O(n.token).post("/api/request-update/approver",e).then(t=>{setTimeout(()=>{S.value={status:!0,type:"success",text:"User has been updated."}},800)}).catch(t=>{})},Ge=(l,a)=>{k.value.splice(a,1),D()},Ke=()=>{S.value={status:!0,type:"success",text:"Draft has been removed!"},localStorage.removeItem("draft-transfer"),setTimeout(()=>{location.reload()},500)},He=()=>{S.value={status:!0,type:"info",text:"Please wait..."};let l={data:u.value,assets:k.value,approval:E.value,profile_id:n.user.profile.id,role:n.user.profile.role,type:"transfer"};localStorage.setItem("draft-transfer",bt(l)),setTimeout(()=>{B.value=!0,S.value={status:!0,type:"success",text:"Data has been saved to Draft"}},800)},Je=le(()=>U.value.map(l=>l.id)),Ze=()=>{S.value={status:!0,type:"info",text:"Please wait..."};let l=k.value.map((e,t)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),a={data:u.value,assets:l,approval:E.value,profile_id:n.user.profile.id,role:n.user.profile.role,type:"transfer",additionalFiles:Je.value};O(n.token).post("/api/request-asset/store-update/data",a).then(e=>{let t="",p="";e.data.message?(t=e.data.message,p="success"):e.data.error&&(t=e.data.error,p="error"),S.value={status:!0,type:p,text:t},B.value=!1,localStorage.removeItem("draft-transfer"),q.params.id||setTimeout(()=>{je.push({name:"EditTransferAsset",params:{id:e.data.id}}).catch(w=>{})},800)}).catch(e=>{console.log(e)})},E=_([]),Y=_(!0),ae=async()=>{await O(n.token).get("/api/fetch/request-asset/approval-setup-fetch/"+u.value.request_type_id).then(l=>{var a,e;E.value=(a=l.data)==null?void 0:a.stages,u.value.extra_attachment=l.data.enable_attachment,q.params.id&&E.value.length>0&&E.value.map((t,p)=>(t.profile_id=C.value[p].profile_id,t.status=C.value[p].status,t.date_approved=C.value[p].date_approved,t.reason_rejected=C.value[p].reason_rejected,t)),((e=l.data)==null?void 0:e.stages.length)>0?Y.value=!0:Y.value=!1}).catch(l=>{})},D=()=>{let l=!1;Z.value=!1,u.value.company_id&&u.value.request_type_id&&u.value.subject&&u.value.transferred_from&&u.value.transferred_to&&(l=!0);let a=!0;k.value.map(t=>{(!t.item_description||!t.reason_for_request||!t.uom||!t.qty||t.qty<=0)&&(a=!1)});let e=!0;E.value.map(t=>{t.profile_id||(e=!1)}),e&&a&&l&&(Z.value=!0)},_e=l=>{let a={status:l,profile_id:n.user.profile.id,ID:m.value.id};O(n.token).post("/api/request-asset/change-request/data",a).then(e=>{S.value={status:!0,type:"success",text:e.data.message},m.value.status=l,Ue("saved",e.data.message)}).catch(e=>{})},me=(l,a=6)=>{let e="00000"+l;return e.substring(e.length-a)},C=_([]),m=_({}),G=_({});lt(()=>{var l,a,e,t,p,w;if(ze().then(()=>{Pe().then(()=>{Be()})}),q.params.id){b.value=!0;let c=A.objectdata;m.value=c,u.value.company_id=c.company_id,u.value.request_type_id=c.request_type_id,u.value.subject=c.subject,u.value.transferred_from=c.transferred_from,u.value.transferred_to=c.transferred_to,u.value.id=c.id,u.value.requestor_id=c.profile_id,C.value=c.request_approvals,k.value=c.items,G.value=(a=(l=c.request_approvals)==null?void 0:l.filter(f=>f.status=="awaiting-approval"))==null?void 0:a[0],U.value=c.attachment,ae()}else{u.value.company_id=n.user.profile.company_id;let c=localStorage.getItem("draft-transfer");c&&(c=Vt(c),B.value=!0,u.value.request_type_id=(e=c==null?void 0:c.data)==null?void 0:e.request_type_id,u.value.transferred_from=(t=c==null?void 0:c.data)==null?void 0:t.transferred_from,u.value.transferred_to=(p=c==null?void 0:c.data)==null?void 0:p.transferred_to,u.value.subject=(w=c==null?void 0:c.data)==null?void 0:w.subject,u.value.request_type_id&&ae().then(()=>{C.value=c.approval,E.value.map((f,R)=>(f.profile_id=C.value[R].profile_id,f.status=C.value[R].status,f.date_approved=C.value[R].date_approved,f.reason_rejected=C.value[R].reason_rejected,f))}),k.value=c==null?void 0:c.assets)}});const We=_("http://127.0.0.1:8083"),Xe=le(()=>{var c,f,R,fe,he;let l=null,a=We.value+"/pv/employee-signatory",e=Te(50),t=Te(50),p=95,w=99;return((f=(c=n.user)==null?void 0:c.profile)==null?void 0:f.id)==((R=G.value)==null?void 0:R.profile_id)&&(p=(fe=G.value)==null?void 0:fe.profile_id,w=(he=G.value)==null?void 0:he.orders),m.value&&(l=a+"/transfer/approvals?o="+w+"&key="+e+"&pid="+p+"&pv="+t+"&id="+m.value.id),l});return le(()=>n.user.role=="receiving-releasing"||n.user.role=="facility"),ye(u.value,async(l,a)=>{D()}),ye(k.value,async(l,a)=>{D()}),(l,a)=>(i(),h(ft,null,{default:d(()=>[o(ht,{title:A.headertitle,class:"no-print"},null,8,["title"]),o(g,{class:"mb-3"},{default:d(()=>[o(st,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[o(j,null,{default:d(()=>[o(ot,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:d(()=>[s("div",null,v(A.headertitle)+" "+v(B.value?"(Draft)":""),1),Y.value?y("",!0):(i(),V("div",kt,v(de.value),1)),b.value?(i(),V("div",{key:1,class:ge(m.value.status=="cancelled"?"text-error":m.value.status=="complete"?"text-success":"")}," STATUS ("+v(m.value.status)+") ",3)):y("",!0),s("div",null,"DATE: "+v(r(Ae)(Oe.value)),1)]),_:1}),o(se),o(Q,null,{default:d(()=>[o(g,{class:"no-print"},{default:d(()=>[b.value?(i(),V("div",{key:0,class:ge(`${m.value.status=="complete"?"v-col-12":"v-col-md-12"}`)}," REQUEST NO: SN-3"+v(me(m.value.id)),3)):y("",!0),s("div",wt,[b.value&&(m.value.status=="pending"||m.value.status=="cancelled")?(i(),V("div",xt,[m.value.status=="pending"&&u.value.requestor_id==r(n).user.profile.id?(i(),h(x,{key:0,onClick:a[0]||(a[0]=e=>_e("cancelled")),size:"small",color:"warning"},{default:d(()=>[T("Cancel request")]),_:1})):y("",!0),u.value.requestor_id==r(n).user.profile.id&&m.value.status=="cancelled"?(i(),h(x,{key:1,onClick:a[1]||(a[1]=e=>_e("pending")),size:"small",color:"info"},{default:d(()=>[T("Change status to Pending")]),_:1})):y("",!0)])):y("",!0)]),s("div",St,[o(I,{items:ue.value,modelValue:u.value.request_type_id,"onUpdate:modelValue":[a[2]||(a[2]=e=>u.value.request_type_id=e),ae],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:b.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),s("div",Ct,[o(I,{items:ce.value,modelValue:u.value.company_id,"onUpdate:modelValue":a[3]||(a[3]=e=>u.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),s("div",Tt,[o(I,{items:te.value,modelValue:u.value.transferred_from,"onUpdate:modelValue":a[4]||(a[4]=e=>u.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),s("div",At,[o(I,{items:te.value,modelValue:u.value.transferred_to,"onUpdate:modelValue":a[5]||(a[5]=e=>u.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"]),b.value&&X.value.includes(r(n).user.profile.role)?(i(),h(x,{key:0,size:"small",loading:W.value,onClick:Qe,color:"success",class:"mx-2 my-auto"},{default:d(()=>[T("Save")]),_:1},8,["loading"])):y("",!0)]),s("div",qt,[o(K,{modelValue:u.value.subject,"onUpdate:modelValue":a[6]||(a[6]=e=>u.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),o(g,{class:"for-print-flex mx-2 mb-1"},{default:d(()=>{var e,t;return[s("div",Ut,"REQUEST NO: "+v(m.value.id?"SN-3"+me(m.value.id):""),1),s("div",jt,"TYPE OF REQUEST: "+v(ie.value),1),s("div",Ot,"COMPANY: "+v((t=(e=m.value)==null?void 0:e.company)==null?void 0:t.title),1),s("div",Et,"LOCATION FROM: "+v(pe.value),1),s("div",Dt,"LOCATION TO: "+v(ve.value),1),s("div",Rt,"SUBJECT: "+v(m.value.subject),1)]}),_:1})]),_:1})]),_:1}),o(j,{class:"my-2"},{default:d(()=>[o(Q,null,{default:d(()=>[o(g,null,{default:d(()=>{var e;return[s("div",It,[m.value.status!="complete"&&(!r(q).params.id||u.value.requestor_id==r(n).user.profile.id&&((e=A.objectdata)==null?void 0:e.status)=="pending"||r(n).user.profile.role=="superadmin"||r(n).user.profile.role=="administrator")?(i(),h(x,{key:0,size:"small",color:"primary",class:"no-print",onClick:$e},{default:d(()=>[T("Add")]),_:1})):y("",!0),Nt])]}),_:1}),o(g,{class:"for-print-flex mx-2 header mb-1"},{default:d(()=>[Ft,Lt,zt,Mt,Pt,Bt,$t]),_:1}),(i(!0),V(N,null,z(k.value,(e,t)=>(i(),h(g,{key:t,class:"for-print-flex mx-2 row-bordered"},{default:d(()=>[s("div",Qt,v(e.item_description),1),s("div",Yt,v(e.asset_code),1),s("div",Gt,v(e.qty),1),s("div",Kt,v(e.uom),1),s("div",Ht,v(e.weight),1),s("div",Jt,v(e.item_value),1),s("div",Zt,v(e.reason_for_request),1)]),_:2},1024))),128)),(i(!0),V(N,null,z(k.value,(e,t)=>(i(),h(g,{key:t,class:"no-print"},{default:d(()=>{var p,w,c;return[s("div",Wt,[(p=e.attachment)!=null&&p.id?(i(),h(g,{key:0,class:"px-1"},{default:d(()=>[s("div",Xt,[o(K,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":f=>e.attachment.id=f},null,8,["modelValue","onUpdate:modelValue"]),!b.value||b.value&&u.value.requestor_id==r(n).user.profile.id?(i(),h(x,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:r(Ve),size:"16px",color:"error",onClick:()=>Le(t,e.attachment.id)},null,8,["icon","onClick"])):y("",!0),o(j,{onClick:()=>Fe(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),o(oe,{modelValue:L.value,"onUpdate:modelValue":a[7]||(a[7]=f=>L.value=f),width:"95%","max-width":"900"},{default:d(()=>[o(j,{class:"bg-black"},{default:d(()=>[s("div",ea,[o(H,{src:M.value+"/file/"+P.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(i(),h(g,{key:1,class:"mt-0"},{default:d(()=>[s("div",ta,[o(dt,{color:"grey-lighten-4",class:"text-center"},{default:d(()=>[o(Ce,{options:{multiSelect:!1,type:"transfer-asset",userID:r(n).user.profile.id},onSelect:f=>De(t,f)},null,8,["options","onSelect"])]),_:2},1024)])]),_:2},1024))]),s("div",aa,[o(be,{modelValue:e.item_description,"onUpdate:modelValue":f=>e.item_description=f,variant:"outlined",density:"compact","hide-details":"",label:"ITEM DESC*",rows:"2",class:"no-print"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",la,[o(K,{modelValue:e.asset_code,"onUpdate:modelValue":f=>e.asset_code=f,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE","append-inner-icon":r(it),"onClick:appendInner":f=>ne(e.asset_code,t)},null,8,["modelValue","onUpdate:modelValue","append-inner-icon","onClick:appendInner"]),(!r(q).params.id||u.value.requestor_id==r(n).user.profile.id&&((w=A.objectdata)==null?void 0:w.status)=="pending"||r(n).user.profile.role=="superadmin"||r(n).user.profile.role=="administrator")&&m.value.status!="complete"?(i(),h(J,{key:0,onClick:f=>Me(t),class:"ml-2 my-auto",size:"x-small",icon:r(ut)},null,8,["onClick","icon"])):y("",!0)]),s("div",sa,[o(K,{type:"number","onUpdate:modelValue":[D,f=>e.qty=f],modelValue:e.qty,variant:"outlined",density:"compact","hide-details":"",class:"no-print",label:"QTY*"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",oa,[o(I,{items:Ee.value,modelValue:e.uom,"onUpdate:modelValue":[f=>e.uom=f,D],variant:"outlined",density:"compact","hide-details":"",label:"UOM*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),s("div",da,[T(v(e.weight?e.weight:0),1),ia,ua]),s("div",ra,[T(v(e.item_value?e.item_value:0),1),na,ca]),s("div",pa,[o(be,{modelValue:e.reason_for_request,"onUpdate:modelValue":f=>e.reason_for_request=f,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON*"},null,8,["modelValue","onUpdate:modelValue"]),!b.value||b.value&&r(n).user.profile.id==A.objectdata.profile_id&&((c=A.objectdata)==null?void 0:c.status)=="pending"?(i(),h(J,{key:0,size:"small",onClick:()=>Ge(e.id,t),icon:r(rt),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):y("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),u.value.extra_attachment?(i(),h(j,{key:0},{default:d(()=>[o(Q,null,{default:d(()=>{var e;return[!b.value||b.value&&u.value.requestor_id==r(n).user.profile.id?(i(),V("div",va,[_a,o(Ce,{options:{multiSelect:!0,type:"transfer-asset"},onSelect:Re})])):y("",!0),((e=U.value)==null?void 0:e.length)>0?(i(),h(g,{key:1,class:"px-1 mt-4"},{default:d(()=>[(i(!0),V(N,null,z(U.value,(t,p)=>(i(),V("div",{key:t.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[b.value&&(m.value.status=="pending"||m.value.status=="cancelled")?(i(),h(x,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:r(Ve),size:"20px",color:"error",onClick:()=>Ie(t.id)},null,8,["icon","onClick"])):y("",!0),o(j,{onClick:()=>Ne(t,p)},{default:d(()=>[t.mime=="image/jpeg"||t.mime=="image/png"?(i(),h(H,{key:0,src:M.value+"/file/"+t.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(i(),h(H,{key:1,src:M.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),o(oe,{modelValue:L.value,"onUpdate:modelValue":a[9]||(a[9]=t=>L.value=t),width:"95%","max-width":"900"},{default:d(()=>[o(j,{class:"bg-black"},{default:d(()=>[o(nt,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:P.value,"onUpdate:modelValue":a[8]||(a[8]=t=>P.value=t)},{default:d(()=>[(i(!0),V(N,null,z(U.value,(t,p)=>(i(),h(ct,{key:p,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[s("div",{style:pt(`${F.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[F.value=="jpg"||F.value=="jpeg"||F.value=="png"?(i(),h(H,{key:0,src:M.value+"/file/"+t.path},null,8,["src"])):y("",!0),F.value=="pdf"?(i(),V("object",{key:1,data:M.value+"/file/"+t.path,type:"application/pdf",width:"100%",height:"800px"},null,8,ma)):y("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0)]}),_:1})]),_:1})):y("",!0),o(j,{class:"my-2 page-break"},{default:d(()=>[o(Q,null,{default:d(()=>[o(g,null,{default:d(()=>[s("div",fa,[ha,r(q).params.id?(i(),V("div",ya,[o(x,{color:"info",size:"small",target:"_blank",href:Xe.value},{default:d(()=>[T("View Approval Page")]),_:1},8,["href"])])):y("",!0)]),o(se)]),_:1}),o(g,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:d(()=>{var e,t;return[ga,s("div",Va,v((t=(e=m.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),ba,ka]}),_:1}),(i(!0),V(N,null,z(C.value,e=>(i(),h(g,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:d(()=>{var t;return[s("div",wa,v(ee(e.approval_type)),1),s("div",xa,v((t=e==null?void 0:e.profile)==null?void 0:t.display_name),1),s("div",Sa,[e.status?(i(),h(J,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?r(ke):e.status=="pending"?r(we):e.status=="reject"?r(xe):r(Se),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0)]),s("div",Ca,v(e.date_approved),1)]}),_:2},1024))),128)),o(g,{class:"no-print"},{default:d(()=>{var e,t;return[Ta,s("div",Aa,v((t=(e=m.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),qa,b.value&&X.value.includes(r(n).user.profile.role)?(i(),V("div",Ua,"Change To")):y("",!0)]}),_:1}),Y.value?(i(),V(N,{key:0},[(i(!0),V(N,null,z(E.value,(e,t)=>(i(),h(g,{key:e.id,class:"no-print"},{default:d(()=>[s("div",ja,v(e.types?ee(e.types):ee(e.approval_type)),1),s("div",Oa,[o(I,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[p=>e.profile_id=p,D],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),o(x,{variant:"text",size:"x-small",class:"no-print"},{default:d(()=>[e.status?(i(),h(J,{key:0,class:"mx-2 my-3",icon:e.status=="awaiting-approval"?r(ke):e.status=="pending"?r(we):e.status=="reject"?r(xe):r(Se),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0),o(vt,{activator:"parent",location:"top","max-width":"400"},{default:d(()=>[T(v(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)]),s("div",Ea,v(e.date_approved?r(Ae)(e.date_approved):""),1),b.value&&X.value.includes(r(n).user.profile.role)?(i(),V("div",Da,[o(I,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[p=>e.profile_id=p,p=>Ye(e.profile_id,t)],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*"},null,8,["items","modelValue","onUpdate:modelValue"])])):y("",!0)]),_:2},1024))),128)),o(g,{class:"no-print"},{default:d(()=>{var e;return[o(se),s("div",Ra,[(!r(q).params.id||u.value.requestor_id==r(n).user.profile.id&&((e=A.objectdata)==null?void 0:e.status)=="pending"||r(n).user.profile.role=="superadmin"||r(n).user.profile.role=="administrator")&&m.value.status!="complete"?(i(),h(x,{key:0,size:"small",disabled:!Z.value,onClick:Ze,color:"primary"},{default:d(()=>[T(v(r(q).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):y("",!0),r(q).params.id?y("",!0):(i(),h(x,{key:1,size:"small",class:"mx-3",onClick:He,color:"warning"},{default:d(()=>[T("Save as Draft")]),_:1})),B.value?(i(),h(x,{key:2,size:"small",class:"mx-3",onClick:Ke,color:"info"},{default:d(()=>[T("Delete Draft")]),_:1})):y("",!0)])]}),_:1})],64)):(i(),h(g,{key:1},{default:d(()=>[s("div",Ia,v(de.value),1)]),_:1})),o(g,null,{default:d(()=>[Na]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(yt,{options:S.value},null,8,["options"]),o(oe,{width:"500",modelValue:$.value,"onUpdate:modelValue":a[11]||(a[11]=e=>$.value=e)},{default:d(()=>[o(j,null,{default:d(()=>[o(Q,null,{default:d(()=>[o(r(gt.QrcodeStream),{onDecode:ne})]),_:1}),o(_t,null,{default:d(()=>[o(mt),o(x,{text:"Close",onClick:a[10]||(a[10]=e=>$.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Qa as _};
