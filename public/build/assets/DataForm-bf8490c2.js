import{a as Ze,r as _,G as We,u as Xe,O as le,I as et,H as he,o as r,c as h,w as d,d as o,v as tt,k as E,V as at,b as a,t as p,p as k,z as g,ae as ye,y as n,E as se,f as Y,s as V,j as C,e as j,J as L,i as H,q as M,F as N,P as ge,R as oe,Q as J,M as lt,U as Ve,Y as st,C as Z,D as ot,ag as dt,S as it,T as ut,ac as rt,aZ as be,a_ as we,a$ as ke,b0 as xe,b1 as nt,Z as ct,_ as vt,m as pt,n as F}from"./app-356f0737.js";import{_ as _t}from"./ApppageHeader-8598557c.js";import{_ as qe,r as Se}from"./Studio-7e79c4b3.js";import{_ as mt}from"./AppSnackBar-04a930a9.js";import{Q as ft}from"./QrcodeReaderVue3.common-cc2620e5.js";import{d as ht,e as yt}from"./encrypt-5d9261a1.js";import{u as Ce}from"./formatDate-559e9d83.js";const gt={key:0,class:"text-error text-h6"},Vt={class:"col-12 v-col-md-4"},bt={class:"v-col-12 v-col-md-8"},wt={key:0,class:"text-right no-print"},kt={class:"v-col-12 v-col-md-6"},xt={class:"v-col-12 v-col-md-6"},qt={class:"v-col-12 v-col-md-6"},St={class:"v-col-12 v-col-md-6"},Ct={class:"v-col-12"},At={class:"wd-100"},Tt={class:"wd-60"},jt={class:"wd-40"},Ut={class:"wd-60"},Et={class:"wd-40"},Ot={class:"wd-100"},Dt={key:0,class:"v-col-12"},Rt=a("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),It=a("div",{class:"wd-15"},"ASSET CODE",-1),Nt=a("div",{class:"wd-5"},"QTY",-1),Ft=a("div",{class:"wd-10"},"UOM",-1),Pt=a("div",{class:"wd-10"},"WEIGHT",-1),zt=a("div",{class:"wd-10"},"VALUE",-1),Bt=a("div",{class:"wd-15"},"REASON FOR REQUEST",-1),Lt={class:"wd-30"},Mt={class:"wd-15"},Qt={class:"wd-5"},$t={class:"wd-10"},Yt={class:"wd-10"},Gt={class:"wd-10"},Kt={class:"wd-15"},Ht={class:"v-col-12 v-col-md-1 px-1"},Jt={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},Zt={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},Wt={class:"v-col-12 pt-0 pb-0"},Xt={class:"v-col-12 v-col-md-1 custom-width-description"},ea={class:"v-col-12 v-col-md-2 d-flex"},ta={class:"v-col-12 v-col-md-1"},aa={class:"v-col-12 v-col-md-1 custom-width-uom"},la={class:"v-col-12 v-col-md-1 mt-3"},sa=a("br",null,null,-1),oa=a("small",null,"(KG)",-1),da={class:"v-col-12 v-col-md-1 mt-3"},ia=a("br",null,null,-1),ua=a("small",null,"(AED)",-1),ra={class:"v-col-12 v-col-md-2 d-flex"},na={key:0},ca=a("div",null,"Additional File can be upload here",-1),va=["data"],pa={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},_a=a("div",null,"APPROVAL SETUP",-1),ma={key:0,class:"no-print"},fa=a("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),ha={class:"v-col-12 v-col-md-6"},ya=a("div",{class:"v-col-12 v-col-md-1"},"Status",-1),ga=a("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),Va=a("div",{class:"wd-20"},"Requestor",-1),ba={class:"wd-50"},wa=a("div",{class:"wd-10"},"Status",-1),ka=a("div",{class:"wd-20"},"Date Approved",-1),xa={class:"wd-20"},qa={class:"wd-50"},Sa={class:"wd-10"},Ca={class:"wd-20"},Aa={class:"v-col-12 v-col-md-2"},Ta={class:"v-col-12 v-col-md-7 d-flex"},ja={class:"my-auto"},Ua={class:"v-col-12"},Ea={class:"v-col-12 text-error"},Oa=a("div",{class:"v-col-12 v-col-md-12 text-info no-print"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),Ba={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(Ae,{emit:Te}){const O=Ae,v=Ze(),W=_(!1),A=We(),je=Xe(),u=_({}),q=_(!1),x=_([{qty:1,attachment:{}}]),Ue=_(new Date),Q=_(window.location.origin),Ee=(s,l)=>{x.value[s].attachment=l[0]},U=_([]),Oe=s=>{let l=null;s.map(e=>{l=U.value.find(t=>t.id==e.id),l||U.value.push(e)})},De=s=>{U.value=U.value.filter(l=>l.id!==s)},X=_(1),P=_("image"),Re=(s,l)=>{let e=s.path.split(".");P.value=e[e.length-1],X.value=l,z.value=!0},z=_(!1),de=_(1),Ie=s=>{de.value=s,z.value=!0},Ne=s=>{x.value[s].attachment=""},ee=s=>{if(s=="approve")return"Approved By";if(s=="reviewer")return"Reviewed By";if(s=="receiver")return"Received By";if(s=="transport")return"Transport Arranged By";if(s=="releasing")return"Released By";if(s=="verify")return"Verified By"},ie=_(""),ue=_([]),Fe=async()=>{await F(v.token).get("/api/fetch/approval-setups/non-paginated/data/request").then(s=>{var l,e;ue.value=s.data,ie.value=(e=(l=s.data.filter(t=>t.id==m.value.request_type_id))==null?void 0:l[0])==null?void 0:e.title}).catch(s=>{})},D=_({}),re=_([]),Pe=async()=>{await F(v.token).get("/api/fetch/companies").then(s=>{re.value=s.data}).catch(s=>{})},$=_(!1),ne=_(0),ze=s=>{ne.value=s,$.value=!0},ce=async(s,l)=>{let e=ne.value;l!==void 0&&(e=l),await F(v.token).get("/api/fetch/asset-info/by/asset-code/"+s).then(t=>{x.value[e].item_description=t.data.asset_name,x.value[e].asset_code=s,$.value=!1}).catch(t=>{})},ve=_(""),pe=_(""),te=_([]),Be=async()=>{await F(v.token).get("/api/fetch/locations/non-paginated/data").then(s=>{var l,e,t,y;te.value=s.data,ve.value=(e=(l=s.data.filter(w=>w.id==m.value.transferred_from))==null?void 0:l[0])==null?void 0:e.title,pe.value=(y=(t=s.data.filter(w=>w.id==m.value.transferred_to))==null?void 0:t[0])==null?void 0:y.title}).catch(s=>{})},Le=()=>{x.value.push({qty:1,attachment:{}}),R()},Me=(s,l)=>{x.value.splice(l,1),R()},Qe=()=>{D.value={status:!0,type:"success",text:"Draft has been removed!"},localStorage.removeItem("draft-request"),setTimeout(()=>{location.reload()},500)},$e=()=>{D.value={status:!0,type:"info",text:"Please wait..."};let s={data:u.value,assets:x.value,approval:T.value,profile_id:v.user.profile.id,role:v.user.profile.role,type:"request"};localStorage.setItem("draft-request",yt(s)),setTimeout(()=>{K.value=!0,D.value={status:!0,type:"success",text:"Data has been saved to Draft"}},500)},_e=_("Note: Administrator needs to setup signatories first."),Ye=le(()=>U.value.map(s=>s.id)),Ge=()=>{D.value={status:!0,type:"info",text:"Please wait..."};let s=x.value.map((e,t)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),l={data:u.value,assets:s,approval:T.value,profile_id:v.user.profile.id,type:"request",role:v.user.profile.role,additionalFiles:Ye.value};F(v.token).post("/api/request-asset/store-update/data",l).then(e=>{let t="",y="";e.data.message?(t=e.data.message,y="success"):e.data.error&&(t=e.data.error,y="error"),D.value={status:!0,type:y,text:t},localStorage.removeItem("draft-request"),A.params.id||setTimeout(()=>{je.push({name:"EditRequestAsset",params:{id:e.data.id}}).catch(w=>{})},800)}).catch(e=>{D.value={status:!0,type:"error",text:"Failed to update data, kindly refresh the page and check fields if it's empty"}})},T=_([]),G=_(!0),Ke=_(["Nos","Set","Pcs","Pack","Pallet","SqM"]),ae=async()=>{let s=0;A.params.id&&(s=1),await F(v.token).get("/api/fetch/request-asset/approval-setup-fetch/"+u.value.request_type_id+"?isEdit="+s).then(l=>{var e,t,y,w,S,f;u.value.extra_attachment=l.data.enable_attachment,T.value=(e=l.data)==null?void 0:e.stages,A.params.id&&T.value.length>0&&(T.value.map((i,b)=>(i.profile_id=c.value[b].profile_id,i.status=c.value[b].status,i.date_approved=c.value[b].date_approved,i.reason_rejected=c.value[b].reason_rejected,i)),T.value.length>1&&(T.value[c.value.length-1]={id:c.value[c.value.length-1].id,profile_id:c.value[c.value.length-1].profile_id,status:c.value[c.value.length-1].status,date_approved:c.value[c.value.length-1].date_approved,status:c.value[c.value.length-1].status,reason_rejected:"",types:c.value[c.value.length-1].approval_type,sort:c.value[c.value.length-1].orders,request_asset_id:c.value[c.value.length-1].request_asset_id,signatures:[{id:(t=c.value[c.value.length-1])==null?void 0:t.profile.id,display_name:(y=c.value[c.value.length-1])==null?void 0:y.profile.display_name,first_name:(w=c.value[c.value.length-1])==null?void 0:w.profile.first_name,last_name:(S=c.value[c.value.length-1])==null?void 0:S.profile.last_name}]})),((f=l.data)==null?void 0:f.stages.length)>0?G.value=!0:G.value=!1}).catch(l=>{})},K=_(!1),R=()=>{let s=!1;W.value=!1,u.value.company_id&&u.value.request_type_id&&u.value.subject&&u.value.transferred_from&&u.value.transferred_to&&(s=!0);let l=!0;x.value.map(t=>{(!t.item_description||!t.reason_for_request||!t.uom||!t.qty||t.qty<=0)&&(l=!1)});let e=!0;T.value.map(t=>{t.profile_id||(e=!1)}),e&&l&&s&&(W.value=!0)},me=s=>{let l={status:s,profile_id:v.user.profile.id,ID:m.value.id};F(v.token).post("/api/request-asset/change-request/data",l).then(e=>{D.value={status:!0,type:"success",text:e.data.message},m.value.status=s,Te("saved",e.data.message)}).catch(e=>{})},fe=(s,l=6)=>{let e="00000"+s;return e.substring(e.length-l)},c=_([]),m=_({}),B=_({});et(()=>{var s,l,e,t,y,w,S,f;if(Fe().then(()=>{Pe().then(()=>{Be()})}),A.params.id){q.value=!0;let i=O.objectdata;m.value=i,u.value.company_id=i.company_id,u.value.request_type_id=i.request_type_id,u.value.subject=i.subject,u.value.transferred_from=i.transferred_from,u.value.transferred_to=i.transferred_to,u.value.id=i.id,u.value.requestor_id=i.profile_id,c.value=i.request_approvals,x.value=i.items,B.value=(l=(s=i.request_approvals)==null?void 0:s.filter(b=>b.status=="awaiting-approval"))==null?void 0:l[0],!B.value&&i.status=="reject"&&(B.value=(t=(e=i.request_approvals)==null?void 0:e.filter(b=>b.status=="reject"))==null?void 0:t[0]),U.value=i.attachment,ae()}else{u.value.company_id=v.user.profile.company_id;let i=localStorage.getItem("draft-request");i&&(i=ht(i),K.value=!0,u.value.request_type_id=(y=i==null?void 0:i.data)==null?void 0:y.request_type_id,u.value.transferred_from=(w=i==null?void 0:i.data)==null?void 0:w.transferred_from,u.value.transferred_to=(S=i==null?void 0:i.data)==null?void 0:S.transferred_to,u.value.subject=(f=i==null?void 0:i.data)==null?void 0:f.subject,u.value.request_type_id&&ae().then(()=>{c.value=i.approval,T.value.map((b,I)=>(b.profile_id=c.value[I].profile_id,b.status=c.value[I].status,b.date_approved=c.value[I].date_approved,b.reason_rejected=c.value[I].reason_rejected,b))}),x.value=i==null?void 0:i.assets)}}),he(u.value,async(s,l)=>{R()}),he(x.value,async(s,l)=>{R()}),le(()=>v.user.role=="receiving-releasing"||v.user.role=="facility");const He=_("https://assets.grandiose.ae"),Je=le(()=>{var S,f,i,b,I;let s=null,l=He.value+"/pv/employee-signatory",e=Se(50),t=Se(50),y=95,w=99;return((f=(S=v.user)==null?void 0:S.profile)==null?void 0:f.id)==((i=B.value)==null?void 0:i.profile_id)&&(y=(b=B.value)==null?void 0:b.profile_id,w=(I=B.value)==null?void 0:I.orders),m.value&&(s=l+"/transfer/approvals?o="+w+"&key="+e+"&pid="+y+"&pv="+t+"&id="+m.value.id),s});return(s,l)=>(r(),h(pt,null,{default:d(()=>[o(_t,{title:O.headertitle,class:"no-print"},null,8,["title"]),o(V,{class:"mb-3"},{default:d(()=>[o(tt,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[o(E,null,{default:d(()=>[o(at,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:d(()=>[a("div",null,p(O.headertitle)+" "+p(K.value?"(Draft)":""),1),G.value?g("",!0):(r(),k("div",gt,p(_e.value),1)),q.value?(r(),k("div",{key:1,class:ye(m.value.status=="cancelled"?"text-error":m.value.status=="complete"?"text-success":"")}," STATUS ("+p(m.value.status)+") ",3)):g("",!0),a("div",null,"DATE: "+p(n(Ce)(Ue.value)),1)]),_:1}),o(se),o(Y,null,{default:d(()=>[o(V,{class:"no-print"},{default:d(()=>[q.value?(r(),k("div",{key:0,class:ye(`${m.value.status=="complete"?"v-col-12":"v-col-md-12"}`)},[o(V,null,{default:d(()=>[a("div",Vt," REQUEST NO: SN-5"+p(fe(m.value.id)),1),a("div",bt,[q.value&&(m.value.status=="pending"||m.value.status=="cancelled")?(r(),k("div",wt,[u.value.requestor_id==n(v).user.profile.id&&m.value.status=="pending"?(r(),h(C,{key:0,onClick:l[0]||(l[0]=e=>me("cancelled")),color:"warning"},{default:d(()=>[j("Cancel request")]),_:1})):g("",!0),u.value.requestor_id==n(v).user.profile.id&&m.value.status=="cancelled"?(r(),h(C,{key:1,onClick:l[1]||(l[1]=e=>me("pending")),size:"small",color:"info"},{default:d(()=>[j("Change status to Pending")]),_:1})):g("",!0)])):g("",!0)])]),_:1})],2)):g("",!0),a("div",kt,[o(L,{items:ue.value,modelValue:u.value.request_type_id,"onUpdate:modelValue":[l[2]||(l[2]=e=>u.value.request_type_id=e),ae],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:q.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),a("div",xt,[o(L,{items:re.value,modelValue:u.value.company_id,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),a("div",qt,[o(L,{items:te.value,modelValue:u.value.transferred_from,"onUpdate:modelValue":l[4]||(l[4]=e=>u.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),a("div",St,[o(L,{items:te.value,modelValue:u.value.transferred_to,"onUpdate:modelValue":l[5]||(l[5]=e=>u.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"])]),a("div",Ct,[o(H,{modelValue:u.value.subject,"onUpdate:modelValue":l[6]||(l[6]=e=>u.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),o(V,{class:"for-print-flex mx-2 mb-1"},{default:d(()=>{var e,t;return[a("div",At," REQUEST NO: "+p(m.value.id?"SN-5"+fe(m.value.id):""),1),a("div",Tt," TYPE OF REQUEST: "+p(ie.value),1),a("div",jt," COMPANY: "+p((t=(e=m.value)==null?void 0:e.company)==null?void 0:t.title),1),a("div",Ut," LOCATION FROM: "+p(ve.value),1),a("div",Et," LOCATION TO: "+p(pe.value),1),a("div",Ot," SUBJECT: "+p(m.value.subject),1)]}),_:1})]),_:1})]),_:1}),o(E,{class:"my-2"},{default:d(()=>[o(Y,null,{default:d(()=>[o(V,null,{default:d(()=>{var e;return[m.value.status!="complete"&&(!n(A).params.id||u.value.requestor_id==n(v).user.profile.id&&((e=O.objectdata)==null?void 0:e.status)=="pending"||n(v).user.profile.role=="superadmin"||n(v).user.profile.role=="administrator")?(r(),k("div",Dt,[o(C,{size:"small",color:"primary",class:"no-print",onClick:Le},{default:d(()=>[j("Add")]),_:1})])):g("",!0)]}),_:1}),o(V,{class:"for-print-flex mx-2 header mb-1 mt-0"},{default:d(()=>[Rt,It,Nt,Ft,Pt,zt,Bt]),_:1}),(r(!0),k(N,null,M(x.value,(e,t)=>(r(),h(V,{key:t,class:"for-print-flex mx-2 row-bordered mb-1"},{default:d(()=>[a("div",Lt,p(e.item_description),1),a("div",Mt,p(e.asset_code),1),a("div",Qt,p(e.qty),1),a("div",$t,p(e.uom),1),a("div",Yt,p(e.weight),1),a("div",Gt,p(e.item_value),1),a("div",Kt,p(e.reason_for_request),1)]),_:2},1024))),128)),(r(!0),k(N,null,M(x.value,(e,t)=>(r(),h(V,{key:t,class:"no-print"},{default:d(()=>{var y,w,S;return[a("div",Ht,[(y=e.attachment)!=null&&y.id?(r(),h(V,{key:0,class:"px-1"},{default:d(()=>[a("div",Jt,[o(H,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":f=>e.attachment.id=f},null,8,["modelValue","onUpdate:modelValue"]),!q.value||q.value&&u.value.requestor_id==n(v).user.profile.id?(r(),h(C,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:n(ge),size:"16px",color:"error",onClick:()=>Ne(t,e.attachment.id)},null,8,["icon","onClick"])):g("",!0),o(E,{onClick:()=>Ie(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),o(oe,{modelValue:z.value,"onUpdate:modelValue":l[7]||(l[7]=f=>z.value=f),width:"95%","max-width":"900"},{default:d(()=>[o(E,{class:"bg-black"},{default:d(()=>[a("div",Zt,[o(J,{src:Q.value+"/file/"+de.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(r(),h(V,{key:1,class:"mt-0"},{default:d(()=>[a("div",Wt,[o(lt,{color:"grey-lighten-4",class:"text-center"},{default:d(()=>[o(qe,{options:{multiSelect:!1,type:"request-asset",userID:n(v).user.profile.id},onSelect:f=>Ee(t,f)},null,8,["options","onSelect"])]),_:2},1024)])]),_:2},1024))]),a("div",Xt,[o(Ve,{modelValue:e.item_description,"onUpdate:modelValue":[f=>e.item_description=f,R],variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"ITEM DESC*"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",ea,[o(H,{modelValue:e.asset_code,"onUpdate:modelValue":f=>e.asset_code=f,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE","append-inner-icon":n(st),"onClick:appendInner":f=>ce(e.asset_code,t)},null,8,["modelValue","onUpdate:modelValue","append-inner-icon","onClick:appendInner"]),(!n(A).params.id||u.value.requestor_id==n(v).user.profile.id&&((w=O.objectdata)==null?void 0:w.status)=="pending"||n(v).user.profile.role=="superadmin"||n(v).user.profile.role=="administrator")&&m.value.status!="complete"?(r(),h(Z,{key:0,onClick:f=>ze(t),class:"ml-2 my-auto",size:"x-small",icon:n(ot)},null,8,["onClick","icon"])):g("",!0)]),a("div",ta,[o(H,{type:"number",modelValue:e.qty,"onUpdate:modelValue":[f=>e.qty=f,R],variant:"outlined",density:"compact","hide-details":"",label:"QTY*"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",aa,[o(L,{items:Ke.value,modelValue:e.uom,"onUpdate:modelValue":[f=>e.uom=f,R],variant:"outlined",density:"compact","hide-details":"",label:"UOM*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),a("div",la,[j(p(e.weight?e.weight:0),1),sa,oa]),a("div",da,[j(p(e.item_value?e.item_value:0),1),ia,ua]),a("div",ra,[o(Ve,{modelValue:e.reason_for_request,"onUpdate:modelValue":f=>e.reason_for_request=f,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON*"},null,8,["modelValue","onUpdate:modelValue"]),!q.value||q.value&&n(v).user.profile.id==O.objectdata.profile_id&&((S=O.objectdata)==null?void 0:S.status)=="pending"?(r(),h(Z,{key:0,size:"small",onClick:()=>Me(e.id,t),icon:n(dt),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):g("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),u.value.extra_attachment?(r(),h(E,{key:0},{default:d(()=>[o(Y,null,{default:d(()=>{var e;return[!q.value||q.value&&u.value.requestor_id==n(v).user.profile.id?(r(),k("div",na,[ca,o(qe,{options:{multiSelect:!0,type:"request-asset"},onSelect:Oe})])):g("",!0),((e=U.value)==null?void 0:e.length)>0?(r(),h(V,{key:1,class:"px-1 mt-4"},{default:d(()=>[(r(!0),k(N,null,M(U.value,(t,y)=>(r(),k("div",{key:t.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[q.value&&(m.value.status=="pending"||m.value.status=="cancelled")?(r(),h(C,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:n(ge),size:"20px",color:"error",onClick:()=>De(t.id)},null,8,["icon","onClick"])):g("",!0),o(E,{onClick:()=>Re(t,y)},{default:d(()=>[t.mime=="image/jpeg"||t.mime=="image/png"?(r(),h(J,{key:0,src:Q.value+"/file/"+t.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(r(),h(J,{key:1,src:Q.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),o(oe,{modelValue:z.value,"onUpdate:modelValue":l[9]||(l[9]=t=>z.value=t),width:"95%","max-width":"900"},{default:d(()=>[o(E,{class:"bg-black"},{default:d(()=>[o(it,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:X.value,"onUpdate:modelValue":l[8]||(l[8]=t=>X.value=t)},{default:d(()=>[(r(!0),k(N,null,M(U.value,(t,y)=>(r(),h(ut,{key:y,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[a("div",{style:rt(`${P.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[P.value=="jpg"||P.value=="jpeg"||P.value=="png"?(r(),h(J,{key:0,src:Q.value+"/file/"+t.path},null,8,["src"])):g("",!0),P.value=="pdf"?(r(),k("object",{key:1,data:Q.value+"/file/"+t.path,type:"application/pdf",width:"100%",height:"800px"},null,8,va)):g("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):g("",!0)]}),_:1})]),_:1})):g("",!0),o(E,{class:"my-2"},{default:d(()=>[o(Y,null,{default:d(()=>[o(V,null,{default:d(()=>[a("div",pa,[_a,n(A).params.id?(r(),k("div",ma,[o(C,{color:"info",size:"small",target:"_blank",href:Je.value},{default:d(()=>[j("View Approval Page")]),_:1},8,["href"])])):g("",!0)]),o(se)]),_:1}),o(V,{class:"no-print"},{default:d(()=>{var e,t;return[fa,a("div",ha,p((t=(e=m.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),ya,ga]}),_:1}),o(V,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:d(()=>{var e,t;return[Va,a("div",ba,p((t=(e=m.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),wa,ka]}),_:1}),(r(!0),k(N,null,M(c.value,e=>(r(),h(V,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:d(()=>{var t;return[a("div",xa,p(ee(e.approval_type)),1),a("div",qa,p((t=e==null?void 0:e.profile)==null?void 0:t.display_name),1),a("div",Sa,[e.status?(r(),h(Z,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?n(be):e.status=="pending"?n(we):e.status=="reject"?n(ke):n(xe),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):g("",!0)]),a("div",Ca,p(e.date_approved),1)]}),_:2},1024))),128)),G.value?(r(),k(N,{key:0},[(r(!0),k(N,null,M(T.value,(e,t)=>(r(),h(V,{class:"no-print",key:e.id},{default:d(()=>[a("div",Aa,p(e.types?ee(e.types):ee(e.approval_type)),1),a("div",Ta,[o(L,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[y=>e.profile_id=y,R],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),o(C,{variant:"text",size:"x-small"},{default:d(()=>[e.status?(r(),h(Z,{key:0,class:"mx-2 my-3 no-print",icon:e.status=="awaiting-approval"?n(be):e.status=="pending"?n(we):e.status=="reject"?n(ke):n(xe),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):g("",!0),o(nt,{activator:"parent",location:"top","max-width":"400"},{default:d(()=>[j(p(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)]),a("div",ja,p(e.date_approved?n(Ce)(e.date_approved):""),1)]),_:2},1024))),128)),o(V,null,{default:d(()=>{var e;return[o(se),a("div",Ua,[(!n(A).params.id||u.value.requestor_id==n(v).user.profile.id&&((e=O.objectdata)==null?void 0:e.status)=="pending"||n(v).user.profile.role=="superadmin"||n(v).user.profile.role=="administrator")&&m.value.status!="complete"?(r(),h(C,{key:0,disabled:!W.value,onClick:Ge,class:"no-print",color:"primary"},{default:d(()=>[j(p(n(A).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):g("",!0),n(A).params.id?g("",!0):(r(),h(C,{key:1,size:"small",class:"mx-3",onClick:$e,color:"warning"},{default:d(()=>[j("Save as Draft")]),_:1})),K.value?(r(),h(C,{key:2,size:"small",class:"mx-3",onClick:Qe,color:"info"},{default:d(()=>[j("Delete Draft")]),_:1})):g("",!0)])]}),_:1})],64)):(r(),h(V,{key:1,class:"no-print"},{default:d(()=>[a("div",Ea,p(_e.value),1)]),_:1})),o(V,null,{default:d(()=>[Oa]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(mt,{options:D.value},null,8,["options"]),o(oe,{width:"500",modelValue:$.value,"onUpdate:modelValue":l[11]||(l[11]=e=>$.value=e)},{default:d(()=>[o(E,null,{default:d(()=>[o(Y,null,{default:d(()=>[o(n(ft.QrcodeStream),{onDecode:ce})]),_:1}),o(ct,null,{default:d(()=>[o(vt),o(C,{text:"Close",onClick:l[10]||(l[10]=e=>$.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ba as _};
