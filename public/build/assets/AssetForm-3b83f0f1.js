import{af as qe,ab as Ee,ag as Ve,D as ne,N as Fe,i as Me,r as R,O as xe,b as M,j as K,k as r,e as l,l as s,z as P,m as q,J as ke,K as y,a6 as Ce,A as le,H as we,c as G,F as ve,d as pe,t as A,U as he,I as se,_ as Ue,V as Oe,Y as Ae,q as We,E as J,y as O,a4 as W,P as ae,u as Ye,X as Ie,w as re,v as ie,Z as Se,$ as Pe,a0 as He}from"./app-f6f4ace7.js";import{c as ze,a as T,F as je,b as Y}from"./index.esm-a12d4576.js";import{_ as Ne}from"./AppSnackBar-916b605d.js";import{_ as Be}from"./Studio-3d146d99.js";import{u as De}from"./formatDate-e2fbee14.js";import{u as Re}from"./categories-86e466a0.js";var Te={exports:{}};(function(b,_){(function(H,E){b.exports=E()})(qe,function(){var H=1e3,E=6e4,j=36e5,N="millisecond",F="second",i="minute",x="hour",k="day",S="week",$="month",D="quarter",m="year",u="date",a="Invalid Date",C=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,be=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,fe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(v){var d=["th","st","nd","rd"],n=v%100;return"["+v+(d[(n-20)%10]||d[n]||d[0])+"]"}},de=function(v,d,n){var c=String(v);return!c||c.length>=d?v:""+Array(d+1-c.length).join(n)+v},$e={s:de,z:function(v){var d=-v.utcOffset(),n=Math.abs(d),c=Math.floor(n/60),o=n%60;return(d<=0?"+":"-")+de(c,2,"0")+":"+de(o,2,"0")},m:function v(d,n){if(d.date()<n.date())return-v(n,d);var c=12*(n.year()-d.year())+(n.month()-d.month()),o=d.clone().add(c,$),p=n-o<0,f=d.clone().add(c+(p?-1:1),$);return+(-(c+(n-o)/(p?o-f:f-o))||0)},a:function(v){return v<0?Math.ceil(v)||0:Math.floor(v)},p:function(v){return{M:$,y:m,w:S,d:k,D:u,h:x,m:i,s:F,ms:N,Q:D}[v]||String(v||"").toLowerCase().replace(/s$/,"")},u:function(v){return v===void 0}},X="en",Z={};Z[X]=fe;var _e="$isDayjsObject",ue=function(v){return v instanceof V||!(!v||!v[_e])},g=function v(d,n,c){var o;if(!d)return X;if(typeof d=="string"){var p=d.toLowerCase();Z[p]&&(o=p),n&&(Z[p]=n,o=p);var f=d.split("-");if(!o&&f.length>1)return v(f[0])}else{var w=d.name;Z[w]=d,o=w}return!c&&o&&(X=o),o||!c&&X},t=function(v,d){if(ue(v))return v.clone();var n=typeof d=="object"?d:{};return n.date=v,n.args=arguments,new V(n)},e=$e;e.l=g,e.i=ue,e.w=function(v,d){return t(v,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var V=function(){function v(n){this.$L=g(n.locale,null,!0),this.parse(n),this.$x=this.$x||n.x||{},this[_e]=!0}var d=v.prototype;return d.parse=function(n){this.$d=function(c){var o=c.date,p=c.utc;if(o===null)return new Date(NaN);if(e.u(o))return new Date;if(o instanceof Date)return new Date(o);if(typeof o=="string"&&!/Z$/i.test(o)){var f=o.match(C);if(f){var w=f[2]-1||0,U=(f[7]||"0").substring(0,3);return p?new Date(Date.UTC(f[1],w,f[3]||1,f[4]||0,f[5]||0,f[6]||0,U)):new Date(f[1],w,f[3]||1,f[4]||0,f[5]||0,f[6]||0,U)}}return new Date(o)}(n),this.init()},d.init=function(){var n=this.$d;this.$y=n.getFullYear(),this.$M=n.getMonth(),this.$D=n.getDate(),this.$W=n.getDay(),this.$H=n.getHours(),this.$m=n.getMinutes(),this.$s=n.getSeconds(),this.$ms=n.getMilliseconds()},d.$utils=function(){return e},d.isValid=function(){return this.$d.toString()!==a},d.isSame=function(n,c){var o=t(n);return this.startOf(c)<=o&&o<=this.endOf(c)},d.isAfter=function(n,c){return t(n)<this.startOf(c)},d.isBefore=function(n,c){return this.endOf(c)<t(n)},d.$g=function(n,c,o){return e.u(n)?this[c]:this.set(o,n)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(n,c){var o=this,p=!!e.u(c)||c,f=e.p(n),w=function(te,I){var Q=e.w(o.$u?Date.UTC(o.$y,I,te):new Date(o.$y,I,te),o);return p?Q:Q.endOf(k)},U=function(te,I){return e.w(o.toDate()[te].apply(o.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice(I)),o)},z=this.$W,L=this.$M,B=this.$D,oe="set"+(this.$u?"UTC":"");switch(f){case m:return p?w(1,0):w(31,11);case $:return p?w(1,L):w(0,L+1);case S:var ee=this.$locale().weekStart||0,ce=(z<ee?z+7:z)-ee;return w(p?B-ce:B+(6-ce),L);case k:case u:return U(oe+"Hours",0);case x:return U(oe+"Minutes",1);case i:return U(oe+"Seconds",2);case F:return U(oe+"Milliseconds",3);default:return this.clone()}},d.endOf=function(n){return this.startOf(n,!1)},d.$set=function(n,c){var o,p=e.p(n),f="set"+(this.$u?"UTC":""),w=(o={},o[k]=f+"Date",o[u]=f+"Date",o[$]=f+"Month",o[m]=f+"FullYear",o[x]=f+"Hours",o[i]=f+"Minutes",o[F]=f+"Seconds",o[N]=f+"Milliseconds",o)[p],U=p===k?this.$D+(c-this.$W):c;if(p===$||p===m){var z=this.clone().set(u,1);z.$d[w](U),z.init(),this.$d=z.set(u,Math.min(this.$D,z.daysInMonth())).$d}else w&&this.$d[w](U);return this.init(),this},d.set=function(n,c){return this.clone().$set(n,c)},d.get=function(n){return this[e.p(n)]()},d.add=function(n,c){var o,p=this;n=Number(n);var f=e.p(c),w=function(L){var B=t(p);return e.w(B.date(B.date()+Math.round(L*n)),p)};if(f===$)return this.set($,this.$M+n);if(f===m)return this.set(m,this.$y+n);if(f===k)return w(1);if(f===S)return w(7);var U=(o={},o[i]=E,o[x]=j,o[F]=H,o)[f]||1,z=this.$d.getTime()+n*U;return e.w(z,this)},d.subtract=function(n,c){return this.add(-1*n,c)},d.format=function(n){var c=this,o=this.$locale();if(!this.isValid())return o.invalidDate||a;var p=n||"YYYY-MM-DDTHH:mm:ssZ",f=e.z(this),w=this.$H,U=this.$m,z=this.$M,L=o.weekdays,B=o.months,oe=o.meridiem,ee=function(I,Q,me,ye){return I&&(I[Q]||I(c,p))||me[Q].slice(0,ye)},ce=function(I){return e.s(w%12||12,I,"0")},te=oe||function(I,Q,me){var ye=I<12?"AM":"PM";return me?ye.toLowerCase():ye};return p.replace(be,function(I,Q){return Q||function(me){switch(me){case"YY":return String(c.$y).slice(-2);case"YYYY":return e.s(c.$y,4,"0");case"M":return z+1;case"MM":return e.s(z+1,2,"0");case"MMM":return ee(o.monthsShort,z,B,3);case"MMMM":return ee(B,z);case"D":return c.$D;case"DD":return e.s(c.$D,2,"0");case"d":return String(c.$W);case"dd":return ee(o.weekdaysMin,c.$W,L,2);case"ddd":return ee(o.weekdaysShort,c.$W,L,3);case"dddd":return L[c.$W];case"H":return String(w);case"HH":return e.s(w,2,"0");case"h":return ce(1);case"hh":return ce(2);case"a":return te(w,U,!0);case"A":return te(w,U,!1);case"m":return String(U);case"mm":return e.s(U,2,"0");case"s":return String(c.$s);case"ss":return e.s(c.$s,2,"0");case"SSS":return e.s(c.$ms,3,"0");case"Z":return f}return null}(I)||f.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(n,c,o){var p,f=this,w=e.p(c),U=t(n),z=(U.utcOffset()-this.utcOffset())*E,L=this-U,B=function(){return e.m(f,U)};switch(w){case m:p=B()/12;break;case $:p=B();break;case D:p=B()/3;break;case S:p=(L-z)/6048e5;break;case k:p=(L-z)/864e5;break;case x:p=L/j;break;case i:p=L/E;break;case F:p=L/H;break;default:p=L}return o?p:e.a(p)},d.daysInMonth=function(){return this.endOf($).$D},d.$locale=function(){return Z[this.$L]},d.locale=function(n,c){if(!n)return this.$L;var o=this.clone(),p=g(n,c,!0);return p&&(o.$L=p),o},d.clone=function(){return e.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},v}(),h=V.prototype;return t.prototype=h,[["$ms",N],["$s",F],["$m",i],["$H",x],["$W",k],["$M",$],["$y",m],["$D",u]].forEach(function(v){h[v[1]]=function(d){return this.$g(d,v[0],v[1])}}),t.extend=function(v,d){return v.$i||(v(d,V,t),v.$i=!0),t},t.locale=g,t.isDayjs=ue,t.unix=function(v){return t(1e3*v)},t.en=Z[X],t.Ls=Z,t.p={},t})})(Te);var Je=Te.exports;const ge=Ee(Je),Le=Ve("vendors",{state:()=>({vendors:[]}),getters:{list:b=>b.vendors},actions:{async getVendors(b){await ne(b).get("/api/vendor/state/vendor-list").then(_=>{this.vendors=Object.assign([],_.data)}).catch(_=>{console.log("getvendors error: ",_)})}}}),Ke={class:"v-col-12 pt-0 pb-2"},Ze=l("thead",null,[l("tr",null,[l("th",{class:"text-left text-primary"},"#"),l("th",{class:"text-left text-primary"},"Title"),l("th",{class:"text-left text-primary"},"Warranty Start"),l("th",{class:"text-left text-primary"},"Warranty End"),l("th",{class:"text-left text-primary"},"Vendor"),l("th",{class:"text-left text-primary"},"Vendor Start"),l("th",{class:"text-left text-primary"},"Vendor End")])],-1),Ge=["onClick"],Xe=l("div",{class:"v-col-12 pt-0 pb-2"},"Warranty",-1),Qe={class:"v-col-12 v-col-md-4 pt-0 pb-2"},et={class:"v-col-12 v-col-md-4 pt-0 pb-2"},tt={class:"v-col-12 v-col-md-4 pt-0 pb-2"},at=l("div",{class:"v-col-12 pt-0 pb-2"},"Vendor Warranty",-1),lt={class:"v-col-12 v-col-md-4 pt-0 pb-2"},st={class:"v-col-12 v-col-md-4 pt-0 pb-2"},nt={class:"v-col-12 v-col-md-4 pt-0 pb-2"},ot={class:"v-col-12 pt-0 pb-2 d-flex justify-end"},rt={__name:"AssetWarranties",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(b){const _=b,H=Fe(),E=Me(),j=Le(),N=R({}),F=ze({"Warranty Title":T().required().max(150),"Warranty Start Date":T().nullable(),"Warranty End Date":T().nullable(),"Vendor Start Date":T().nullable(),"Vendor End Date":T().nullable()}),i=R({status:!1,action:"add",loading:!1,data:{}}),x=R([]);xe(()=>_.asset,D=>{x.value=D.warranty});const k=(D=null)=>{i.value.status=!0,D?(i.value.action="edit",i.value.data=Object.assign({},D)):(i.value.action="add",i.value.data={})},S=async()=>{i.value.loading=!0;let D={id:i.value.data.id,asset_id:H.params.id,warranty_title:i.value.data.title,warranty_start_date:i.value.data.warranty_start_date,warranty_end_date:i.value.data.warranty_end_date,warranty_vendor_id:i.value.data.vendor_id,vendor_start_date:i.value.data.vendor_start_date,vendor_end_date:i.value.data.vendor_end_date};await ne(E.token).post("/api/asset/save-warranty",D).then(m=>{$().then(()=>{N.value={status:!0,type:"success",text:m.data.message},i.value.loading=!1,i.value.status=!1})}).catch(m=>{i.value.loading=!1,N.value={status:!0,type:"eroor",text:"Error while saving warranty"},console.log("err",m)})},$=async()=>{await ne(E.token).get("/api/asset/warranty/"+H.params.id).then(D=>{x.value=D.data,i.value.loading=!1}).catch(D=>{i.value.loading=!1,console.log("err",D)})};return(D,m)=>(M(),K(J,null,{default:r(()=>[l("div",Ke,[s(P,{onClick:m[0]||(m[0]=()=>k()),class:"mb-3",size:"small"},{default:r(()=>[q(" New Warranty "),s(ke,{class:"ml-2",icon:y(Ce)},null,8,["icon"])]),_:1}),s(le,null,{default:r(()=>[s(we,{density:"compact"},{default:r(()=>[Ze,l("tbody",null,[(M(!0),G(ve,null,pe(x.value,(u,a)=>(M(),G("tr",{key:u.id,onClick:()=>k(u),class:"cursor-pointer table-cell-hover"},[l("td",null,A(a+1),1),l("td",null,A(u.title),1),l("td",null,A(u.warranty_start_date&&y(ge)(u.warranty_start_date).format("MMM. DD, YYYY")),1),l("td",null,A(u.warranty_end_date&&y(ge)(u.warranty_end_date).format("MMM. DD, YYYY")),1),l("td",null,A(u.vendor&&u.vendor.title),1),l("td",null,A(u.vendor_start_date&&y(ge)(u.vendor_start_date).format("MMM. DD, YYYY")),1),l("td",null,A(u.vendor_end_date&&y(ge)(u.vendor_end_date).format("MMM. DD, YYYY")),1)],8,Ge))),128))])]),_:1}),x.value.length==0?(M(),K(he,{key:0,class:"pa-3 text-center"},{default:r(()=>[q("No record at the moment")]),_:1})):se("",!0)]),_:1})]),s(Ue,{modelValue:i.value.status,"onUpdate:modelValue":m[13]||(m[13]=u=>i.value.status=u),persistent:"",width:"1000"},{default:r(()=>[s(le,null,{default:r(()=>[s(Oe,{class:"text-capitalize mb-3 d-flex justify-space-between align-center"},{default:r(()=>[q(A(i.value.action+" Warranty")+" ",1),s(P,{icon:y(Ae),variant:"flat",size:"small",onClick:m[1]||(m[1]=u=>i.value.status=!1)},null,8,["icon"])]),_:1}),s(We,null,{default:r(()=>[s(y(je),{as:"v-form","validation-schema":y(F)},{default:r(()=>[s(J,{class:"mb-0"},{default:r(()=>[Xe,l("div",Qe,[s(y(Y),{name:"Warranty Title",modelValue:i.value.data.title,"onUpdate:modelValue":m[3]||(m[3]=u=>i.value.data.title=u)},{default:r(({field:u,errors:a})=>[s(O,W({modelValue:i.value.data.title,"onUpdate:modelValue":m[2]||(m[2]=C=>i.value.data.title=C)},u,{label:"Warranty Title",variant:"outlined",density:"compact","error-messages":a}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",et,[s(y(Y),{name:"Warranty Start Date",modelValue:i.value.data.warranty_start_date,"onUpdate:modelValue":m[5]||(m[5]=u=>i.value.data.warranty_start_date=u)},{default:r(({field:u,errors:a})=>[s(O,W({type:"date",modelValue:i.value.data.warranty_start_date,"onUpdate:modelValue":m[4]||(m[4]=C=>i.value.data.warranty_start_date=C)},u,{label:"Warranty Start Date",variant:"outlined",density:"compact","error-messages":a}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",tt,[s(y(Y),{name:"Warranty End Date",modelValue:i.value.data.warranty_end_date,"onUpdate:modelValue":m[7]||(m[7]=u=>i.value.data.warranty_end_date=u)},{default:r(({field:u,errors:a})=>[s(O,W({type:"date",modelValue:i.value.data.warranty_end_date,"onUpdate:modelValue":m[6]||(m[6]=C=>i.value.data.warranty_end_date=C)},u,{label:"Warranty End Date",variant:"outlined",density:"compact","error-messages":a}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),at,l("div",lt,[s(ae,{modelValue:i.value.data.vendor_id,"onUpdate:modelValue":m[8]||(m[8]=u=>i.value.data.vendor_id=u),items:y(j).list,"item-title":"title","item-value":"id",label:"Vendor Warranty",density:"compact",variant:"outlined",rules:[u=>!!u||"Vendor Warranty is required"]},null,8,["modelValue","items","rules"])]),l("div",st,[s(y(Y),{name:"Vendor Start Date",modelValue:i.value.data.vendor_start_date,"onUpdate:modelValue":m[10]||(m[10]=u=>i.value.data.vendor_start_date=u)},{default:r(({field:u,errors:a})=>[s(O,W({type:"date",modelValue:i.value.data.vendor_start_date,"onUpdate:modelValue":m[9]||(m[9]=C=>i.value.data.vendor_start_date=C)},u,{label:"Vendor Start Date",variant:"outlined",density:"compact","error-messages":a}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",nt,[s(y(Y),{name:"Vendor End Date",modelValue:i.value.data.vendor_end_date,"onUpdate:modelValue":m[12]||(m[12]=u=>i.value.data.vendor_end_date=u)},{default:r(({field:u,errors:a})=>[s(O,W({type:"date",modelValue:i.value.data.vendor_end_date,"onUpdate:modelValue":m[11]||(m[11]=C=>i.value.data.vendor_end_date=C)},u,{label:"Vendor End Date",variant:"outlined",density:"compact","error-messages":a}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",ot,[s(P,{color:"primary",loading:i.value.loading,onClick:S},{default:r(()=>[q("Save")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["validation-schema"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Ne,{options:N.value},null,8,["options"])]),_:1}))}},it={class:"v-col-12 pt-0 pb-2"},dt=l("thead",null,[l("tr",null,[l("th",{class:"text-left text-primary"},"ISR ID"),l("th",{class:"text-left text-primary"},"Urgency"),l("th",{class:"text-left text-primary"},"Priority"),l("th",{class:"text-left text-primary"},"Reported by"),l("th",{class:"text-left text-primary"},"Handled by"),l("th",{class:"text-left text-primary"},"Date Reported"),l("th",{class:"text-left text-primary"},"Date Completed"),l("th",{class:"text-left text-primary"},"Status"),l("th",{class:"text-left text-primary"})])],-1),ut={__name:"AssetMaintenances",props:{asset:{type:Object,default:null}},setup(b){const _=b,H=Ye(),E=()=>{H.push({name:"NewMaintenance",query:{type:"details",asset_code:i.value.asset_code,asset_id:i.value.id,comp:i.value.company_id,loc:i.value.location_id,title:i.value.asset_name}})},j=x=>{H.push({name:"EditMaintenance",params:{id:x},query:{type:"details",pd:"ox2rKaIYFhBOQW31j6kkiMrJ4KfnYpLmwJhMzBFwPBlVjgGR4g",v:1,vv:"xK2sX1sDL1BBAvmuoPpWoNRgc4wzbdZ9F2OXAKrS3N2g65xNgy"}}).catch(k=>{console.log(k)})},N=x=>x?x==1?"Normal":x==2?"Medium":"High":"",F=(x,k=5)=>{let S="0000"+x;return S.substring(S.length-k)},i=R({});return xe(()=>_.asset,(x,k)=>{i.value=x,console.log("assetDetail.value",i.value)},{deep:!0}),(x,k)=>(M(),K(J,null,{default:r(()=>[l("div",it,[i.value.status_id!=2?(M(),K(P,{key:0,onClick:E,class:"mb-3",size:"small"},{default:r(()=>[q(" New Maintenance "),s(ke,{class:"ml-2",icon:y(Ce)},null,8,["icon"])]),_:1})):se("",!0),s(le,null,{default:r(()=>[s(we,{density:"compact"},{default:r(()=>[dt,l("tbody",null,[(M(!0),G(ve,null,pe(_.asset.maintenance,(S,$)=>{var D,m,u;return M(),G("tr",{key:S.id},[l("td",null,"ISR-2"+A(F(S.id)),1),l("td",null,A(N(S.urgency)),1),l("td",null,A(N(S.priority)),1),l("td",null,A((D=S.profile)==null?void 0:D.display_name),1),l("td",null,A((m=S.handle_by)==null?void 0:m.display_name),1),l("td",null,A(y(De)(S.created_at)),1),l("td",null,A(S.date_closed?y(De)(S.date_closed):""),1),l("td",null,A((u=S.status)==null?void 0:u.title),1),l("td",null,[s(P,{color:"info",size:"x-small",onClick:a=>j(S.id)},{default:r(()=>[q("Details")]),_:2},1032,["onClick"])])])}),128))])]),_:1}),_.asset.maintenance&&_.asset.maintenance.length==0?(M(),K(he,{key:0,class:"pa-3 text-center"},{default:r(()=>[q("No record at the moment")]),_:1})):se("",!0)]),_:1})])]),_:1}))}},ct={class:"v-col-12 pt-0 pb-2"},mt=l("thead",null,[l("tr",null,[l("th",{class:"text-left text-primary"},"#"),l("th",{class:"text-left text-primary"},"Alloted to"),l("th",{class:"text-left text-primary"},"Remarks")])],-1),vt={__name:"AssetAllotedLocations",props:{asset:{type:Object,default:null}},setup(b){const _=b;return(H,E)=>(M(),K(J,null,{default:r(()=>[l("div",ct,[s(le,null,{default:r(()=>[s(we,{density:"compact"},{default:r(()=>[mt,l("tbody",null,[(M(!0),G(ve,null,pe(_.asset.allotted_informations,(j,N)=>(M(),G("tr",{key:j.id},[l("td",null,A(N+1),1),l("td",null,A(j.title),1),l("td",null,A(j.remarks),1)]))),128))])]),_:1}),_.asset.allotted_informations&&_.asset.allotted_informations.length==0?(M(),K(he,{key:0,class:"pa-3 text-center"},{default:r(()=>[q("No record at the moment")]),_:1})):se("",!0)]),_:1})])]),_:1}))}},pt=Ve("companies",{state:()=>({companies:[]}),getters:{list:b=>b.companies},actions:{async getCompanies(b){await ne(b).get("/api/company/state/list").then(_=>{this.companies=Object.assign([],_.data)}).catch(_=>{console.log("getCompanies error: ",_)})}}}),ft=Ve("locations",{state:()=>({locations:[]}),getters:{list:b=>b.locations},actions:{async getLocations(b){await ne(b).get("/api/location/state/location-list").then(_=>{this.locations=Object.assign([],_.data)}).catch(_=>{console.log("getlocations error: ",_)})}}}),_t=Ve("status",{state:()=>({status:[]}),getters:{list:b=>b.status,conditions:b=>b.status.filter(_=>_.type=="condition-type"),assets:b=>b.status.filter(_=>_.type=="asset")},actions:{async getStatuses(b){await ne(b).get("/api/vendor/state/status-list").then(_=>{this.status=Object.assign([],_.data),console.log("this.stats 11",this.status)}).catch(_=>{console.log("getstatus error: ",_)})}}}),yt={class:"text-primary text-capitalize"},gt={class:"d-flex align-center"},Vt=l("div",{class:"v-col-12 font-weight-bold"},"Asset Info",-1),ht={class:"v-col-12 v-col-md-6 pt-0 pb-2"},bt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},$t={class:"v-col-12 v-col-md-6 pt-0 pb-2"},xt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},wt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},St={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Dt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Mt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},kt={key:0,class:"v-col-12 pt-0 font-weight-bold"},Ct={key:1,class:"v-col-12 pt-0"},Ut={class:"v-col-12 pt-0 text-capitalize"},Ot={class:"v-col-12"},At={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Wt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Yt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},zt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},jt={class:"v-col-12"},Nt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Tt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Lt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},qt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Et={class:"v-col-12"},Ft={class:"v-col-12 v-col-md-6 pt-0 pb-2"},It={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Pt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ht={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Bt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Rt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Jt={class:"v-col-12 mb-6"},Kt={class:"v-col-12 mb-6"},Zt={class:"v-col-12 mb-6"},Gt=l("div",{class:"v-col-12 pt-0 font-weight-bold"},"Attachment",-1),Xt={class:"v-col-12 pt-0"},Qt={class:"v-col-12 pb-2"},ea={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},ta={class:"v-col-12 pt-0 pb-2"},ia={__name:"AssetForm",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(b){const _=b,H=Ye(),E=R({}),j=Me(),N=pt();N.list.length==0&&N.getCompanies(j.token);const F=Re();F.list.length==0&&F.getCategories(j.token);const i=ft();i.list.length==0&&i.getLocations(j.token);const x=_t();(x.list.length==0||x.conditions.length==0)&&x.getStatuses(j.token);const k=Le();k.list.length==0&&(console.log("fORM",k.list),k.getVendors(j.token));const S=R(window.location.origin),$=R("specification"),D=g=>{$.value=g};let m=ze({Name:T().required().max(150),"Serial Number":T().max(80).nullable(),"Asset Code":T().max(50).nullable(),"Section code":T().max(30).nullable(),Category:T().required(),Company:T().required(),Location:T().required(),"Asset Status":T().required(),Specification:T().max(120).nullable(),Brand:T().required(),Model:T().required(),Condition:T().required()});const u=R(!1),a=R({}),C=R([]),be=Ie(()=>C.value.map(g=>g.id)),fe=g=>{a.value=Object.assign({},g),C.value=g&&g.attachments?Object.assign([],g.attachments):[],g&&g.financial_information&&(a.value.capitalization_price=g.financial_information.capitalization_price,a.value.depreciation_percentage=g.financial_information.depreciation_percentage,a.value.scrap_value=g.financial_information.scrap_value,a.value.scrap_date=g.financial_information.scrap_date,a.value.capitalization_date=g.financial_information.capitalization_date,a.value.end_of_life=g.financial_information.end_of_life)};fe(_.asset),xe(()=>_.asset,g=>{fe(g)});const de=async()=>{u.value=!0,a.value.file_ids=be.value,a.value.company_code=N.list.filter(g=>g.id==a.value.company_id)[0].code,a.value.category_code=F.list.filter(g=>g.id==a.value.category_id)[0].code,a.value.financial_information_id=a.value.financial_information?a.value.financial_information.id:null,await ne(j.token).post("/api/asset/save",a.value).then(g=>{E.value={status:!0,type:"success",text:g.data.message},u.value=!1,_.page=="add"&&H.push({name:"edit-asset",params:{id:g.data.asset.id}}).catch(t=>{console.log("router.push",t)})}).catch(g=>{console.log("saveAsset",g),E.value={status:!0,type:"error",text:"Error while saving asset"},u.value=!1})},$e=g=>{let t=null;g.map(e=>{t=C.value.find(V=>V.id==e.id),t||C.value.push(e)})},X=R(!1),Z=R(1),_e=g=>{Z.value=g,X.value=!0},ue=g=>{C.value=C.value.filter(t=>t.id!==g)};return(g,t)=>(M(),K(le,{loading:u.value,"max-width":"1600px",class:"mx-auto elevation-0"},{default:r(()=>[s(y(je),{as:"v-form","validation-schema":y(m)},{default:r(()=>[s(Oe,{class:"pb-6 pt-3 d-flex align-center justify-space-between"},{default:r(()=>[l("div",yt,A(_.page+" Asset"),1),l("div",gt,[s(P,{color:"primary",loading:u.value,onClick:de},{default:r(()=>[q("Save")]),_:1},8,["loading"])])]),_:1}),s(We,null,{default:r(()=>[s(J,null,{default:r(()=>[Vt,l("div",ht,[s(y(Y),{name:"Name",modelValue:a.value.asset_name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.asset_name=e)},{default:r(({field:e,errors:V})=>[s(O,W({modelValue:a.value.asset_name,"onUpdate:modelValue":t[0]||(t[0]=h=>a.value.asset_name=h)},e,{label:"Name*",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",bt,[s(y(Y),{name:"Serial Number",modelValue:a.value.serial_number,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value.serial_number=e)},{default:r(({field:e,errors:V})=>[s(O,W({modelValue:a.value.serial_number,"onUpdate:modelValue":t[2]||(t[2]=h=>a.value.serial_number=h)},e,{label:"Serial Number(Optional)",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",$t,[s(y(Y),{name:"Section code",modelValue:a.value.section_code,"onUpdate:modelValue":t[5]||(t[5]=e=>a.value.section_code=e)},{default:r(({field:e,errors:V})=>[s(O,W({modelValue:a.value.section_code,"onUpdate:modelValue":t[4]||(t[4]=h=>a.value.section_code=h)},e,{label:"Section code (optional)",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",xt,[s(ae,{modelValue:a.value.category_id,"onUpdate:modelValue":t[6]||(t[6]=e=>a.value.category_id=e),items:y(F).list,"item-title":"title","item-value":"id",label:"Category*",density:"compact",variant:"outlined",rules:[e=>!!e||"Category is required"]},null,8,["modelValue","items","rules"])]),l("div",wt,[s(ae,{modelValue:a.value.company_id,"onUpdate:modelValue":t[7]||(t[7]=e=>a.value.company_id=e),items:y(N).list,"item-title":"title","item-value":"id",label:"Company*",density:"compact",variant:"outlined",rules:[e=>!!e||"Company is required"]},null,8,["modelValue","items","rules"])]),l("div",St,[s(ae,{modelValue:a.value.location_id,"onUpdate:modelValue":t[8]||(t[8]=e=>a.value.location_id=e),items:y(i).list,"item-title":"title","item-value":"id",label:"Location*",density:"compact",variant:"outlined",rules:[e=>!!e||"Location is required"]},null,8,["modelValue","items","rules"])]),l("div",Dt,[s(y(Y),{name:"Asset Code",modelValue:a.value.asset_code,"onUpdate:modelValue":t[10]||(t[10]=e=>a.value.asset_code=e)},{default:r(({field:e,errors:V})=>[s(O,W({readonly:"",modelValue:a.value.asset_code,"onUpdate:modelValue":t[9]||(t[9]=h=>a.value.asset_code=h)},e,{label:"Asset Code (Auto Generated)",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Mt,[s(ae,{modelValue:a.value.status_id,"onUpdate:modelValue":t[11]||(t[11]=e=>a.value.status_id=e),items:y(x).assets,disabled:a.value.status_id==2,"item-title":"title","item-value":"id",label:"Asset Status*",density:"compact",variant:"outlined",rules:[e=>!!e||"Asset Status is required"]},null,8,["modelValue","items","disabled","rules"])])]),_:1}),s(J,null,{default:r(()=>[_.page=="edit"?(M(),G("div",kt," Additional Info ")):se("",!0),_.page=="edit"?(M(),G("div",Ct,[s(P,{class:"mr-2 mb-2",onClick:t[12]||(t[12]=()=>D("specification")),color:$.value=="specification"?"primary":"white"},{default:r(()=>[q("Specification")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:t[13]||(t[13]=()=>D("purchase")),color:$.value=="purchase"?"primary":"white"},{default:r(()=>[q("Purchase")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:t[14]||(t[14]=()=>D("financial")),color:$.value=="financial"?"primary":"white"},{default:r(()=>[q("Financial")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:t[15]||(t[15]=()=>D("warranty")),color:$.value=="warranty"?"primary":"white"},{default:r(()=>[q("Warranty")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:t[16]||(t[16]=()=>D("allotted")),color:$.value=="allotted"?"primary":"white"},{default:r(()=>[q("Allotted")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:t[17]||(t[17]=()=>D("maintenance")),color:$.value=="maintenance"?"primary":"white"},{default:r(()=>[q("Maintenance")]),_:1},8,["color"])])):se("",!0),l("div",Ut,A($.value+" Information"),1),re(l("div",Ot,[s(J,null,{default:r(()=>[l("div",At,[s(y(Y),{name:"Specification",modelValue:a.value.specification,"onUpdate:modelValue":t[19]||(t[19]=e=>a.value.specification=e)},{default:r(({field:e,errors:V})=>[s(O,W({modelValue:a.value.specification,"onUpdate:modelValue":t[18]||(t[18]=h=>a.value.specification=h)},e,{label:"Specification*",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Wt,[s(O,{modelValue:a.value.model,"onUpdate:modelValue":t[20]||(t[20]=e=>a.value.model=e),label:"Model*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),l("div",Yt,[s(O,{modelValue:a.value.brand,"onUpdate:modelValue":t[21]||(t[21]=e=>a.value.brand=e),label:"Brand*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),l("div",zt,[s(ae,{modelValue:a.value.condition_id,"onUpdate:modelValue":t[22]||(t[22]=e=>a.value.condition_id=e),items:y(x).conditions,"item-title":"title","item-value":"id",label:"Condition*",density:"compact",variant:"outlined",rules:[e=>!!e||"Condition is required"]},null,8,["modelValue","items","rules"])])]),_:1})],512),[[ie,$.value=="specification"]]),re(l("div",jt,[s(J,null,{default:r(()=>[l("div",Nt,[s(y(Y),{name:"Price",modelValue:a.value.price,"onUpdate:modelValue":t[24]||(t[24]=e=>a.value.price=e)},{default:r(({field:e,errors:V})=>[s(O,W({modelValue:a.value.price,"onUpdate:modelValue":t[23]||(t[23]=h=>a.value.price=h)},e,{label:"Price",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Tt,[s(ae,{modelValue:a.value.vendor_id,"onUpdate:modelValue":t[25]||(t[25]=e=>a.value.vendor_id=e),items:y(k).list,"item-title":"title","item-value":"id",label:"Vendor",density:"compact",variant:"outlined",rules:[e=>!!e||"Vendor is required"]},null,8,["modelValue","items","rules"])]),l("div",Lt,[s(y(Y),{name:"PO Number",modelValue:a.value.po_number,"onUpdate:modelValue":t[27]||(t[27]=e=>a.value.po_number=e)},{default:r(({field:e,errors:V})=>[s(O,W({modelValue:a.value.po_number,"onUpdate:modelValue":t[26]||(t[26]=h=>a.value.po_number=h)},e,{label:"PO Number",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",qt,[s(y(Y),{name:"Purchase Date",modelValue:a.value.purchased_date,"onUpdate:modelValue":t[29]||(t[29]=e=>a.value.purchased_date=e)},{default:r(({field:e,errors:V})=>[s(O,W({type:"date",modelValue:a.value.purchased_date,"onUpdate:modelValue":t[28]||(t[28]=h=>a.value.purchased_date=h)},e,{label:"Purchase Date",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[ie,$.value=="purchase"]]),re(l("div",Et,[s(J,null,{default:r(()=>[l("div",Ft,[s(y(Y),{name:"Capitalization Price",modelValue:a.value.capitalization_price,"onUpdate:modelValue":t[31]||(t[31]=e=>a.value.capitalization_price=e)},{default:r(({field:e,errors:V})=>[s(O,W({modelValue:a.value.capitalization_price,"onUpdate:modelValue":t[30]||(t[30]=h=>a.value.capitalization_price=h)},e,{label:"Capitalization Price",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",It,[s(y(Y),{name:"Depreciation Percentage",modelValue:a.value.depreciation_percentage,"onUpdate:modelValue":t[33]||(t[33]=e=>a.value.depreciation_percentage=e)},{default:r(({field:e,errors:V})=>[s(O,W({modelValue:a.value.depreciation_percentage,"onUpdate:modelValue":t[32]||(t[32]=h=>a.value.depreciation_percentage=h)},e,{label:"Depreciation Percentage",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Pt,[s(y(Y),{name:"Scrap Value",modelValue:a.value.scrap_value,"onUpdate:modelValue":t[35]||(t[35]=e=>a.value.scrap_value=e)},{default:r(({field:e,errors:V})=>[s(O,W({modelValue:a.value.scrap_value,"onUpdate:modelValue":t[34]||(t[34]=h=>a.value.scrap_value=h)},e,{label:"Scrap Value",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Ht,[s(y(Y),{name:"Scrap Date",modelValue:a.value.scrap_date,"onUpdate:modelValue":t[37]||(t[37]=e=>a.value.scrap_date=e)},{default:r(({field:e,errors:V})=>[s(O,W({type:"date",modelValue:a.value.scrap_date,"onUpdate:modelValue":t[36]||(t[36]=h=>a.value.scrap_date=h)},e,{label:"Scrap Date",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Bt,[s(y(Y),{name:"Capitalization Date",modelValue:a.value.capitalization_date,"onUpdate:modelValue":t[39]||(t[39]=e=>a.value.capitalization_date=e)},{default:r(({field:e,errors:V})=>[s(O,W({type:"date",modelValue:a.value.capitalization_date,"onUpdate:modelValue":t[38]||(t[38]=h=>a.value.capitalization_date=h)},e,{label:"Capitalization Date",variant:"outlined",density:"compact","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Rt,[s(y(Y),{name:"End of Life",modelValue:a.value.end_of_life,"onUpdate:modelValue":t[41]||(t[41]=e=>a.value.end_of_life=e)},{default:r(({field:e,errors:V})=>[s(O,W({type:"date",modelValue:a.value.end_of_life,"onUpdate:modelValue":t[40]||(t[40]=h=>a.value.end_of_life=h)},e,{label:"End of Life",density:"compact",variant:"outlined","error-messages":V}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[ie,$.value=="financial"]]),re(l("div",Jt,[_.page!="add"?(M(),K(rt,{key:0,asset:a.value,page:_.page},null,8,["asset","page"])):se("",!0)],512),[[ie,$.value=="warranty"]]),re(l("div",Kt,[s(vt,{asset:a.value},null,8,["asset"])],512),[[ie,$.value=="allotted"]]),re(l("div",Zt,[s(ut,{asset:a.value},null,8,["asset"])],512),[[ie,$.value=="maintenance"]]),Gt,l("div",Xt,[s(J,null,{default:r(()=>[l("div",Qt,[s(Be,{options:{multiSelect:!0},onSelect:$e})])]),_:1}),C.value.length>0?(M(),K(J,{key:0,class:"px-1"},{default:r(()=>[(M(!0),G(ve,null,pe(C.value,(e,V)=>(M(),G("div",{key:e.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[s(P,{style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:y(Ae),size:"26px",color:"error",onClick:()=>ue(e.id)},null,8,["icon","onClick"]),s(le,{onClick:()=>_e(V)},{default:r(()=>[s(Se,{src:S.value+"/file/"+e.path,cover:"","aspect-ratio":"1"},null,8,["src"])]),_:2},1032,["onClick"])]))),128)),s(Ue,{modelValue:X.value,"onUpdate:modelValue":t[43]||(t[43]=e=>X.value=e),width:"95%","max-width":"900"},{default:r(()=>[s(le,{class:"bg-black"},{default:r(()=>[s(Pe,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:Z.value,"onUpdate:modelValue":t[42]||(t[42]=e=>Z.value=e)},{default:r(()=>[(M(!0),G(ve,null,pe(C.value,(e,V)=>(M(),K(He,{key:V,"reverse-transition":"fade",transition:"fade"},{default:r(()=>[l("div",ea,[s(Se,{src:S.value+"/file/"+e.path},null,8,["src"])])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):(M(),K(J,{key:1},{default:r(()=>[l("div",ta,[s(he,{color:"grey-lighten-4",class:"pa-6 text-center"},{default:r(()=>[q(" Attachment is empty at the moment. ")]),_:1})])]),_:1}))])]),_:1})]),_:1})]),_:1},8,["validation-schema"]),s(Ne,{options:E.value},null,8,["options"])]),_:1},8,["loading"]))}};export{ia as _};
