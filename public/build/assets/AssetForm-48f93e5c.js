import{G as de,a as me,r as V,H as B,n as ae,o as r,c as x,w as o,b as t,y as d,j as q,e as U,d as s,C as G,a5 as be,z as N,k as L,x as ie,p as $,F as H,q as K,t as c,ag as Ue,M as le,R as oe,V as pe,P as he,f as ve,s as R,J as E,S as xe,T as ke,Q as ne,u as _e,ah as De,ai as Ae,i as S,O as $e,I as Me,X as M,aj as re,a6 as J,U as ge,ak as X}from"./app-bf849624.js";import{F as we,c as ze,a as F,d as Ne,b as z}from"./index.esm-cadb7684.js";import{_ as fe}from"./AppSnackBar-f5ea2cc6.js";import{_ as Ye}from"./Studio-f0d79f80.js";import{d as ee}from"./dayjs.min-bf827321.js";import{u as ce,a as Ve}from"./formatDate-559e9d83.js";import{u as Ce,a as je}from"./companies-8cbbaa85.js";import{u as Re}from"./categories-d13d82d4.js";import{u as Ie}from"./vendors-e3d5c2bc.js";import{u as Oe}from"./status-74105ab6.js";const Pe={class:"v-col-12 pt-0 pb-2"},Te=t("thead",null,[t("tr",null,[t("th",{class:"text-left text-primary"},"#"),t("th",{class:"text-left text-primary"},"Image"),t("th",{class:"text-left text-primary"},"Title"),t("th",{class:"text-left text-primary"},"Vendor"),t("th",{class:"text-left text-primary"}," Warranty Start "),t("th",{class:"text-left text-primary"},"Warranty End"),t("th",{class:"text-left text-primary"},"AMC Start"),t("th",{class:"text-left text-primary"},"AMC End")])],-1),qe=["onClick"],Fe=["onClick"],Le=["onClick"],We=["onClick"],Ee=["onClick"],Be=["onClick"],He=["onClick"],Ke={class:"v-col-12 v-col-md-12 pt-0 pb-2"},Je={class:"v-col-12 pt-0 pb-2 d-flex justify-end"},Xe={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},Ge=["data"],Qe={__name:"AssetWarranties",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(W){const y=W,Y=de(),I=me(),j=V(window.location.origin),e=V({}),m=V({status:!1,action:"add",loading:!1,data:{}}),g=V([]),b=V(0);B(()=>y.asset,h=>{g.value=h.pivot_warranties,b.value==0&&ue(),b.value+=1});const i=V(!1),k=V([]),u=V(1),A=V("image"),v=(h,w)=>{let C=h[0].path.split(".");A.value=C[C.length-1],k.value=h,u.value=w,i.value=!0},P=V(0),D=(h=null)=>{m.value.status=!0,h?(m.value.action="edit",m.value.data=Object.assign({},h),P.value=h.id):(m.value.action="add",m.value.data={})},T=async()=>{m.value.loading=!0;let h={id:m.value.data.id,asset_id:Y.params.id,warranty_id:m.value.data.warranty_id,old_warranty_id:P.value};await ae(I.token).post("/api/asset/save-warranty",h).then(w=>{se().then(()=>{e.value={status:!0,type:"success",text:w.data.message},m.value.loading=!1,m.value.status=!1})}).catch(w=>{m.value.loading=!1,e.value={status:!0,type:"eroor",text:"Error while saving warranty"},console.log("err",w)})},O=V([]),ue=()=>{ae(I.token).get("/api/fetch-warranties/non-paginated").then(h=>{O.value=h.data}).catch(h=>{m.value.loading=!1})},se=async()=>{await ae(I.token).get("/api/asset/warranty/"+Y.params.id).then(h=>{g.value=h.data,m.value.loading=!1}).catch(h=>{m.value.loading=!1})};return(h,w)=>(r(),x(R,null,{default:o(()=>[t("div",Pe,[d(Y).name!="view-asset"?(r(),x(q,{key:0,onClick:w[0]||(w[0]=()=>D()),class:"mb-3",size:"small"},{default:o(()=>[U(" New Warranty "),s(G,{class:"ml-2",icon:d(be)},null,8,["icon"])]),_:1})):N("",!0),s(L,null,{default:o(()=>{var C;return[s(ie,{density:"compact"},{default:o(()=>[Te,t("tbody",null,[(r(!0),$(H,null,K(g.value,(f,Q)=>{var Z;return r(),$("tr",{key:f.id,class:"cursor-pointer table-cell-hover"},[t("td",{onClick:()=>D(f)},c(Q+1),9,qe),t("td",null,[((Z=f==null?void 0:f.attachment)==null?void 0:Z.length)>0?(r(),x(G,{key:0,icon:d(Ue),color:"success",onClick:ye=>v(f.attachment,Q)},null,8,["icon","onClick"])):N("",!0)]),t("td",{onClick:()=>D(f)},c(f.warranty_title),9,Fe),t("td",{onClick:()=>D(f)},c(f.vendor&&f.vendor.title),9,Le),t("td",{onClick:()=>D(f)},c(f.warranty_start_date&&f.warranty_start_date!="0000-00-00"?d(ee)(f.warranty_start_date).format("MMM. DD, YYYY"):""),9,We),t("td",{onClick:()=>D(f)},c(f.warranty_end_date&&f.warranty_end_date!="0000-00-00"?d(ee)(f.warranty_end_date).format("MMM. DD, YYYY"):""),9,Ee),t("td",{onClick:()=>D(f)},c(f.amc_start_date&&f.amc_start_date!="0000-00-00"?d(ee)(f.amc_start_date).format("MMM. DD, YYYY"):""),9,Be),t("td",{onClick:()=>D(f)},c(f.amc_end_date&&f.amc_end_date!="0000-00-00"?d(ee)(f.amc_end_date).format("MMM. DD, YYYY"):""),9,He)])}),128))])]),_:1}),((C=g.value)==null?void 0:C.length)==0?(r(),x(le,{key:0,class:"pa-3 text-center"},{default:o(()=>[U("No record at the moment")]),_:1})):N("",!0)]}),_:1})]),s(oe,{modelValue:m.value.status,"onUpdate:modelValue":w[3]||(w[3]=C=>m.value.status=C),persistent:"",width:"600"},{default:o(()=>[s(L,null,{default:o(()=>[s(pe,{class:"text-capitalize mb-3 d-flex justify-space-between align-center"},{default:o(()=>[U(c(m.value.action+" Warranty")+" ",1),s(q,{icon:d(he),variant:"flat",size:"small",onClick:w[1]||(w[1]=C=>m.value.status=!1)},null,8,["icon"])]),_:1}),s(ve,null,{default:o(()=>[s(d(we),{as:"v-form"},{default:o(()=>[s(R,{class:"mb-0"},{default:o(()=>[t("div",Ke,[s(E,{modelValue:m.value.data.warranty_id,"onUpdate:modelValue":w[2]||(w[2]=C=>m.value.data.warranty_id=C),items:O.value,"item-title":"warranty_title","item-value":"id",label:"Select Warranty",density:"compact",variant:"outlined"},null,8,["modelValue","items"])]),t("div",Je,[s(q,{color:"primary",loading:m.value.loading,onClick:T,disabled:!m.value.data.warranty_id},{default:o(()=>[U("Save")]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(oe,{modelValue:i.value,"onUpdate:modelValue":w[5]||(w[5]=C=>i.value=C),width:"95%","max-width":"1200"},{default:o(()=>[s(L,{class:"bg-black"},{default:o(()=>[s(xe,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:u.value,"onUpdate:modelValue":w[4]||(w[4]=C=>u.value=C)},{default:o(()=>[(r(!0),$(H,null,K(k.value,(C,f)=>(r(),x(ke,{key:f,"reverse-transition":"fade",transition:"fade"},{default:o(()=>[t("div",Xe,[s(ne,{src:j.value+"/file/"+C.path},null,8,["src"]),A.value=="jpg"||A.value=="jpeg"||A.value=="gif"||A.value=="png"?(r(),x(ne,{key:0,src:j.value+"/file/"+C.path},null,8,["src"])):N("",!0),A.value=="pdf"?(r(),$("object",{key:1,data:j.value+"/file/"+C.path,type:"application/pdf",width:"100%",height:"800px"},null,8,Ge)):N("",!0)])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),s(fe,{options:e.value},null,8,["options"])]),_:1}))}},Ze={class:"v-col-12 pt-0 pb-2"},et=t("thead",null,[t("tr",null,[t("th",{class:"text-left text-primary"},"ISR ID"),t("th",{class:"text-left text-primary"},"Urgency"),t("th",{class:"text-left text-primary"},"Priority"),t("th",{class:"text-left text-primary"},"Reported by"),t("th",{class:"text-left text-primary"},"Handled by"),t("th",{class:"text-left text-primary"},"Date Reported"),t("th",{class:"text-left text-primary"},"Date Completed"),t("th",{class:"text-left text-primary"},"Status"),t("th",{class:"text-left text-primary"})])],-1),tt={__name:"AssetMaintenances",props:{asset:{type:Object,default:null}},setup(W){const y=W,Y=_e(),I=de(),j=()=>{Y.push({name:"NewMaintenance",query:{type:"details",asset_code:b.value.asset_code,asset_id:b.value.id,comp:b.value.company_id,loc:b.value.location_id,title:b.value.asset_name}})},e=i=>{Y.push({name:"EditMaintenance",params:{id:i},query:{type:"details",pd:"ox2rKaIYFhBOQW31j6kkiMrJ4KfnYpLmwJhMzBFwPBlVjgGR4g",v:1,vv:"xK2sX1sDL1BBAvmuoPpWoNRgc4wzbdZ9F2OXAKrS3N2g65xNgy"}}).catch(k=>{console.log(k)})},m=i=>i?i==1?"Normal":i==2?"Medium":"High":"",g=(i,k=5)=>{let u="0000"+i;return u.substring(u.length-k)},b=V({});return B(()=>y.asset,(i,k)=>{b.value=i},{deep:!0}),(i,k)=>(r(),x(R,null,{default:o(()=>[t("div",Ze,[b.value.status_id!=2&&d(I).name!="view-asset"?(r(),x(q,{key:0,onClick:j,class:"mb-3",size:"small"},{default:o(()=>[U(" New Maintenance "),s(G,{class:"ml-2",icon:d(be)},null,8,["icon"])]),_:1})):N("",!0),s(L,null,{default:o(()=>[s(ie,{density:"compact"},{default:o(()=>[et,t("tbody",null,[(r(!0),$(H,null,K(y.asset.maintenance,(u,A)=>{var v,P,D;return r(),$("tr",{key:u.id},[t("td",null,"ISR-2"+c(g(u.id)),1),t("td",null,c(m(u.urgency)),1),t("td",null,c(m(u.priority)),1),t("td",null,c((v=u.profile)==null?void 0:v.display_name),1),t("td",null,c((P=u.handle_by)==null?void 0:P.display_name),1),t("td",null,c(d(ce)(u.created_at)),1),t("td",null,c(u.date_closed?d(ce)(u.date_closed):""),1),t("td",null,c((D=u.status)==null?void 0:D.title),1),t("td",null,[s(q,{color:"info",size:"x-small",onClick:T=>e(u.id)},{default:o(()=>[U("Details")]),_:2},1032,["onClick"])])])}),128))])]),_:1}),y.asset.maintenance&&y.asset.maintenance.length==0?(r(),x(le,{key:0,class:"pa-3 text-center"},{default:o(()=>[U("No record at the moment")]),_:1})):N("",!0)]),_:1})])]),_:1}))}},at={class:"v-col-12 pt-0 pb-2"},lt=t("thead",null,[t("tr",null,[t("th",{class:"text-left text-primary"},"ISR ID"),t("th",{class:"text-left text-primary"},"Type"),t("th",{class:"text-left text-primary"},"Urgency"),t("th",{class:"text-left text-primary"},"Priority"),t("th",{class:"text-left text-primary"},"Reported by"),t("th",{class:"text-left text-primary"},"Handled by"),t("th",{class:"text-left text-primary"},"Date Reported"),t("th",{class:"text-left text-primary"},"Date Completed"),t("th",{class:"text-left text-primary"},"Status")])],-1),st=["onClick"],ot={__name:"AssetIncidents",props:{asset:{type:Object,default:null}},setup(W){const y=W,Y=_e(),I=g=>{Y.push({name:"EditIncident",params:{id:g},query:{type:"details"}}).catch(b=>{console.log(b)})},j=g=>g?g==1?"Normal":g==2?"Medium":"High":"",e=(g,b=5)=>{let i="0000"+g;return i.substring(i.length-b)},m=V({});return B(()=>y.asset,(g,b)=>{m.value=g},{deep:!0}),(g,b)=>(r(),x(R,null,{default:o(()=>[t("div",at,[s(L,null,{default:o(()=>[s(ie,{density:"compact"},{default:o(()=>[lt,t("tbody",null,[(r(!0),$(H,null,K(y.asset.incidents,(i,k)=>{var u,A,v,P,D,T;return r(),$("tr",{key:i.id},[t("td",{class:"text-decoration-underline d-flex align-center cursor-pointer",onClick:O=>I(i.id)},[U(" ISR-2"+c(e(i.id))+" ",1),s(G,{class:"ml-1",size:"small",icon:d(De)},null,8,["icon"])],8,st),t("td",null,c((u=i.type)==null?void 0:u.title),1),t("td",null,c((A=i.urgency)==null?void 0:A.title),1),t("td",null,c(i.priority?j(i.priority):"-"),1),t("td",null,c((v=i.profile)==null?void 0:v.display_name),1),t("td",null,c((P=i.handled_by)!=null&&P.display_name?(D=i.handled_by)==null?void 0:D.display_name:"-"),1),t("td",null,c(i.created_at?d(ee)(i.created_at).format("MMM. DD, YYYY"):"-"),1),t("td",null,c(i.date_closed?d(ee)(i.date_closed).format("MMM. DD, YYYY"):"-"),1),t("td",null,c((T=i.status)==null?void 0:T.title),1)])}),128))])]),_:1}),y.asset.incidents&&y.asset.incidents.length==0?(r(),x(le,{key:0,class:"pa-3 text-center"},{default:o(()=>[U("No record at the moment")]),_:1})):N("",!0)]),_:1})])]),_:1}))}},nt={class:"v-col-12 pt-0 pb-2"},dt=t("thead",null,[t("tr",null,[t("th",{class:"text-left text-primary"},"#"),t("th",{class:"text-left text-primary"}," Transferred from "),t("th",{class:"text-left text-primary"},"Remarks"),t("th",{class:"text-left text-primary"},"Date")])],-1),it={class:"v-col-12 v-col-md-6 pt-0 pb-2"},ut={class:"v-col-12 v-col-md-6 pt-0 pb-2"},rt={class:"v-col-12 pt-0 pb-2 d-flex justify-end"},ct={__name:"AssetAllotedLocations",props:{asset:{type:Object,default:null}},setup(W){const y=W,Y=me(),I=Ce(),j=V({});I.getLocations(Y.token);const e=V({status:!1,loading:!1,data:{}}),m=de(),g=()=>{e.value.status=!0,e.value.data={}},b=async()=>{e.value.loading=!0;let k={data:{asset_id:m.params.id,remarks:e.value.data.remarks,location_id:e.value.data.location_id}};j.value={status:!0,type:"info",text:"Please wait..."},await ae(Y.token).post("/api/asset/save-history",k).then(u=>{var A,v;j.value={status:!0,type:"success",text:"History location has been added."},console.log("res",u),i.value=(v=(A=u==null?void 0:u.data)==null?void 0:A.response)==null?void 0:v.allotted_informations,e.value.loading=!1,e.value.status=!1}).catch(u=>{e.value.loading=!1,j.value={status:!0,type:"eroor",text:"Error while saving history"},console.log("err",u)})},i=V([]);return B(()=>y.asset,k=>{i.value=k.allotted_informations}),B(()=>e.value.location_id,k=>{e.value.data={location_id:k}}),(k,u)=>{const A=Ae("Form");return r(),x(R,null,{default:o(()=>[t("div",nt,[d(m).name!="view-asset"?(r(),x(q,{key:0,onClick:u[0]||(u[0]=()=>g()),class:"mb-3",size:"small"},{default:o(()=>[U(" ADD HISTORY "),s(G,{class:"ml-2",icon:k.mdiPlus},null,8,["icon"])]),_:1})):N("",!0),s(L,null,{default:o(()=>[s(ie,{density:"compact"},{default:o(()=>[dt,t("tbody",null,[(r(!0),$(H,null,K(i.value,(v,P)=>{var D;return r(),$("tr",{key:v.id},[t("td",null,c(P+1),1),t("td",null,c((D=v.location)==null?void 0:D.title),1),t("td",null,c(v.remarks),1),t("td",null,c(d(ce)(v.created_at)),1)])}),128))])]),_:1}),y.asset.allotted_informations&&y.asset.allotted_informations.length==0?(r(),x(le,{key:0,class:"pa-3 text-center"},{default:o(()=>[U("No record at the moment")]),_:1})):N("",!0)]),_:1})]),s(oe,{modelValue:e.value.status,"onUpdate:modelValue":u[4]||(u[4]=v=>e.value.status=v),persistent:"",width:"600"},{default:o(()=>[s(L,null,{default:o(()=>[s(pe,{class:"text-capitalize mb-3 d-flex justify-space-between align-center"},{default:o(()=>[U(" ADD HISTORY "),s(q,{icon:k.mdiClose,variant:"flat",size:"small",onClick:u[1]||(u[1]=v=>e.value.status=!1)},null,8,["icon"])]),_:1}),s(ve,null,{default:o(()=>[s(A,{as:"v-form"},{default:o(()=>[s(R,{class:"mb-0"},{default:o(()=>[t("div",it,[s(E,{modelValue:e.value.data.location_id,"onUpdate:modelValue":u[2]||(u[2]=v=>e.value.data.location_id=v),items:d(I).list,"item-title":"title","item-value":"id",label:"Previous Location*",density:"compact",variant:"outlined"},null,8,["modelValue","items"])]),t("div",ut,[s(S,{modelValue:e.value.data.remarks,"onUpdate:modelValue":u[3]||(u[3]=v=>e.value.data.remarks=v),label:"Remarks",density:"compact",variant:"outlined"},null,8,["modelValue"])]),t("div",rt,[s(q,{color:"primary",loading:e.value.loading,onClick:b,disabled:!e.value.data.location_id},{default:o(()=>[U("Save")]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(fe,{options:j.value},null,8,["options"])]),_:1})}}},mt={class:"text-primary text-capitalize"},pt={class:"d-flex align-center"},vt=t("div",{class:"v-col-12 font-weight-bold"},"Asset Info",-1),_t={class:"v-col-12 v-col-md-6 pt-0 pb-2"},ft={class:"v-col-12 v-col-md-6 pt-0 pb-2"},yt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},gt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Vt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},bt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},ht={class:"v-col-12 v-col-md-6 pt-0 pb-2 d-flex align-start"},xt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},kt={key:0,class:"v-col-12 pt-0 font-weight-bold"},wt={key:1,class:"v-col-12 pt-0"},Ct={class:"v-col-12 pt-0 text-capitalize"},St={class:"v-col-12"},Ut={key:0,class:"v-col-12 pt-0 d-flex justify-space-between"},Dt=t("br",null,null,-1),At={class:"v-col-12 v-col-md-6 pt-0 pb-2"},$t={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Mt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},zt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Nt={class:"v-col-12 v-col-md-12 pt-0 pb-2"},Yt={class:"v-col-12"},jt={class:"v-col-12 v-col-md-3 pt-0 pb-2"},Rt={class:"v-col-12 v-col-md-2 pt-0 pb-2"},It={class:"v-col-12 v-col-md-7 pt-0 pb-2"},Ot={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Pt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Tt={class:"v-col-12 v-col-md-12 pt-0 pb-2"},qt={class:"v-col-12"},Ft={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Lt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Wt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Et={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Bt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ht={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Kt={class:"v-col-12 mb-6"},Jt={class:"v-col-12 mb-6"},Xt={class:"v-col-12 mb-6"},Gt={class:"v-col-12 mb-6"},Qt=t("div",{class:"v-col-12 pt-0 font-weight-bold"},"Attachment",-1),Zt={class:"v-col-12 pt-0"},ea={class:"v-col-12 pb-2"},ta={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},aa={class:"v-col-12 pt-0 pb-2"},pa={__name:"AssetForm",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(W){const y=W,Y=_e(),I=de(),j=V(["specification","purchase","financial","warranty","transfer history","maintenance","incident"]),e=V({}),m=V({}),g=me(),b=je();b.getCompanies(g.token),B(()=>e.value.company_id,_=>{var l;e.value.company_code=(l=b.list.filter(a=>a.id==_)[0])==null?void 0:l.code});const i=Re();i.getCategories(g.token),B(()=>e.value.category_id,_=>{var l;e.value.category_code=(l=i.list.filter(a=>a.id==_)[0])==null?void 0:l.code});const k=Ce();k.getLocations(g.token);const u=Ie();u.getVendors(g.token);const A=V(window.location.origin),v=V("specification"),P=_=>{v.value=_};let D=ze({Name:F().required().max(150),"Serial Number":F().max(80).nullable(),"Asset Number":Ne().typeError("Asset number must be a number").required(),"Section code":F().max(30).nullable(),Category:F().required(),Company:F().required(),Location:F().required(),"Asset Status":F().required(),Specification:F().max(120).nullable(),Brand:F().required(),Model:F().required(),Condition:F().required()});const T=V(!1),O=V([]),ue=$e(()=>O.value.map(_=>_.id)),se=_=>{var l,a;if(e.value=Object.assign({},_),e.value.asset_code){let p=(e.value.asset_code+"").split("-");e.value.asset_tag=p[p.length-1],e.value.company_code=(l=b.list.filter(te=>te.id==e.value.company_id)[0])==null?void 0:l.code,e.value.category_code=(a=i.list.filter(te=>te.id==e.value.category_id)[0])==null?void 0:a.code}O.value=_&&_.attachments?Object.assign([],_.attachments):[],_&&_.financial_information&&(e.value.capitalization_price=_.financial_information.capitalization_price,e.value.depreciation_percentage=_.financial_information.depreciation_percentage,e.value.scrap_value=_.financial_information.scrap_value,e.value.scrap_date=_.financial_information.scrap_date,e.value.capitalization_date=_.financial_information.capitalization_date,e.value.end_of_life=_.financial_information.end_of_life)};Me(()=>{setTimeout(()=>{se(y.asset)},800)}),B(()=>y.asset,_=>{se(_)});const h=Oe();(h.list.length==0||h.conditions.length==0)&&h.getStatuses(g.token);const w=()=>{Y.go(-1)},C=async()=>{T.value=!0,e.value.file_ids=ue.value,e.value.asset_code=e.value.company_code+"-"+e.value.category_code+"-"+e.value.asset_tag,e.value.financial_information_id=e.value.financial_information?e.value.financial_information.id:null,await ae(g.token).post("/api/asset/save",e.value).then(_=>{m.value={status:!0,type:"success",text:_.data.message},T.value=!1,y.page=="add"&&Y.push({name:"edit-asset",params:{id:_.data.asset.id}}).catch(l=>{console.log("router.push",l)})}).catch(_=>{m.value={status:!0,type:"error",text:"Error while saving asset"},T.value=!1})},f=_=>{let l=null;_.map(a=>{l=O.value.find(n=>n.id==a.id),l||O.value.push(a)})},Q=V(!1),Z=V(1),ye=_=>{Z.value=_,Q.value=!0},Se=_=>{O.value=O.value.filter(l=>l.id!==_)};return(_,l)=>(r(),x(L,{loading:T.value,"max-width":"1600px",class:"mx-auto elevation-0"},{default:o(()=>[s(d(we),{as:"v-form","validation-schema":d(D)},{default:o(()=>[s(pe,{class:"pb-6 pt-3 d-flex align-center justify-space-between"},{default:o(()=>[t("div",mt,[U(c(y.page+": ")+" ",1),t("strong",null,c(e.value.asset_code),1)]),t("div",pt,[s(q,{color:"primary",class:"mr-4",loading:T.value,onClick:w},{default:o(()=>[U("Cancel")]),_:1},8,["loading"]),d(I).name!="view-asset"?(r(),x(q,{key:0,color:"primary",loading:T.value,onClick:C},{default:o(()=>[U("Save")]),_:1},8,["loading"])):N("",!0)])]),_:1}),s(ve,null,{default:o(()=>[s(R,null,{default:o(()=>[vt,t("div",_t,[s(d(z),{name:"Name",modelValue:e.value.asset_name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.asset_name=a)},{default:o(({field:a,errors:n})=>[s(S,M({modelValue:e.value.asset_name,"onUpdate:modelValue":l[0]||(l[0]=p=>e.value.asset_name=p)},a,{label:"Name*",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",ft,[s(d(z),{name:"Serial Number",modelValue:e.value.serial_number,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.serial_number=a)},{default:o(({field:a,errors:n})=>[s(S,M({modelValue:e.value.serial_number,"onUpdate:modelValue":l[2]||(l[2]=p=>e.value.serial_number=p)},a,{label:"Serial Number(Optional)",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",yt,[s(d(z),{name:"Section code",modelValue:e.value.section_code,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.section_code=a)},{default:o(({field:a,errors:n})=>[s(S,M({modelValue:e.value.section_code,"onUpdate:modelValue":l[4]||(l[4]=p=>e.value.section_code=p)},a,{label:"Section code (optional)",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",gt,[s(E,{modelValue:e.value.category_id,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.category_id=a),items:d(i).list,"item-title":"title","item-value":"id",label:"Category*",density:"compact",variant:"outlined",rules:[a=>!!a||"Category is required"]},null,8,["modelValue","items","rules"])]),t("div",Vt,[s(E,{modelValue:e.value.company_id,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.company_id=a),items:d(b).list,"item-title":"title","item-value":"id",label:"Company*",density:"compact",variant:"outlined",rules:[a=>!!a||"Company is required"]},null,8,["modelValue","items","rules"])]),t("div",bt,[s(E,{modelValue:e.value.location_id,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.location_id=a),items:d(k).list,"item-title":"title","item-value":"id",label:"Location*",density:"compact",variant:"outlined",rules:[a=>!!a||"Location is required"]},null,8,["modelValue","items","rules"])]),t("div",ht,[s(S,{style:{width:"33.33%"},modelValue:e.value.company_code,"onUpdate:modelValue":l[9]||(l[9]=a=>e.value.company_code=a),readonly:"",label:"Company Code",variant:"outlined",density:"compact",apped:d(re)},null,8,["modelValue","apped"]),s(G,{icon:d(re),class:"mt-3 mx-1"},null,8,["icon"]),s(S,{style:{width:"33.33%"},readonly:"",modelValue:e.value.category_code,"onUpdate:modelValue":l[10]||(l[10]=a=>e.value.category_code=a),label:"Asset Code",variant:"outlined",density:"compact"},null,8,["modelValue"]),s(G,{icon:d(re),class:"mt-3 mx-1"},null,8,["icon"]),s(d(z),{name:"Asset Number",modelValue:e.value.asset_tag,"onUpdate:modelValue":l[12]||(l[12]=a=>e.value.asset_tag=a)},{default:o(({field:a,errors:n})=>[s(S,M({style:{width:"33.33%"}},a,{"error-messages":n,type:"number",modelValue:e.value.asset_tag,"onUpdate:modelValue":l[11]||(l[11]=p=>e.value.asset_tag=p),label:"Asset Number*",variant:"outlined",density:"compact"}),null,16,["error-messages","modelValue"])]),_:1},8,["modelValue"])]),t("div",xt,[s(E,{modelValue:e.value.status_id,"onUpdate:modelValue":l[13]||(l[13]=a=>e.value.status_id=a),items:d(h).assets,disabled:e.value.status_id==2,"item-title":"title","item-value":"id",label:"Asset Status*",density:"compact",variant:"outlined",rules:[a=>!!a||"Asset Status is required"]},null,8,["modelValue","items","disabled","rules"])])]),_:1}),s(R,null,{default:o(()=>[y.page=="edit"||y.page=="view"?(r(),$("div",kt," Additional Info ")):N("",!0),y.page=="edit"||y.page=="view"?(r(),$("div",wt,[(r(!0),$(H,null,K(j.value,(a,n)=>(r(),x(q,{key:n,class:"mr-2 mb-2",onClick:()=>P(a),color:v.value==a?"primary":"white"},{default:o(()=>[U(c(a),1)]),_:2},1032,["onClick","color"]))),128))])):N("",!0),t("div",Ct,c(v.value+" Information"),1),J(t("div",St,[s(R,null,{default:o(()=>{var a;return[y.page=="edit"||y.page=="view"?(r(),$("div",Ut,[t("div",null,[U(" Date Created: "+c(d(Ve)(e.value.created_at)),1),Dt,U(" Date Updated: "+c(d(Ve)(e.value.updated_at)),1)]),t("div",null,"UpdatedBy: "+c((a=e.value.last_updated_by)==null?void 0:a.display_name),1)])):N("",!0),t("div",At,[s(d(z),{name:"Specification",modelValue:e.value.specification,"onUpdate:modelValue":l[15]||(l[15]=n=>e.value.specification=n)},{default:o(({field:n,errors:p})=>[s(S,M({modelValue:e.value.specification,"onUpdate:modelValue":l[14]||(l[14]=te=>e.value.specification=te)},n,{label:"Specification*",variant:"outlined",density:"compact","error-messages":p}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",$t,[s(S,{modelValue:e.value.model,"onUpdate:modelValue":l[16]||(l[16]=n=>e.value.model=n),label:"Model*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),t("div",Mt,[s(S,{modelValue:e.value.brand,"onUpdate:modelValue":l[17]||(l[17]=n=>e.value.brand=n),label:"Brand*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),t("div",zt,[s(E,{modelValue:e.value.condition_id,"onUpdate:modelValue":l[18]||(l[18]=n=>e.value.condition_id=n),items:d(h).conditions,"item-title":"title","item-value":"id",label:"Condition*",density:"compact",variant:"outlined",rules:[n=>!!n||"Condition is required"]},null,8,["modelValue","items","rules"])]),t("div",Nt,[s(ge,{modelValue:e.value.remarks,"onUpdate:modelValue":l[19]||(l[19]=n=>e.value.remarks=n),label:"Asset Remarks",density:"compact",variant:"outlined",rows:"2"},null,8,["modelValue"])])]}),_:1})],512),[[X,v.value=="specification"]]),J(t("div",Yt,[s(R,null,{default:o(()=>[t("div",jt,[s(d(z),{name:"Price",modelValue:e.value.price,"onUpdate:modelValue":l[21]||(l[21]=a=>e.value.price=a)},{default:o(({field:a,errors:n})=>[s(S,M({modelValue:e.value.price,"onUpdate:modelValue":l[20]||(l[20]=p=>e.value.price=p)},a,{label:"Price (Numeric Only)",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",Rt,[s(d(z),{name:"Currency",modelValue:e.value.currency,"onUpdate:modelValue":l[23]||(l[23]=a=>e.value.currency=a)},{default:o(({field:a,errors:n})=>[s(S,M({modelValue:e.value.currency,"onUpdate:modelValue":l[22]||(l[22]=p=>e.value.currency=p)},a,{label:"Currency(AED/USD)",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",It,[s(E,{modelValue:e.value.vendor_id,"onUpdate:modelValue":l[24]||(l[24]=a=>e.value.vendor_id=a),items:d(u).list,"item-title":"title","item-value":"id",label:"Vendor",density:"compact",variant:"outlined",rules:[a=>!!a||"Vendor is required"]},null,8,["modelValue","items","rules"])]),t("div",Ot,[s(d(z),{name:"PO Number",modelValue:e.value.po_number,"onUpdate:modelValue":l[26]||(l[26]=a=>e.value.po_number=a)},{default:o(({field:a,errors:n})=>[s(S,M({modelValue:e.value.po_number,"onUpdate:modelValue":l[25]||(l[25]=p=>e.value.po_number=p)},a,{label:"PO Number",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",Pt,[s(d(z),{name:"Purchase Date",modelValue:e.value.purchased_date,"onUpdate:modelValue":l[28]||(l[28]=a=>e.value.purchased_date=a)},{default:o(({field:a,errors:n})=>[s(S,M({type:"date",modelValue:e.value.purchased_date,"onUpdate:modelValue":l[27]||(l[27]=p=>e.value.purchased_date=p)},a,{label:"Purchase Date",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",Tt,[s(d(z),{name:"Purchase Remarks",modelValue:e.value.remarks_lpo,"onUpdate:modelValue":l[30]||(l[30]=a=>e.value.remarks_lpo=a)},{default:o(({field:a,errors:n})=>[s(ge,M({type:"date",modelValue:e.value.remarks_lpo,"onUpdate:modelValue":l[29]||(l[29]=p=>e.value.remarks_lpo=p)},a,{label:"Purchase Remarks",variant:"outlined",rows:"3",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[X,v.value=="purchase"]]),J(t("div",qt,[s(R,null,{default:o(()=>[t("div",Ft,[s(d(z),{name:"Capitalization Price",modelValue:e.value.capitalization_price,"onUpdate:modelValue":l[32]||(l[32]=a=>e.value.capitalization_price=a)},{default:o(({field:a,errors:n})=>[s(S,M({modelValue:e.value.capitalization_price,"onUpdate:modelValue":l[31]||(l[31]=p=>e.value.capitalization_price=p)},a,{label:"Capitalization Price",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",Lt,[s(d(z),{name:"Depreciation Percentage",modelValue:e.value.depreciation_percentage,"onUpdate:modelValue":l[34]||(l[34]=a=>e.value.depreciation_percentage=a)},{default:o(({field:a,errors:n})=>[s(S,M({modelValue:e.value.depreciation_percentage,"onUpdate:modelValue":l[33]||(l[33]=p=>e.value.depreciation_percentage=p)},a,{label:"Depreciation Percentage",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",Wt,[s(d(z),{name:"Scrap Value",modelValue:e.value.scrap_value,"onUpdate:modelValue":l[36]||(l[36]=a=>e.value.scrap_value=a)},{default:o(({field:a,errors:n})=>[s(S,M({modelValue:e.value.scrap_value,"onUpdate:modelValue":l[35]||(l[35]=p=>e.value.scrap_value=p)},a,{label:"Scrap Value",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",Et,[s(d(z),{name:"Scrap Date",modelValue:e.value.scrap_date,"onUpdate:modelValue":l[38]||(l[38]=a=>e.value.scrap_date=a)},{default:o(({field:a,errors:n})=>[s(S,M({type:"date",modelValue:e.value.scrap_date,"onUpdate:modelValue":l[37]||(l[37]=p=>e.value.scrap_date=p)},a,{label:"Scrap Date",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",Bt,[s(d(z),{name:"Capitalization Date",modelValue:e.value.capitalization_date,"onUpdate:modelValue":l[40]||(l[40]=a=>e.value.capitalization_date=a)},{default:o(({field:a,errors:n})=>[s(S,M({type:"date",modelValue:e.value.capitalization_date,"onUpdate:modelValue":l[39]||(l[39]=p=>e.value.capitalization_date=p)},a,{label:"Capitalization Date",variant:"outlined",density:"compact","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),t("div",Ht,[s(d(z),{name:"End of Life",modelValue:e.value.end_of_life,"onUpdate:modelValue":l[42]||(l[42]=a=>e.value.end_of_life=a)},{default:o(({field:a,errors:n})=>[s(S,M({type:"date",modelValue:e.value.end_of_life,"onUpdate:modelValue":l[41]||(l[41]=p=>e.value.end_of_life=p)},a,{label:"End of Life",density:"compact",variant:"outlined","error-messages":n}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[X,v.value=="financial"]]),J(t("div",Kt,[y.page!="add"?(r(),x(Qe,{key:0,asset:e.value,page:y.page},null,8,["asset","page"])):N("",!0)],512),[[X,v.value=="warranty"]]),J(t("div",Jt,[s(ct,{asset:e.value},null,8,["asset"])],512),[[X,v.value=="transfer history"]]),J(t("div",Xt,[s(tt,{asset:e.value},null,8,["asset"])],512),[[X,v.value=="maintenance"]]),J(t("div",Gt,[s(ot,{asset:e.value},null,8,["asset"])],512),[[X,v.value=="incident"]]),Qt,t("div",Zt,[s(R,null,{default:o(()=>[t("div",ea,[d(I).name!="view-asset"?(r(),x(Ye,{key:0,options:{multiSelect:!0},onSelect:f})):N("",!0)])]),_:1}),O.value.length>0?(r(),x(R,{key:0,class:"px-1"},{default:o(()=>[(r(!0),$(H,null,K(O.value,(a,n)=>(r(),$("div",{key:a.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[s(q,{style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:d(he),size:"26px",color:"error",onClick:()=>Se(a.id)},null,8,["icon","onClick"]),s(L,{onClick:()=>ye(n)},{default:o(()=>[s(ne,{src:A.value+"/file/"+a.path,cover:"","aspect-ratio":"1"},null,8,["src"])]),_:2},1032,["onClick"])]))),128)),s(oe,{modelValue:Q.value,"onUpdate:modelValue":l[44]||(l[44]=a=>Q.value=a),width:"95%","max-width":"900"},{default:o(()=>[s(L,{class:"bg-black"},{default:o(()=>[s(xe,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:Z.value,"onUpdate:modelValue":l[43]||(l[43]=a=>Z.value=a)},{default:o(()=>[(r(!0),$(H,null,K(O.value,(a,n)=>(r(),x(ke,{key:n,"reverse-transition":"fade",transition:"fade"},{default:o(()=>[t("div",ta,[s(ne,{src:A.value+"/file/"+a.path},null,8,["src"])])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):(r(),x(R,{key:1},{default:o(()=>[t("div",aa,[s(le,{color:"grey-lighten-4",class:"pa-6 text-center"},{default:o(()=>[U(" Attachment is empty at the moment. ")]),_:1})])]),_:1}))])]),_:1})]),_:1})]),_:1},8,["validation-schema"]),s(fe,{options:m.value},null,8,["options"])]),_:1},8,["loading"]))}};export{pa as _};
