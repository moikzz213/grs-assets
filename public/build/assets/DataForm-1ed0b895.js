import{a as Ke,r as _,G as We,u as Ze,O as le,I as Xe,H as he,o as n,c as y,w as d,d as o,v as et,k as E,V as tt,b as s,t as m,p as k,y as g,ae as ye,C as c,E as se,f as G,s as V,j as U,e as I,J as M,i as z,q as Q,F as N,P as ge,R as oe,Q as J,M as at,U as Ve,Y as lt,B as K,D as st,ag as ot,S as dt,T as it,ac as ut,aF as be,aG as we,aH as ke,aI as xe,aJ as nt,Z as rt,_ as ct,m as vt,n as F}from"./app-7ce7a18f.js";import{_ as pt}from"./ApppageHeader-89b54585.js";import{_ as qe,r as Se}from"./Studio-61e52861.js";import{_ as _t}from"./AppSnackBar-d0bd3624.js";import{Q as mt}from"./QrcodeReaderVue3.common-70ea6b81.js";import{d as ft,e as ht}from"./encrypt-45456806.js";import{u as Ce}from"./formatDate-b9aad8c5.js";const yt={key:0,class:"text-error text-h6"},gt={class:"col-12 v-col-md-4"},Vt={class:"v-col-12 v-col-md-8"},bt={key:0,class:"text-right no-print"},wt={class:"v-col-12 v-col-md-6"},kt={class:"v-col-12 v-col-md-6"},xt={class:"v-col-12 v-col-md-6"},qt={class:"v-col-12 v-col-md-6"},St={class:"v-col-12"},Ct={class:"wd-100"},At={class:"wd-60"},Tt={class:"wd-40"},Ut={class:"wd-60"},jt={class:"wd-40"},Et={class:"wd-100"},Ot={key:0,class:"v-col-12"},Rt=s("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),Dt=s("div",{class:"wd-15"},"ASSET CODE",-1),It=s("div",{class:"wd-5"},"QTY",-1),Nt=s("div",{class:"wd-10"},"UOM",-1),Ft=s("div",{class:"wd-10"},"WEIGHT",-1),Lt=s("div",{class:"wd-10"},"VALUE",-1),Pt=s("div",{class:"wd-15"},"REASON FOR REQUEST",-1),Bt={class:"wd-30"},Mt={class:"wd-15"},zt={class:"wd-5"},Qt={class:"wd-10"},$t={class:"wd-10"},Yt={class:"wd-10"},Gt={class:"wd-15"},Ht={class:"v-col-12 v-col-md-1 px-1"},Jt={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},Kt={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},Wt={class:"v-col-12 pt-0 pb-0"},Zt={class:"v-col-12 v-col-md-1 custom-width-description"},Xt={class:"v-col-12 v-col-md-2 d-flex"},ea={class:"v-col-12 v-col-md-1"},ta={class:"v-col-12 v-col-md-1 custom-width-uom"},aa={class:"v-col-12 v-col-md-1"},la={class:"v-col-12 v-col-md-1"},sa={class:"v-col-12 v-col-md-2 d-flex"},oa={key:0},da=s("div",null,"Additional File can be upload here",-1),ia=["data"],ua={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},na=s("div",null,"APPROVAL SETUP",-1),ra={key:0,class:"no-print"},ca=s("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),va={class:"v-col-12 v-col-md-6"},pa=s("div",{class:"v-col-12 v-col-md-1"},"Status",-1),_a=s("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),ma=s("div",{class:"wd-20"},"Requestor",-1),fa={class:"wd-50"},ha=s("div",{class:"wd-10"},"Status",-1),ya=s("div",{class:"wd-20"},"Date Approved",-1),ga={class:"wd-20"},Va={class:"wd-50"},ba={class:"wd-10"},wa={class:"wd-20"},ka={class:"v-col-12 v-col-md-2"},xa={class:"v-col-12 v-col-md-7 d-flex"},qa={class:"my-auto"},Sa={class:"v-col-12"},Ca={class:"v-col-12 text-error"},Aa=s("div",{class:"v-col-12 v-col-md-12 text-info no-print"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),Ia={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(Ae,{emit:Te}){const O=Ae,v=Ke(),W=_(!1),T=We(),Ue=Ze(),i=_({}),q=_(!1),x=_([{qty:1,attachment:{}}]),je=_(new Date),$=_(window.location.origin),Ee=(l,a)=>{x.value[l].attachment=a[0]},j=_([]),Oe=l=>{let a=null;l.map(e=>{a=j.value.find(t=>t.id==e.id),a||j.value.push(e)})},Re=l=>{j.value=j.value.filter(a=>a.id!==l)},Z=_(1),L=_("image"),De=(l,a)=>{let e=l.path.split(".");L.value=e[e.length-1],Z.value=a,P.value=!0},P=_(!1),de=_(1),Ie=l=>{de.value=l,P.value=!0},Ne=l=>{x.value[l].attachment=""},X=l=>{if(l=="approve")return"Approved By";if(l=="reviewer")return"Reviewed By";if(l=="receiver")return"Received By";if(l=="transport")return"Transport Arranged By";if(l=="releasing")return"Released By";if(l=="verify")return"Verified By"},ie=_(""),ue=_([]),Fe=async()=>{await F(v.token).get("/api/fetch/approval-setups/non-paginated/data/request").then(l=>{var a,e;ue.value=l.data,ie.value=(e=(a=l.data.filter(t=>t.id==f.value.request_type_id))==null?void 0:a[0])==null?void 0:e.title}).catch(l=>{})},D=_({}),ne=_([]),Le=async()=>{await F(v.token).get("/api/fetch/companies").then(l=>{ne.value=l.data}).catch(l=>{})},Y=_(!1),re=_(0),Pe=l=>{re.value=l,Y.value=!0},ce=async(l,a)=>{let e=re.value;a!==void 0&&(e=a),await F(v.token).get("/api/fetch/asset-info/by/asset-code/"+l).then(t=>{x.value[e].item_description=t.data.asset_name,x.value[e].asset_code=l,Y.value=!1}).catch(t=>{})},ve=_(""),pe=_(""),ee=_([]),Be=async()=>{await F(v.token).get("/api/fetch/locations/non-paginated/data").then(l=>{var a,e,t,h;ee.value=l.data,ve.value=(e=(a=l.data.filter(w=>w.id==f.value.transferred_from))==null?void 0:a[0])==null?void 0:e.title,pe.value=(h=(t=l.data.filter(w=>w.id==f.value.transferred_to))==null?void 0:t[0])==null?void 0:h.title}).catch(l=>{})},Me=()=>{x.value.push({qty:1,attachment:{}}),R()},ze=(l,a)=>{x.value.splice(a,1),R()},Qe=()=>{D.value={status:!0,type:"info",text:"Please wait..."};let l={data:i.value,assets:x.value,approval:C.value,profile_id:v.user.profile.id,role:v.user.profile.role,type:"request"};localStorage.setItem("draft-request",ht(l)),ae.value=!0,setTimeout(()=>{D.value={status:!0,type:"success",text:"Data has been saved to Draft"}},800)},_e=_("Note: Administrator needs to setup signatories first."),$e=le(()=>j.value.map(l=>l.id)),Ye=()=>{D.value={status:!0,type:"info",text:"Please wait..."};let l=x.value.map((e,t)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),a={data:i.value,assets:l,approval:C.value,profile_id:v.user.profile.id,type:"request",role:v.user.profile.role,additionalFiles:$e.value};F(v.token).post("/api/request-asset/store-update/data",a).then(e=>{let t="",h="";e.data.message?(t=e.data.message,h="success"):e.data.error&&(t=e.data.error,h="error"),D.value={status:!0,type:h,text:t},T.params.id||setTimeout(()=>{Ue.push({name:"EditRequestAsset",params:{id:e.data.id}}).catch(w=>{})},800)}).catch(e=>{D.value={status:!0,type:"error",text:"Failed to update data, kindly refresh the page and check fields if it's empty"}})},C=_([]),H=_(!0),Ge=_(["Nos","Set","Pcs","Pack","Pallet","SqM"]),te=async()=>{let l=0;T.params.id&&(l=1),await F(v.token).get("/api/fetch/request-asset/approval-setup-fetch/"+i.value.request_type_id+"?isEdit="+l).then(a=>{var e,t,h,w,A,p,u;C.value=(e=a.data)==null?void 0:e.stages,console.log("approvalSetupList.value 1111",(t=a.data)==null?void 0:t.stages),T.params.id&&C.value.length>0&&(C.value.map((b,S)=>(b.profile_id=r.value[S].profile_id,b.status=r.value[S].status,b.date_approved=r.value[S].date_approved,b.reason_rejected=r.value[S].reason_rejected,b)),C.value.length>1&&(C.value[r.value.length-1]={id:r.value[r.value.length-1].id,profile_id:r.value[r.value.length-1].profile_id,status:r.value[r.value.length-1].status,date_approved:r.value[r.value.length-1].date_approved,status:r.value[r.value.length-1].status,reason_rejected:"",types:r.value[r.value.length-1].approval_type,sort:r.value[r.value.length-1].orders,request_asset_id:r.value[r.value.length-1].request_asset_id,signatures:[{id:(h=r.value[r.value.length-1])==null?void 0:h.profile.id,display_name:(w=r.value[r.value.length-1])==null?void 0:w.profile.display_name,first_name:(A=r.value[r.value.length-1])==null?void 0:A.profile.first_name,last_name:(p=r.value[r.value.length-1])==null?void 0:p.profile.last_name}]})),console.log("approvalSetupList.value",C.value),((u=a.data)==null?void 0:u.stages.length)>0?H.value=!0:H.value=!1}).catch(a=>{})},ae=_(!1),R=()=>{let l=!1;W.value=!1,i.value.company_id&&i.value.request_type_id&&i.value.subject&&i.value.transferred_from&&i.value.transferred_to&&(l=!0);let a=!0;x.value.map(t=>{(!t.item_description||!t.reason_for_request||!t.uom||!t.qty||t.qty<=0)&&(a=!1)});let e=!0;C.value.map(t=>{t.profile_id||(e=!1)}),e&&a&&l&&(W.value=!0)},me=l=>{let a={status:l,profile_id:v.user.profile.id,ID:f.value.id};F(v.token).post("/api/request-asset/change-request/data",a).then(e=>{D.value={status:!0,type:"success",text:e.data.message},f.value.status=l,Te("saved",e.data.message)}).catch(e=>{})},fe=(l,a=6)=>{let e="00000"+l;return e.substring(e.length-a)},r=_([]),f=_({}),B=_({});Xe(()=>{var l,a,e,t,h,w,A,p;if(Fe().then(()=>{Le().then(()=>{Be()})}),T.params.id){q.value=!0;let u=O.objectdata;f.value=u,i.value.company_id=u.company_id,i.value.request_type_id=u.request_type_id,i.value.subject=u.subject,i.value.transferred_from=u.transferred_from,i.value.transferred_to=u.transferred_to,i.value.id=u.id,i.value.requestor_id=u.profile_id,r.value=u.request_approvals,x.value=u.items,B.value=(a=(l=u.request_approvals)==null?void 0:l.filter(b=>b.status=="awaiting-approval"))==null?void 0:a[0],!B.value&&u.status=="reject"&&(B.value=(t=(e=u.request_approvals)==null?void 0:e.filter(b=>b.status=="reject"))==null?void 0:t[0]),j.value=u.attachment,te()}else{i.value.company_id=v.user.profile.company_id;let u=localStorage.getItem("draft-request");u&&(u=ft(u),ae.value=!0,i.value.request_type_id=(h=u==null?void 0:u.data)==null?void 0:h.request_type_id,i.value.transferred_from=(w=u==null?void 0:u.data)==null?void 0:w.transferred_from,i.value.transferred_to=(A=u==null?void 0:u.data)==null?void 0:A.transferred_to,i.value.subject=(p=u==null?void 0:u.data)==null?void 0:p.subject,i.value.request_type_id&&te().then(()=>{r.value=u.approval,C.value.map((b,S)=>(b.profile_id=r.value[S].profile_id,b.status=r.value[S].status,b.date_approved=r.value[S].date_approved,b.reason_rejected=r.value[S].reason_rejected,b))}),x.value=u==null?void 0:u.assets)}}),he(i.value,async(l,a)=>{R()}),he(x.value,async(l,a)=>{R()}),le(()=>v.user.role=="receiving-releasing"||v.user.role=="facility");const He=_("https://assets.grandiose.ae"),Je=le(()=>{var A,p,u,b,S;let l=null,a=He.value+"/pv/employee-signatory",e=Se(50),t=Se(50),h=95,w=99;return((p=(A=v.user)==null?void 0:A.profile)==null?void 0:p.id)==((u=B.value)==null?void 0:u.profile_id)&&(h=(b=B.value)==null?void 0:b.profile_id,w=(S=B.value)==null?void 0:S.orders),f.value&&(l=a+"/transfer/approvals?o="+w+"&key="+e+"&pid="+h+"&pv="+t+"&id="+f.value.id),l});return(l,a)=>(n(),y(vt,null,{default:d(()=>[o(pt,{title:O.headertitle,class:"no-print"},null,8,["title"]),o(V,{class:"mb-3"},{default:d(()=>[o(et,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[o(E,null,{default:d(()=>[o(tt,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:d(()=>[s("div",null,m(O.headertitle)+" "+m(ae.value?"(Draft)":""),1),H.value?g("",!0):(n(),k("div",yt,m(_e.value),1)),q.value?(n(),k("div",{key:1,class:ye(f.value.status=="cancelled"?"text-error":f.value.status=="complete"?"text-success":"")}," STATUS ("+m(f.value.status)+") ",3)):g("",!0),s("div",null,"DATE: "+m(c(Ce)(je.value)),1)]),_:1}),o(se),o(G,null,{default:d(()=>[o(V,{class:"no-print"},{default:d(()=>[q.value?(n(),k("div",{key:0,class:ye(`${f.value.status=="complete"?"v-col-12":"v-col-md-12"}`)},[o(V,null,{default:d(()=>[s("div",gt," REQUEST NO: SN-5"+m(fe(f.value.id)),1),s("div",Vt,[q.value&&(f.value.status=="pending"||f.value.status=="cancelled")?(n(),k("div",bt,[i.value.requestor_id==c(v).user.profile.id&&f.value.status=="pending"?(n(),y(U,{key:0,onClick:a[0]||(a[0]=e=>me("cancelled")),color:"warning"},{default:d(()=>[I("Cancel request")]),_:1})):g("",!0),i.value.requestor_id==c(v).user.profile.id&&f.value.status=="cancelled"?(n(),y(U,{key:1,onClick:a[1]||(a[1]=e=>me("pending")),size:"small",color:"info"},{default:d(()=>[I("Change status to Pending")]),_:1})):g("",!0)])):g("",!0)])]),_:1})],2)):g("",!0),s("div",wt,[o(M,{items:ue.value,modelValue:i.value.request_type_id,"onUpdate:modelValue":[a[2]||(a[2]=e=>i.value.request_type_id=e),te],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:q.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),s("div",kt,[o(M,{items:ne.value,modelValue:i.value.company_id,"onUpdate:modelValue":a[3]||(a[3]=e=>i.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),s("div",xt,[o(M,{items:ee.value,modelValue:i.value.transferred_from,"onUpdate:modelValue":a[4]||(a[4]=e=>i.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),s("div",qt,[o(M,{items:ee.value,modelValue:i.value.transferred_to,"onUpdate:modelValue":a[5]||(a[5]=e=>i.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"])]),s("div",St,[o(z,{modelValue:i.value.subject,"onUpdate:modelValue":a[6]||(a[6]=e=>i.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),o(V,{class:"for-print-flex mx-2 mb-1"},{default:d(()=>{var e,t;return[s("div",Ct," REQUEST NO: "+m(f.value.id?"SN-5"+fe(f.value.id):""),1),s("div",At," TYPE OF REQUEST: "+m(ie.value),1),s("div",Tt," COMPANY: "+m((t=(e=f.value)==null?void 0:e.company)==null?void 0:t.title),1),s("div",Ut," LOCATION FROM: "+m(ve.value),1),s("div",jt," LOCATION TO: "+m(pe.value),1),s("div",Et," SUBJECT: "+m(f.value.subject),1)]}),_:1})]),_:1})]),_:1}),o(E,{class:"my-2"},{default:d(()=>[o(G,null,{default:d(()=>[o(V,null,{default:d(()=>{var e;return[f.value.status!="complete"&&(!c(T).params.id||i.value.requestor_id==c(v).user.profile.id&&((e=O.objectdata)==null?void 0:e.status)=="pending"||c(v).user.profile.role=="superadmin"||c(v).user.profile.role=="administrator")?(n(),k("div",Ot,[o(U,{size:"small",color:"primary",class:"no-print",onClick:Me},{default:d(()=>[I("Add")]),_:1})])):g("",!0)]}),_:1}),o(V,{class:"for-print-flex mx-2 header mb-1 mt-0"},{default:d(()=>[Rt,Dt,It,Nt,Ft,Lt,Pt]),_:1}),(n(!0),k(N,null,Q(x.value,(e,t)=>(n(),y(V,{key:t,class:"for-print-flex mx-2 row-bordered mb-1"},{default:d(()=>[s("div",Bt,m(e.item_description),1),s("div",Mt,m(e.asset_code),1),s("div",zt,m(e.qty),1),s("div",Qt,m(e.uom),1),s("div",$t,m(e.weight),1),s("div",Yt,m(e.item_value),1),s("div",Gt,m(e.reason_for_request),1)]),_:2},1024))),128)),(n(!0),k(N,null,Q(x.value,(e,t)=>(n(),y(V,{key:t,class:"no-print"},{default:d(()=>{var h,w,A;return[s("div",Ht,[(h=e.attachment)!=null&&h.id?(n(),y(V,{key:0,class:"px-1"},{default:d(()=>[s("div",Jt,[o(z,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":p=>e.attachment.id=p},null,8,["modelValue","onUpdate:modelValue"]),!q.value||q.value&&i.value.requestor_id==c(v).user.profile.id?(n(),y(U,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:c(ge),size:"16px",color:"error",onClick:()=>Ne(t,e.attachment.id)},null,8,["icon","onClick"])):g("",!0),o(E,{onClick:()=>Ie(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),o(oe,{modelValue:P.value,"onUpdate:modelValue":a[7]||(a[7]=p=>P.value=p),width:"95%","max-width":"900"},{default:d(()=>[o(E,{class:"bg-black"},{default:d(()=>[s("div",Kt,[o(J,{src:$.value+"/file/"+de.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(n(),y(V,{key:1,class:"mt-0"},{default:d(()=>[s("div",Wt,[o(at,{color:"grey-lighten-4",class:"text-center"},{default:d(()=>[o(qe,{options:{multiSelect:!1,type:"request-asset"},onSelect:p=>Ee(t,p)},null,8,["onSelect"])]),_:2},1024)])]),_:2},1024))]),s("div",Zt,[o(Ve,{modelValue:e.item_description,"onUpdate:modelValue":[p=>e.item_description=p,R],variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"ITEM DESC*"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Xt,[o(z,{modelValue:e.asset_code,"onUpdate:modelValue":p=>e.asset_code=p,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE","append-inner-icon":c(lt),"onClick:appendInner":p=>ce(e.asset_code,t)},null,8,["modelValue","onUpdate:modelValue","append-inner-icon","onClick:appendInner"]),(!c(T).params.id||i.value.requestor_id==c(v).user.profile.id&&((w=O.objectdata)==null?void 0:w.status)=="pending"||c(v).user.profile.role=="superadmin"||c(v).user.profile.role=="administrator")&&f.value.status!="complete"?(n(),y(K,{key:0,onClick:p=>Pe(t),class:"ml-2 my-auto",size:"x-small",icon:c(st)},null,8,["onClick","icon"])):g("",!0)]),s("div",ea,[o(z,{type:"number",modelValue:e.qty,"onUpdate:modelValue":[p=>e.qty=p,R],variant:"outlined",density:"compact","hide-details":"",label:"QTY*"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ta,[o(M,{items:Ge.value,modelValue:e.uom,"onUpdate:modelValue":[p=>e.uom=p,R],variant:"outlined",density:"compact","hide-details":"",label:"UOM*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),s("div",aa,[o(z,{type:"number",modelValue:e.weight,"onUpdate:modelValue":p=>e.weight=p,variant:"outlined",density:"compact","hide-details":"",disabled:"",label:"WGT(KG)"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",la,[o(z,{type:"number",modelValue:e.item_value,"onUpdate:modelValue":p=>e.item_value=p,variant:"outlined",density:"compact","hide-details":"",disabled:"",label:"VALUE"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",sa,[o(Ve,{modelValue:e.reason_for_request,"onUpdate:modelValue":p=>e.reason_for_request=p,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON*"},null,8,["modelValue","onUpdate:modelValue"]),!q.value||q.value&&c(v).user.profile.id==O.objectdata.profile_id&&((A=O.objectdata)==null?void 0:A.status)=="pending"?(n(),y(K,{key:0,size:"small",onClick:()=>ze(e.id,t),icon:c(ot),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):g("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),i.value.request_type_id==2?(n(),y(E,{key:0},{default:d(()=>[o(G,null,{default:d(()=>{var e;return[!q.value||q.value&&i.value.requestor_id==c(v).user.profile.id?(n(),k("div",oa,[da,o(qe,{options:{multiSelect:!0,type:"request-asset"},onSelect:Oe})])):g("",!0),((e=j.value)==null?void 0:e.length)>0?(n(),y(V,{key:1,class:"px-1 mt-4"},{default:d(()=>[(n(!0),k(N,null,Q(j.value,(t,h)=>(n(),k("div",{key:t.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[q.value&&(f.value.status=="pending"||f.value.status=="cancelled")?(n(),y(U,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:c(ge),size:"20px",color:"error",onClick:()=>Re(t.id)},null,8,["icon","onClick"])):g("",!0),o(E,{onClick:()=>De(t,h)},{default:d(()=>[t.mime=="image/jpeg"||t.mime=="image/png"?(n(),y(J,{key:0,src:$.value+"/file/"+t.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(n(),y(J,{key:1,src:$.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),o(oe,{modelValue:P.value,"onUpdate:modelValue":a[9]||(a[9]=t=>P.value=t),width:"95%","max-width":"900"},{default:d(()=>[o(E,{class:"bg-black"},{default:d(()=>[o(dt,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:Z.value,"onUpdate:modelValue":a[8]||(a[8]=t=>Z.value=t)},{default:d(()=>[(n(!0),k(N,null,Q(j.value,(t,h)=>(n(),y(it,{key:h,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[s("div",{style:ut(`${L.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[L.value=="jpg"||L.value=="jpeg"||L.value=="png"?(n(),y(J,{key:0,src:$.value+"/file/"+t.path},null,8,["src"])):g("",!0),L.value=="pdf"?(n(),k("object",{key:1,data:$.value+"/file/"+t.path,type:"application/pdf",width:"100%",height:"800px"},null,8,ia)):g("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):g("",!0)]}),_:1})]),_:1})):g("",!0),o(E,{class:"my-2"},{default:d(()=>[o(G,null,{default:d(()=>[o(V,null,{default:d(()=>[s("div",ua,[na,c(T).params.id?(n(),k("div",ra,[o(U,{color:"info",size:"small",target:"_blank",href:Je.value},{default:d(()=>[I("View Approval Page")]),_:1},8,["href"])])):g("",!0)]),o(se)]),_:1}),o(V,{class:"no-print"},{default:d(()=>{var e,t;return[ca,s("div",va,m((t=(e=f.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),pa,_a]}),_:1}),o(V,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:d(()=>{var e,t;return[ma,s("div",fa,m((t=(e=f.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),ha,ya]}),_:1}),(n(!0),k(N,null,Q(r.value,e=>(n(),y(V,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:d(()=>{var t;return[s("div",ga,m(X(e.approval_type)),1),s("div",Va,m((t=e==null?void 0:e.profile)==null?void 0:t.display_name),1),s("div",ba,[e.status?(n(),y(K,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?c(be):e.status=="pending"?c(we):e.status=="reject"?c(ke):c(xe),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):g("",!0)]),s("div",wa,m(e.date_approved),1)]}),_:2},1024))),128)),H.value?(n(),k(N,{key:0},[(n(!0),k(N,null,Q(C.value,(e,t)=>(n(),y(V,{class:"no-print",key:e.id},{default:d(()=>[s("div",ka,m(e.types?X(e.types):X(e.approval_type)),1),s("div",xa,[o(M,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[h=>e.profile_id=h,R],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),o(U,{variant:"text",size:"x-small"},{default:d(()=>[e.status?(n(),y(K,{key:0,class:"mx-2 my-3 no-print",icon:e.status=="awaiting-approval"?c(be):e.status=="pending"?c(we):e.status=="reject"?c(ke):c(xe),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):g("",!0),o(nt,{activator:"parent",location:"top","max-width":"400"},{default:d(()=>[I(m(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)]),s("div",qa,m(e.date_approved?c(Ce)(e.date_approved):""),1)]),_:2},1024))),128)),o(V,null,{default:d(()=>{var e;return[o(se),s("div",Sa,[(!c(T).params.id||i.value.requestor_id==c(v).user.profile.id&&((e=O.objectdata)==null?void 0:e.status)=="pending"||c(v).user.profile.role=="superadmin"||c(v).user.profile.role=="administrator")&&f.value.status!="complete"?(n(),y(U,{key:0,disabled:!W.value,onClick:Ye,class:"no-print",color:"primary"},{default:d(()=>[I(m(c(T).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):g("",!0),c(T).params.id?g("",!0):(n(),y(U,{key:1,size:"small",class:"mx-3",onClick:Qe,color:"warning"},{default:d(()=>[I("Save as Draft")]),_:1}))])]}),_:1})],64)):(n(),y(V,{key:1,class:"no-print"},{default:d(()=>[s("div",Ca,m(_e.value),1)]),_:1})),o(V,null,{default:d(()=>[Aa]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(_t,{options:D.value},null,8,["options"]),o(oe,{width:"500",modelValue:Y.value,"onUpdate:modelValue":a[11]||(a[11]=e=>Y.value=e)},{default:d(()=>[o(E,null,{default:d(()=>[o(G,null,{default:d(()=>[o(c(mt.QrcodeStream),{onDecode:ce})]),_:1}),o(rt,null,{default:d(()=>[o(ct),o(U,{text:"Close",onClick:a[10]||(a[10]=e=>Y.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ia as _};
