import{r as n,a as Z,u as ee,G as te,H as ae,P as le,I as se,c as g,w as i,m as oe,n as q,o as v,d as s,v as z,k as K,s as L,J as ne,_ as re,i as ie,h as de,b as l,x as ue,C as u,j as _,e as D,y as x,p as I,q as ce,t as m,K as pe,L as ve,aq as me,ar as fe,F as ge,N as ye,O as xe}from"./app-812b75bf.js";import{_ as be}from"./ApppageHeader-7c23cef2.js";import{d as Ce,e as ke}from"./encrypt-a6633410.js";import{_ as he}from"./AppSnackBar-119db7b0.js";import{_ as Ve}from"./DialogForm-dcc4c52a.js";import{u as _e}from"./categories-7719abce.js";import"./index.esm-39016cb9.js";import"./Studio-1c617f8a.js";const we=l("div",{class:"mt-2 mr-2"},"Show",-1),Se={class:"v-col-12"},$e={class:"text-right text-capitalize"},Ne={class:"d-flex align-center justify-end"},Re={__name:"List",setup(qe){const h=n({status:!1,type:"primary",text:null}),o=Z(),T=ee(),w=te(),d=n({loading:!1,data:[]}),S=n(0),U=n(0),y=n(""),J=n([10,20,50,100]),$=n(10),G=()=>{f()},B=()=>{localStorage.setItem("vendor-search",ke(y.value)),f()},H=()=>{y.value="",localStorage.setItem("vendor-search",""),f()},c=n(w.params&&w.params.page?w.params.page:1),V=n([]),O=n(""),E=n(0),p=t=>{d.value.loading=!0,V.value[0]=t,E.value%2?V.value[1]="DESC":V.value[1]="ASC",E.value++,O.value=JSON.stringify(V.value),f()},f=async()=>{d.value.loading=!0,await q(o.token).get("/api/vendors/all?page="+c.value+"&show="+$.value+"&search="+y.value+"&sort="+O.value).then(t=>{S.value=t.data.last_page?t.data.last_page:t.data.length,c.value=t.data.current_page?t.data.current_page:c.value,U.value=t.data.total?t.data.total:t.data.length,d.value.data=t.data.data?t.data.data:t.data,d.value.loading=!1}).catch(t=>{d.value.loading=!1})};ae(c,(t,e)=>{c.value&&t!=e&&(T.push({name:"PaginatedVendors",params:{page:c.value}}).catch(r=>{}),f(c.value))});const M=t=>{b.value={},k.value=t},Q=async t=>{k.value=!1,t.profile_id=o.user.profile.id,await q(o.token).post("/api/vendors/store-update/data",t).then(e=>{h.value={status:!0,type:"success",text:e.data.message},f()}).catch(e=>{d.value.loading=!1,console.log(e)})},N=_e();N.list.length==0&&N.getCategories(o.token);const b=n({}),W=le(()=>[{name:"category_id",label:"Category",required:!0,type:"select",data:N.list},{name:"title",label:"Vendor Name",required:!0,type:"text"},{name:"brand",label:"Brand",required:!1,type:"text"},{name:"origin",label:"Origin",required:!1,type:"text"},{name:"contact_name",label:"Name",required:!0,type:"text"},{name:"designation",label:"Designation",required:!1,type:"text"},{name:"contact_email",label:"Email",required:!0,type:"email"},{name:"contact_no",label:"Contact",required:!1,type:"number"},{name:"address",label:"Address",required:!1,type:"text"},{name:"remarks",label:"Remarks",required:!1,type:"textarea"}]),X=t=>{b.value=Object.assign({},t),b.value.type="vendor",k.value=!0},C=n(!1),P=async(t,e)=>{h.value={status:!0,type:"info",text:"Please wait..."},C.value=!0;let r={id:t,status:e,profile_id:o.user.profile.id};await q(o.token).post("/api/vendors/status-change/data",r).then(a=>{setTimeout(()=>{h.value={status:!0,type:"success",text:a.data.message},f(),C.value=!1},600)}).catch(a=>{d.value.loading=!1})},k=n(!1),Y=()=>{b.value="",k.value=!0};return se(()=>{let t=localStorage.getItem("vendor-search");t&&(y.value=Ce(t)),f()}),(t,e)=>(v(),g(oe,null,{default:i(()=>[s(be,{title:"Vendor List"}),s(L,{class:"mb-3"},{default:i(()=>[s(z,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:i(()=>[s(K,{class:"px-5"},{default:i(()=>[s(L,null,{default:i(()=>[s(z,{class:"v-col-6 v-col-md-2 v-col-sm-6 d-flex my-2"},{default:i(()=>[we,s(ne,{items:J.value,modelValue:$.value,"onUpdate:modelValue":[e[0]||(e[0]=r=>$.value=r),G],variant:"outlined",density:"compact","hide-details":"",label:"Entry"},null,8,["items","modelValue"])]),_:1}),s(re),s(z,{class:"v-col-6 v-col-md-3 v-col-sm-6 my-2"},{default:i(()=>[s(ie,{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=r=>y.value=r),variant:"outlined",density:"compact",clearable:"",label:"Search",type:"text","hide-details":"","onClick:appendOuter":B,onKeydown:de(B,["enter"]),"onClick:clear":e[2]||(e[2]=r=>H("search"))},null,8,["modelValue","onKeydown"])]),_:1})]),_:1})]),_:1})]),_:1}),l("div",Se,[s(K,{loading:d.value.loading},{default:i(()=>[s(ue,null,{default:i(()=>{var r;return[l("thead",null,[l("tr",null,[l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[3]||(e[3]=a=>p("category_id"))}," Category "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[4]||(e[4]=a=>p("title"))}," Vendors "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[5]||(e[5]=a=>p("brand"))}," Brand "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[6]||(e[6]=a=>p("origin"))}," Origin "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[7]||(e[7]=a=>p("contact_name"))}," ContactName "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[8]||(e[8]=a=>p("contact_email"))}," Email "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[9]||(e[9]=a=>p("contact_no"))}," Contact "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[10]||(e[10]=a=>p("address"))}," Address "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[11]||(e[11]=a=>p("status"))}," Status "),l("th",$e,[u(o).user.role=="superadmin"||(r=u(o).capabilities)!=null&&r.includes("add")?(v(),g(_,{key:0,size:"small",color:"primary",onClick:Y},{default:i(()=>[D("Add New")]),_:1})):x("",!0)])])]),l("tbody",null,[(v(!0),I(ge,null,ce(d.value.data,a=>{var A,j,R,F;return v(),I("tr",{key:a.id},[l("td",null,m((A=a.category)==null?void 0:A.title),1),l("td",null,m(a.title),1),l("td",null,m(a.brand),1),l("td",null,m(a.origin),1),l("td",null,m(a.contact_name),1),l("td",null,m(a.contact_email),1),l("td",null,m(a.contact_no),1),l("td",null,m(a.address),1),l("td",null,[s(pe,{class:"text-uppercase",size:"small",color:`${a.status=="active"?"success":"error"}`},{default:i(()=>[D(m(a.status),1)]),_:2},1032,["color"])]),l("td",null,[l("div",Ne,[u(o).user.role=="superadmin"||(j=u(o).capabilities)!=null&&j.includes("edit")?(v(),g(_,{key:0,loading:C.value,onClick:()=>X(a),icon:u(ve),title:"Edit",density:"compact",class:"mx-2"},null,8,["loading","onClick","icon"])):x("",!0),a.status=="active"&&(u(o).user.role=="superadmin"||(R=u(o).capabilities)!=null&&R.includes("delete"))?(v(),g(_,{key:1,density:"compact",loading:C.value,icon:u(me),onClick:()=>P(a.id,"disabled"),title:"Disable",class:"mx-2 text-error"},null,8,["loading","icon","onClick"])):x("",!0),a.status=="disabled"&&(u(o).user.role=="superadmin"||(F=u(o).capabilities)!=null&&F.includes("delete"))?(v(),g(_,{key:2,loading:C.value,density:"compact",onClick:()=>P(a.id,"active"),icon:u(fe),title:"Enable",class:"mx-2 text-success"},null,8,["loading","onClick","icon"])):x("",!0)])])])}),128))])]}),_:1}),d.value.data.length==0?(v(),g(ye,{key:0,class:"pa-3 text-center w-100"},{default:i(()=>[D("No records found")]),_:1})):x("",!0)]),_:1},8,["loading"]),S.value>1?(v(),g(xe,{key:0,modelValue:c.value,"onUpdate:modelValue":e[12]||(e[12]=r=>c.value=r),class:"my-4",length:S.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable",disabled:d.value.loading},null,8,["modelValue","length","disabled"])):x("",!0)])]),_:1}),s(Ve,{"free-form":W.value,"add-new-dialog":k.value,title:"Vendor","data-object":b.value,onCancelled:M,onSave:Q},null,8,["free-form","add-new-dialog","data-object"]),s(he,{options:h.value},null,8,["options"])]),_:1}))}};export{Re as default};
