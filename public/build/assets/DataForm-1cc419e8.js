import{a as Ye,r as m,I as Qe,u as $e,T as X,K as Ge,J as pe,o as i,c as h,w as d,d as o,v as Ke,k as C,V as He,b as a,t as c,p as V,y,af as _e,E as v,H as Z,f as Q,s as g,j as S,e as L,L as z,i as O,q as I,F as R,U as me,X as fe,W as $,P as Je,_ as he,D as ee,O as We,Y as Xe,Z as Ze,ad as et,aC as ye,aD as ge,aE as Ve,aF as we,aG as tt,m as at,n as M}from"./app-c2ab4e41.js";import{_ as lt}from"./AppPageHeader-0787efaa.js";import{_ as be,r as ke}from"./Studio-2a565cb8.js";import{_ as st}from"./AppSnackBar-ebfb4fe3.js";import{u as xe}from"./formatDate-b9aad8c5.js";const ot={key:0,class:"text-error text-h6"},dt={class:"col-12 v-col-md-4"},it={key:0,class:"v-col-12 v-col-md-8"},ut={key:0,class:"text-right no-print"},nt={class:"v-col-12 v-col-md-6"},rt={class:"v-col-12 v-col-md-6"},ct={class:"v-col-12 v-col-md-6"},vt={class:"v-col-12 v-col-md-6"},pt={class:"v-col-12"},_t={class:"wd-100"},mt={class:"wd-60"},ft={class:"wd-40"},ht={class:"wd-60"},yt={class:"wd-40"},gt={class:"wd-100"},Vt={key:0,class:"v-col-12"},wt=a("small",{class:"mx-5 text-info"},"UOM: ( pcs, pack, box, etc.. )",-1),bt=a("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),kt=a("div",{class:"wd-15"},"ASSET CODE",-1),xt=a("div",{class:"wd-5"},"QTY",-1),qt=a("div",{class:"wd-10"},"UOM",-1),At=a("div",{class:"wd-10"},"WEIGHT",-1),Tt=a("div",{class:"wd-10"},"VALUE",-1),Ct=a("div",{class:"wd-15"},"REASON FOR REQUEST",-1),St={class:"wd-30"},Ut={class:"wd-15"},jt={class:"wd-5"},Et={class:"wd-10"},Ot={class:"wd-10"},Rt={class:"wd-10"},Dt={class:"wd-15"},Nt={class:"v-col-12 v-col-md-1 px-1"},Ft={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},Lt={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},It={class:"v-col-12 pt-0 pb-0"},Mt={class:"v-col-12 v-col-md-3"},Pt={class:"v-col-12 v-col-md-2"},Bt={class:"v-col-12 v-col-md-1"},zt={class:"v-col-12 v-col-md-1"},Yt={class:"v-col-12 v-col-md-1"},Qt={class:"v-col-12 v-col-md-1"},$t={class:"v-col-12 v-col-md-2 d-flex"},Gt={key:0},Kt=a("div",null,"Additional File can be upload here",-1),Ht=["data"],Jt={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},Wt=a("div",null,"APPROVAL SETUP",-1),Xt={key:0,class:"no-print"},Zt=a("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),ea={class:"v-col-12 v-col-md-6"},ta=a("div",{class:"v-col-12 v-col-md-1"},"Status",-1),aa=a("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),la=a("div",{class:"wd-20"},"Requestor",-1),sa={class:"wd-50"},oa=a("div",{class:"wd-10"},"Status",-1),da=a("div",{class:"wd-20"},"Date Approved",-1),ia={class:"wd-20"},ua={class:"wd-50"},na={class:"wd-10"},ra={class:"wd-20"},ca={class:"v-col-12 v-col-md-2"},va={class:"v-col-12 v-col-md-7 d-flex"},pa={class:"my-auto"},_a={key:0,class:"v-col-12"},ma={class:"v-col-12 text-error"},fa=a("div",{class:"v-col-12 v-col-md-12 text-info no-print"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),ba={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(qe,{emit:Ae}){const U=qe,f=Ye(),G=m(!1),j=Qe(),Te=$e(),n=m({}),b=m(!1),k=m([{qty:1,attachment:{}}]),Ce=m(new Date),P=m(window.location.origin),Se=(l,s)=>{k.value[l].attachment=s[0]},x=m([]),Ue=l=>{let s=null;l.map(e=>{s=x.value.find(t=>t.id==e.id),s||x.value.push(e)})},je=l=>{x.value=x.value.filter(s=>s.id!==l)},K=m(1),D=m("image"),Ee=(l,s)=>{let e=l.path.split(".");D.value=e[e.length-1],K.value=s,N.value=!0},N=m(!1),te=m(1),Oe=l=>{te.value=l,N.value=!0},Re=l=>{k.value[l].attachment=""},H=l=>{if(l=="approve")return"Approved By";if(l=="reviewer")return"Reviewed By";if(l=="receiver")return"Received By";if(l=="transport")return"Transport Arranged By";if(l=="releasing")return"Released By";if(l=="verify")return"Verified By"},ae=m(""),le=m([]),De=async()=>{await M(f.token).get("/api/fetch/approval-setups/non-paginated/data/request").then(l=>{var s,e;le.value=l.data,ae.value=(e=(s=l.data.filter(t=>t.id==p.value.request_type_id))==null?void 0:s[0])==null?void 0:e.title}).catch(l=>{})},B=m({}),se=m([]),Ne=async()=>{await M(f.token).get("/api/fetch/companies").then(l=>{se.value=l.data}).catch(l=>{})},oe=m(""),de=m(""),J=m([]),Fe=async()=>{await M(f.token).get("/api/fetch/locations/non-paginated/data").then(l=>{var s,e,t,u;J.value=l.data,oe.value=(e=(s=l.data.filter(w=>w.id==p.value.transferred_from))==null?void 0:s[0])==null?void 0:e.title,de.value=(u=(t=l.data.filter(w=>w.id==p.value.transferred_to))==null?void 0:t[0])==null?void 0:u.title}).catch(l=>{})},Le=()=>{k.value.push({qty:1,attachment:{}}),A()},Ie=(l,s)=>{k.value.splice(s,1),A()},ie=m("Note: Administrator needs to setup signatories first."),Me=X(()=>x.value.map(l=>l.id)),Pe=()=>{B.value={status:!0,type:"info",text:"Please wait..."};let l=k.value.map((e,t)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),s={data:n.value,assets:l,approval:q.value,profile_id:f.user.profile.id,type:"request",role:f.user.profile.role,additionalFiles:Me.value};M(f.token).post("/api/request-asset/store-update/data",s).then(e=>{let t="",u="";e.data.message?(t=e.data.message,u="success"):e.data.error&&(t=e.data.error,u="error"),B.value={status:!0,type:u,text:t},j.params.id||setTimeout(()=>{Te.push({name:"EditRequestAsset",params:{id:e.data.id}}).catch(w=>{})},800)}).catch(e=>{B.value={status:!0,type:"error",text:"Failed to update data, kindly refresh the page and check fields if it's empty"}})},q=m([]),Y=m(!0),ue=async()=>{await M(f.token).get("/api/fetch/request-asset/approval-setup-fetch/"+n.value.request_type_id).then(l=>{var s,e,t,u,w,_;q.value=(s=l.data)==null?void 0:s.stages,j.params.id&&q.value.length>0&&(q.value.map((T,E)=>(T.profile_id=r.value[E].profile_id,T.status=r.value[E].status,T.date_approved=r.value[E].date_approved,T.reason_rejected=r.value[E].reason_rejected,T)),q.value.length>1&&(q.value[r.value.length-1]={id:r.value[r.value.length-1].id,profile_id:r.value[r.value.length-1].profile_id,status:r.value[r.value.length-1].status,date_approved:r.value[r.value.length-1].date_approved,status:r.value[r.value.length-1].status,reason_rejected:"",types:r.value[r.value.length-1].approval_type,sort:r.value[r.value.length-1].orders,request_asset_id:r.value[r.value.length-1].request_asset_id,signatures:[{id:(e=r.value[r.value.length-1])==null?void 0:e.profile.id,display_name:(t=r.value[r.value.length-1])==null?void 0:t.profile.display_name,first_name:(u=r.value[r.value.length-1])==null?void 0:u.profile.first_name,last_name:(w=r.value[r.value.length-1])==null?void 0:w.profile.last_name}]})),((_=l.data)==null?void 0:_.stages.length)>0?Y.value=!0:Y.value=!1}).catch(l=>{})},A=()=>{let l=!1;G.value=!1,n.value.company_id&&n.value.request_type_id&&n.value.subject&&n.value.transferred_from&&n.value.transferred_to&&(l=!0);let s=!0;k.value.map(t=>{(!t.item_description||!t.reason_for_request||!t.uom||!t.qty||t.qty<=0)&&(s=!1)});let e=!0;q.value.map(t=>{t.profile_id||(e=!1)}),e&&s&&l&&(G.value=!0)},ne=l=>{let s={status:l,profile_id:f.user.profile.id,ID:p.value.id};M(f.token).post("/api/request-asset/change-request/data",s).then(e=>{B.value={status:!0,type:"success",text:e.data.message},p.value.status=l,Ae("saved",e.data.message)}).catch(e=>{})},re=(l,s=6)=>{let e="00000"+l;return e.substring(e.length-s)},r=m([]),p=m({}),F=m({});Ge(()=>{var l,s,e,t;if(De().then(()=>{Ne().then(()=>{Fe()})}),j.params.id){b.value=!0;let u=U.objectdata;p.value=u,n.value.company_id=u.company_id,n.value.request_type_id=u.request_type_id,n.value.subject=u.subject,n.value.transferred_from=u.transferred_from,n.value.transferred_to=u.transferred_to,n.value.id=u.id,n.value.requestor_id=u.profile_id,r.value=u.request_approvals,k.value=u.items,F.value=(s=(l=u.request_approvals)==null?void 0:l.filter(w=>w.status=="awaiting-approval"))==null?void 0:s[0],!F.value&&u.status=="reject"&&(F.value=(t=(e=u.request_approvals)==null?void 0:e.filter(w=>w.status=="reject"))==null?void 0:t[0]),x.value=u.attachment,ue()}else n.value.company_id=f.user.profile.company_id}),pe(n.value,async(l,s)=>{A()}),pe(k.value,async(l,s)=>{A()});const W=X(()=>f.user.role=="receiving-releasing"||f.user.role=="facility"),Be=m("https://assets.grandiose.ae"),ze=X(()=>{var _,T,E,ce,ve;let l=null,s=Be.value+"/pv/employee-signatory",e=ke(50),t=ke(50),u=95,w=99;return((T=(_=f.user)==null?void 0:_.profile)==null?void 0:T.id)==((E=F.value)==null?void 0:E.profile_id)&&(u=(ce=F.value)==null?void 0:ce.profile_id,w=(ve=F.value)==null?void 0:ve.orders),p.value&&(l=s+"/transfer/approvals?o="+w+"&key="+e+"&pid="+u+"&pv="+t+"&id="+p.value.id),l});return(l,s)=>(i(),h(at,null,{default:d(()=>[o(lt,{title:U.headertitle,class:"no-print"},null,8,["title"]),o(g,{class:"mb-3"},{default:d(()=>[o(Ke,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[o(C,null,{default:d(()=>[o(He,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:d(()=>[a("div",null,c(U.headertitle),1),Y.value?y("",!0):(i(),V("div",ot,c(ie.value),1)),b.value?(i(),V("div",{key:1,class:_e(p.value.status=="cancelled"?"text-error":p.value.status=="complete"?"text-success":"")}," STATUS ("+c(p.value.status)+") ",3)):y("",!0),a("div",null,"DATE: "+c(v(xe)(Ce.value)),1)]),_:1}),o(Z),o(Q,null,{default:d(()=>[o(g,{class:"no-print"},{default:d(()=>[b.value?(i(),V("div",{key:0,class:_e(`${p.value.status=="complete"?"v-col-12":"v-col-md-12"}`)},[o(g,null,{default:d(()=>[a("div",dt," REQUEST NO: SN-5"+c(re(p.value.id)),1),W.value?y("",!0):(i(),V("div",it,[b.value&&(p.value.status=="pending"||p.value.status=="cancelled")?(i(),V("div",ut,[n.value.requestor_id==v(f).user.profile.id&&p.value.status=="pending"?(i(),h(S,{key:0,onClick:s[0]||(s[0]=e=>ne("cancelled")),color:"warning"},{default:d(()=>[L("Cancel request")]),_:1})):y("",!0),n.value.requestor_id==v(f).user.profile.id&&p.value.status=="cancelled"?(i(),h(S,{key:1,onClick:s[1]||(s[1]=e=>ne("pending")),size:"small",color:"info"},{default:d(()=>[L("Change status to Pending")]),_:1})):y("",!0)])):y("",!0)]))]),_:1})],2)):y("",!0),a("div",nt,[o(z,{items:le.value,modelValue:n.value.request_type_id,"onUpdate:modelValue":[s[2]||(s[2]=e=>n.value.request_type_id=e),ue],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:b.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),a("div",rt,[o(z,{items:se.value,modelValue:n.value.company_id,"onUpdate:modelValue":s[3]||(s[3]=e=>n.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),a("div",ct,[o(z,{items:J.value,modelValue:n.value.transferred_from,"onUpdate:modelValue":s[4]||(s[4]=e=>n.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),a("div",vt,[o(z,{items:J.value,modelValue:n.value.transferred_to,"onUpdate:modelValue":s[5]||(s[5]=e=>n.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"])]),a("div",pt,[o(O,{modelValue:n.value.subject,"onUpdate:modelValue":s[6]||(s[6]=e=>n.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),o(g,{class:"for-print-flex mx-2 mb-1"},{default:d(()=>{var e,t;return[a("div",_t," REQUEST NO: SN-5"+c(re(p.value.id)),1),a("div",mt," TYPE OF REQUEST: "+c(ae.value),1),a("div",ft," COMPANY: "+c((t=(e=p.value)==null?void 0:e.company)==null?void 0:t.title),1),a("div",ht," LOCATION FROM: "+c(oe.value),1),a("div",yt," LOCATION TO: "+c(de.value),1),a("div",gt," SUBJECT: "+c(p.value.subject),1)]}),_:1})]),_:1})]),_:1}),o(C,{class:"my-2"},{default:d(()=>[o(Q,null,{default:d(()=>[W.value?y("",!0):(i(),h(g,{key:0},{default:d(()=>{var e;return[p.value.status!="complete"&&(!v(j).params.id||n.value.requestor_id==v(f).user.profile.id&&((e=U.objectdata)==null?void 0:e.status)=="pending"||v(f).user.profile.role=="superadmin"||v(f).user.profile.role=="administrator")?(i(),V("div",Vt,[o(S,{size:"small",color:"primary",class:"no-print",onClick:Le},{default:d(()=>[L("Add")]),_:1}),wt])):y("",!0)]}),_:1})),o(g,{class:"for-print-flex mx-2 header mb-1 mt-0"},{default:d(()=>[bt,kt,xt,qt,At,Tt,Ct]),_:1}),(i(!0),V(R,null,I(k.value,(e,t)=>(i(),h(g,{key:t,class:"for-print-flex mx-2 row-bordered mb-1"},{default:d(()=>[a("div",St,c(e.item_description),1),a("div",Ut,c(e.asset_code),1),a("div",jt,c(e.qty),1),a("div",Et,c(e.uom),1),a("div",Ot,c(e.weight),1),a("div",Rt,c(e.item_value),1),a("div",Dt,c(e.reason_for_request),1)]),_:2},1024))),128)),(i(!0),V(R,null,I(k.value,(e,t)=>(i(),h(g,{key:t,class:"no-print"},{default:d(()=>{var u,w;return[a("div",Nt,[(u=e.attachment)!=null&&u.id?(i(),h(g,{key:0,class:"px-1"},{default:d(()=>[a("div",Ft,[o(O,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":_=>e.attachment.id=_},null,8,["modelValue","onUpdate:modelValue"]),!b.value||b.value&&n.value.requestor_id==v(f).user.profile.id?(i(),h(S,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:v(me),size:"16px",color:"error",onClick:()=>Re(t,e.attachment.id)},null,8,["icon","onClick"])):y("",!0),o(C,{onClick:()=>Oe(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),o(fe,{modelValue:N.value,"onUpdate:modelValue":s[7]||(s[7]=_=>N.value=_),width:"95%","max-width":"900"},{default:d(()=>[o(C,{class:"bg-black"},{default:d(()=>[a("div",Lt,[o($,{src:P.value+"/file/"+te.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(i(),h(g,{key:1,class:"mt-0"},{default:d(()=>[a("div",It,[o(Je,{color:"grey-lighten-4",class:"text-center"},{default:d(()=>[o(be,{options:{multiSelect:!1,type:"request-asset"},onSelect:_=>Se(t,_)},null,8,["onSelect"])]),_:2},1024)])]),_:2},1024))]),a("div",Mt,[o(he,{modelValue:e.item_description,"onUpdate:modelValue":[_=>e.item_description=_,A],variant:"outlined",density:"compact","hide-details":"",clearable:"",rows:"2",label:"ITEM DESC*"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",Pt,[o(O,{modelValue:e.asset_code,"onUpdate:modelValue":_=>e.asset_code=_,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",Bt,[o(O,{type:"number",modelValue:e.qty,"onUpdate:modelValue":[_=>e.qty=_,A],variant:"outlined",density:"compact","hide-details":"",label:"QTY*"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",zt,[o(O,{modelValue:e.uom,"onUpdate:modelValue":[_=>e.uom=_,A],variant:"outlined",density:"compact","hide-details":"",label:"UOM*"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",Yt,[o(O,{type:"number",modelValue:e.weight,"onUpdate:modelValue":_=>e.weight=_,variant:"outlined",density:"compact","hide-details":"",label:"WGT(KG)"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",Qt,[o(O,{type:"number",modelValue:e.item_value,"onUpdate:modelValue":_=>e.item_value=_,variant:"outlined",density:"compact","hide-details":"",label:"VALUE"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",$t,[o(he,{modelValue:e.reason_for_request,"onUpdate:modelValue":_=>e.reason_for_request=_,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON*"},null,8,["modelValue","onUpdate:modelValue"]),!b.value||b.value&&v(f).user.profile.id==U.objectdata.profile_id&&((w=U.objectdata)==null?void 0:w.status)=="pending"?(i(),h(ee,{key:0,size:"small",onClick:()=>Ie(e.id,t),icon:v(We),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):y("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),n.value.request_type_id==2?(i(),h(C,{key:0},{default:d(()=>[o(Q,null,{default:d(()=>{var e;return[!b.value||b.value&&n.value.requestor_id==v(f).user.profile.id?(i(),V("div",Gt,[Kt,o(be,{options:{multiSelect:!0,type:"request-asset"},onSelect:Ue})])):y("",!0),((e=x.value)==null?void 0:e.length)>0?(i(),h(g,{key:1,class:"px-1 mt-4"},{default:d(()=>[(i(!0),V(R,null,I(x.value,(t,u)=>(i(),V("div",{key:t.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[b.value&&(p.value.status=="pending"||p.value.status=="cancelled")?(i(),h(S,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:v(me),size:"20px",color:"error",onClick:()=>je(t.id)},null,8,["icon","onClick"])):y("",!0),o(C,{onClick:()=>Ee(t,u)},{default:d(()=>[t.mime=="image/jpeg"||t.mime=="image/png"?(i(),h($,{key:0,src:P.value+"/file/"+t.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(i(),h($,{key:1,src:P.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),o(fe,{modelValue:N.value,"onUpdate:modelValue":s[9]||(s[9]=t=>N.value=t),width:"95%","max-width":"900"},{default:d(()=>[o(C,{class:"bg-black"},{default:d(()=>[o(Xe,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:K.value,"onUpdate:modelValue":s[8]||(s[8]=t=>K.value=t)},{default:d(()=>[(i(!0),V(R,null,I(x.value,(t,u)=>(i(),h(Ze,{key:u,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[a("div",{style:et(`${D.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[D.value=="jpg"||D.value=="jpeg"||D.value=="png"?(i(),h($,{key:0,src:P.value+"/file/"+t.path},null,8,["src"])):y("",!0),D.value=="pdf"?(i(),V("object",{key:1,data:P.value+"/file/"+t.path,type:"application/pdf",width:"100%",height:"800px"},null,8,Ht)):y("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0)]}),_:1})]),_:1})):y("",!0),o(C,{class:"my-2"},{default:d(()=>[o(Q,null,{default:d(()=>[o(g,null,{default:d(()=>[a("div",Jt,[Wt,v(j).params.id?(i(),V("div",Xt,[o(S,{color:"info",size:"small",target:"_blank",href:ze.value},{default:d(()=>[L("View Approval Page")]),_:1},8,["href"])])):y("",!0)]),o(Z)]),_:1}),o(g,{class:"no-print"},{default:d(()=>{var e,t;return[Zt,a("div",ea,c((t=(e=p.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),ta,aa]}),_:1}),o(g,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:d(()=>{var e,t;return[la,a("div",sa,c((t=(e=p.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),oa,da]}),_:1}),(i(!0),V(R,null,I(r.value,e=>(i(),h(g,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:d(()=>{var t;return[a("div",ia,c(H(e.approval_type)),1),a("div",ua,c((t=e==null?void 0:e.profile)==null?void 0:t.display_name),1),a("div",na,[e.status?(i(),h(ee,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?v(ye):e.status=="pending"?v(ge):e.status=="reject"?v(Ve):v(we),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0)]),a("div",ra,c(e.date_approved),1)]}),_:2},1024))),128)),Y.value?(i(),V(R,{key:0},[(i(!0),V(R,null,I(q.value,(e,t)=>(i(),h(g,{class:"no-print",key:e.id},{default:d(()=>[a("div",ca,c(e.types?H(e.types):H(e.approval_type)),1),a("div",va,[o(z,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[u=>e.profile_id=u,A],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),o(S,{variant:"text",size:"x-small"},{default:d(()=>[e.status?(i(),h(ee,{key:0,class:"mx-2 my-3 no-print",icon:e.status=="awaiting-approval"?v(ye):e.status=="pending"?v(ge):e.status=="reject"?v(Ve):v(we),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0),o(tt,{activator:"parent",location:"top","max-width":"400"},{default:d(()=>[L(c(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)]),a("div",pa,c(e.date_approved?v(xe)(e.date_approved):""),1)]),_:2},1024))),128)),o(g,null,{default:d(()=>{var e;return[o(Z),W.value?y("",!0):(i(),V("div",_a,[(!v(j).params.id||n.value.requestor_id==v(f).user.profile.id&&((e=U.objectdata)==null?void 0:e.status)=="pending"||v(f).user.profile.role=="superadmin"||v(f).user.profile.role=="administrator")&&p.value.status!="complete"?(i(),h(S,{key:0,disabled:!G.value,onClick:Pe,class:"no-print",color:"primary"},{default:d(()=>[L(c(v(j).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):y("",!0)]))]}),_:1})],64)):(i(),h(g,{key:1,class:"no-print"},{default:d(()=>[a("div",ma,c(ie.value),1)]),_:1})),o(g,null,{default:d(()=>[fa]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(st,{options:B.value},null,8,["options"])]),_:1}))}};export{ba as _};
