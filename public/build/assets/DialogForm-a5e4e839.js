import{r as u,U as B,b as r,c as f,l as a,k as t,A as O,G as V,V as A,m as x,t as C,W as y,f as K,q as T,D as z,F as S,d as P,j as D,y as R,a3 as k,x as N,I as U,P as E,J as G,$ as I,z as $,a0 as J}from"./app-21418298.js";import{c as L,a as M,F as W,b as H}from"./vee-validate.esm-aa24089f.js";const Q={class:"text-error"},Z={__name:"DialogForm",props:{dataObject:{type:Object,default:{}},addNewDialog:{type:Boolean,default:!1},title:{type:String,default:""},freeForm:{type:Array,default:[]}},emits:["savedResponse"],setup(j,{emit:b}){const s=j,c=u(""),o=u(!1),l=u({}),_=u(s.freeForm),g=()=>{o.value=!1,l.value={},b("cancelled",o.value)},w=()=>{o.value=!1,b("save",l.value),l.value={}},F=u({});_.value.map((d,i)=>{d.required&&(F.value[d.name]=L().required())});let q=M(F.value);return B(()=>s.addNewDialog,d=>{l.value={},o.value=d,c.value="New "+s.title,s.dataObject.type&&(l.value=s.dataObject,c.value="Edit "+s.title)}),(d,i)=>(r(),f("div",null,[a(J,{width:"600",persistent:"",modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=m=>o.value=m),onKeydown:N(g,["esc"])},{default:t(()=>[a(O,{class:"pt-3"},{default:t(()=>[a(V(W),{as:"v-form","validation-schema":V(q)},{default:t(({meta:m})=>[a(A,{class:"text-h6 d-flex"},{default:t(()=>[x(C(c.value),1),a(y),K("small",Q,C(d.errorMessage),1),a(y)]),_:1}),a(T,null,{default:t(()=>[a(z,null,{default:t(()=>[(r(!0),f(S,null,P(_.value,(e,p)=>(r(),f("div",{class:"v-col-12",key:p},[a(V(H),{name:e.name,modelValue:l.value[e.name],"onUpdate:modelValue":n=>l.value[e.name]=n},{default:t(({field:n,errors:h})=>[e.type=="text"||e.type=="number"||e.type=="email"?(r(),D(R,k({key:0,type:e.type,autofocus:p===0,modelValue:l.value[e.name],"onUpdate:modelValue":v=>l.value[e.name]=v,density:"compact",variant:"outlined",label:`${e.label}${e.required?"*":" (Optional)"}`,"hide-details":""},n,{onKeydown:N(w,["enter"]),"error-messages":h}),null,16,["type","autofocus","modelValue","onUpdate:modelValue","label","onKeydown","error-messages"])):U("",!0),e.type=="select"?(r(),D(E,k({key:1,autofocus:p===0,modelValue:l.value[e.name],"onUpdate:modelValue":v=>l.value[e.name]=v,density:"compact",variant:"outlined",label:`${e.label}${e.required?"*":""}`,items:e.data,"hide-details":"","item-value":"id","item-title":"title"},n,{"error-messages":h}),null,16,["autofocus","modelValue","onUpdate:modelValue","label","items","error-messages"])):U("",!0)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])]))),128))]),_:1})]),_:1}),a(G,{class:"mt-2"}),a(I,null,{default:t(()=>[a(y),a($,{size:"small",text:"cancel",onClick:g}),a($,{size:"small",color:"secondary",onClick:w,disabled:!m.valid},{default:t(()=>[x("Confirm")]),_:2},1032,["disabled"])]),_:2},1024)]),_:1},8,["validation-schema"])]),_:1})]),_:1},8,["modelValue","onKeydown"])]))}};export{Z as _};
