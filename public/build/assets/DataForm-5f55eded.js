import{a as et,r as _,G as tt,u as at,O as se,I as lt,H as ye,o as r,c as h,w as i,d as o,v as st,k as E,V as ot,b as s,t as v,p as V,z as y,ae as ge,y as n,E as oe,f as Q,s as g,j as C,e as A,J as I,i as K,q as z,F as N,P as Ve,R as de,Q as H,M as dt,U as be,Y as it,C as J,D as rt,ag as ut,S as nt,T as ct,ac as pt,aZ as ke,a_ as we,a$ as xe,b0 as Se,b1 as vt,Z as _t,_ as mt,m as ft,n as D}from"./app-f6102f19.js";import{_ as ht}from"./ApppageHeader-d84fe9fa.js";import{_ as Ce,r as Te}from"./Studio-c4b6c6c7.js";import{_ as yt}from"./AppSnackBar-2769527a.js";import{Q as gt}from"./QrcodeReaderVue3.common-26bec70c.js";import{d as Vt,e as bt}from"./encrypt-0ef84d7e.js";import{u as Ae}from"./formatDate-559e9d83.js";const kt={key:0,class:"text-error text-h6"},wt={class:"v-col-12 v-col-md-8"},xt={key:0,class:"no-print"},St={class:"v-col-12 v-col-md-6"},Ct={class:"v-col-12 v-col-md-6"},Tt={class:"v-col-12 v-col-md-6"},At={class:"v-col-12 v-col-md-6 d-flex"},qt={class:"v-col-12"},Ut={class:"wd-100"},jt={class:"wd-60 text-caption"},Ot={class:"wd-40"},Et={class:"wd-60"},Dt={class:"wd-40"},Rt={class:"wd-100"},It={class:"v-col-12"},Nt=s("small",{class:"mx-5 text-info"},"UOM: ( pcs, pack, box, etc.. )",-1),Lt=s("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),Ft=s("div",{class:"wd-15"},"ASSET CODE",-1),zt=s("div",{class:"wd-5"},"QTY",-1),Mt=s("div",{class:"wd-10"},"UOM",-1),Pt=s("div",{class:"wd-10"},"WEIGHT",-1),Bt=s("div",{class:"wd-10"},"VALUE",-1),$t=s("div",{class:"wd-15"},"REASON FOR REQUEST",-1),Qt={class:"wd-30"},Yt={class:"wd-15"},Gt={class:"wd-5"},Kt={class:"wd-10"},Ht={class:"wd-10"},Jt={class:"wd-10"},Zt={class:"wd-15"},Wt={class:"v-col-12 v-col-md-1 px-1 no-print"},Xt={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},ea={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},ta={class:"v-col-12 pt-0 pb-0"},aa={class:"v-col-12 v-col-md-1 custom-width-description"},la={class:"v-col-12 v-col-md-2 d-flex"},sa={class:"v-col-12 v-col-md-1"},oa={class:"v-col-12 v-col-md-1 custom-width-uom"},da={class:"v-col-12 v-col-md-1 my-auto"},ia=s("br",null,null,-1),ra=s("small",null,"(KG)",-1),ua={class:"v-col-12 v-col-md-1 my-auto"},na=s("br",null,null,-1),ca=s("small",null,"(AED)",-1),pa={class:"v-col-12 v-col-md-2 d-flex"},va={key:0},_a=s("div",null,"Additional File can be upload here",-1),ma=["data"],fa={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},ha=s("div",null,"APPROVAL SETUP",-1),ya={key:0,class:"no-print"},ga=s("div",{class:"wd-20"},"Requestor",-1),Va={class:"wd-50"},ba=s("div",{class:"wd-10"},"Status",-1),ka=s("div",{class:"wd-20"},"Date Approved",-1),wa={class:"wd-20"},xa={class:"wd-50"},Sa={class:"wd-10"},Ca={class:"wd-20"},Ta=s("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),Aa={class:"v-col-12 v-col-md-6"},qa=s("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),Ua={key:0,class:"v-col-12 v-col-md-2"},ja={class:"v-col-12 v-col-md-2"},Oa={class:"v-col-12 v-col-md-6 d-flex"},Ea={class:"my-auto v-col-12 v-col-md-2"},Da={key:0,class:"v-col-12 v-col-md-2"},Ra={class:"v-col-12 no-print"},Ia={class:"v-col-12 text-error"},Na=s("div",{class:"v-col-12 no-print v-col-md-12 text-info"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),Qa={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(qe,{emit:Ue}){const U=qe,c=et(),ie=_("Note: Administrator needs to setup signatories first."),Z=_(!1),W=_(!1),j=tt(),je=at(),u=_({}),b=_(!1),w=_([{qty:1,attachment:{}}]),Oe=_(new Date),X=_(["commercial-manager","superadmin"]),Ee=_(["Nos","Set","Pcs","Pack","Pallet","SqM"]),ee=a=>{if(a=="approve")return"Approved By";if(a=="reviewer")return"Reviewed By";if(a=="receiver")return"Received By";if(a=="transport")return"Transport Arranged By";if(a=="releasing")return"Released By";if(a=="verify")return"Verified By"},M=_(window.location.origin),De=(a,l)=>{w.value[a].attachment=l[0]},O=_([]),Re=a=>{let l=null;a.map(e=>{l=O.value.find(t=>t.id==e.id),l||O.value.push(e)})},Ie=a=>{O.value=O.value.filter(l=>l.id!==a)},L=_("image"),Ne=(a,l)=>{let e=a.path.split(".");L.value=e[e.length-1],P.value=l,F.value=!0},F=_(!1),P=_(1),Le=a=>{P.value=a,F.value=!0},Fe=a=>{w.value[a].attachment=""},re=_(""),B=_(!1),ue=_([]),ze=async()=>{let a="request";U.headertitle=="Transfer Assets"&&(a="transfer"),await D(c.token).get("/api/fetch/approval-setups/non-paginated/data/"+a).then(l=>{var e,t;ue.value=l.data,re.value=(t=(e=l.data.filter(f=>f.id==m.value.request_type_id))==null?void 0:e[0])==null?void 0:t.title}).catch(l=>{})},$=_(!1),ne=_(0),Me=a=>{ne.value=a,$.value=!0},ce=async(a,l)=>{let e=ne.value;l!==void 0&&(e=l),await D(c.token).get("/api/fetch/asset-info/by/asset-code/"+a).then(t=>{w.value[e].item_description=t.data.asset_name,w.value[e].asset_code=a,$.value=!1}).catch(t=>{})},T=_({}),pe=_([]),Pe=async()=>{await D(c.token).get("/api/fetch/companies").then(a=>{pe.value=a.data}).catch(a=>{})},ve=_(""),_e=_(""),te=_([]),Be=async()=>{await D(c.token).get("/api/fetch/locations/non-paginated/data").then(a=>{var l,e,t,f;te.value=a.data,ve.value=(e=(l=a.data.filter(k=>k.id==m.value.transferred_from))==null?void 0:l[0])==null?void 0:e.title,_e.value=(f=(t=a.data.filter(k=>k.id==m.value.transferred_to))==null?void 0:t[0])==null?void 0:f.title}).catch(a=>{})},$e=()=>{w.value.push({qty:1,attachment:{}}),R()},Qe=()=>{W.value=!0,T.value={status:!0,type:"info",text:"Updating location..."};let a={authID:c.user.profile.id,data:u.value};D(c.token).post("/api/request-update/location",a).then(l=>{setTimeout(()=>{W.value=!1,T.value={status:!0,type:"success",text:"Location updated."}},1e3)}).catch(l=>{})},Ye=(a,l)=>{T.value={status:!0,type:"info",text:"Updating User..."};let e={authID:c.user.profile.id,id:u.value.id,profile_id:a,orders:l};D(c.token).post("/api/request-update/approver",e).then(t=>{setTimeout(()=>{T.value={status:!0,type:"success",text:"User has been updated."}},800)}).catch(t=>{})},Ge=(a,l)=>{w.value.splice(l,1),R()},Ke=()=>{T.value={status:!0,type:"success",text:"Draft has been removed!"},localStorage.removeItem("draft-transfer"),setTimeout(()=>{location.reload()},500)},He=()=>{T.value={status:!0,type:"info",text:"Please wait..."};let a={data:u.value,assets:w.value,approval:q.value,profile_id:c.user.profile.id,role:c.user.profile.role,type:"transfer"};localStorage.setItem("draft-transfer",bt(a)),setTimeout(()=>{B.value=!0,T.value={status:!0,type:"success",text:"Data has been saved to Draft"}},800)},Je=se(()=>O.value.map(a=>a.id)),Ze=()=>{T.value={status:!0,type:"info",text:"Please wait..."};let a=w.value.map((e,t)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),l={data:u.value,assets:a,approval:q.value,profile_id:c.user.profile.id,role:c.user.profile.role,type:"transfer",additionalFiles:Je.value};D(c.token).post("/api/request-asset/store-update/data",l).then(e=>{let t="",f="";e.data.message?(t=e.data.message,f="success"):e.data.error&&(t=e.data.error,f="error"),T.value={status:!0,type:f,text:t},B.value=!1,localStorage.removeItem("draft-transfer"),j.params.id||setTimeout(()=>{je.push({name:"EditTransferAsset",params:{id:e.data.id}}).catch(k=>{})},800)}).catch(e=>{console.log(e)})},q=_([]),Y=_(!0),ae=async()=>{await D(c.token).get("/api/fetch/request-asset/approval-setup-fetch/"+u.value.request_type_id).then(a=>{var l,e,t;if(q.value=(l=a.data)==null?void 0:l.stages,u.value.extra_attachment=a.data.enable_attachment,j.params.id&&q.value.length>0){let f=x.value.length,k=(e=a.data)==null?void 0:e.stages.length;f>k?q.value.map((d,p)=>(x.value.map((S,le)=>{if(d.sort===S.orders)return d.profile_id=S.profile_id,d.status=S.status,d.date_approved=S.date_approved,d.reason_rejected=S.reason_rejected,d}),d)):q.value.map((d,p)=>(d.profile_id=x.value[p].profile_id,d.status=x.value[p].status,d.date_approved=x.value[p].date_approved,d.reason_rejected=x.value[p].reason_rejected,d))}console.log("approvalSetupList",q.value),((t=a.data)==null?void 0:t.stages.length)>0?Y.value=!0:Y.value=!1}).catch(a=>{})},R=()=>{let a=!1;Z.value=!1,u.value.company_id&&u.value.request_type_id&&u.value.subject&&u.value.transferred_from&&u.value.transferred_to&&(a=!0);let l=!0;w.value.map(t=>{(!t.item_description||!t.reason_for_request||!t.uom||!t.qty||t.qty<=0)&&(l=!1)});let e=!0;q.value.map(t=>{t.profile_id||(e=!1)}),e&&l&&a&&(Z.value=!0)},me=a=>{let l={status:a,profile_id:c.user.profile.id,ID:m.value.id};D(c.token).post("/api/request-asset/change-request/data",l).then(e=>{T.value={status:!0,type:"success",text:e.data.message},m.value.status=a,Ue("saved",e.data.message)}).catch(e=>{})},fe=(a,l=6)=>{let e="00000"+a;return e.substring(e.length-l)},x=_([]),m=_({}),G=_({});lt(()=>{var a,l,e,t,f,k;if(ze().then(()=>{Pe().then(()=>{Be()})}),j.params.id){b.value=!0;let d=U.objectdata;m.value=d,u.value.company_id=d.company_id,u.value.request_type_id=d.request_type_id,u.value.subject=d.subject,u.value.transferred_from=d.transferred_from,u.value.transferred_to=d.transferred_to,u.value.id=d.id,u.value.requestor_id=d.profile_id,x.value=d.request_approvals,w.value=d.items,G.value=(l=(a=d.request_approvals)==null?void 0:a.filter(p=>p.status=="awaiting-approval"))==null?void 0:l[0],O.value=d.attachment,ae()}else{u.value.company_id=c.user.profile.company_id;let d=localStorage.getItem("draft-transfer");d&&(d=Vt(d),B.value=!0,u.value.request_type_id=(e=d==null?void 0:d.data)==null?void 0:e.request_type_id,u.value.transferred_from=(t=d==null?void 0:d.data)==null?void 0:t.transferred_from,u.value.transferred_to=(f=d==null?void 0:d.data)==null?void 0:f.transferred_to,u.value.subject=(k=d==null?void 0:d.data)==null?void 0:k.subject,u.value.request_type_id&&ae().then(()=>{x.value=d.approval,q.value.map((p,S)=>(p.profile_id=x.value[S].profile_id,p.status=x.value[S].status,p.date_approved=x.value[S].date_approved,p.reason_rejected=x.value[S].reason_rejected,p))}),w.value=d==null?void 0:d.assets)}});const We=_("https://assets.grandiose.ae"),Xe=se(()=>{var d,p,S,le,he;let a=null,l=We.value+"/pv/employee-signatory",e=Te(50),t=Te(50),f=95,k=99;return((p=(d=c.user)==null?void 0:d.profile)==null?void 0:p.id)==((S=G.value)==null?void 0:S.profile_id)&&(f=(le=G.value)==null?void 0:le.profile_id,k=(he=G.value)==null?void 0:he.orders),m.value&&(a=l+"/transfer/approvals?o="+k+"&key="+e+"&pid="+f+"&pv="+t+"&id="+m.value.id),a});return se(()=>c.user.role=="receiving-releasing"||c.user.role=="facility"),ye(u.value,async(a,l)=>{R()}),ye(w.value,async(a,l)=>{R()}),(a,l)=>(r(),h(ft,null,{default:i(()=>[o(ht,{title:U.headertitle,class:"no-print"},null,8,["title"]),o(g,{class:"mb-3"},{default:i(()=>[o(st,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:i(()=>[o(E,null,{default:i(()=>[o(ot,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:i(()=>[s("div",null,v(U.headertitle)+" "+v(B.value?"(Draft)":""),1),Y.value?y("",!0):(r(),V("div",kt,v(ie.value),1)),b.value?(r(),V("div",{key:1,class:ge(m.value.status=="cancelled"?"text-error":m.value.status=="complete"?"text-success":"")}," STATUS ("+v(m.value.status)+") ",3)):y("",!0),s("div",null,"DATE: "+v(n(Ae)(Oe.value)),1)]),_:1}),o(oe),o(Q,null,{default:i(()=>[o(g,{class:"no-print"},{default:i(()=>[b.value?(r(),V("div",{key:0,class:ge(`${m.value.status=="complete"?"v-col-12":"v-col-md-12"}`)}," REQUEST NO: SN-3"+v(fe(m.value.id)),3)):y("",!0),s("div",wt,[b.value&&(m.value.status=="pending"||m.value.status=="cancelled")?(r(),V("div",xt,[m.value.status=="pending"&&u.value.requestor_id==n(c).user.profile.id?(r(),h(C,{key:0,onClick:l[0]||(l[0]=e=>me("cancelled")),size:"small",color:"warning"},{default:i(()=>[A("Cancel request")]),_:1})):y("",!0),u.value.requestor_id==n(c).user.profile.id&&m.value.status=="cancelled"?(r(),h(C,{key:1,onClick:l[1]||(l[1]=e=>me("pending")),size:"small",color:"info"},{default:i(()=>[A("Change status to Pending")]),_:1})):y("",!0)])):y("",!0)]),s("div",St,[o(I,{items:ue.value,modelValue:u.value.request_type_id,"onUpdate:modelValue":[l[2]||(l[2]=e=>u.value.request_type_id=e),ae],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:b.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),s("div",Ct,[o(I,{items:pe.value,modelValue:u.value.company_id,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),s("div",Tt,[o(I,{items:te.value,modelValue:u.value.transferred_from,"onUpdate:modelValue":l[4]||(l[4]=e=>u.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),s("div",At,[o(I,{items:te.value,modelValue:u.value.transferred_to,"onUpdate:modelValue":l[5]||(l[5]=e=>u.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"]),b.value&&X.value.includes(n(c).user.profile.role)?(r(),h(C,{key:0,size:"small",loading:W.value,onClick:Qe,color:"success",class:"mx-2 my-auto"},{default:i(()=>[A("Save")]),_:1},8,["loading"])):y("",!0)]),s("div",qt,[o(K,{modelValue:u.value.subject,"onUpdate:modelValue":l[6]||(l[6]=e=>u.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),o(g,{class:"for-print-flex mx-2 mb-1"},{default:i(()=>{var e,t;return[s("div",Ut,"REQUEST NO: "+v(m.value.id?"SN-3"+fe(m.value.id):""),1),s("div",jt,"TYPE OF REQUEST: "+v(re.value),1),s("div",Ot,"COMPANY: "+v((t=(e=m.value)==null?void 0:e.company)==null?void 0:t.title),1),s("div",Et,"LOCATION FROM: "+v(ve.value),1),s("div",Dt,"LOCATION TO: "+v(_e.value),1),s("div",Rt,"SUBJECT: "+v(m.value.subject),1)]}),_:1})]),_:1})]),_:1}),o(E,{class:"my-2"},{default:i(()=>[o(Q,null,{default:i(()=>[o(g,null,{default:i(()=>{var e;return[s("div",It,[m.value.status!="complete"&&(!n(j).params.id||u.value.requestor_id==n(c).user.profile.id&&((e=U.objectdata)==null?void 0:e.status)=="pending"||n(c).user.profile.role=="superadmin"||n(c).user.profile.role=="administrator")?(r(),h(C,{key:0,size:"small",color:"primary",class:"no-print",onClick:$e},{default:i(()=>[A("Add")]),_:1})):y("",!0),Nt])]}),_:1}),o(g,{class:"for-print-flex mx-2 header mb-1"},{default:i(()=>[Lt,Ft,zt,Mt,Pt,Bt,$t]),_:1}),(r(!0),V(N,null,z(w.value,(e,t)=>(r(),h(g,{key:t,class:"for-print-flex mx-2 row-bordered"},{default:i(()=>[s("div",Qt,v(e.item_description),1),s("div",Yt,v(e.asset_code),1),s("div",Gt,v(e.qty),1),s("div",Kt,v(e.uom),1),s("div",Ht,v(e.weight),1),s("div",Jt,v(e.item_value),1),s("div",Zt,v(e.reason_for_request),1)]),_:2},1024))),128)),(r(!0),V(N,null,z(w.value,(e,t)=>(r(),h(g,{key:t,class:"no-print"},{default:i(()=>{var f,k,d;return[s("div",Wt,[(f=e.attachment)!=null&&f.id?(r(),h(g,{key:0,class:"px-1"},{default:i(()=>[s("div",Xt,[o(K,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":p=>e.attachment.id=p},null,8,["modelValue","onUpdate:modelValue"]),!b.value||b.value&&u.value.requestor_id==n(c).user.profile.id?(r(),h(C,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:n(Ve),size:"16px",color:"error",onClick:()=>Fe(t,e.attachment.id)},null,8,["icon","onClick"])):y("",!0),o(E,{onClick:()=>Le(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),o(de,{modelValue:F.value,"onUpdate:modelValue":l[7]||(l[7]=p=>F.value=p),width:"95%","max-width":"900"},{default:i(()=>[o(E,{class:"bg-black"},{default:i(()=>[s("div",ea,[o(H,{src:M.value+"/file/"+P.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(r(),h(g,{key:1,class:"mt-0"},{default:i(()=>[s("div",ta,[o(dt,{color:"grey-lighten-4",class:"text-center"},{default:i(()=>[o(Ce,{options:{multiSelect:!1,type:"transfer-asset",userID:n(c).user.profile.id},onSelect:p=>De(t,p)},null,8,["options","onSelect"])]),_:2},1024)])]),_:2},1024))]),s("div",aa,[o(be,{modelValue:e.item_description,"onUpdate:modelValue":p=>e.item_description=p,variant:"outlined",density:"compact","hide-details":"",label:"ITEM DESC*",rows:"2",class:"no-print"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",la,[o(K,{modelValue:e.asset_code,"onUpdate:modelValue":p=>e.asset_code=p,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE","append-inner-icon":n(it),"onClick:appendInner":p=>ce(e.asset_code,t)},null,8,["modelValue","onUpdate:modelValue","append-inner-icon","onClick:appendInner"]),(!n(j).params.id||u.value.requestor_id==n(c).user.profile.id&&((k=U.objectdata)==null?void 0:k.status)=="pending"||n(c).user.profile.role=="superadmin"||n(c).user.profile.role=="administrator")&&m.value.status!="complete"?(r(),h(J,{key:0,onClick:p=>Me(t),class:"ml-2 my-auto",size:"x-small",icon:n(rt)},null,8,["onClick","icon"])):y("",!0)]),s("div",sa,[o(K,{type:"number","onUpdate:modelValue":[R,p=>e.qty=p],modelValue:e.qty,variant:"outlined",density:"compact","hide-details":"",class:"no-print",label:"QTY*"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",oa,[o(I,{items:Ee.value,modelValue:e.uom,"onUpdate:modelValue":[p=>e.uom=p,R],variant:"outlined",density:"compact","hide-details":"",label:"UOM*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),s("div",da,[A(v(e.weight?e.weight:0),1),ia,ra]),s("div",ua,[A(v(e.item_value?e.item_value:0),1),na,ca]),s("div",pa,[o(be,{modelValue:e.reason_for_request,"onUpdate:modelValue":p=>e.reason_for_request=p,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON*"},null,8,["modelValue","onUpdate:modelValue"]),!b.value||b.value&&n(c).user.profile.id==U.objectdata.profile_id&&((d=U.objectdata)==null?void 0:d.status)=="pending"?(r(),h(J,{key:0,size:"small",onClick:()=>Ge(e.id,t),icon:n(ut),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):y("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),u.value.extra_attachment?(r(),h(E,{key:0},{default:i(()=>[o(Q,null,{default:i(()=>{var e;return[!b.value||b.value&&u.value.requestor_id==n(c).user.profile.id?(r(),V("div",va,[_a,o(Ce,{options:{multiSelect:!0,type:"transfer-asset"},onSelect:Re})])):y("",!0),((e=O.value)==null?void 0:e.length)>0?(r(),h(g,{key:1,class:"px-1 mt-4"},{default:i(()=>[(r(!0),V(N,null,z(O.value,(t,f)=>(r(),V("div",{key:t.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[b.value&&(m.value.status=="pending"||m.value.status=="cancelled")?(r(),h(C,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:n(Ve),size:"20px",color:"error",onClick:()=>Ie(t.id)},null,8,["icon","onClick"])):y("",!0),o(E,{onClick:()=>Ne(t,f)},{default:i(()=>[t.mime=="image/jpeg"||t.mime=="image/png"?(r(),h(H,{key:0,src:M.value+"/file/"+t.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(r(),h(H,{key:1,src:M.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),o(de,{modelValue:F.value,"onUpdate:modelValue":l[9]||(l[9]=t=>F.value=t),width:"95%","max-width":"900"},{default:i(()=>[o(E,{class:"bg-black"},{default:i(()=>[o(nt,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:P.value,"onUpdate:modelValue":l[8]||(l[8]=t=>P.value=t)},{default:i(()=>[(r(!0),V(N,null,z(O.value,(t,f)=>(r(),h(ct,{key:f,"reverse-transition":"fade",transition:"fade"},{default:i(()=>[s("div",{style:pt(`${L.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[L.value=="jpg"||L.value=="jpeg"||L.value=="png"?(r(),h(H,{key:0,src:M.value+"/file/"+t.path},null,8,["src"])):y("",!0),L.value=="pdf"?(r(),V("object",{key:1,data:M.value+"/file/"+t.path,type:"application/pdf",width:"100%",height:"800px"},null,8,ma)):y("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0)]}),_:1})]),_:1})):y("",!0),o(E,{class:"my-2 page-break"},{default:i(()=>[o(Q,null,{default:i(()=>[o(g,null,{default:i(()=>[s("div",fa,[ha,n(j).params.id?(r(),V("div",ya,[o(C,{color:"info",size:"small",target:"_blank",href:Xe.value},{default:i(()=>[A("View Approval Page")]),_:1},8,["href"])])):y("",!0)]),o(oe)]),_:1}),o(g,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:i(()=>{var e,t;return[ga,s("div",Va,v((t=(e=m.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),ba,ka]}),_:1}),(r(!0),V(N,null,z(x.value,e=>(r(),h(g,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:i(()=>{var t;return[s("div",wa,v(ee(e.approval_type)),1),s("div",xa,v((t=e==null?void 0:e.profile)==null?void 0:t.display_name),1),s("div",Sa,[e.status?(r(),h(J,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?n(ke):e.status=="pending"?n(we):e.status=="reject"?n(xe):n(Se),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0)]),s("div",Ca,v(e.date_approved),1)]}),_:2},1024))),128)),o(g,{class:"no-print"},{default:i(()=>{var e,t;return[Ta,s("div",Aa,v((t=(e=m.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),qa,b.value&&X.value.includes(n(c).user.profile.role)?(r(),V("div",Ua,"Change To")):y("",!0)]}),_:1}),Y.value?(r(),V(N,{key:0},[(r(!0),V(N,null,z(q.value,(e,t)=>(r(),h(g,{key:e.id,class:"no-print"},{default:i(()=>[s("div",ja,v(e.types?ee(e.types):ee(e.approval_type)),1),s("div",Oa,[o(I,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[f=>e.profile_id=f,R],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),o(C,{variant:"text",size:"x-small",class:"no-print"},{default:i(()=>[e.status?(r(),h(J,{key:0,class:"mx-2 my-3",icon:e.status=="awaiting-approval"?n(ke):e.status=="pending"?n(we):e.status=="reject"?n(xe):n(Se),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0),o(vt,{activator:"parent",location:"top","max-width":"400"},{default:i(()=>[A(v(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)]),s("div",Ea,v(e.date_approved?n(Ae)(e.date_approved):""),1),b.value&&X.value.includes(n(c).user.profile.role)?(r(),V("div",Da,[o(I,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[f=>e.profile_id=f,f=>Ye(e.profile_id,t)],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*"},null,8,["items","modelValue","onUpdate:modelValue"])])):y("",!0)]),_:2},1024))),128)),o(g,{class:"no-print"},{default:i(()=>{var e;return[o(oe),s("div",Ra,[(!n(j).params.id||u.value.requestor_id==n(c).user.profile.id&&((e=U.objectdata)==null?void 0:e.status)=="pending"||n(c).user.profile.role=="superadmin"||n(c).user.profile.role=="administrator")&&m.value.status!="complete"?(r(),h(C,{key:0,size:"small",disabled:!Z.value,onClick:Ze,color:"primary"},{default:i(()=>[A(v(n(j).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):y("",!0),n(j).params.id?y("",!0):(r(),h(C,{key:1,size:"small",class:"mx-3",onClick:He,color:"warning"},{default:i(()=>[A("Save as Draft")]),_:1})),B.value?(r(),h(C,{key:2,size:"small",class:"mx-3",onClick:Ke,color:"info"},{default:i(()=>[A("Delete Draft")]),_:1})):y("",!0)])]}),_:1})],64)):(r(),h(g,{key:1},{default:i(()=>[s("div",Ia,v(ie.value),1)]),_:1})),o(g,null,{default:i(()=>[Na]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(yt,{options:T.value},null,8,["options"]),o(de,{width:"500",modelValue:$.value,"onUpdate:modelValue":l[11]||(l[11]=e=>$.value=e)},{default:i(()=>[o(E,null,{default:i(()=>[o(Q,null,{default:i(()=>[o(n(gt.QrcodeStream),{onDecode:ce})]),_:1}),o(_t,null,{default:i(()=>[o(mt),o(C,{text:"Close",onClick:l[10]||(l[10]=e=>$.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Qa as _};
