import{i as x,r as v,M as L,ad as H,b as U,j as T,k as l,l as n,V as G,m as M,q as N,G as r,e as F,an as K,z as k,a2 as p,t as O,ao as j,c as $,F as J,d as W,ap as Z,aq as X,E as Y,ar as Q,y,a1 as aa,A as q,K as R,ac as ea,U as na,L as la,O as ta}from"./app-edab498a.js";import{c as E,a as I,F as D,b as S,d as oa}from"./index.esm-eae9c43f.js";import{v as sa}from"./filepond.min-976bab22.js";import{g as ia,p as ma,a as ra,b as da,h as ua,c as ca,d as pa,e as va,f as ga}from"./filepond-plugin-image-edit-64c42389.js";const fa={class:"d-flex"},ba=F("div",{class:"mb-2 text-body-2 mr-2 mt-2"},"Status",-1),Pa={__name:"AccountForm",props:["user"],emits:["saved"],setup(P,{emit:h}){const s=P,_=x(),t=v({loading:!1,data:Object.assign({},s.user)}),m=v(!0);console.log("props.user",s.user),L(()=>s.user,d=>{m.value=!1,t.value.data=d});const a=v([{title:"active",color:"success"},{title:"inactive",color:"error"}]),c=H(()=>{let d="";return t.value.data.status=="active"&&(d="success"),t.value.data.status=="inactive"&&(d="error"),d}),b=d=>{console.log("selected",d),t.value.data.status=d},w=v([{title:"Administrator",value:"admin"},{title:"Asset Supervisor-Project",value:"asset-supervisor"},{title:"Commercial Manager-Project",value:"commercial-manager"},{title:"Facility Team",value:"facility"},{title:"Normal",value:"normal"},{title:"Technical Operation",value:"technical-operation"}]);let g=E({email:I().email()});const f=async()=>{let d=t.value.data;t.value.loading=!0,await R(_.token).post("/api/account/profile/save",d).then(o=>{t.value.loading=!1,h("saved",o.data.message)}).catch(o=>{t.value.loading=!1})};return(d,o)=>(U(),T(q,null,{default:l(()=>[n(G,{class:"text-primary text-capitalize mb-3"},{default:l(()=>[M("Account Settings")]),_:1}),n(N,null,{default:l(()=>[n(r(D),{as:"v-form","validation-schema":r(g)},{default:l(()=>[F("div",fa,[ba,n(K,{disabled:m.value},{activator:l(({props:e})=>[n(k,p(e,{class:"mb-6",color:c.value}),{default:l(()=>[M(O(t.value.data.status),1)]),_:2},1040,["color"])]),default:l(()=>[n(j,{density:"compact"},{default:l(()=>[(U(!0),$(J,null,W(a.value,(e,u)=>(U(),T(Z,{key:u,value:u,onClick:()=>b(e.title)},{default:l(()=>[n(X,{class:"text-overline d-flex align-center"},{default:l(()=>[n(Y,{color:e.color,icon:r(Q),class:"mr-1"},null,8,["color","icon"]),F("div",null,O(e.title),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1},8,["disabled"])]),n(y,p({modelValue:t.value.data.username,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value.data.username=e)},d.field,{label:"Username",variant:"outlined",density:"compact","hide-details":"",class:"mb-2",disabled:!0}),null,16,["modelValue"]),n(r(S),{name:"email",modelValue:t.value.data.email,"onUpdate:modelValue":o[2]||(o[2]=e=>t.value.data.email=e)},{default:l(({field:e,errors:u})=>[n(y,p({modelValue:t.value.data.email,"onUpdate:modelValue":o[1]||(o[1]=i=>t.value.data.email=i)},e,{label:"Email",variant:"outlined",density:"compact","hide-details":"",class:"mb-2","error-messages":u}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),n(r(S),{name:"contact",modelValue:t.value.data.contact,"onUpdate:modelValue":o[4]||(o[4]=e=>t.value.data.contact=e)},{default:l(({field:e,errors:u})=>[n(y,p({modelValue:t.value.data.contact,"onUpdate:modelValue":o[3]||(o[3]=i=>t.value.data.contact=i)},e,{type:"number",density:"compact","hide-details":"",label:"Contact number",variant:"outlined",class:"mb-2","error-messages":u}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),n(r(S),{name:"role",modelValue:t.value.data.role,"onUpdate:modelValue":o[6]||(o[6]=e=>t.value.data.role=e)},{default:l(({field:e,errors:u})=>[n(aa,p({modelValue:t.value.data.role,"onUpdate:modelValue":o[5]||(o[5]=i=>t.value.data.role=i)},e,{items:w.value,label:"Role",density:"compact",variant:"outlined",class:"mb-2","error-messages":u}),null,16,["modelValue","items","error-messages"])]),_:1},8,["modelValue"]),n(k,{color:"primary",size:"large",loading:t.value.loading,onClick:f},{default:l(()=>[M("Save")]),_:1},8,["loading"])]),_:1},8,["validation-schema"])]),_:1})]),_:1}))}};const Va={__name:"SingleUploader",props:{options:{type:Object,default:null}},setup(P){const h=P;ea(g=>({"72f07ea3":m.value.size}));const s=x(),_=v(null),t=sa(ga,va,pa,ca,ua,da,ra,ma,ia),m=v({size:""});L(()=>h.options,g=>{m.value={...m.value,...g},console.log("uploadOptions.value",m.value)});const a=v([]),c={url:"",process:(g,f,d,o,e,u,i,C,B)=>{console.log("process file",f);const z=new FormData;z.append(g,f,f.name),z.append("profile_id",s.user.profile.id),z.append("file_id",f.id);const V=new XMLHttpRequest;return V.open("POST","/api/file/upload"),V.setRequestHeader("X-CSRF-TOKEN",document.getElementsByTagName("meta")["csrf-token"].content),V.setRequestHeader("Authorization",`Bearer ${s.token}`),V.upload.onprogress=A=>{o(A.lengthComputable,A.loaded,A.total)},V.onload=function(){V.status>=200&&V.status<300?(console.log("request.responseText",V.responseText),console.log("selectedFiles",a.value)):u("Process Error")},V.send(z),{abort:()=>{V.abort(),i()}}},revert:null,restore:null,load:null,fetch:null},b=(g,f)=>{console.log("file",g),console.log(" status",f)},w=()=>{console.log("FilePond has initialized")};return v({size:"320px"}),(g,f)=>(U(),T(na,{class:"rounded-lg overflow-hidden",height:m.value.size,width:m.value.size,color:"grey-lighten-3"},{default:l(()=>[n(r(t),{name:"filepond",ref_key:"pond",ref:_,instantUpload:"false",maxFileSize:"5MB","accepted-file-types":"image/jpeg, image/png, application/pdf",server:c,files:a.value,onInit:w,onError:b,credits:{},imagePreviewHeight:m.value.size,imageResizeTargetWidth:m.value.size,imageResizeTargetHeight:m.value.size,imageCropAspectRatio:"1:1",stylePanelLayout:"integrated",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom"},null,8,["files","imagePreviewHeight","imageResizeTargetWidth","imageResizeTargetHeight"])]),_:1},8,["height","width"]))}},ya=[{name:"Afghanistan"},{name:"Åland Islands"},{name:"Albania"},{name:"Algeria"},{name:"American Samoa"},{name:"Andorra"},{name:"Angola"},{name:"Anguilla"},{name:"Antarctica"},{name:"Antigua and Barbuda"},{name:"Argentina"},{name:"Armenia"},{name:"Aruba"},{name:"Australia"},{name:"Austria"},{name:"Azerbaijan"},{name:"Bahamas"},{name:"Bahrain"},{name:"Bangladesh"},{name:"Barbados"},{name:"Belarus"},{name:"Belgium"},{name:"Belize"},{name:"Benin"},{name:"Bermuda"},{name:"Bhutan"},{name:"Bolivia (Plurinational State of)"},{name:"Bonaire, Sint Eustatius and Saba"},{name:"Bosnia and Herzegovina"},{name:"Botswana"},{name:"Bouvet Island"},{name:"Brazil"},{name:"British Indian Ocean Territory"},{name:"Brunei Darussalam"},{name:"Bulgaria"},{name:"Burkina Faso"},{name:"Burundi"},{name:"Cabo Verde"},{name:"Cambodia"},{name:"Cameroon"},{name:"Canada"},{name:"Cayman Islands"},{name:"Central African Republic"},{name:"Chad"},{name:"Chile"},{name:"China"},{name:"Christmas Island"},{name:"Cocos (Keeling) Islands"},{name:"Colombia"},{name:"Comoros"},{name:"Congo (Republic of the)"},{name:"Congo (Democratic Republic of the)"},{name:"Cook Islands"},{name:"Costa Rica"},{name:"Côte d'Ivoire"},{name:"Croatia"},{name:"Cuba"},{name:"Curaçao"},{name:"Cyprus"},{name:"Czech Republic"},{name:"Denmark"},{name:"Djibouti"},{name:"Dominica"},{name:"Dominican Republic"},{name:"Ecuador"},{name:"Egypt"},{name:"El Salvador"},{name:"Equatorial Guinea"},{name:"Eritrea"},{name:"Estonia"},{name:"Ethiopia"},{name:"Falkland Islands (Malvinas)"},{name:"Faroe Islands"},{name:"Fiji"},{name:"Finland"},{name:"France"},{name:"French Guiana"},{name:"French Polynesia"},{name:"French Southern Territories"},{name:"Gabon"},{name:"Gambia"},{name:"Georgia"},{name:"Germany"},{name:"Ghana"},{name:"Gibraltar"},{name:"Greece"},{name:"Greenland"},{name:"Grenada"},{name:"Guadeloupe"},{name:"Guam"},{name:"Guatemala"},{name:"Guernsey"},{name:"Guinea"},{name:"Guinea-Bissau"},{name:"Guyana"},{name:"Haiti"},{name:"Heard Island and McDonald Islands"},{name:"Vatican City State"},{name:"Honduras"},{name:"Hong Kong"},{name:"Hungary"},{name:"Iceland"},{name:"India"},{name:"Indonesia"},{name:"Iran"},{name:"Iraq"},{name:"Ireland"},{name:"Isle of Man"},{name:"Israel"},{name:"Italy"},{name:"Jamaica"},{name:"Japan"},{name:"Jersey"},{name:"Jordan"},{name:"Kazakhstan"},{name:"Kenya"},{name:"Kiribati"},{name:"Korea (Democratic People's Republic of)"},{name:"Korea (Republic of)"},{name:"Kuwait"},{name:"Kyrgyzstan"},{name:"Lao People's Democratic Republic"},{name:"Latvia"},{name:"Lebanon"},{name:"Lesotho"},{name:"Liberia"},{name:"Libya"},{name:"Liechtenstein"},{name:"Lithuania"},{name:"Luxembourg"},{name:"Macao"},{name:"Macedonia (the former Yugoslav Republic of)"},{name:"Madagascar"},{name:"Malawi"},{name:"Malaysia"},{name:"Maldives"},{name:"Mali"},{name:"Malta"},{name:"Marshall Islands"},{name:"Martinique"},{name:"Mauritania"},{name:"Mauritius"},{name:"Mayotte"},{name:"Mexico"},{name:"Micronesia (Federated States of)"},{name:"Moldova (Republic of)"},{name:"Monaco"},{name:"Mongolia"},{name:"Montenegro"},{name:"Montserrat"},{name:"Morocco"},{name:"Mozambique"},{name:"Myanmar"},{name:"Namibia"},{name:"Nauru"},{name:"Nepal"},{name:"Netherlands"},{name:"New Caledonia"},{name:"New Zealand"},{name:"Nicaragua"},{name:"Niger"},{name:"Nigeria"},{name:"Niue"},{name:"Norfolk Island"},{name:"Northern Mariana Islands"},{name:"Norway"},{name:"Oman"},{name:"Pakistan"},{name:"Palau"},{name:"Palestine, State of"},{name:"Panama"},{name:"Papua New Guinea"},{name:"Paraguay"},{name:"Peru"},{name:"Philippines"},{name:"Pitcairn"},{name:"Poland"},{name:"Portugal"},{name:"Puerto Rico"},{name:"Qatar"},{name:"Réunion"},{name:"Romania"},{name:"Russian Federation"},{name:"Rwanda"},{name:"Saint Barthélemy"},{name:"Saint Helena, Ascension and Tristan da Cunha"},{name:"Saint Kitts and Nevis"},{name:"Saint Lucia"},{name:"Saint Martin (French part)"},{name:"Saint Pierre and Miquelon"},{name:"Saint Vincent and the Grenadines"},{name:"Samoa"},{name:"San Marino"},{name:"Sao Tome and Principe"},{name:"Saudi Arabia"},{name:"Senegal"},{name:"Serbia"},{name:"Seychelles"},{name:"Sierra Leone"},{name:"Singapore"},{name:"Sint Maarten (Dutch part)"},{name:"Slovakia"},{name:"Slovenia"},{name:"Solomon Islands"},{name:"Somalia"},{name:"South Africa"},{name:"South Georgia and the South Sandwich Islands"},{name:"South Sudan"},{name:"Spain"},{name:"Sri Lanka"},{name:"Sudan"},{name:"Suriname"},{name:"Svalbard and Jan Mayen"},{name:"Swaziland"},{name:"Sweden"},{name:"Switzerland"},{name:"Syrian Arab Republic"},{name:"Taiwan, Province of China"},{name:"Tajikistan"},{name:"Tanzania, United Republic of"},{name:"Thailand"},{name:"Timor-Leste"},{name:"Togo"},{name:"Tokelau"},{name:"Tonga"},{name:"Trinidad and Tobago"},{name:"Tunisia"},{name:"Turkey"},{name:"Turkmenistan"},{name:"Turks and Caicos Islands"},{name:"Tuvalu"},{name:"Uganda"},{name:"Ukraine"},{name:"United Arab Emirates"},{name:"United Kingdom of Great Britain and Northern Ireland"},{name:"United States Minor Outlying Islands"},{name:"United States of America"},{name:"Uruguay"},{name:"Uzbekistan"},{name:"Vanuatu"},{name:"Venezuela (Bolivarian Republic of)"},{name:"Vietnam"},{name:"Virgin Islands (British)"},{name:"Virgin Islands (U.S.)"},{name:"Wallis and Futuna"},{name:"Western Sahara"},{name:"Yemen"},{name:"Zambia"},{name:"Zimbabwe"}],Ia={__name:"ProfileForm",props:["user"],emits:["saved"],setup(P,{emit:h}){var d;const s=P,_=x(),t=la(),m=v([]);m.value=ya;const a=v({loading:!1,data:{user_id:t.params.id,display_name:null,dob:null,nationality:null}});a.value.data=Object.assign({},s.user),L(()=>s.user,o=>{a.value.data=Object.assign({},o)});const c=()=>{a.value.data=s.user.profile};(d=s.user)!=null&&d.id&&c();const b=v([]);(async()=>{await R(_.token).get("/api/fetch/companies").then(o=>{b.value=o.data}).catch(o=>{})})();let g=E({ecode:I().required(),display_name:I().required(),first_name:I().required(),last_name:I().required()});const f=async()=>{var o,e;a.value.loading=!0,a.value.data={...a.value.data,id:(e=(o=s.user)==null?void 0:o.profile)!=null&&e.id?s.user.profile.id:s.user.id},await R(_.token).post("/api/account/profile/save",a.value.data).then(u=>{a.value.loading=!1,h("saved",u.data.message)}).catch(u=>{a.value.loading=!1})};return(o,e)=>(U(),T(q,null,{default:l(()=>[n(G,{class:"text-primary text-capitalize"},{default:l(()=>[M("Profile Settings")]),_:1}),n(N,null,{default:l(()=>[n(r(D),{as:"v-form","validation-schema":r(g)},{default:l(({meta:u})=>[n(Va,{class:"mb-6",options:{size:"320px"}}),n(r(S),{name:"ecode",modelValue:a.value.data.ecode,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.data.ecode=i)},{default:l(({field:i})=>[n(y,p({modelValue:a.value.data.ecode,"onUpdate:modelValue":e[0]||(e[0]=C=>a.value.data.ecode=C)},i,{label:"Employee ID",density:"compact",variant:"outlined",disabled:!0}),null,16,["modelValue"])]),_:1},8,["modelValue"]),n(r(S),{name:"display_name",modelValue:a.value.data.display_name,"onUpdate:modelValue":e[3]||(e[3]=i=>a.value.data.display_name=i)},{default:l(({field:i,errors:C})=>[n(y,p({modelValue:a.value.data.display_name,"onUpdate:modelValue":e[2]||(e[2]=B=>a.value.data.display_name=B)},i,{label:"Full name",density:"compact",variant:"outlined","error-messages":C}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),n(r(S),{name:"first_name",modelValue:a.value.data.first_name,"onUpdate:modelValue":e[5]||(e[5]=i=>a.value.data.first_name=i)},{default:l(({field:i,errors:C})=>[n(y,p({modelValue:a.value.data.first_name,"onUpdate:modelValue":e[4]||(e[4]=B=>a.value.data.first_name=B)},i,{label:"First name",density:"compact",variant:"outlined","error-messages":C}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),n(r(S),{name:"last_name",modelValue:a.value.data.last_name,"onUpdate:modelValue":e[7]||(e[7]=i=>a.value.data.last_name=i)},{default:l(({field:i,errors:C})=>[n(y,p({modelValue:a.value.data.last_name,"onUpdate:modelValue":e[6]||(e[6]=B=>a.value.data.last_name=B)},i,{label:"Last name",density:"compact",variant:"outlined","error-messages":C}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),n(y,{modelValue:a.value.data.designation,"onUpdate:modelValue":e[8]||(e[8]=i=>a.value.data.designation=i),label:"Designation",density:"compact",variant:"outlined"},null,8,["modelValue"]),n(ta,p(o.field,{label:"Company",items:b.value,modelValue:a.value.data.company_id,"onUpdate:modelValue":e[9]||(e[9]=i=>a.value.data.company_id=i),"item-value":"id","item-title":"title",variant:"outlined",density:"compact",class:"mb-2"}),null,16,["items","modelValue"]),n(k,{color:"primary",loading:a.value.loading,onClick:f,disabled:!u.valid},{default:l(()=>[M("Save")]),_:2},1032,["loading","disabled"])]),_:1},8,["validation-schema"])]),_:1})]),_:1}))}},Sa={class:"d-flex align-center"},Ma={__name:"ChangePassword",props:["userId"],setup(P){const h=P,s=v({status:!1,loading:!1,data:{user_id:h.userId,password:"",password_confirmation:""}});let _=E({password:I().min(5).required(),password_confirmation:I().required().oneOf([oa("password")],"Passwords do not match")});const t=async()=>{s.value.loading=!0,await axios.post("/account/change-password",s.value.data).then(m=>{s.value={status:!1,loading:!1,data:{user_id:h.userId,password:"",password_confirmation:""}}}).catch(m=>{s.value.loading=!1,console.log(m.response.data)})};return(m,a)=>(U(),$("div",null,[n(q,{loading:s.value.loading},{default:l(()=>[n(r(D),{as:"v-form","validation-schema":r(_)},{default:l(()=>[n(G,{class:"text-primary text-capitalize mb-3"},{default:l(()=>[M(" Change password ")]),_:1}),n(N,{class:"pb-6"},{default:l(()=>[n(r(S),{name:"password",modelValue:s.value.data.password,"onUpdate:modelValue":a[1]||(a[1]=c=>s.value.data.password=c)},{default:l(({field:c,errors:b})=>[n(y,p({modelValue:s.value.data.password,"onUpdate:modelValue":a[0]||(a[0]=w=>s.value.data.password=w)},c,{label:"Password",type:"password",variant:"outlined",class:"mb-2","error-messages":b}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),n(r(S),{name:"password_confirmation",modelValue:s.value.data.password_confirmation,"onUpdate:modelValue":a[3]||(a[3]=c=>s.value.data.password_confirmation=c)},{default:l(({field:c,errors:b})=>[n(y,p({modelValue:s.value.data.password_confirmation,"onUpdate:modelValue":a[2]||(a[2]=w=>s.value.data.password_confirmation=w)},c,{label:"Confirm Password",type:"password",variant:"outlined",class:"mb-2","error-messages":b}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),F("div",Sa,[n(k,{color:"primary",size:"large",onClick:t},{default:l(()=>[M(" Save ")]),_:1})])]),_:1})]),_:1},8,["validation-schema"])]),_:1},8,["loading"])]))}};export{Pa as _,Ia as a,Ma as b};
