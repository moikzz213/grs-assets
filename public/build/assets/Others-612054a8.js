import{r as _,i as X,j as r,k as n,C as Z,K as G,b as d,l as i,N as T,A as D,q as S,D as b,f as u,G as l,z as h,a4 as U,I as p,m as I,J as A,c as V,d as N,F as z,E as O,a5 as E,a6 as P,O as R,y as B,a7 as F,a8 as L,W as K}from"./app-2d02e8bb.js";import{_ as ee}from"./AppPageHeader-352d3f5b.js";import{_ as le}from"./AppSnackBar-9a57ef75.js";const te={class:"v-col-12 text-uppercase font-weight-bold d-flex pb-0"},ae=u("div",{class:"mr-3 my-auto"},"STATUS LIST",-1),se=u("div",{class:"v-col-12 py-0"},[u("small",null,"Default value cannot be edited")],-1),ie={class:"v-col-5 py-2 d-flex"},oe={class:"v-col-5 py-2"},de={key:0,class:"v-col-2 my-auto"},ne={class:"v-col-12 text-uppercase font-weight-bold d-flex"},ue=u("div",{class:"mr-3 my-auto"},"CONDITION LIST",-1),ce={class:"v-col-5 py-2 d-flex"},re={class:"v-col-5 py-2"},ve={class:"v-col-2 my-auto"},pe={class:"v-col-12 text-uppercase pb-0 font-weight-bold d-flex"},ye=u("div",{class:"mr-3 my-auto"},"INCIDENT TYPE LIST",-1),me=u("div",{class:"v-col-12 py-0"},[u("small",null,"Default value cannot be edited")],-1),fe={class:"v-col-5 py-2 d-flex"},_e={class:"v-col-5 py-2"},he={key:0,class:"v-col-2 my-auto"},xe={__name:"Others",setup(be){const y=_([]),m=_([]),f=_([]),o=X(),x=_(!1),J=_([{id:"asset",value:"Asset"},{id:"maintenance",value:"Maintenance"},{id:"incident",value:"Incident"}]),M=_([{id:"condition-type",value:"Asset"}]),W=_([{id:"incident-type",value:"Incident"}]),Y=()=>{y.value.push({title:null,type:null})},H=()=>{m.value.push({title:null,type:"condition-type"})},Q=()=>{f.value.push({title:null,type:"incident-type"})},k=_({loading:!0}),g=_({status:!1,type:"info",text:null}),j=async()=>{y.value=[],m.value=[],f.value=[],await G(o.token).get("/api/fetch-global/setup-status").then(c=>{c.data.length>0&&c.data.map(a=>{a.type=="condition-type"?m.value.push(a):a.type=="incident-type"?f.value.push(a):y.value.push(a)}),k.value.loading=!1}).catch(c=>{k.value.loading=!1})};j();const C=async(c,a,e)=>{if(a.id){g.value={status:!0,type:"info",text:"Please wait..."};let t={type:"status",item:a,profile_id:o.user.profile.id};q(t)}else if(e=="status"){let t=y.value;t.splice(c,1),y.value=[...t]}else if(e=="condition"){let t=m.value;t.splice(c,1),m.value=[...t]}else{let t=f.value;t.splice(c,1),f.value=[...t]}},$=c=>{if(g.value={status:!0,type:"info",text:"Please wait..."},c=="status"){if(y.value.length==0)return;w(y.value)}else if(c=="condition"){if(m.value.length==0)return;w(m.value)}else if(c=="incident"){if(f.value.length==0)return;w(f.value)}},w=c=>{let a=[],e=[];if(c.map((s,v)=>{s.title&&s.type&&(delete s.profile_id,s.profile_id=o.user.profile.id,s.id?(delete s.created_at,delete s.updated_at,a.push(s)):e.push(s))}),e.length==0&&a.length==0){g.value={status:!0,type:"error",text:"Kindly fill-up the fields."};return}let t={type:"store-update",new:e,update:a,profile_id:o.user.profile.id};q(t)},q=c=>{G(o.token).post("/api/store-update/setup-status",c).then(a=>{j().then(()=>{g.value={status:!0,type:"success",text:a.data.message}})}).catch(a=>{k.value.loading=!1})};return(c,a)=>(d(),r(Z,null,{default:n(()=>[i(ee,{title:"Others - Status Setup"}),i(b,{class:"mb-3"},{default:n(()=>[i(T,{class:"v-col-12 v-col-md-6 mt-1 col-sm-12"},{default:n(()=>[i(D,{class:"px-5",loading:k.value.loading},{default:n(()=>[i(S,null,{default:n(()=>[i(b,{class:"mb-2"},{default:n(()=>{var e,t;return[u("div",te,[ae,l(o).user.role=="superadmin"||(e=l(o).capabilities)!=null&&e.includes("add")?(d(),r(h,{key:0,icon:l(U),onClick:a[0]||(a[0]=s=>Y()),size:"x-small",color:"primary"},null,8,["icon"])):p("",!0),(l(o).user.role=="superadmin"||(t=l(o).capabilities)!=null&&t.includes("edit"))&&y.value.length>0?(d(),r(h,{key:1,loading:x.value,onClick:a[1]||(a[1]=s=>$("status")),size:"small",color:"secondary",class:"mx-5"},{default:n(()=>[I("Save")]),_:1},8,["loading"])):p("",!0)]),se,i(A)]}),_:1}),(d(!0),V(z,null,N(y.value,(e,t)=>(d(),r(b,{key:t,class:"parent-row-show"},{default:n(()=>{var s;return[u("div",ie,[e.id?(d(),r(O,{key:0,title:`${e.status=="active"?"Active":"Disabled"}`,icon:`${e.status=="active"?l(E):l(P)}`,color:`${e.status=="active"?"success":"error"}`,class:"my-auto mr-2"},null,8,["title","icon","color"])):p("",!0),i(R,{"hide-details":"auto",label:"Type",variant:"outlined",modelValue:e.type,"onUpdate:modelValue":v=>e.type=v,items:J.value,"item-title":"value","item-value":"id",density:"compact",disabled:e.id<10},null,8,["modelValue","onUpdate:modelValue","items","disabled"])]),u("div",oe,[i(B,{"hide-details":"auto",modelValue:e.title,"onUpdate:modelValue":v=>e.title=v,label:"Status Title",variant:"outlined",density:"compact",disabled:e.id<10},null,8,["modelValue","onUpdate:modelValue","disabled"])]),e.id>9?(d(),V("div",de,[l(o).user.role=="superadmin"||(s=l(o).capabilities)!=null&&s.includes("delete")?(d(),r(h,{key:0,title:`${e.id?e.status=="active"?"Click to disable":"Click to enable":"Remove row"}`,icon:`${e.id?e.status=="active"?l(F):l(L):l(K)}`,onClick:v=>C(t,e,"status"),size:"x-small",color:`${e&&e.status=="disabled"?"success":"error"}`,class:"mx-1 show-hover"},null,8,["title","icon","onClick","color"])):p("",!0)])):p("",!0)]}),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1}),i(T,{class:"v-col-12 v-col-md-6 mt-1 col-sm-12"},{default:n(()=>[i(D,{class:"px-5",loading:k.value.loading},{default:n(()=>[i(S,null,{default:n(()=>[i(b,{class:"mb-2"},{default:n(()=>{var e,t;return[u("div",ne,[ue,l(o).user.role=="superadmin"||(e=l(o).capabilities)!=null&&e.includes("add")?(d(),r(h,{key:0,icon:l(U),onClick:a[2]||(a[2]=s=>H()),size:"x-small",color:"primary"},null,8,["icon"])):p("",!0),(l(o).user.role=="superadmin"||(t=l(o).capabilities)!=null&&t.includes("edit"))&&m.value.length>0?(d(),r(h,{key:1,loading:x.value,onClick:a[3]||(a[3]=s=>$("condition")),size:"small",color:"secondary",class:"mx-5"},{default:n(()=>[I("Save")]),_:1},8,["loading"])):p("",!0)]),i(A)]}),_:1}),(d(!0),V(z,null,N(m.value,(e,t)=>(d(),r(b,{key:t,class:"parent-row-show"},{default:n(()=>{var s;return[u("div",ce,[e.id?(d(),r(O,{key:0,title:`${e.status=="active"?"Active":"Disabled"}`,icon:`${e.status=="active"?l(E):l(P)}`,color:`${e.status=="active"?"success":"error"}`,class:"my-auto mr-2"},null,8,["title","icon","color"])):p("",!0),i(R,{"hide-details":"auto",label:"Type",variant:"outlined",modelValue:e.type,"onUpdate:modelValue":v=>e.type=v,items:M.value,"item-title":"value","item-value":"id",density:"compact"},null,8,["modelValue","onUpdate:modelValue","items"])]),u("div",re,[i(B,{"hide-details":"auto",modelValue:e.title,"onUpdate:modelValue":v=>e.title=v,label:"Condition Title",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",ve,[l(o).user.role=="superadmin"||(s=l(o).capabilities)!=null&&s.includes("delete")?(d(),r(h,{key:0,title:`${e.id?e.status=="active"?"Click to disable":"Click to enable":"Remove row"}`,icon:`${e.id?e.status=="active"?l(F):l(L):l(K)}`,onClick:v=>C(t,e,"condition"),size:"x-small",color:`${e&&e.status=="disabled"?"success":"error"}`,class:"mx-1 show-hover"},null,8,["title","icon","onClick","color"])):p("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1}),i(T,{class:"v-col-12 v-col-md-6 mt-1 col-sm-12"},{default:n(()=>[i(D,{class:"px-5",loading:k.value.loading},{default:n(()=>[i(S,null,{default:n(()=>[i(b,{class:"mb-2"},{default:n(()=>{var e,t;return[u("div",pe,[ye,l(o).user.role=="superadmin"||(e=l(o).capabilities)!=null&&e.includes("add")?(d(),r(h,{key:0,icon:l(U),onClick:a[4]||(a[4]=s=>Q()),size:"x-small",color:"primary"},null,8,["icon"])):p("",!0),(l(o).user.role=="superadmin"||(t=l(o).capabilities)!=null&&t.includes("edit"))&&f.value.length>0?(d(),r(h,{key:1,loading:x.value,onClick:a[5]||(a[5]=s=>$("incident")),size:"small",color:"secondary",class:"mx-5"},{default:n(()=>[I("Save")]),_:1},8,["loading"])):p("",!0)]),me,i(A)]}),_:1}),(d(!0),V(z,null,N(f.value,(e,t)=>(d(),r(b,{key:t,class:"parent-row-show"},{default:n(()=>{var s;return[u("div",fe,[e.id?(d(),r(O,{key:0,title:`${e.status=="active"?"Active":"Disabled"}`,icon:`${e.status=="active"?l(E):l(P)}`,color:`${e.status=="active"?"success":"error"}`,class:"my-auto mr-2"},null,8,["title","icon","color"])):p("",!0),i(R,{"hide-details":"auto",label:"Type",variant:"outlined",modelValue:e.type,"onUpdate:modelValue":v=>e.type=v,items:W.value,"item-title":"value","item-value":"id",density:"compact",disabled:e.id<10},null,8,["modelValue","onUpdate:modelValue","items","disabled"])]),u("div",_e,[i(B,{"hide-details":"auto",modelValue:e.title,"onUpdate:modelValue":v=>e.title=v,label:"Incident Title",variant:"outlined",density:"compact",disabled:e.id<10},null,8,["modelValue","onUpdate:modelValue","disabled"])]),e.id>9?(d(),V("div",he,[l(o).user.role=="superadmin"||(s=l(o).capabilities)!=null&&s.includes("delete")?(d(),r(h,{key:0,title:`${e.id?e.status=="active"?"Click to disable":"Click to enable":"Remove row"}`,icon:`${e.id?e.status=="active"?l(F):l(L):l(K)}`,onClick:v=>C(t,e,"incident"),size:"x-small",color:`${e&&e.status=="disabled"?"success":"error"}`,class:"mx-1 show-hover"},null,8,["title","icon","onClick","color"])):p("",!0)])):p("",!0)]}),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),i(le,{options:g.value},null,8,["options"])]),_:1}))}};export{xe as default};
