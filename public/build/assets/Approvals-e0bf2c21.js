import{G as De,u as Be,r as y,c as b,w as _,m as Le,o as t,s as U,b as e,d as s,e as o,j as le,z as d,t as u,y as p,E as L,p as r,ac as pe,q as re,C as T,ag as Ve,k as z,Q as we,R as ye,ax as ze,ad as H,U as D,i as ae,ay as de,az as ne,aA as Ee,aB as Ae,F as ce,aC as Fe,S as Me,T as Ge,ab as Y,f as Ke,Z as He,_ as Ce}from"./app-c29f30ab.js";import{u as he}from"./formatDate-559e9d83.js";import{_ as Ye}from"./AppSnackBar-cc7aa73e.js";const Je={class:"v-col-12 v-col-md-3 mt-auto font-weight-bold"},Qe={class:"d-flex"},We=e("div",{class:"mr-2"},"FROM:",-1),Xe={class:"d-flex"},Ze=e("div",{class:"mr-6 pr-2"},"TO:",-1),el={class:"v-col-12 v-col-md-6 text-center"},ll=e("img",{src:"/assets/images/grandiose-logo.jpg",style:{"max-height":"100px"}},null,-1),al=e("br",null,null,-1),tl={class:"v-col-12 v-col-md-3 mt-auto approval-date font-weight-bold"},sl=e("br",null,null,-1),ol=e("div",{class:"v-col-1 v-col-md-1 py-1"},"IMG",-1),rl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM DESC",-1),dl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ASSET NO",-1),nl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"QTY",-1),cl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"UOM",-1),il=e("div",{class:"v-col-1 v-col-md-1 py-1"},"WEIGHT(KG)",-1),ul=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM VALUE",-1),vl=e("div",{class:"v-col-2 v-col-md-2 py-1"},[o(" REMARKS"),e("br"),o("REASON FOR REQUEST ")],-1),_l={class:"v-col-2 v-col-md-3 py-1 d-flex justify-space-between"},pl={style:{position:"relative"}},yl={key:0,class:"checkbox-notice"},hl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},fl={key:0},ml={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},kl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},gl={key:1,class:"bg-light-gray d-flex flex-column-reverse flex-start-end border-bottom"},xl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},bl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},Vl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},wl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},El={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},Al={key:0,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},Cl={key:1,class:"v-col-12 v-col-md-3 py-1 d-flex"},ql={style:{width:"100%"}},Rl={key:0},Tl=e("strong",null," Asset Supervisor - Projects",-1),jl=e("br",null,null,-1),Ul={key:0},Il={key:2,class:"v-col-12 v-col-md-3 py-1"},Sl={key:0},Ol=e("strong",null," Asset Supervisor - Projects",-1),Pl=e("br",null,null,-1),$l={style:{"text-wrap":"wrap"}},Nl={key:1},Dl=e("strong",null," Commercial Manager - Projects",-1),Bl=e("br",null,null,-1),Ll={style:{"text-wrap":"wrap"}},zl={key:2},Fl=e("strong",null," Transport",-1),Ml=e("br",null,null,-1),Gl={style:{"text-wrap":"wrap"}},Kl={key:3},Hl=e("strong",null," Releasing",-1),Yl=e("br",null,null,-1),Jl={style:{"text-wrap":"wrap"}},Ql={key:3,class:"v-col-12 v-col-md-3 py-1"},Wl={key:0},Xl=e("strong",null," Asset Supervisor - Projects",-1),Zl=e("br",null,null,-1),ea={style:{"text-wrap":"wrap"}},la={key:1},aa=e("strong",null," Commercial Manager - Projects",-1),ta=e("br",null,null,-1),sa={style:{"text-wrap":"wrap"}},oa={key:2},ra=e("strong",null," Transport",-1),da=e("br",null,null,-1),na={style:{"text-wrap":"wrap"}},ca={key:4,class:"v-col-12 v-col-md-3 py-1 d-flex justify-space-between"},ia={key:0},ua=e("strong",null," Asset Supervisor - Projects",-1),va=e("br",null,null,-1),_a={style:{"text-wrap":"wrap"}},pa={key:1},ya=e("strong",null," Commercial Manager - Projects",-1),ha=e("br",null,null,-1),fa={style:{"text-wrap":"wrap"}},ma={key:2},ka=e("strong",null," Transport",-1),ga=e("br",null,null,-1),xa={style:{"text-wrap":"wrap"}},ba={key:3},Va=e("strong",null," Releasing",-1),wa=e("br",null,null,-1),Ea={style:{"text-wrap":"wrap"}},Aa={key:0,class:"my-auto"},Ca={class:"pa-0 ma-0 v-col-1 my-auto",style:{position:"relative"}},qa={key:0,class:"checkbox-notice"},Ra={key:5,class:"v-col-12 v-col-md-3 py-1 d-flex justify-space-between ssss"},Ta={key:0,style:{"border-bottom":"1px solid #000000"},class:"pa-1"},ja={key:0},Ua=e("strong",null," Asset Supervisor - Projects",-1),Ia=e("br",null,null,-1),Sa={style:{"text-wrap":"wrap"}},Oa={key:1},Pa=e("strong",null," Commercial Manager - Projects",-1),$a=e("br",null,null,-1),Na={style:{"text-wrap":"wrap"}},Da={key:2},Ba=e("strong",null," Transport",-1),La=e("br",null,null,-1),za={style:{"text-wrap":"wrap"}},Fa={key:3},Ma=e("strong",null," Releasing",-1),Ga=e("br",null,null,-1),Ka={style:{"text-wrap":"wrap"}},Ha={key:4},Ya=e("strong",null," Receiver",-1),Ja={style:{"text-wrap":"wrap"}},Qa={key:1},Wa={key:2},Xa={key:3},Za={key:0,class:"v-col-12 text-center font-weight-bold text-info"},et=e("br",null,null,-1),lt={key:1,class:"v-col-12 text-center font-weight-bold text-info"},at={key:0,class:"ml-5 d-flex"},tt=e("div",{class:"px-2 mr-5"},"|",-1),st={key:1,class:"ml-6"},ot={class:"v-col-12 px-0 my-0"},rt=["data"],dt={class:"v-col-12 v-col-md-3 pa-0 mb-4"},nt=e("div",{class:"text-center py-1 font-weight-bold"}," Requested By ",-1),ct={class:"text-center py-1"},it={class:"text-center py-1"},ut={class:"text-center text-caption"},vt={key:0},_t={key:0,class:"d-flex"},pt=["onClick"],yt=["onClick"],ht={key:1},ft=["onClick"],mt=["onClick"],kt={class:"text-center py-1"},gt={class:"text-center py-1"},xt={class:"text-center text-caption"},bt={key:2,class:"v-col-12 text-caption",style:{border:"1px solid red","border-radius":"5px"}},Vt={class:"v-col-12 text-center"},wt=e("div",{class:"v-col-12 text-center mt-3 font-weight-bold"}," REASON FOR REJECTION ",-1),Et={class:"v-col-12"},Tt={__name:"Approvals",setup(At){const v=De(),qe=Be(),fe=y(!0),n=y({}),S=y({}),k=y(!1),C=y(!1),q=y(!1),R=y(!1),O=y(!1),B=y([]),J=y(!1),F=y(""),Q=y(!1),Re=y(v.query.id),f=y(""),ie=y(0),te=y([]),se=y(!1),me=async()=>{let i={id:v.query.id,profile_id:v.query.pid,order:v.query.o};if(!v.query.id||!v.query.pv){fe.value=!1;return}await axios.post("/api/pv/fetch/request-assets/data",i).then(c=>{var j,P,x,I,X,Z,l,m,V,w,A;if(n.value=c.data,!n.value.access){fe.value=!1;return}f.value=(P=(j=c.data)==null?void 0:j.data)==null?void 0:P.status,ie.value=(I=(x=c.data)==null?void 0:x.data)==null?void 0:I.request_type_id,te.value=(Z=(X=c.data)==null?void 0:X.data)==null?void 0:Z.attachment,((V=(m=(l=n.value)==null?void 0:l.data)==null?void 0:m.request_approvals)==null?void 0:V.length)>0&&(k.value=n.value.data.request_approvals.filter(a=>{var E;return a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&((E=a.profile)==null?void 0:E.role)=="asset-supervisor"})[0],C.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="releasing")[0],q.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="transport")[0],R.value=n.value.data.request_approvals.filter(a=>{var E;return a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&((E=a.profile)==null?void 0:E.role)=="commercial-manager"})[0],O.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="receiver")[0],_e.value=n.value.data.request_approvals[n.value.data.request_approvals.length-1].approval_type,(O.value||k.value)&&f.value!="cancelled"&&(Q.value=!0)),se.value=!1,n.value.data.request_approvals.filter(a=>a.status=="done"&&a.approval_type=="reviewer")[0]&&(se.value=!0),B.value=(A=(w=n.value)==null?void 0:w.data)==null?void 0:A.items}).catch(c=>{console.log(c.response.data)})},ue=y(1),M=y("image"),Te=(i,c)=>{let g=i.path.split(".");M.value=g[g.length-1],ue.value=c,G.value=!0},je=()=>{window.print()},ve=y(window.location.origin),G=y(!1),ke=y(1),Ue=i=>{ke.value=i,G.value=!0},_e=y(""),ge=y({}),Ie=i=>{J.value=!0,ge.value=i},Se=()=>{J.value=!1,F.value=""},Oe=(i,c)=>{if(i.length<11||n.value.data.types!=="request"||(S.value={status:!1},i.split("-").length<3))return!1;S.value={status:!0,type:"info",text:"Validating asset code..."},axios.get("/api/fetch-asset-info/by/asset-code-validation/"+i).then(j=>{setTimeout(()=>{if(!j.data.status){S.value={status:!0,type:"error",text:"Asset Code is invalid"};return}if(j.data.status.title==="In-Used"){S.value={status:!0,type:"error",text:"Asset is currently In-Used. You cannot use this asset code."},B.value[c].asset_code="";return}S.value={status:!0,type:"success",text:"Asset is available."}},1e3)})},oe=(i,c=null)=>{if(J.value=!1,!(f.value=="cancelled"||i.status=="reject")&&(i.status=="awaiting-approval"||i.status=="reject")&&v.query.pid==i.profile_id&&v.query.o==i.orders){S.value={status:!0,type:"info",text:"Please wait..."};let g=[];(k.value||R.value||O.value||C.value||q.value)&&(g=B.value.map((x,I)=>(delete x.created_at,delete x.assets,delete x.updated_at,delete x.attachment,x)));let j={},P="";F.value&&c&&(P=F.value),j={profile_id:v.query.pid,id:v.query.id,order:v.query.o,type:n.value.data.types,assets:g,is_reject:P,requestor_id:n.value.data.profile_id},axios.post("/api/pv/store/request-asset/approve-data",j).then(x=>{let I="success";x.data.success||(I="error"),S.value={status:!0,type:I,text:x.data.message},Q.value=!1,setTimeout(()=>{me()},500)}).catch(x=>{console.log(x.response.data)});return}},Pe=i=>{if(i=="approve")return"Approved";if(i=="reviewer")return"Reviewed";if(i=="receiver")return"Received";if(i=="transport")return"Transport Arranged";if(i=="releasing")return"Released";if(i=="verify")return"Verified"},$e=()=>{let i=O.value;Q.value=!1,B.value.map(c=>{i?c.is_received=W.value:c.is_available=W.value})},xe=i=>{localStorage.removeItem("grs-generate-list"),localStorage.setItem("grs-generate-list",btoa(JSON.stringify(n.value.data))),qe.push({name:i}).catch(c=>{})},Ne=(i,c=6)=>{let g="00000"+i;return g.substring(g.length-c)},be=()=>{let i=!0,c=O.value;B.value.map(g=>{c?g.is_received||(i=!1):g.is_available||(i=!1)}),W.value=i},W=y(!1);return me(),(i,c)=>(t(),b(Le,{style:{"max-width":"90%"},class:"mt-0 pt-0"},{default:_(()=>{var g,j,P,x,I,X,Z;return[((g=B.value)==null?void 0:g.length)>0?(t(),b(U,{key:0,class:"mt-0 pt-0 no-print mt-2"},{default:_(()=>{var l,m,V,w;return[e("div",null,[s(le,{color:"primary",class:"mx-1",size:"small",onClick:je},{default:_(()=>[o("Print")]),_:1}),(((l=n.value.data)==null?void 0:l.transfer_from.id)==45||((m=n.value.data)==null?void 0:m.transfer_to.id)==45)&&se.value&&n.value.data.status!=="reject"?(t(),b(le,{key:0,color:"primary",class:"mx-1",size:"small",onClick:c[0]||(c[0]=A=>xe("GenerateInvoice"))},{default:_(()=>[o("GENERATE INVOICE")]),_:1})):d("",!0),(((V=n.value.data)==null?void 0:V.transfer_from.id)==45||((w=n.value.data)==null?void 0:w.transfer_to.id)==45)&&se.value&&n.value.data.status!=="reject"?(t(),b(le,{key:1,color:"primary",class:"mx-1",size:"small",onClick:c[1]||(c[1]=A=>xe("GeneratePacking"))},{default:_(()=>[o("GENERATE PACKING LIST")]),_:1})):d("",!0)])]}),_:1})):d("",!0),s(U,{class:"mt-0 pt-0"},{default:_(()=>{var l,m,V,w,A,a,E,$,N;return[e("div",Je,[e("div",Qe,[We,e("div",null,u((m=(l=n.value.data)==null?void 0:l.transfer_from)==null?void 0:m.title),1)]),e("div",Xe,[Ze,e("div",null,u((w=(V=n.value.data)==null?void 0:V.transfer_to)==null?void 0:w.title),1)])]),e("div",el,[ll,al,e("strong",null,u((a=(A=n.value.data)==null?void 0:A.setup)==null?void 0:a.title),1)]),e("div",tl,[o(" SN-"+u((($=(E=n.value)==null?void 0:E.data)==null?void 0:$.types)=="request"?"5":"3")+u(Ne(Re.value)),1),sl,o(" "+u(p(he)((N=n.value.data)==null?void 0:N.created_at)),1)])]}),_:1}),s(L,{class:"my-5"}),s(U,null,{default:_(()=>[ol,rl,dl,nl,cl,il,ul,vl,e("div",_l,[o(" REMARKS "),e("div",pl,[Q.value?(t(),r("div",yl)):d("",!0),k.value||O.value?(t(),b(pe,{key:1,modelValue:W.value,"onUpdate:modelValue":[c[2]||(c[2]=l=>W.value=l),$e],class:"pa-0 ma-0 v-col-1","hide-details":"",disabled:f.value=="cancelled",variant:"underlined",density:"compact"},null,8,["modelValue","disabled"])):d("",!0)])])]),_:1}),(t(!0),r(ce,null,re(B.value,(l,m)=>(t(),b(U,{class:"mt-1 approval-form-pr",key:l.id},{default:_(()=>{var V,w,A,a,E,$,N,ee,K;return[e("div",hl,[(V=l.attachment)!=null&&V.id?(t(),r("div",fl,[s(z,{onClick:()=>Ue(l),maxHeight:"40",variant:"text",class:"ma-2"},{default:_(()=>[s(T,{size:"large",icon:p(Ve),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"]),s(ye,{modelValue:G.value,"onUpdate:modelValue":c[3]||(c[3]=h=>G.value=h),width:"95%","max-width":"900"},{default:_(()=>[s(z,{class:"bg-black"},{default:_(()=>[e("div",ml,[s(we,{src:ve.value+"/file/"+ke.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])])):(t(),b(z,{key:1,maxHeight:"40",variant:"text",class:"ma-2"},{default:_(()=>[s(T,{size:"large",icon:p(ze)},null,8,["icon"])]),_:1})),s(D,{modelValue:l.item_description,"onUpdate:modelValue":h=>l.item_description=h,variant:"underlined",density:"compact","hide-details":"",rows:"2",class:H(`${!k.value&&!R.value&&!C.value&&!q.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!k.value&&!R.value&&!C.value&&!q.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),e("div",kl,[(k.value||R.value||C.value||q.value)&&f.value!="cancelled"?(t(),b(ae,{key:0,modelValue:l.asset_code,"onUpdate:modelValue":[h=>l.asset_code=h,h=>Oe(l.asset_code,m)],variant:"underlined",density:"compact","hide-details":"",readonly:!k.value&&!R.value&&!C.value&&!q.value||f.value=="cancelled",class:H(`${!k.value&&!R.value&&!C.value&&!q.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])):(t(),r("div",gl,u(l.asset_code),1))]),e("div",xl,[s(ae,{value:l.qty,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",bl,[s(ae,{value:l.uom,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0},null,8,["value"])]),e("div",Vl,[s(ae,{modelValue:l.weight,"onUpdate:modelValue":h=>l.weight=h,variant:"underlined",density:"compact","hide-details":"",type:"number",class:H(`${!k.value&&!R.value&&!C.value&&!q.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!k.value&&!R.value&&!C.value&&!q.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),e("div",wl,[s(ae,{modelValue:l.item_value,"onUpdate:modelValue":h=>l.item_value=h,variant:"underlined",density:"compact","hide-details":"",type:"number",class:H(`${!k.value&&!R.value&&!C.value&&!q.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!k.value&&!R.value&&!C.value&&!q.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),e("div",El,[s(D,{value:l.reason_for_request,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0,rows:"2"},null,8,["value"])]),k.value?(t(),r("div",Al,[s(D,{modelValue:l.remarks,"onUpdate:modelValue":h=>l.remarks=h,variant:"underlined",density:"compact","hide-details":"",class:H(["text-remarks",`${f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`]),placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue","class"]),s(pe,{disabled:f.value=="cancelled",modelValue:l.is_available,"onUpdate:modelValue":[h=>l.is_available=h,be],class:"pa-0 ma-0 v-col-1","hide-details":"",variant:"underlined",density:"compact"},null,8,["disabled","modelValue","onUpdate:modelValue"])])):d("",!0),R.value?(t(),r("div",Cl,[e("div",ql,[l.remarks?(t(),r("div",Rl,[Tl,o(),jl,e("p",null,u(l.remarks),1),o(" ------- ")])):d("",!0),s(D,{modelValue:l.remarks_commercial,"onUpdate:modelValue":h=>l.remarks_commercial=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(A=(w=n.value)==null?void 0:w.data)!=null&&A.is_available?(t(),r("div",Ul,[s(T,{style:{position:"absolute",right:"60px"},class:"mt-3",icon:l.is_available?p(de):p(ne),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0)])):C.value?(t(),r("div",Il,[e("div",null,[l.remarks?(t(),r("div",Sl,[Ol,o(),Pl,e("pre",$l,u(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(t(),r("div",Nl,[Dl,o(),Bl,e("pre",Ll,u(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(t(),r("div",zl,[Fl,o(),Ml,e("pre",Gl,u(l.remarks_transport),1),o(" ------- ")])):d("",!0),l.remarks_release?(t(),r("div",Kl,[Hl,o(),Yl,e("pre",Jl,u(l.remarks_release),1),o(" ------- ")])):d("",!0)]),s(D,{modelValue:l.remarks_release,"onUpdate:modelValue":h=>l.remarks_release=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):q.value?(t(),r("div",Ql,[e("div",null,[l.remarks?(t(),r("div",Wl,[Xl,o(),Zl,e("pre",ea,u(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(t(),r("div",la,[aa,o(),ta,e("pre",sa,u(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(t(),r("div",oa,[ra,o(),da,e("pre",na,u(l.remarks_transport),1),o(" ------- ")])):d("",!0)]),s(D,{modelValue:l.remarks_transport,"onUpdate:modelValue":h=>l.remarks_transport=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):O.value?(t(),r("div",ca,[e("div",null,[e("div",null,[l.remarks?(t(),r("div",ia,[ua,o(),va,e("pre",_a,u(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(t(),r("div",pa,[ya,ha,e("pre",fa,u(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(t(),r("div",ma,[ka,o(),ga,e("pre",xa,u(l.remarks_transport),1),o(" ------- ")])):d("",!0),l.remarks_release?(t(),r("div",ba,[Va,o(),wa,e("pre",Ea,u(l.remarks_release),1),o(" ------- ")])):d("",!0)]),s(D,{modelValue:l.remarks_receive,"onUpdate:modelValue":h=>l.remarks_receive=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(E=(a=n.value)==null?void 0:a.data)!=null&&E.is_available?(t(),r("div",Aa,[s(T,{class:"mt-3",icon:l.is_available?p(de):p(ne),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),e("div",Ca,[Q.value?(t(),r("div",qa)):d("",!0),s(pe,{modelValue:l.is_received,"onUpdate:modelValue":[h=>l.is_received=h,be],"hide-details":"",variant:"underlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])])])):k.value?d("",!0):(t(),r("div",Ra,[l.remarks||l.remarks_commercial||l.remarks_release||l.remarks_receive||l.remarks_transport?(t(),r("div",Ta,[l.remarks?(t(),r("div",ja,[Ua,o(),Ia,e("pre",Sa,u(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(t(),r("div",Oa,[Pa,o(),$a,e("pre",Na,u(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(t(),r("div",Da,[Ba,o(),La,e("pre",za,u(l.remarks_transport),1),o(" ------- ")])):d("",!0),l.remarks_release?(t(),r("div",Fa,[Ma,o(),Ga,e("pre",Ka,u(l.remarks_release),1),o(" ------- ")])):d("",!0),l.remarks_receive?(t(),r("div",Ha,[Ya,e("pre",Ja,u(l.remarks_receive),1)])):d("",!0)])):(t(),r("div",Qa)),(N=($=n.value)==null?void 0:$.data)!=null&&N.is_available?(t(),r("div",Wa,[s(T,{class:"mt-3",icon:l.is_available?p(de):p(ne),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),((K=(ee=n.value)==null?void 0:ee.data)==null?void 0:K.status)=="complete"&&_e.value=="receiver"?(t(),r("div",Xa,[s(T,{class:"mt-3",icon:l.is_received?p(Ee):p(Ae),color:`${l.is_received?"success":"error"}`},null,8,["icon","color"])])):d("",!0)]))]}),_:2},1024))),128)),k.value?(t(),b(U,{key:1,class:"mt-3"},{default:_(()=>[f.value!=="cancelled"?(t(),r("div",Za,[o(" YOU CAN UPDATE SOME DATA AND"),et,o(" PLEASE TICK CHECKBOX IF ASSET IS AVAILABLE BEFORE CLICKING THE APPROVE BUTTON ")])):(t(),r("div",lt," THIS REQUEST HAS BEEN CANCELLED. "))]),_:1})):d("",!0),(P=(j=n.value)==null?void 0:j.data)!=null&&P.is_available&&f.value!=="cancelled"?(t(),b(U,{key:2,class:"mt-6 mb-2"},{default:_(()=>[s(z,{variant:"text",class:"v-col-12 text-center pt-2 font-weight-bold pb-0 d-flex justify-center"},{default:_(()=>{var l;return[e("div",null,[s(T,{icon:p(de),color:"success"},null,8,["icon"]),o(" AVAILABLE "),s(T,{icon:p(ne),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT AVAILABLE ")]),O.value?(t(),r("div",at,[tt,e("div",null,[s(T,{icon:p(Fe)},null,8,["icon"]),o(" TICK RECEIVED ASSETS "),s(L,{thickness:8,color:"error",class:"divider-notice"})])])):d("",!0),((l=n.value.data)==null?void 0:l.status)=="complete"&&_e.value=="receiver"?(t(),r("div",st,[s(T,{icon:p(Ee),color:"success"},null,8,["icon"]),o(" RECEIVED "),s(T,{icon:p(Ae),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT RECEIVE ")])):d("",!0)]}),_:1})]),_:1})):d("",!0),s(U,{class:"mt-3"},{default:_(()=>[e("div",ot,[s(L),s(L)])]),_:1}),ie.value==2&&((x=te.value)==null?void 0:x.length)>0?(t(),b(U,{key:3,class:"my-3 d-flex justify-center"},{default:_(()=>[(t(!0),r(ce,null,re(te.value,(l,m)=>(t(),r("div",{key:l.id,class:"pa-2",style:{position:"relative"}},[s(z,{onClick:()=>Te(l,m)},{default:_(()=>[s(T,{size:"large",icon:p(Ve),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"])]))),128)),s(ye,{modelValue:G.value,"onUpdate:modelValue":c[5]||(c[5]=l=>G.value=l),width:"95%","max-width":"900"},{default:_(()=>[s(z,{class:"bg-black"},{default:_(()=>[s(Me,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:ue.value,"onUpdate:modelValue":c[4]||(c[4]=l=>ue.value=l)},{default:_(()=>[(t(!0),r(ce,null,re(te.value,(l,m)=>(t(),b(Ge,{key:m,"reverse-transition":"fade",transition:"fade"},{default:_(()=>[e("div",{style:Y(`${M.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[M.value=="jpg"||M.value=="jpeg"||M.value=="png"?(t(),b(we,{key:0,src:ve.value+"/file/"+l.path},null,8,["src"])):d("",!0),M.value=="pdf"?(t(),r("object",{key:1,data:ve.value+"/file/"+l.path,type:"application/pdf",width:"100%",height:"800px"},null,8,rt)):d("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):d("",!0),((I=n.value.data)==null?void 0:I.request_approvals.length)>0?(t(),b(U,{key:4},{default:_(()=>{var l,m,V,w,A;return[e("div",dt,[e("div",{class:"text-center mx-2 py-4 font-weight-bold",style:Y(`${f.value=="cancelled"?"color: red;":"color: rgb(3, 167, 3);"} border: 1px solid #ccc; font-size: 17px;`)},u(f.value=="cancelled"?"CANCELLED":"APPROVED"),5),nt,e("div",ct,u((m=(l=n.value.data)==null?void 0:l.profile)==null?void 0:m.display_name),1),e("div",it,u((w=(V=n.value.data)==null?void 0:V.profile)==null?void 0:w.designation),1),e("div",ut,u(p(he)((A=n.value.data)==null?void 0:A.created_at)),1)]),(t(!0),r(ce,null,re(n.value.data.request_approvals,a=>{var E,$,N,ee;return t(),r("div",{class:"v-col-12 v-col-md-3 pa-0 mb-4",key:a.id},[(a.profile.ecode=="100884"||a.profile.ecode=="102587"||a.profile.ecode=="100316"||((E=a.profile)==null?void 0:E.role)=="commercial-manager"||(($=a.profile)==null?void 0:$.role)=="technical-operation"&&ie.value==2)&&p(v).query.pid==a.profile_id&&p(v).query.o==a.orders?(t(),r("div",vt,[a.status=="awaiting-approval"?(t(),r("div",_t,[e("div",{onClick:K=>Ie(a),class:"cursor-pointer text-center py-5 v-col-6",style:Y(`border:1px solid #ccc; ${p(v).query.pid==a.profile_id&&p(v).query.o==a.orders?"background-color: rgb(182, 3, 3);color:#fff;":"background-color: none;"}`)}," REJECT ",12,pt),e("div",{onClick:K=>oe(a,"reject"),class:"cursor-pointer text-center py-5 v-col-6",style:Y(`border:1px solid #ccc; ${p(v).query.pid==a.profile_id&&p(v).query.o==a.orders?"background-color: rgb(3, 167, 3);color:#fff;":"background-color: none"}`)}," APPROVE ",12,yt)])):a.status=="reject"||a.status=="done"||a.status=="pending"?(t(),r("div",ht,[e("div",{onClick:K=>oe(a),class:"cursor-pointer text-center mx-2 py-5",style:Y(`border:1px solid #ccc; ${a.status=="reject"&&p(v).query.pid==a.profile_id&&p(v).query.o==a.orders?"background-color: gray; color:#fff;":a.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},u(a.status=="done"?"APPROVED":a.status=="reject"?"REJECTED":"CLICK TO APPROVE"),13,ft)])):d("",!0)])):(t(),r("div",{key:1,onClick:K=>oe(a),class:"cursor-pointer text-center mx-2 py-5",style:Y(`border:1px solid #ccc; ${f.value!="cancelled"&&a.status=="awaiting-approval"&&p(v).query.pid==a.profile_id&&p(v).query.o==a.orders?"background-color: rgb(182, 3, 3);color:#fff;":a.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},u(a.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,mt)),e("div",{class:H(`text-center py-1 font-weight-bold ${a.status=="reject"?"text-error text-uppercase":""}`)},u(a.status=="reject"?"Rejected":Pe(a.approval_type))+" By ",3),e("div",kt,u((N=a.profile)==null?void 0:N.display_name),1),e("div",gt,u((ee=a.profile)==null?void 0:ee.designation),1),e("div",xt,u(a.date_approved?p(he)(a.date_approved):""),1),a.reason_rejected?(t(),r("div",bt,[o(" Reason rejected "),s(L,{class:"my-2"}),o(" "+u(a.reason_rejected),1)])):d("",!0)])}),128))]}),_:1})):d("",!0),((Z=(X=n.value)==null?void 0:X.data)==null?void 0:Z.status)!=="complete"?(t(),b(U,{key:5,class:"no-print"},{default:_(()=>[e("div",Vt,[s(L),o(" You will receive a notification once you click the approve button. "),s(L)])]),_:1})):d("",!0),s(ye,{width:"500",modelValue:J.value,"onUpdate:modelValue":c[8]||(c[8]=l=>J.value=l),persistent:""},{default:_(()=>[s(z,null,{default:_(()=>[s(Ke,null,{default:_(()=>[s(U,null,{default:_(()=>[wt,e("div",Et,[s(D,{modelValue:F.value,"onUpdate:modelValue":c[6]||(c[6]=l=>F.value=l),label:"STATE YOUR REASON HERE",variant:"outlined"},null,8,["modelValue"])])]),_:1})]),_:1}),s(He,null,{default:_(()=>[s(Ce),s(le,{onClick:Se},{default:_(()=>[o("Cancel")]),_:1}),s(le,{color:"success",disabled:!F.value,onClick:c[7]||(c[7]=l=>oe(ge.value,"reject"))},{default:_(()=>[o("Confirm")]),_:1},8,["disabled"]),s(Ce)]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Ye,{options:S.value},null,8,["options"])]}),_:1}))}};export{Tt as default};
