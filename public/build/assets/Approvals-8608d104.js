import{G as De,u as Be,r as h,c as E,w as _,m as Le,o as s,s as j,b as e,d as t,e as o,j as ae,z as d,t as i,y as p,E as F,p as r,ac as pe,q as re,C as T,ag as Ve,k as z,Q as we,R as ye,ax as Fe,ad as D,U as B,i as M,ay as de,az as ne,aA as Ee,aB as Ce,F as ce,aC as ze,S as Me,T as Ge,ab as J,f as He,Z as Ke,_ as Ae}from"./app-db273801.js";import{u as he}from"./formatDate-559e9d83.js";import{_ as Ye}from"./AppSnackBar-9295a16e.js";const Je={class:"v-col-12 v-col-md-3 mt-auto font-weight-bold"},Qe={class:"d-flex"},We=e("div",{class:"mr-2"},"FROM:",-1),Xe={class:"d-flex"},Ze=e("div",{class:"mr-6 pr-2"},"TO:",-1),el={class:"v-col-12 v-col-md-6 text-center"},ll=e("img",{src:"/assets/images/grandiose-logo.jpg",style:{"max-height":"100px"}},null,-1),al=e("br",null,null,-1),sl={class:"v-col-12 v-col-md-3 mt-auto approval-date font-weight-bold"},tl=e("br",null,null,-1),ol=e("div",{class:"v-col-1 v-col-md-1 py-1"},"IMG",-1),rl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM DESC",-1),dl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ASSET NO",-1),nl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"QTY",-1),cl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"UOM",-1),ul=e("div",{class:"v-col-1 v-col-md-1 py-1"},"WEIGHT",-1),il=e("div",{class:"v-col-1 v-col-md-1 py-1"},"HSCODE",-1),vl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM VALUE",-1),_l=e("div",{class:"v-col-1 v-col-md-1 py-1"},"COUNTRY OF ORIGIN",-1),pl=e("div",{class:"v-col-2 v-col-md-1 py-1"},[o(" REMARKS"),e("br"),o("REASON FOR REQUEST ")],-1),yl={class:"v-col-2 v-col-md-2 py-1 d-flex justify-space-between"},hl={style:{position:"relative"}},fl={key:0,class:"checkbox-notice"},ml={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},kl={key:0},gl={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},xl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},bl={key:1,class:"bg-light-gray d-flex flex-column-reverse flex-start-end border-bottom"},Vl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},wl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},El={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},Cl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},Al={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},ql={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},Rl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},Tl={key:0,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},Ul={key:1,class:"v-col-12 v-col-md-2 py-1 d-flex"},jl={key:0},Ol=e("strong",null," Asset Supervisor - Projects",-1),Il=e("br",null,null,-1),Sl={key:0},Pl={key:2,class:"v-col-12 v-col-md-2 py-1"},$l={key:0},Nl=e("strong",null," Asset Supervisor - Projects",-1),Dl=e("br",null,null,-1),Bl={style:{"text-wrap":"wrap"}},Ll={key:1},Fl=e("strong",null," Commercial Manager - Projects",-1),zl=e("br",null,null,-1),Ml={style:{"text-wrap":"wrap"}},Gl={key:2},Hl=e("strong",null," Transport",-1),Kl=e("br",null,null,-1),Yl={style:{"text-wrap":"wrap"}},Jl={key:3},Ql=e("strong",null," Releasing",-1),Wl=e("br",null,null,-1),Xl={style:{"text-wrap":"wrap"}},Zl={key:3,class:"v-col-12 v-col-md-2 py-1"},ea={key:0},la=e("strong",null," Asset Supervisor - Projects",-1),aa=e("br",null,null,-1),sa={style:{"text-wrap":"wrap"}},ta={key:1},oa=e("strong",null," Commercial Manager - Projects",-1),ra=e("br",null,null,-1),da={style:{"text-wrap":"wrap"}},na={key:2},ca=e("strong",null," Transport",-1),ua=e("br",null,null,-1),ia={style:{"text-wrap":"wrap"}},va={key:4,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},_a={key:0},pa=e("strong",null," Asset Supervisor - Projects",-1),ya=e("br",null,null,-1),ha={style:{"text-wrap":"wrap"}},fa={key:1},ma=e("strong",null," Commercial Manager - Projects",-1),ka=e("br",null,null,-1),ga={style:{"text-wrap":"wrap"}},xa={key:2},ba=e("strong",null," Transport",-1),Va=e("br",null,null,-1),wa={style:{"text-wrap":"wrap"}},Ea={key:3},Ca=e("strong",null," Releasing",-1),Aa=e("br",null,null,-1),qa={style:{"text-wrap":"wrap"}},Ra={key:0,class:"my-auto"},Ta={class:"pa-0 ma-0 v-col-1 my-auto",style:{position:"relative"}},Ua={key:0,class:"checkbox-notice"},ja={key:5,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between ssss"},Oa={key:0,style:{"border-bottom":"1px solid #000000"},class:"pa-1"},Ia={key:0},Sa=e("strong",null," Asset Supervisor - Projects",-1),Pa=e("br",null,null,-1),$a={style:{"text-wrap":"wrap"}},Na={key:1},Da=e("strong",null," Commercial Manager - Projects",-1),Ba=e("br",null,null,-1),La={style:{"text-wrap":"wrap"}},Fa={key:2},za=e("strong",null," Transport",-1),Ma=e("br",null,null,-1),Ga={style:{"text-wrap":"wrap"}},Ha={key:3},Ka=e("strong",null," Releasing",-1),Ya=e("br",null,null,-1),Ja={style:{"text-wrap":"wrap"}},Qa={key:4},Wa=e("strong",null," Receiver",-1),Xa={style:{"text-wrap":"wrap"}},Za={key:1},es={key:2},ls={key:3},as={key:0,class:"v-col-12 text-center font-weight-bold text-info"},ss=e("br",null,null,-1),ts={key:1,class:"v-col-12 text-center font-weight-bold text-info"},os={key:0,class:"ml-5 d-flex"},rs=e("div",{class:"px-2 mr-5"},"|",-1),ds={key:1,class:"ml-6"},ns={class:"v-col-12 px-0 my-0"},cs=["data"],us={class:"v-col-12 v-col-md-3 pa-0 mb-4"},is=e("div",{class:"text-center py-1 font-weight-bold"}," Requested By ",-1),vs={class:"text-center py-1"},_s={class:"text-center py-1"},ps={class:"text-center text-caption"},ys={key:0},hs={key:0,class:"d-flex"},fs=["onClick"],ms=["onClick"],ks={key:1},gs=["onClick"],xs=["onClick"],bs={class:"text-center py-1"},Vs={class:"text-center py-1"},ws={class:"text-center text-caption"},Es={key:2,class:"v-col-12 text-caption",style:{border:"1px solid red","border-radius":"5px"}},Cs={class:"v-col-12 text-center"},As=e("div",{class:"v-col-12 text-center mt-3 font-weight-bold"}," REASON FOR REJECTION ",-1),qs={class:"v-col-12"},Os={__name:"Approvals",setup(Rs){const v=De(),qe=Be(),fe=h(!0),n=h({}),I=h({}),m=h(!1),g=h(!1),x=h(!1),b=h(!1),S=h(!1),L=h([]),Q=h(!1),G=h(""),W=h(!1),Re=h(v.query.id),f=h(""),ue=h(0),se=h([]),te=h(!1),me=async()=>{let u={id:v.query.id,profile_id:v.query.pid,order:v.query.o};if(!v.query.id||!v.query.pv){fe.value=!1;return}await axios.post("/api/pv/fetch/request-assets/data",u).then(c=>{var U,P,w,O,Z,ee,l,k,C,A,R;if(n.value=c.data,!n.value.access){fe.value=!1;return}f.value=(P=(U=c.data)==null?void 0:U.data)==null?void 0:P.status,ue.value=(O=(w=c.data)==null?void 0:w.data)==null?void 0:O.request_type_id,se.value=(ee=(Z=c.data)==null?void 0:Z.data)==null?void 0:ee.attachment,((C=(k=(l=n.value)==null?void 0:l.data)==null?void 0:k.request_approvals)==null?void 0:C.length)>0&&(m.value=n.value.data.request_approvals.filter(a=>{var q;return a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&((q=a.profile)==null?void 0:q.role)=="asset-supervisor"})[0],g.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="releasing")[0],x.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="transport")[0],b.value=n.value.data.request_approvals.filter(a=>{var q;return a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&((q=a.profile)==null?void 0:q.role)=="commercial-manager"})[0],S.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="receiver")[0],_e.value=n.value.data.request_approvals[n.value.data.request_approvals.length-1].approval_type,(S.value||m.value)&&f.value!="cancelled"&&(W.value=!0)),te.value=!1,n.value.data.request_approvals.filter(a=>a.status=="done"&&a.approval_type=="reviewer")[0]&&(te.value=!0),L.value=(R=(A=n.value)==null?void 0:A.data)==null?void 0:R.items}).catch(c=>{console.log(c.response.data)})},ie=h(1),H=h("image"),Te=(u,c)=>{let V=u.path.split(".");H.value=V[V.length-1],ie.value=c,K.value=!0},Ue=()=>{window.print()},ve=h(window.location.origin),K=h(!1),ke=h(1),je=u=>{ke.value=u,K.value=!0},_e=h(""),ge=h({}),Oe=u=>{Q.value=!0,ge.value=u},Ie=()=>{Q.value=!1,G.value=""},Se=(u,c)=>{if(u.length<11||n.value.data.types!=="request"||(I.value={status:!1},u.split("-").length<3))return!1;I.value={status:!0,type:"info",text:"Validating asset code..."},axios.get("/api/fetch-asset-info/by/asset-code-validation/"+u).then(U=>{setTimeout(()=>{if(!U.data.status){I.value={status:!0,type:"error",text:"Asset Code is invalid"};return}if(U.data.status.title==="In-Used"){I.value={status:!0,type:"error",text:"Asset is currently In-Used. You cannot use this asset code."},L.value[c].asset_code="";return}I.value={status:!0,type:"success",text:"Asset is available."}},1e3)})},oe=(u,c=null)=>{if(Q.value=!1,!(f.value=="cancelled"||u.status=="reject")&&(u.status=="awaiting-approval"||u.status=="reject")&&v.query.pid==u.profile_id&&v.query.o==u.orders){I.value={status:!0,type:"info",text:"Please wait..."};let V=[];(m.value||b.value||S.value||g.value||x.value)&&(V=L.value.map((w,O)=>(delete w.created_at,delete w.assets,delete w.updated_at,delete w.attachment,w)));let U={},P="";G.value&&c&&(P=G.value),U={profile_id:v.query.pid,id:v.query.id,order:v.query.o,type:n.value.data.types,assets:V,is_reject:P,requestor_id:n.value.data.profile_id},axios.post("/api/pv/store/request-asset/approve-data",U).then(w=>{let O="success";w.data.success||(O="error"),I.value={status:!0,type:O,text:w.data.message},W.value=!1,setTimeout(()=>{me()},500)}).catch(w=>{console.log(w.response.data)});return}},Pe=u=>{if(u=="approve")return"Approved";if(u=="reviewer")return"Reviewed";if(u=="receiver")return"Received";if(u=="transport")return"Transport Arranged";if(u=="releasing")return"Released";if(u=="verify")return"Verified"},$e=()=>{let u=S.value;W.value=!1,L.value.map(c=>{u?c.is_received=X.value:c.is_available=X.value})},xe=u=>{qe.push({name:u,query:{data:btoa(JSON.stringify(n.value.data))}}).catch(c=>{})},Ne=(u,c=6)=>{let V="00000"+u;return V.substring(V.length-c)},be=()=>{let u=!0,c=S.value;L.value.map(V=>{c?V.is_received||(u=!1):V.is_available||(u=!1)}),X.value=u},X=h(!1);return me(),(u,c)=>(s(),E(Le,{style:{"max-width":"90%"},class:"mt-0 pt-0"},{default:_(()=>{var V,U,P,w,O,Z,ee;return[((V=L.value)==null?void 0:V.length)>0?(s(),E(j,{key:0,class:"mt-0 pt-0 no-print mt-2"},{default:_(()=>{var l,k,C,A;return[e("div",null,[t(ae,{color:"primary",class:"mx-1",size:"small",onClick:Ue},{default:_(()=>[o("Print")]),_:1}),(((l=n.value.data)==null?void 0:l.transfer_from.id)==45||((k=n.value.data)==null?void 0:k.transfer_to.id)==45)&&te.value&&n.value.data.status!=="reject"?(s(),E(ae,{key:0,color:"primary",class:"mx-1",size:"small",onClick:c[0]||(c[0]=R=>xe("GenerateInvoice"))},{default:_(()=>[o("GENERATE INVOICE")]),_:1})):d("",!0),(((C=n.value.data)==null?void 0:C.transfer_from.id)==45||((A=n.value.data)==null?void 0:A.transfer_to.id)==45)&&te.value&&n.value.data.status!=="reject"?(s(),E(ae,{key:1,color:"primary",class:"mx-1",size:"small",onClick:c[1]||(c[1]=R=>xe("GeneratePacking"))},{default:_(()=>[o("GENERATE PACKING LIST")]),_:1})):d("",!0)])]}),_:1})):d("",!0),t(j,{class:"mt-0 pt-0"},{default:_(()=>{var l,k,C,A,R,a,q,$,N;return[e("div",Je,[e("div",Qe,[We,e("div",null,i((k=(l=n.value.data)==null?void 0:l.transfer_from)==null?void 0:k.title),1)]),e("div",Xe,[Ze,e("div",null,i((A=(C=n.value.data)==null?void 0:C.transfer_to)==null?void 0:A.title),1)])]),e("div",el,[ll,al,e("strong",null,i((a=(R=n.value.data)==null?void 0:R.setup)==null?void 0:a.title),1)]),e("div",sl,[o(" SN-"+i((($=(q=n.value)==null?void 0:q.data)==null?void 0:$.types)=="request"?"5":"3")+i(Ne(Re.value)),1),tl,o(" "+i(p(he)((N=n.value.data)==null?void 0:N.created_at)),1)])]}),_:1}),t(F,{class:"my-5"}),t(j,null,{default:_(()=>[ol,rl,dl,nl,cl,ul,il,vl,_l,pl,e("div",yl,[o(" REMARKS "),e("div",hl,[W.value?(s(),r("div",fl)):d("",!0),m.value||S.value?(s(),E(pe,{key:1,modelValue:X.value,"onUpdate:modelValue":[c[2]||(c[2]=l=>X.value=l),$e],class:"pa-0 ma-0 v-col-1","hide-details":"",disabled:f.value=="cancelled",variant:"underlined",density:"compact"},null,8,["modelValue","disabled"])):d("",!0)])])]),_:1}),(s(!0),r(ce,null,re(L.value,(l,k)=>(s(),E(j,{class:"mt-1 approval-form-pr",key:l.id},{default:_(()=>{var C,A,R,a,q,$,N,le,Y;return[e("div",ml,[(C=l.attachment)!=null&&C.id?(s(),r("div",kl,[t(z,{onClick:()=>je(l),maxHeight:"40",variant:"text",class:"ma-2"},{default:_(()=>[t(T,{size:"large",icon:p(Ve),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"]),t(ye,{modelValue:K.value,"onUpdate:modelValue":c[3]||(c[3]=y=>K.value=y),width:"95%","max-width":"900"},{default:_(()=>[t(z,{class:"bg-black"},{default:_(()=>[e("div",gl,[t(we,{src:ve.value+"/file/"+ke.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])])):(s(),E(z,{key:1,maxHeight:"40",variant:"text",class:"ma-2"},{default:_(()=>[t(T,{size:"large",icon:p(Fe)},null,8,["icon"])]),_:1})),t(B,{modelValue:l.item_description,"onUpdate:modelValue":y=>l.item_description=y,variant:"underlined",density:"compact","hide-details":"",rows:"2",class:D(`${!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),e("div",xl,[(m.value||b.value||g.value||x.value)&&f.value!="cancelled"?(s(),E(M,{key:0,modelValue:l.asset_code,"onUpdate:modelValue":[y=>l.asset_code=y,y=>Se(l.asset_code,k)],variant:"underlined",density:"compact","hide-details":"",readonly:!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled",class:D(`${!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])):(s(),r("div",bl,i(l.asset_code),1))]),e("div",Vl,[t(M,{value:l.qty,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",wl,[t(M,{value:l.uom,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0},null,8,["value"])]),e("div",El,[t(M,{modelValue:l.weight,"onUpdate:modelValue":y=>l.weight=y,variant:"underlined",density:"compact","hide-details":"",class:D(`${!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),e("div",Cl,[t(M,{modelValue:l.hscode,"onUpdate:modelValue":y=>l.hscode=y,variant:"underlined",density:"compact","hide-details":"",class:D(`${!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),e("div",Al,[t(M,{modelValue:l.item_value,"onUpdate:modelValue":y=>l.item_value=y,variant:"underlined",density:"compact","hide-details":"",class:D(`${!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),e("div",ql,[t(M,{modelValue:l.country_of_origin,"onUpdate:modelValue":y=>l.country_of_origin=y,variant:"underlined",density:"compact","hide-details":"",class:D(`${!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!m.value&&!b.value&&!g.value&&!x.value||f.value=="cancelled",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),e("div",Rl,[t(B,{value:l.reason_for_request,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0,rows:"2"},null,8,["value"])]),m.value?(s(),r("div",Tl,[t(B,{modelValue:l.remarks,"onUpdate:modelValue":y=>l.remarks=y,variant:"underlined",density:"compact","hide-details":"",class:D(["text-remarks",`${f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`]),placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue","class"]),t(pe,{disabled:f.value=="cancelled",modelValue:l.is_available,"onUpdate:modelValue":[y=>l.is_available=y,be],class:"pa-0 ma-0 v-col-1","hide-details":"",variant:"underlined",density:"compact"},null,8,["disabled","modelValue","onUpdate:modelValue"])])):d("",!0),b.value?(s(),r("div",Ul,[e("div",null,[l.remarks?(s(),r("div",jl,[Ol,o(),Il,e("p",null,i(l.remarks),1),o(" ------- ")])):d("",!0),t(B,{modelValue:l.remarks_commercial,"onUpdate:modelValue":y=>l.remarks_commercial=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(R=(A=n.value)==null?void 0:A.data)!=null&&R.is_available?(s(),r("div",Sl,[t(T,{style:{position:"absolute",right:"60px"},class:"mt-3",icon:l.is_available?p(de):p(ne),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0)])):g.value?(s(),r("div",Pl,[e("div",null,[l.remarks?(s(),r("div",$l,[Nl,o(),Dl,e("pre",Bl,i(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(s(),r("div",Ll,[Fl,o(),zl,e("pre",Ml,i(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(s(),r("div",Gl,[Hl,o(),Kl,e("pre",Yl,i(l.remarks_transport),1),o(" ------- ")])):d("",!0),l.remarks_release?(s(),r("div",Jl,[Ql,o(),Wl,e("pre",Xl,i(l.remarks_release),1),o(" ------- ")])):d("",!0)]),t(B,{modelValue:l.remarks_release,"onUpdate:modelValue":y=>l.remarks_release=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):x.value?(s(),r("div",Zl,[e("div",null,[l.remarks?(s(),r("div",ea,[la,o(),aa,e("pre",sa,i(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(s(),r("div",ta,[oa,o(),ra,e("pre",da,i(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(s(),r("div",na,[ca,o(),ua,e("pre",ia,i(l.remarks_transport),1),o(" ------- ")])):d("",!0)]),t(B,{modelValue:l.remarks_transport,"onUpdate:modelValue":y=>l.remarks_transport=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):S.value?(s(),r("div",va,[e("div",null,[e("div",null,[l.remarks?(s(),r("div",_a,[pa,o(),ya,e("pre",ha,i(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(s(),r("div",fa,[ma,ka,e("pre",ga,i(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(s(),r("div",xa,[ba,o(),Va,e("pre",wa,i(l.remarks_transport),1),o(" ------- ")])):d("",!0),l.remarks_release?(s(),r("div",Ea,[Ca,o(),Aa,e("pre",qa,i(l.remarks_release),1),o(" ------- ")])):d("",!0)]),t(B,{modelValue:l.remarks_receive,"onUpdate:modelValue":y=>l.remarks_receive=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(q=(a=n.value)==null?void 0:a.data)!=null&&q.is_available?(s(),r("div",Ra,[t(T,{class:"mt-3",icon:l.is_available?p(de):p(ne),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),e("div",Ta,[W.value?(s(),r("div",Ua)):d("",!0),t(pe,{modelValue:l.is_received,"onUpdate:modelValue":[y=>l.is_received=y,be],"hide-details":"",variant:"underlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])])])):m.value?d("",!0):(s(),r("div",ja,[l.remarks||l.remarks_commercial||l.remarks_release||l.remarks_receive||l.remarks_transport?(s(),r("div",Oa,[l.remarks?(s(),r("div",Ia,[Sa,o(),Pa,e("pre",$a,i(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(s(),r("div",Na,[Da,o(),Ba,e("pre",La,i(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(s(),r("div",Fa,[za,o(),Ma,e("pre",Ga,i(l.remarks_transport),1),o(" ------- ")])):d("",!0),l.remarks_release?(s(),r("div",Ha,[Ka,o(),Ya,e("pre",Ja,i(l.remarks_release),1),o(" ------- ")])):d("",!0),l.remarks_receive?(s(),r("div",Qa,[Wa,e("pre",Xa,i(l.remarks_receive),1)])):d("",!0)])):(s(),r("div",Za)),(N=($=n.value)==null?void 0:$.data)!=null&&N.is_available?(s(),r("div",es,[t(T,{class:"mt-3",icon:l.is_available?p(de):p(ne),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),((Y=(le=n.value)==null?void 0:le.data)==null?void 0:Y.status)=="complete"&&_e.value=="receiver"?(s(),r("div",ls,[t(T,{class:"mt-3",icon:l.is_received?p(Ee):p(Ce),color:`${l.is_received?"success":"error"}`},null,8,["icon","color"])])):d("",!0)]))]}),_:2},1024))),128)),m.value?(s(),E(j,{key:1,class:"mt-3"},{default:_(()=>[f.value!=="cancelled"?(s(),r("div",as,[o(" YOU CAN UPDATE SOME DATA AND"),ss,o(" PLEASE TICK CHECKBOX IF ASSET IS AVAILABLE BEFORE CLICKING THE APPROVE BUTTON ")])):(s(),r("div",ts," THIS REQUEST HAS BEEN CANCELLED. "))]),_:1})):d("",!0),(P=(U=n.value)==null?void 0:U.data)!=null&&P.is_available&&f.value!=="cancelled"?(s(),E(j,{key:2,class:"mt-6 mb-2"},{default:_(()=>[t(z,{variant:"text",class:"v-col-12 text-center pt-2 font-weight-bold pb-0 d-flex justify-center"},{default:_(()=>{var l;return[e("div",null,[t(T,{icon:p(de),color:"success"},null,8,["icon"]),o(" AVAILABLE "),t(T,{icon:p(ne),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT AVAILABLE ")]),S.value?(s(),r("div",os,[rs,e("div",null,[t(T,{icon:p(ze)},null,8,["icon"]),o(" TICK RECEIVED ASSETS "),t(F,{thickness:8,color:"error",class:"divider-notice"})])])):d("",!0),((l=n.value.data)==null?void 0:l.status)=="complete"&&_e.value=="receiver"?(s(),r("div",ds,[t(T,{icon:p(Ee),color:"success"},null,8,["icon"]),o(" RECEIVED "),t(T,{icon:p(Ce),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT RECEIVE ")])):d("",!0)]}),_:1})]),_:1})):d("",!0),t(j,{class:"mt-3"},{default:_(()=>[e("div",ns,[t(F),t(F)])]),_:1}),ue.value==2&&((w=se.value)==null?void 0:w.length)>0?(s(),E(j,{key:3,class:"my-3 d-flex justify-center"},{default:_(()=>[(s(!0),r(ce,null,re(se.value,(l,k)=>(s(),r("div",{key:l.id,class:"pa-2",style:{position:"relative"}},[t(z,{onClick:()=>Te(l,k)},{default:_(()=>[t(T,{size:"large",icon:p(Ve),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"])]))),128)),t(ye,{modelValue:K.value,"onUpdate:modelValue":c[5]||(c[5]=l=>K.value=l),width:"95%","max-width":"900"},{default:_(()=>[t(z,{class:"bg-black"},{default:_(()=>[t(Me,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:ie.value,"onUpdate:modelValue":c[4]||(c[4]=l=>ie.value=l)},{default:_(()=>[(s(!0),r(ce,null,re(se.value,(l,k)=>(s(),E(Ge,{key:k,"reverse-transition":"fade",transition:"fade"},{default:_(()=>[e("div",{style:J(`${H.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[H.value=="jpg"||H.value=="jpeg"||H.value=="png"?(s(),E(we,{key:0,src:ve.value+"/file/"+l.path},null,8,["src"])):d("",!0),H.value=="pdf"?(s(),r("object",{key:1,data:ve.value+"/file/"+l.path,type:"application/pdf",width:"100%",height:"800px"},null,8,cs)):d("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):d("",!0),((O=n.value.data)==null?void 0:O.request_approvals.length)>0?(s(),E(j,{key:4},{default:_(()=>{var l,k,C,A,R;return[e("div",us,[e("div",{class:"text-center mx-2 py-4 font-weight-bold",style:J(`${f.value=="cancelled"?"color: red;":"color: rgb(3, 167, 3);"} border: 1px solid #ccc; font-size: 17px;`)},i(f.value=="cancelled"?"CANCELLED":"APPROVED"),5),is,e("div",vs,i((k=(l=n.value.data)==null?void 0:l.profile)==null?void 0:k.display_name),1),e("div",_s,i((A=(C=n.value.data)==null?void 0:C.profile)==null?void 0:A.designation),1),e("div",ps,i(p(he)((R=n.value.data)==null?void 0:R.created_at)),1)]),(s(!0),r(ce,null,re(n.value.data.request_approvals,a=>{var q,$,N,le;return s(),r("div",{class:"v-col-12 v-col-md-3 pa-0 mb-4",key:a.id},[(a.profile.ecode=="100884"||a.profile.ecode=="102587"||a.profile.ecode=="100316"||((q=a.profile)==null?void 0:q.role)=="commercial-manager"||(($=a.profile)==null?void 0:$.role)=="technical-operation"&&ue.value==2)&&p(v).query.pid==a.profile_id&&p(v).query.o==a.orders?(s(),r("div",ys,[a.status=="awaiting-approval"?(s(),r("div",hs,[e("div",{onClick:Y=>Oe(a),class:"cursor-pointer text-center py-5 v-col-6",style:J(`border:1px solid #ccc; ${p(v).query.pid==a.profile_id&&p(v).query.o==a.orders?"background-color: rgb(182, 3, 3);color:#fff;":"background-color: none;"}`)}," REJECT ",12,fs),e("div",{onClick:Y=>oe(a,"reject"),class:"cursor-pointer text-center py-5 v-col-6",style:J(`border:1px solid #ccc; ${p(v).query.pid==a.profile_id&&p(v).query.o==a.orders?"background-color: rgb(3, 167, 3);color:#fff;":"background-color: none"}`)}," APPROVE ",12,ms)])):a.status=="reject"||a.status=="done"||a.status=="pending"?(s(),r("div",ks,[e("div",{onClick:Y=>oe(a),class:"cursor-pointer text-center mx-2 py-5",style:J(`border:1px solid #ccc; ${a.status=="reject"&&p(v).query.pid==a.profile_id&&p(v).query.o==a.orders?"background-color: gray; color:#fff;":a.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},i(a.status=="done"?"APPROVED":a.status=="reject"?"REJECTED":"CLICK TO APPROVE"),13,gs)])):d("",!0)])):(s(),r("div",{key:1,onClick:Y=>oe(a),class:"cursor-pointer text-center mx-2 py-5",style:J(`border:1px solid #ccc; ${f.value!="cancelled"&&a.status=="awaiting-approval"&&p(v).query.pid==a.profile_id&&p(v).query.o==a.orders?"background-color: rgb(182, 3, 3);color:#fff;":a.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},i(a.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,xs)),e("div",{class:D(`text-center py-1 font-weight-bold ${a.status=="reject"?"text-error text-uppercase":""}`)},i(a.status=="reject"?"Rejected":Pe(a.approval_type))+" By ",3),e("div",bs,i((N=a.profile)==null?void 0:N.display_name),1),e("div",Vs,i((le=a.profile)==null?void 0:le.designation),1),e("div",ws,i(a.date_approved?p(he)(a.date_approved):""),1),a.reason_rejected?(s(),r("div",Es,[o(" Reason rejected "),t(F,{class:"my-2"}),o(" "+i(a.reason_rejected),1)])):d("",!0)])}),128))]}),_:1})):d("",!0),((ee=(Z=n.value)==null?void 0:Z.data)==null?void 0:ee.status)!=="complete"?(s(),E(j,{key:5,class:"no-print"},{default:_(()=>[e("div",Cs,[t(F),o(" You will receive a notification once you click the approve button. "),t(F)])]),_:1})):d("",!0),t(ye,{width:"500",modelValue:Q.value,"onUpdate:modelValue":c[8]||(c[8]=l=>Q.value=l),persistent:""},{default:_(()=>[t(z,null,{default:_(()=>[t(He,null,{default:_(()=>[t(j,null,{default:_(()=>[As,e("div",qs,[t(B,{modelValue:G.value,"onUpdate:modelValue":c[6]||(c[6]=l=>G.value=l),label:"STATE YOUR REASON HERE",variant:"outlined"},null,8,["modelValue"])])]),_:1})]),_:1}),t(Ke,null,{default:_(()=>[t(Ae),t(ae,{onClick:Ie},{default:_(()=>[o("Cancel")]),_:1}),t(ae,{color:"success",disabled:!G.value,onClick:c[7]||(c[7]=l=>oe(ge.value,"reject"))},{default:_(()=>[o("Confirm")]),_:1},8,["disabled"]),t(Ae)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Ye,{options:I.value},null,8,["options"])]}),_:1}))}};export{Os as default};
