import{r as h,a as T,c as d,w as l,m as z,n as F,o as u,d as a,v as V,k as x,f as w,E as n,j as _,e as f,y as g,s as C,H as N,p as B,q as A,b as c,t as D,i as P,F as U}from"./app-c9602054.js";import{_ as L}from"./AppPageHeader-1a038983.js";import{_ as E}from"./AppSnackBar-7f97094b.js";const j=c("div",{class:"v-col-1"},"#",-1),q=c("div",{class:"v-col-4 text-uppercase"},"Page Title",-1),H=c("div",{class:"v-col-7 text-uppercase"},"Page Slug",-1),K=c("div",{class:"v-col-9 my-0 py-0"},null,-1),M={class:"v-col-1"},O={class:"v-col-4"},R={class:"v-col-4"},G={class:"v-col-3 my-auto"},Y={__name:"Slugs",setup(I){const r=h([{title:"",slug:""}]),o=T(),v=h(!1),b=()=>{r.value.push({title:"",slug:""})},m=h({loading:!0}),k=h({status:!1,type:"info",text:null});(async()=>{await F(o.token).get("/api/fetch/pages-slug").then(i=>{r.value=i.data,m.value.loading=!1}).catch(i=>{m.value.loading=!1,console.log(i)})})();const $=i=>{let t=r.value;t.splice(i,1),r.value=[...t]},S=async function(){v.value=!0;let i=!1,s={data:r.value.map((e,p)=>(delete e.id,delete e.created_at,delete e.updated_at,delete e.link,(!e.slug||!e.title)&&(i=!0),e)),author:o.user.profile.id};if(i){k.value={status:!0,type:"error",text:"Fill-up the fields"},setTimeout(()=>{v.value=!1},1e3);return}await F(o.token).post("/api/store-page/settings",s).then(e=>{k.value={status:!0,type:"success",text:e.data.message},v.value=!1}).catch(e=>{v.value=!1,console.log(e)})};return(i,t)=>(u(),d(z,null,{default:l(()=>[a(L,{title:"Page List"}),a(C,{class:"mb-3"},{default:l(()=>[a(V,{class:"v-col-12 mt-1 col-sm-12"},{default:l(()=>[a(x,{class:"px-5",loading:m.value.loading},{default:l(()=>[a(w,null,{default:l(()=>{var s,e;return[n(o).user.role=="superadmin"||(s=n(o).capabilities)!=null&&s.includes("add")?(u(),d(_,{key:0,onClick:t[0]||(t[0]=p=>b()),size:"small",color:"primary"},{default:l(()=>[f("Add New")]),_:1})):g("",!0),n(o).user.role=="superadmin"||(e=n(o).capabilities)!=null&&e.includes("edit")?(u(),d(_,{key:1,onClick:t[1]||(t[1]=p=>S()),loading:v.value,size:"small",color:"secondary",class:"mx-5"},{default:l(()=>[f("Save")]),_:1},8,["loading"])):g("",!0)]}),_:1})]),_:1},8,["loading"])]),_:1}),a(V,{class:"v-col-12 mt-1 col-sm-12"},{default:l(()=>[a(x,{class:"px-5",loading:m.value.loading},{default:l(()=>[a(w,null,{default:l(()=>[a(C,null,{default:l(()=>[j,q,H,K,a(N)]),_:1}),(u(!0),B(U,null,A(r.value,(s,e)=>(u(),d(C,{key:e,class:"parent-row-show"},{default:l(()=>{var p;return[c("div",M,D(e+1),1),c("div",O,[a(P,{"hide-details":"",label:"Page Title here",variant:"outlined",modelValue:s.title,"onUpdate:modelValue":y=>s.title=y,density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),c("div",R,[a(P,{"hide-details":"",modelValue:s.slug,"onUpdate:modelValue":y=>s.slug=y,label:"Slug here",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),c("div",G,[n(o).user.role=="superadmin"||(p=n(o).capabilities)!=null&&p.includes("delete")?(u(),d(_,{key:0,onClick:y=>$(e),size:"small",color:"error",class:"mx-1 show-hover"},{default:l(()=>[f("Delete")]),_:2},1032,["onClick"])):g("",!0)]),a(N)]}),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1}),r.value.length>10?(u(),d(V,{key:0,class:"v-col-12 mt-1 col-sm-12"},{default:l(()=>[a(x,{class:"px-5",loading:m.value.loading},{default:l(()=>[a(w,null,{default:l(()=>{var s,e;return[(s=n(o).capabilities)!=null&&s.includes("add")?(u(),d(_,{key:0,onClick:t[2]||(t[2]=p=>b()),size:"small",color:"primary"},{default:l(()=>[f("Add New")]),_:1})):g("",!0),(e=n(o).capabilities)!=null&&e.includes("edit")?(u(),d(_,{key:1,onClick:t[3]||(t[3]=p=>S()),loading:v.value,size:"small",color:"secondary",class:"mx-5"},{default:l(()=>[f("Save")]),_:1},8,["loading"])):g("",!0)]}),_:1})]),_:1},8,["loading"])]),_:1})):g("",!0)]),_:1}),a(E,{options:k.value},null,8,["options"])]),_:1}))}};export{Y as default};
