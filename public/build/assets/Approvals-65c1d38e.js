import{G as Ne,u as Le,r as h,c as A,w as p,m as Be,o as s,s as I,b as l,d as t,e as o,j as le,z as d,t as i,y as _,E as F,p as r,ac as pe,q as re,C as U,ag as Ve,k as z,Q as we,R as _e,ay as Fe,ad as N,U as L,i as ae,az as de,aA as ne,aB as Ee,aC as Ae,F as ce,aD as ze,S as Me,T as Ge,ab as Q,f as Ke,Z as He,_ as Ce}from"./app-9b8e9f38.js";import{u as ye}from"./formatDate-559e9d83.js";import{_ as Qe}from"./AppSnackBar-4cd390a8.js";const Ye={class:"v-col-12 v-col-md-3 mt-auto font-weight-bold"},Je={class:"d-flex"},We=l("div",{class:"mr-2"},"FROM:",-1),Xe={class:"d-flex"},Ze=l("div",{class:"mr-6 pr-2"},"TO:",-1),el={class:"v-col-12 v-col-md-6 text-center"},ll=l("img",{src:"/assets/images/grandiose-logo.jpg",style:{"max-height":"100px"}},null,-1),al=l("br",null,null,-1),sl={class:"v-col-12 v-col-md-3 mt-auto approval-date font-weight-bold"},tl=l("br",null,null,-1),ol=l("div",{class:"v-col-1 v-col-md-1 py-1"},"IMG",-1),rl=l("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM DESC",-1),dl=l("div",{class:"v-col-1 v-col-md-1 py-1"},"ASSET NO",-1),nl=l("div",{class:"v-col-1 v-col-md-1 py-1"},"QTY",-1),cl=l("div",{class:"v-col-1 v-col-md-1 py-1"},"UOM",-1),ul=l("div",{class:"v-col-1 v-col-md-1 py-1"},"WEIGHT(KG)",-1),il=l("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM VALUE",-1),vl=l("div",{class:"v-col-2 v-col-md-2 py-1"},[o(" REMARKS"),l("br"),o("REASON FOR REQUEST ")],-1),pl={class:"v-col-2 v-col-md-3 py-1 d-flex justify-space-between"},_l={style:{position:"relative"}},yl={key:0,class:"checkbox-notice"},hl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},fl={key:0},ml={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},kl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},gl={key:1,class:"bg-light-gray d-flex flex-column-reverse flex-start-end border-bottom"},xl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},bl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},Vl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},wl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},El={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},Al={key:0,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},Cl={key:1,class:"v-col-12 v-col-md-3 py-1 d-flex"},Rl={style:{width:"100%"}},ql={key:0},Tl=l("strong",null," Asset Supervisor - Projects",-1),Ul=l("br",null,null,-1),jl={key:0},Il={key:2,class:"v-col-12 v-col-md-3 py-1"},Sl={key:0},Ol=l("strong",null," Asset Supervisor - Projects",-1),Dl=l("br",null,null,-1),Pl={style:{"text-wrap":"wrap"}},$l={key:1},Nl=l("strong",null," Commercial Manager - Projects",-1),Ll=l("br",null,null,-1),Bl={style:{"text-wrap":"wrap"}},Fl={key:2},zl=l("strong",null," Transport",-1),Ml=l("br",null,null,-1),Gl={style:{"text-wrap":"wrap"}},Kl={key:3},Hl=l("strong",null," Releasing",-1),Ql=l("br",null,null,-1),Yl={style:{"text-wrap":"wrap"}},Jl={key:3,class:"v-col-12 v-col-md-3 py-1"},Wl={key:0},Xl=l("strong",null," Asset Supervisor - Projects",-1),Zl=l("br",null,null,-1),ea={style:{"text-wrap":"wrap"}},la={key:1},aa=l("strong",null," Commercial Manager - Projects",-1),sa=l("br",null,null,-1),ta={style:{"text-wrap":"wrap"}},oa={key:2},ra=l("strong",null," Transport",-1),da=l("br",null,null,-1),na={style:{"text-wrap":"wrap"}},ca={key:4,class:"v-col-12 v-col-md-3 py-1 d-flex justify-space-between"},ua={key:0},ia=l("strong",null," Asset Supervisor - Projects",-1),va=l("br",null,null,-1),pa={style:{"text-wrap":"wrap"}},_a={key:1},ya=l("strong",null," Commercial Manager - Projects",-1),ha=l("br",null,null,-1),fa={style:{"text-wrap":"wrap"}},ma={key:2},ka=l("strong",null," Transport",-1),ga=l("br",null,null,-1),xa={style:{"text-wrap":"wrap"}},ba={key:3},Va=l("strong",null," Releasing",-1),wa=l("br",null,null,-1),Ea={style:{"text-wrap":"wrap"}},Aa={key:0,class:"my-auto"},Ca={class:"pa-0 ma-0 v-col-1 my-auto",style:{position:"relative"}},Ra={key:0,class:"checkbox-notice"},qa={key:5,class:"v-col-12 v-col-md-3 py-1 d-flex justify-space-between ssss"},Ta={key:0,style:{"border-bottom":"1px solid #000000"},class:"pa-1"},Ua={key:0},ja=l("strong",null," Asset Supervisor - Projects",-1),Ia=l("br",null,null,-1),Sa={style:{"text-wrap":"wrap"}},Oa={key:1},Da=l("strong",null," Commercial Manager - Projects",-1),Pa=l("br",null,null,-1),$a={style:{"text-wrap":"wrap"}},Na={key:2},La=l("strong",null," Transport",-1),Ba=l("br",null,null,-1),Fa={style:{"text-wrap":"wrap"}},za={key:3},Ma=l("strong",null," Releasing",-1),Ga=l("br",null,null,-1),Ka={style:{"text-wrap":"wrap"}},Ha={key:4},Qa=l("strong",null," Receiver",-1),Ya={style:{"text-wrap":"wrap"}},Ja={key:1},Wa={key:2},Xa={key:3},Za={key:0,class:"v-col-12 text-center font-weight-bold text-info"},es=l("br",null,null,-1),ls={key:1,class:"v-col-12 text-center font-weight-bold text-info"},as={key:0,class:"ml-5 d-flex"},ss=l("div",{class:"px-2 mr-5"},"|",-1),ts={key:1,class:"ml-6"},os={class:"v-col-12 px-0 my-0"},rs=["data"],ds={class:"v-col-12 v-col-md-3 pa-0 mb-4"},ns=l("div",{class:"text-center py-1 font-weight-bold"}," Requested By ",-1),cs={class:"text-center py-1"},us={class:"text-center py-1"},is={class:"text-center text-caption"},vs={key:0},ps={key:0,class:"d-flex"},_s=["onClick"],ys=["onClick"],hs={key:1},fs=["onClick"],ms=["onClick"],ks={class:"text-center py-1"},gs={class:"text-center py-1"},xs={class:"text-center text-caption"},bs={key:2,class:"v-col-12 text-caption",style:{border:"1px solid red","border-radius":"5px"}},Vs={class:"v-col-12 text-center"},ws=l("div",{class:"v-col-12 text-center mt-3 font-weight-bold"}," REASON FOR REJECTION ",-1),Es={class:"v-col-12"},Ts={__name:"Approvals",setup(As){const v=Ne(),Re=Le(),he=h(!0),n=h({}),O=h({}),m=h(!1),x=h(!1),b=h(!1),V=h(!1),k=h(!1),B=h([]),Y=h(!1),M=h(""),J=h(!1),qe=h(v.query.id),f=h(""),fe=h(0),se=h([]),te=h(!1),me=async()=>{let u={id:v.query.id,profile_id:v.query.pid,order:v.query.o};if(!v.query.id||!v.query.pv){he.value=!1;return}await axios.post("/api/pv/fetch/request-assets/data",u).then(c=>{var j,D,E,S,X,Z,e,g,C,R,T;if(n.value=c.data,!n.value.access){he.value=!1;return}f.value=(D=(j=c.data)==null?void 0:j.data)==null?void 0:D.status,fe.value=(S=(E=c.data)==null?void 0:E.data)==null?void 0:S.request_type_id,se.value=(Z=(X=c.data)==null?void 0:X.data)==null?void 0:Z.attachment,((C=(g=(e=n.value)==null?void 0:e.data)==null?void 0:g.request_approvals)==null?void 0:C.length)>0&&(m.value=n.value.data.request_approvals.filter(a=>{var q;return a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&((q=a.profile)==null?void 0:q.role)=="asset-supervisor"})[0],x.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="releasing")[0],b.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="transport")[0],V.value=n.value.data.request_approvals.filter(a=>{var q;return a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&((q=a.profile)==null?void 0:q.role)=="commercial-manager"})[0],k.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="receiver")[0],ve.value=n.value.data.request_approvals[n.value.data.request_approvals.length-1].approval_type,(k.value||m.value)&&f.value!="cancelled"&&(J.value=!0)),te.value=!1,n.value.data.request_approvals.filter(a=>a.status=="done"&&a.approval_type=="reviewer")[0]&&(te.value=!0),B.value=(T=(R=n.value)==null?void 0:R.data)==null?void 0:T.items}).catch(c=>{console.log(c.response.data)})},ue=h(1),G=h("image"),Te=(u,c)=>{let w=u.path.split(".");G.value=w[w.length-1],ue.value=c,K.value=!0},Ue=()=>{window.print()},ie=h(window.location.origin),K=h(!1),ke=h(1),je=u=>{ke.value=u,K.value=!0},ve=h(""),ge=h({}),Ie=u=>{Y.value=!0,ge.value=u},Se=()=>{Y.value=!1,M.value=""},Oe=(u,c)=>{if(u.length<11||n.value.data.types!=="request"||(O.value={status:!1},u.split("-").length<3))return!1;O.value={status:!0,type:"info",text:"Validating asset code..."},axios.get("/api/fetch-asset-info/by/asset-code-validation/"+u).then(j=>{setTimeout(()=>{if(!j.data.status){O.value={status:!0,type:"error",text:"Asset Code is invalid"};return}if(j.data.status.title==="In-Used"){O.value={status:!0,type:"error",text:"Asset is currently In-Used. You cannot use this asset code."},B.value[c].asset_code="";return}O.value={status:!0,type:"success",text:"Asset is available."}},1e3)})},oe=(u,c=null)=>{if(Y.value=!1,!(f.value=="cancelled"||u.status=="reject")&&(u.status=="awaiting-approval"||u.status=="reject")&&v.query.pid==u.profile_id&&v.query.o==u.orders){O.value={status:!0,type:"info",text:"Please wait..."};let w=[];(m.value||V.value||k.value||x.value||b.value)&&(w=B.value.map((E,S)=>(delete E.created_at,delete E.assets,delete E.updated_at,delete E.attachment,E)));let j={},D="";M.value&&c&&(D=M.value),j={profile_id:v.query.pid,id:v.query.id,order:v.query.o,type:n.value.data.types,assets:w,is_reject:D,requestor_id:n.value.data.profile_id},axios.post("/api/pv/store/request-asset/approve-data",j).then(E=>{let S="success";E.data.success||(S="error"),O.value={status:!0,type:S,text:E.data.message},J.value=!1,setTimeout(()=>{me()},500)}).catch(E=>{console.log(E.response.data)});return}},De=u=>{if(u=="approve")return"Approved";if(u=="reviewer")return"Reviewed";if(u=="receiver")return"Received";if(u=="transport")return"Transport Arranged";if(u=="releasing")return"Released";if(u=="verify")return"Verified"},Pe=()=>{let u=k.value;J.value=!1,B.value.map(c=>{u?c.is_received=W.value:c.is_available=W.value})},xe=u=>{localStorage.removeItem("grs-generate-list"),localStorage.setItem("grs-generate-list",btoa(JSON.stringify(n.value.data))),Re.push({name:u}).catch(c=>{})},$e=(u,c=6)=>{let w="00000"+u;return w.substring(w.length-c)},be=()=>{let u=!0,c=k.value;B.value.map(w=>{c?w.is_received||(u=!1):w.is_available||(u=!1)}),W.value=u},W=h(!1);return me(),(u,c)=>(s(),A(Be,{style:{"max-width":"90%"},class:"mt-0 pt-0"},{default:p(()=>{var w,j,D,E,S,X,Z;return[((w=B.value)==null?void 0:w.length)>0?(s(),A(I,{key:0,class:"mt-0 pt-0 no-print mt-2"},{default:p(()=>{var e,g,C,R;return[l("div",null,[t(le,{color:"primary",class:"mx-1",size:"small",onClick:Ue},{default:p(()=>[o("Print")]),_:1}),(((e=n.value.data)==null?void 0:e.transfer_from.id)==45||((g=n.value.data)==null?void 0:g.transfer_to.id)==45)&&te.value&&n.value.data.status!=="reject"?(s(),A(le,{key:0,color:"primary",class:"mx-1",size:"small",onClick:c[0]||(c[0]=T=>xe("GenerateInvoice"))},{default:p(()=>[o("GENERATE INVOICE")]),_:1})):d("",!0),(((C=n.value.data)==null?void 0:C.transfer_from.id)==45||((R=n.value.data)==null?void 0:R.transfer_to.id)==45)&&te.value&&n.value.data.status!=="reject"?(s(),A(le,{key:1,color:"primary",class:"mx-1",size:"small",onClick:c[1]||(c[1]=T=>xe("GeneratePacking"))},{default:p(()=>[o("GENERATE PACKING LIST")]),_:1})):d("",!0)])]}),_:1})):d("",!0),t(I,{class:"mt-0 pt-0"},{default:p(()=>{var e,g,C,R,T,a,q,P,$;return[l("div",Ye,[l("div",Je,[We,l("div",null,i((g=(e=n.value.data)==null?void 0:e.transfer_from)==null?void 0:g.title),1)]),l("div",Xe,[Ze,l("div",null,i((R=(C=n.value.data)==null?void 0:C.transfer_to)==null?void 0:R.title),1)])]),l("div",el,[ll,al,l("strong",null,i((a=(T=n.value.data)==null?void 0:T.setup)==null?void 0:a.title),1)]),l("div",sl,[o(" SN-"+i(((P=(q=n.value)==null?void 0:q.data)==null?void 0:P.types)=="request"?"5":"3")+i($e(qe.value)),1),tl,o(" "+i(_(ye)(($=n.value.data)==null?void 0:$.created_at)),1)])]}),_:1}),t(F,{class:"my-5"}),t(I,null,{default:p(()=>[ol,rl,dl,nl,cl,ul,il,vl,l("div",pl,[o(" REMARKS "),l("div",_l,[J.value?(s(),r("div",yl)):d("",!0),m.value||k.value?(s(),A(pe,{key:1,modelValue:W.value,"onUpdate:modelValue":[c[2]||(c[2]=e=>W.value=e),Pe],class:"pa-0 ma-0 v-col-1","hide-details":"",disabled:f.value=="cancelled",variant:"underlined",density:"compact"},null,8,["modelValue","disabled"])):d("",!0)])])]),_:1}),(s(!0),r(ce,null,re(B.value,(e,g)=>(s(),A(I,{class:"mt-1 approval-form-pr",key:e.id},{default:p(()=>{var C,R,T,a,q,P,$,ee,H;return[l("div",hl,[(C=e.attachment)!=null&&C.id?(s(),r("div",fl,[t(z,{onClick:()=>je(e),maxHeight:"40",variant:"text",class:"ma-2"},{default:p(()=>[t(U,{size:"large",icon:_(Ve),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"]),t(_e,{modelValue:K.value,"onUpdate:modelValue":c[3]||(c[3]=y=>K.value=y),width:"95%","max-width":"900"},{default:p(()=>[t(z,{class:"bg-black"},{default:p(()=>[l("div",ml,[t(we,{src:ie.value+"/file/"+ke.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])])):(s(),A(z,{key:1,maxHeight:"40",variant:"text",class:"ma-2"},{default:p(()=>[t(U,{size:"large",icon:_(Fe)},null,8,["icon"])]),_:1})),t(L,{modelValue:e.item_description,"onUpdate:modelValue":y=>e.item_description=y,variant:"underlined",density:"compact","hide-details":"",rows:"2",class:N(`${!m.value&&!V.value&&!x.value&&!b.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!m.value&&!V.value&&!x.value&&!b.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),l("div",kl,[(m.value||V.value||x.value||b.value||k.value)&&f.value!="cancelled"?(s(),A(ae,{key:0,modelValue:e.asset_code,"onUpdate:modelValue":[y=>e.asset_code=y,y=>Oe(e.asset_code,g)],variant:"underlined",density:"compact","hide-details":"",readonly:!m.value&&!V.value&&!x.value&&!b.value&&!k.value||f.value=="cancelled",class:N(`${!m.value&&!V.value&&!x.value&&!b.value&&!k.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])):(s(),r("div",gl,i(e.asset_code),1))]),l("div",xl,[t(ae,{modelValue:e.qty,"onUpdate:modelValue":y=>e.qty=y,variant:"underlined",density:"compact","hide-details":"",type:"number",readonly:!m.value&&!V.value&&!x.value&&!b.value&&!k.value||f.value=="cancelled",class:N(`${!m.value&&!V.value&&!x.value&&!b.value&&!k.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),l("div",bl,[t(ae,{modelValue:e.uom,"onUpdate:modelValue":y=>e.uom=y,variant:"underlined",density:"compact","hide-details":"",readonly:!m.value&&!V.value&&!x.value&&!b.value&&!k.value||f.value=="cancelled",class:N(`${!m.value&&!V.value&&!x.value&&!b.value&&!k.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),l("div",Vl,[t(ae,{modelValue:e.weight,"onUpdate:modelValue":y=>e.weight=y,variant:"underlined",density:"compact","hide-details":"",type:"number",class:N(`${!m.value&&!V.value&&!x.value&&!b.value&&!k.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!m.value&&!V.value&&!x.value&&!b.value&&!k.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),l("div",wl,[t(ae,{modelValue:e.item_value,"onUpdate:modelValue":y=>e.item_value=y,variant:"underlined",density:"compact","hide-details":"",type:"number",class:N(`${!m.value&&!V.value&&!x.value&&!b.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!m.value&&!V.value&&!x.value&&!b.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),l("div",El,[t(L,{value:e.reason_for_request,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0,rows:"2"},null,8,["value"])]),m.value?(s(),r("div",Al,[t(L,{modelValue:e.remarks,"onUpdate:modelValue":y=>e.remarks=y,variant:"underlined",density:"compact","hide-details":"",class:N(["text-remarks",`${f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`]),placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue","class"]),t(pe,{disabled:f.value=="cancelled",modelValue:e.is_available,"onUpdate:modelValue":[y=>e.is_available=y,be],class:"pa-0 ma-0 v-col-1","hide-details":"",variant:"underlined",density:"compact"},null,8,["disabled","modelValue","onUpdate:modelValue"])])):d("",!0),V.value?(s(),r("div",Cl,[l("div",Rl,[e.remarks?(s(),r("div",ql,[Tl,o(),Ul,l("p",null,i(e.remarks),1),o(" ------- ")])):d("",!0),t(L,{modelValue:e.remarks_commercial,"onUpdate:modelValue":y=>e.remarks_commercial=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(T=(R=n.value)==null?void 0:R.data)!=null&&T.is_available?(s(),r("div",jl,[t(U,{style:{position:"absolute",right:"60px"},class:"mt-3",icon:e.is_available?_(de):_(ne),color:`${e.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0)])):x.value?(s(),r("div",Il,[l("div",null,[e.remarks?(s(),r("div",Sl,[Ol,o(),Dl,l("pre",Pl,i(e.remarks),1),o(" ------- ")])):d("",!0),e.remarks_commercial?(s(),r("div",$l,[Nl,o(),Ll,l("pre",Bl,i(e.remarks_commercial),1),o(" ------- ")])):d("",!0),e.remarks_transport?(s(),r("div",Fl,[zl,o(),Ml,l("pre",Gl,i(e.remarks_transport),1),o(" ------- ")])):d("",!0),e.remarks_release?(s(),r("div",Kl,[Hl,o(),Ql,l("pre",Yl,i(e.remarks_release),1),o(" ------- ")])):d("",!0)]),t(L,{modelValue:e.remarks_release,"onUpdate:modelValue":y=>e.remarks_release=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):b.value?(s(),r("div",Jl,[l("div",null,[e.remarks?(s(),r("div",Wl,[Xl,o(),Zl,l("pre",ea,i(e.remarks),1),o(" ------- ")])):d("",!0),e.remarks_commercial?(s(),r("div",la,[aa,o(),sa,l("pre",ta,i(e.remarks_commercial),1),o(" ------- ")])):d("",!0),e.remarks_transport?(s(),r("div",oa,[ra,o(),da,l("pre",na,i(e.remarks_transport),1),o(" ------- ")])):d("",!0)]),t(L,{modelValue:e.remarks_transport,"onUpdate:modelValue":y=>e.remarks_transport=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):k.value?(s(),r("div",ca,[l("div",null,[l("div",null,[e.remarks?(s(),r("div",ua,[ia,o(),va,l("pre",pa,i(e.remarks),1),o(" ------- ")])):d("",!0),e.remarks_commercial?(s(),r("div",_a,[ya,ha,l("pre",fa,i(e.remarks_commercial),1),o(" ------- ")])):d("",!0),e.remarks_transport?(s(),r("div",ma,[ka,o(),ga,l("pre",xa,i(e.remarks_transport),1),o(" ------- ")])):d("",!0),e.remarks_release?(s(),r("div",ba,[Va,o(),wa,l("pre",Ea,i(e.remarks_release),1),o(" ------- ")])):d("",!0)]),t(L,{modelValue:e.remarks_receive,"onUpdate:modelValue":y=>e.remarks_receive=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(q=(a=n.value)==null?void 0:a.data)!=null&&q.is_available?(s(),r("div",Aa,[t(U,{class:"mt-3",icon:e.is_available?_(de):_(ne),color:`${e.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),l("div",Ca,[J.value?(s(),r("div",Ra)):d("",!0),t(pe,{modelValue:e.is_received,"onUpdate:modelValue":[y=>e.is_received=y,be],"hide-details":"",variant:"underlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])])])):m.value?d("",!0):(s(),r("div",qa,[e.remarks||e.remarks_commercial||e.remarks_release||e.remarks_receive||e.remarks_transport?(s(),r("div",Ta,[e.remarks?(s(),r("div",Ua,[ja,o(),Ia,l("pre",Sa,i(e.remarks),1),o(" ------- ")])):d("",!0),e.remarks_commercial?(s(),r("div",Oa,[Da,o(),Pa,l("pre",$a,i(e.remarks_commercial),1),o(" ------- ")])):d("",!0),e.remarks_transport?(s(),r("div",Na,[La,o(),Ba,l("pre",Fa,i(e.remarks_transport),1),o(" ------- ")])):d("",!0),e.remarks_release?(s(),r("div",za,[Ma,o(),Ga,l("pre",Ka,i(e.remarks_release),1),o(" ------- ")])):d("",!0),e.remarks_receive?(s(),r("div",Ha,[Qa,l("pre",Ya,i(e.remarks_receive),1)])):d("",!0)])):(s(),r("div",Ja)),($=(P=n.value)==null?void 0:P.data)!=null&&$.is_available?(s(),r("div",Wa,[t(U,{class:"mt-3",icon:e.is_available?_(de):_(ne),color:`${e.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),((H=(ee=n.value)==null?void 0:ee.data)==null?void 0:H.status)=="complete"&&ve.value=="receiver"?(s(),r("div",Xa,[t(U,{class:"mt-3",icon:e.is_received?_(Ee):_(Ae),color:`${e.is_received?"success":"error"}`},null,8,["icon","color"])])):d("",!0)]))]}),_:2},1024))),128)),m.value?(s(),A(I,{key:1,class:"mt-3"},{default:p(()=>[f.value!=="cancelled"?(s(),r("div",Za,[o(" YOU CAN UPDATE SOME DATA AND"),es,o(" PLEASE TICK CHECKBOX IF ASSET IS AVAILABLE BEFORE CLICKING THE APPROVE BUTTON ")])):(s(),r("div",ls," THIS REQUEST HAS BEEN CANCELLED. "))]),_:1})):d("",!0),(D=(j=n.value)==null?void 0:j.data)!=null&&D.is_available&&f.value!=="cancelled"?(s(),A(I,{key:2,class:"mt-6 mb-2"},{default:p(()=>[t(z,{variant:"text",class:"v-col-12 text-center pt-2 font-weight-bold pb-0 d-flex justify-center"},{default:p(()=>{var e;return[l("div",null,[t(U,{icon:_(de),color:"success"},null,8,["icon"]),o(" AVAILABLE "),t(U,{icon:_(ne),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT AVAILABLE ")]),k.value?(s(),r("div",as,[ss,l("div",null,[t(U,{icon:_(ze)},null,8,["icon"]),o(" TICK RECEIVED ASSETS "),t(F,{thickness:8,color:"error",class:"divider-notice"})])])):d("",!0),((e=n.value.data)==null?void 0:e.status)=="complete"&&ve.value=="receiver"?(s(),r("div",ts,[t(U,{icon:_(Ee),color:"success"},null,8,["icon"]),o(" RECEIVED "),t(U,{icon:_(Ae),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT RECEIVE ")])):d("",!0)]}),_:1})]),_:1})):d("",!0),t(I,{class:"mt-3"},{default:p(()=>[l("div",os,[t(F),t(F)])]),_:1}),fe.value==2&&((E=se.value)==null?void 0:E.length)>0?(s(),A(I,{key:3,class:"my-3 d-flex justify-center"},{default:p(()=>[(s(!0),r(ce,null,re(se.value,(e,g)=>(s(),r("div",{key:e.id,class:"pa-2",style:{position:"relative"}},[t(z,{onClick:()=>Te(e,g)},{default:p(()=>[t(U,{size:"large",icon:_(Ve),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"])]))),128)),t(_e,{modelValue:K.value,"onUpdate:modelValue":c[5]||(c[5]=e=>K.value=e),width:"95%","max-width":"900"},{default:p(()=>[t(z,{class:"bg-black"},{default:p(()=>[t(Me,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:ue.value,"onUpdate:modelValue":c[4]||(c[4]=e=>ue.value=e)},{default:p(()=>[(s(!0),r(ce,null,re(se.value,(e,g)=>(s(),A(Ge,{key:g,"reverse-transition":"fade",transition:"fade"},{default:p(()=>[l("div",{style:Q(`${G.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[G.value=="jpg"||G.value=="jpeg"||G.value=="png"?(s(),A(we,{key:0,src:ie.value+"/file/"+e.path},null,8,["src"])):d("",!0),G.value=="pdf"?(s(),r("object",{key:1,data:ie.value+"/file/"+e.path,type:"application/pdf",width:"100%",height:"800px"},null,8,rs)):d("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):d("",!0),((S=n.value.data)==null?void 0:S.request_approvals.length)>0?(s(),A(I,{key:4},{default:p(()=>{var e,g,C,R,T;return[l("div",ds,[l("div",{class:"text-center mx-2 py-4 font-weight-bold",style:Q(`${f.value=="cancelled"?"color: red;":"color: rgb(3, 167, 3);"} border: 1px solid #ccc; font-size: 17px;`)},i(f.value=="cancelled"?"CANCELLED":"REQUESTED"),5),ns,l("div",cs,i((g=(e=n.value.data)==null?void 0:e.profile)==null?void 0:g.display_name),1),l("div",us,i((R=(C=n.value.data)==null?void 0:C.profile)==null?void 0:R.designation),1),l("div",is,i(_(ye)((T=n.value.data)==null?void 0:T.created_at)),1)]),(s(!0),r(ce,null,re(n.value.data.request_approvals,a=>{var q,P,$,ee;return s(),r("div",{class:"v-col-12 v-col-md-3 pa-0 mb-4",key:a.id},[(a.profile.ecode=="100884"||a.profile.ecode=="102587"||a.profile.ecode=="100316"||((q=a.profile)==null?void 0:q.role)=="commercial-manager"||((P=a.profile)==null?void 0:P.role)=="technical-operation")&&_(v).query.pid==a.profile_id&&_(v).query.o==a.orders?(s(),r("div",vs,[a.status=="awaiting-approval"?(s(),r("div",ps,[l("div",{onClick:H=>Ie(a),class:"cursor-pointer text-center py-5 v-col-6",style:Q(`border:1px solid #ccc; ${_(v).query.pid==a.profile_id&&_(v).query.o==a.orders?"background-color: rgb(182, 3, 3);color:#fff;":"background-color: none;"}`)}," REJECT ",12,_s),l("div",{onClick:H=>oe(a,"reject"),class:"cursor-pointer text-center py-5 v-col-6",style:Q(`border:1px solid #ccc; ${_(v).query.pid==a.profile_id&&_(v).query.o==a.orders?"background-color: rgb(3, 167, 3);color:#fff;":"background-color: none"}`)}," APPROVE ",12,ys)])):a.status=="reject"||a.status=="done"||a.status=="pending"?(s(),r("div",hs,[l("div",{onClick:H=>oe(a),class:"cursor-pointer text-center mx-2 py-5",style:Q(`border:1px solid #ccc; ${a.status=="reject"&&_(v).query.pid==a.profile_id&&_(v).query.o==a.orders?"background-color: gray; color:#fff;":a.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},i(a.status=="done"?"APPROVED":a.status=="reject"?"REJECTED":"CLICK TO APPROVE"),13,fs)])):d("",!0)])):(s(),r("div",{key:1,onClick:H=>oe(a),class:"cursor-pointer text-center mx-2 py-5",style:Q(`border:1px solid #ccc; ${f.value!="cancelled"&&a.status=="awaiting-approval"&&_(v).query.pid==a.profile_id&&_(v).query.o==a.orders?"background-color: rgb(182, 3, 3);color:#fff;":a.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},i(a.status=="done"?a.approval_type=="reviewer"?"REVIEWED":a.approval_type=="transport"?"ARRANGED":a.approval_type=="receiver"?"RECEIVED":a.approval_type=="verify"?"VERIFIED":a.approval_type=="releasing"?"RELEASED":"APPROVED":"CLICK TO APPROVE"),13,ms)),l("div",{class:N(`text-center py-1 font-weight-bold ${a.status=="reject"?"text-error text-uppercase":""}`)},i(a.status=="reject"?"Rejected":De(a.approval_type))+" By ",3),l("div",ks,i(($=a.profile)==null?void 0:$.display_name),1),l("div",gs,i((ee=a.profile)==null?void 0:ee.designation),1),l("div",xs,i(a.date_approved?_(ye)(a.date_approved):""),1),a.reason_rejected?(s(),r("div",bs,[o(" Reason rejected "),t(F,{class:"my-2"}),o(" "+i(a.reason_rejected),1)])):d("",!0)])}),128))]}),_:1})):d("",!0),((Z=(X=n.value)==null?void 0:X.data)==null?void 0:Z.status)!=="complete"?(s(),A(I,{key:5,class:"no-print"},{default:p(()=>[l("div",Vs,[t(F),o(" You will receive a notification once you click the approve button. "),t(F)])]),_:1})):d("",!0),t(_e,{width:"500",modelValue:Y.value,"onUpdate:modelValue":c[8]||(c[8]=e=>Y.value=e),persistent:""},{default:p(()=>[t(z,null,{default:p(()=>[t(Ke,null,{default:p(()=>[t(I,null,{default:p(()=>[ws,l("div",Es,[t(L,{modelValue:M.value,"onUpdate:modelValue":c[6]||(c[6]=e=>M.value=e),label:"STATE YOUR REASON HERE",variant:"outlined"},null,8,["modelValue"])])]),_:1})]),_:1}),t(He,null,{default:p(()=>[t(Ce),t(le,{onClick:Se},{default:p(()=>[o("Cancel")]),_:1}),t(le,{color:"success",disabled:!M.value,onClick:c[7]||(c[7]=e=>oe(ge.value,"reject"))},{default:p(()=>[o("Confirm")]),_:1},8,["disabled"]),t(Ce)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Qe,{options:O.value},null,8,["options"])]}),_:1}))}};export{Ts as default};
