import{ai as Fe,ae as qe,N as Pe,i as De,r as z,O as Se,D as ce,b as w,j as J,k as i,e as l,l as s,z as Z,m as q,J as $e,K as y,ad as Ue,A as le,H as Ce,c as te,F as me,d as pe,t as D,aj as Re,I as se,T as be,Z as xe,V as Ae,X as Oe,q as Ye,E as ee,P as ie,_ as ze,$ as je,Y as we,u as Ne,ak as We,W as He,y as F,a3 as B,a0 as Me,w as ue,v as de}from"./app-f3ed5daf.js";import{F as Te,c as Be,a as Q,b as E}from"./index.esm-73db56a9.js";import{_ as Le}from"./AppSnackBar-2f356ef2.js";import{_ as Ee}from"./Studio-85b1fa59.js";import{u as ke}from"./formatDate-b9aad8c5.js";import{u as Je}from"./categories-26492bdb.js";import{u as Ke}from"./status-0d40081e.js";import{u as Ze}from"./vendors-b5ef9cf3.js";var Ie={exports:{}};(function(j,V){(function(G,L){j.exports=L()})(Fe,function(){var G=1e3,L=6e4,O=36e5,N="millisecond",p="second",k="minute",b="hour",C="day",$="week",g="month",P="quarter",M="year",W="date",a="Invalid Date",K=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ve=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,U={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(d){var r=["th","st","nd","rd"],n=d%100;return"["+d+(r[(n-20)%10]||r[n]||r[0])+"]"}},S=function(d,r,n){var u=String(d);return!u||u.length>=r?d:""+Array(r+1-u.length).join(n)+d},T={s:S,z:function(d){var r=-d.utcOffset(),n=Math.abs(r),u=Math.floor(n/60),o=n%60;return(r<=0?"+":"-")+S(u,2,"0")+":"+S(o,2,"0")},m:function d(r,n){if(r.date()<n.date())return-d(n,r);var u=12*(n.year()-r.year())+(n.month()-r.month()),o=r.clone().add(u,g),c=n-o<0,m=r.clone().add(u+(c?-1:1),g);return+(-(u+(n-o)/(c?o-m:m-o))||0)},a:function(d){return d<0?Math.ceil(d)||0:Math.floor(d)},p:function(d){return{M:g,y:M,w:$,d:C,D:W,h:b,m:k,s:p,ms:N,Q:P}[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(d){return d===void 0}},_="en",R={};R[_]=U;var fe="$isDayjsObject",_e=function(d){return d instanceof f||!(!d||!d[fe])},v=function d(r,n,u){var o;if(!r)return _;if(typeof r=="string"){var c=r.toLowerCase();R[c]&&(o=c),n&&(R[c]=n,o=c);var m=r.split("-");if(!o&&m.length>1)return d(m[0])}else{var x=r.name;R[x]=r,o=x}return!u&&o&&(_=o),o||!u&&_},t=function(d,r){if(_e(d))return d.clone();var n=typeof r=="object"?r:{};return n.date=d,n.args=arguments,new f(n)},e=T;e.l=v,e.i=_e,e.w=function(d,r){return t(d,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var f=function(){function d(n){this.$L=v(n.locale,null,!0),this.parse(n),this.$x=this.$x||n.x||{},this[fe]=!0}var r=d.prototype;return r.parse=function(n){this.$d=function(u){var o=u.date,c=u.utc;if(o===null)return new Date(NaN);if(e.u(o))return new Date;if(o instanceof Date)return new Date(o);if(typeof o=="string"&&!/Z$/i.test(o)){var m=o.match(K);if(m){var x=m[2]-1||0,A=(m[7]||"0").substring(0,3);return c?new Date(Date.UTC(m[1],x,m[3]||1,m[4]||0,m[5]||0,m[6]||0,A)):new Date(m[1],x,m[3]||1,m[4]||0,m[5]||0,m[6]||0,A)}}return new Date(o)}(n),this.init()},r.init=function(){var n=this.$d;this.$y=n.getFullYear(),this.$M=n.getMonth(),this.$D=n.getDate(),this.$W=n.getDay(),this.$H=n.getHours(),this.$m=n.getMinutes(),this.$s=n.getSeconds(),this.$ms=n.getMilliseconds()},r.$utils=function(){return e},r.isValid=function(){return this.$d.toString()!==a},r.isSame=function(n,u){var o=t(n);return this.startOf(u)<=o&&o<=this.endOf(u)},r.isAfter=function(n,u){return t(n)<this.startOf(u)},r.isBefore=function(n,u){return this.endOf(u)<t(n)},r.$g=function(n,u,o){return e.u(n)?this[u]:this.set(o,n)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(n,u){var o=this,c=!!e.u(u)||u,m=e.p(n),x=function(oe,H){var ae=e.w(o.$u?Date.UTC(o.$y,H,oe):new Date(o.$y,H,oe),o);return c?ae:ae.endOf(C)},A=function(oe,H){return e.w(o.toDate()[oe].apply(o.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(H)),o)},Y=this.$W,I=this.$M,X=this.$D,re="set"+(this.$u?"UTC":"");switch(m){case M:return c?x(1,0):x(31,11);case g:return c?x(1,I):x(0,I+1);case $:var ne=this.$locale().weekStart||0,ye=(Y<ne?Y+7:Y)-ne;return x(c?X-ye:X+(6-ye),I);case C:case W:return A(re+"Hours",0);case b:return A(re+"Minutes",1);case k:return A(re+"Seconds",2);case p:return A(re+"Milliseconds",3);default:return this.clone()}},r.endOf=function(n){return this.startOf(n,!1)},r.$set=function(n,u){var o,c=e.p(n),m="set"+(this.$u?"UTC":""),x=(o={},o[C]=m+"Date",o[W]=m+"Date",o[g]=m+"Month",o[M]=m+"FullYear",o[b]=m+"Hours",o[k]=m+"Minutes",o[p]=m+"Seconds",o[N]=m+"Milliseconds",o)[c],A=c===C?this.$D+(u-this.$W):u;if(c===g||c===M){var Y=this.clone().set(W,1);Y.$d[x](A),Y.init(),this.$d=Y.set(W,Math.min(this.$D,Y.daysInMonth())).$d}else x&&this.$d[x](A);return this.init(),this},r.set=function(n,u){return this.clone().$set(n,u)},r.get=function(n){return this[e.p(n)]()},r.add=function(n,u){var o,c=this;n=Number(n);var m=e.p(u),x=function(I){var X=t(c);return e.w(X.date(X.date()+Math.round(I*n)),c)};if(m===g)return this.set(g,this.$M+n);if(m===M)return this.set(M,this.$y+n);if(m===C)return x(1);if(m===$)return x(7);var A=(o={},o[k]=L,o[b]=O,o[p]=G,o)[m]||1,Y=this.$d.getTime()+n*A;return e.w(Y,this)},r.subtract=function(n,u){return this.add(-1*n,u)},r.format=function(n){var u=this,o=this.$locale();if(!this.isValid())return o.invalidDate||a;var c=n||"YYYY-MM-DDTHH:mm:ssZ",m=e.z(this),x=this.$H,A=this.$m,Y=this.$M,I=o.weekdays,X=o.months,re=o.meridiem,ne=function(H,ae,he,ge){return H&&(H[ae]||H(u,c))||he[ae].slice(0,ge)},ye=function(H){return e.s(x%12||12,H,"0")},oe=re||function(H,ae,he){var ge=H<12?"AM":"PM";return he?ge.toLowerCase():ge};return c.replace(ve,function(H,ae){return ae||function(he){switch(he){case"YY":return String(u.$y).slice(-2);case"YYYY":return e.s(u.$y,4,"0");case"M":return Y+1;case"MM":return e.s(Y+1,2,"0");case"MMM":return ne(o.monthsShort,Y,X,3);case"MMMM":return ne(X,Y);case"D":return u.$D;case"DD":return e.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return ne(o.weekdaysMin,u.$W,I,2);case"ddd":return ne(o.weekdaysShort,u.$W,I,3);case"dddd":return I[u.$W];case"H":return String(x);case"HH":return e.s(x,2,"0");case"h":return ye(1);case"hh":return ye(2);case"a":return oe(x,A,!0);case"A":return oe(x,A,!1);case"m":return String(A);case"mm":return e.s(A,2,"0");case"s":return String(u.$s);case"ss":return e.s(u.$s,2,"0");case"SSS":return e.s(u.$ms,3,"0");case"Z":return m}return null}(H)||m.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(n,u,o){var c,m=this,x=e.p(u),A=t(n),Y=(A.utcOffset()-this.utcOffset())*L,I=this-A,X=function(){return e.m(m,A)};switch(x){case M:c=X()/12;break;case g:c=X();break;case P:c=X()/3;break;case $:c=(I-Y)/6048e5;break;case C:c=(I-Y)/864e5;break;case b:c=I/O;break;case k:c=I/L;break;case p:c=I/G;break;default:c=I}return o?c:e.a(c)},r.daysInMonth=function(){return this.endOf(g).$D},r.$locale=function(){return R[this.$L]},r.locale=function(n,u){if(!n)return this.$L;var o=this.clone(),c=v(n,u,!0);return c&&(o.$L=c),o},r.clone=function(){return e.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},d}(),h=f.prototype;return t.prototype=h,[["$ms",N],["$s",p],["$m",k],["$H",b],["$W",C],["$M",g],["$y",M],["$D",W]].forEach(function(d){h[d[1]]=function(r){return this.$g(r,d[0],d[1])}}),t.extend=function(d,r){return d.$i||(d(r,f,t),d.$i=!0),t},t.locale=v,t.isDayjs=_e,t.unix=function(d){return t(1e3*d)},t.en=R[_],t.Ls=R,t.p={},t})})(Ie);var Ge=Ie.exports;const Ve=qe(Ge),Xe={class:"v-col-12 pt-0 pb-2"},Qe=l("thead",null,[l("tr",null,[l("th",{class:"text-left text-primary"},"#"),l("th",{class:"text-left text-primary"},"Image"),l("th",{class:"text-left text-primary"},"Title"),l("th",{class:"text-left text-primary"},"Vendor"),l("th",{class:"text-left text-primary"}," Warranty Start "),l("th",{class:"text-left text-primary"},"Warranty End"),l("th",{class:"text-left text-primary"},"AMC Start"),l("th",{class:"text-left text-primary"},"AMC End")])],-1),et=["onClick"],tt=["onClick"],at=["onClick"],lt=["onClick"],st=["onClick"],nt=["onClick"],ot=["onClick"],it={class:"v-col-12 v-col-md-12 pt-0 pb-2"},rt={class:"v-col-12 pt-0 pb-2 d-flex justify-end"},ut={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},dt={__name:"AssetWarranties",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(j){const V=j,G=Pe(),L=De(),O=z(window.location.origin),N=z({}),p=z({status:!1,action:"add",loading:!1,data:{}}),k=z([]);Se(()=>V.asset,U=>{k.value=U.pivot_warranties,K()});const b=z(!1),C=z([]),$=z(1),g=(U,S)=>{C.value=U,$.value=S,b.value=!0},P=z(0),M=(U=null)=>{p.value.status=!0,U?(p.value.action="edit",p.value.data=Object.assign({},U),P.value=U.id):(p.value.action="add",p.value.data={})},W=async()=>{p.value.loading=!0;let U={id:p.value.data.id,asset_id:G.params.id,warranty_id:p.value.data.warranty_id,old_warranty_id:P.value};await ce(L.token).post("/api/asset/save-warranty",U).then(S=>{ve().then(()=>{N.value={status:!0,type:"success",text:S.data.message},p.value.loading=!1,p.value.status=!1})}).catch(S=>{p.value.loading=!1,N.value={status:!0,type:"eroor",text:"Error while saving warranty"},console.log("err",S)})},a=z([]),K=()=>{ce(L.token).get("/api/fetch-warranties/non-paginated").then(U=>{a.value=U.data}).catch(U=>{p.value.loading=!1})},ve=async()=>{await ce(L.token).get("/api/asset/warranty/"+G.params.id).then(U=>{k.value=U.data,p.value.loading=!1}).catch(U=>{p.value.loading=!1})};return(U,S)=>(w(),J(ee,null,{default:i(()=>[l("div",Xe,[s(Z,{onClick:S[0]||(S[0]=()=>M()),class:"mb-3",size:"small"},{default:i(()=>[q(" New Warranty "),s($e,{class:"ml-2",icon:y(Ue)},null,8,["icon"])]),_:1}),s(le,null,{default:i(()=>{var T;return[s(Ce,{density:"compact"},{default:i(()=>[Qe,l("tbody",null,[(w(!0),te(me,null,pe(k.value,(_,R)=>(w(),te("tr",{key:_.id,class:"cursor-pointer table-cell-hover"},[l("td",{onClick:()=>M(_)},D(R+1),9,et),l("td",null,[_.attachment.length>0?(w(),J($e,{key:0,icon:y(Re),color:"success",onClick:fe=>g(_.attachment,R)},null,8,["icon","onClick"])):se("",!0)]),l("td",{onClick:()=>M(_)},D(_.warranty_title),9,tt),l("td",{onClick:()=>M(_)},D(_.vendor&&_.vendor.title),9,at),l("td",{onClick:()=>M(_)},D(_.warranty_start_date&&_.warranty_start_date!="0000-00-00"?y(Ve)(_.warranty_start_date).format("MMM. DD, YYYY"):""),9,lt),l("td",{onClick:()=>M(_)},D(_.warranty_end_date&&_.warranty_end_date!="0000-00-00"?y(Ve)(_.warranty_end_date).format("MMM. DD, YYYY"):""),9,st),l("td",{onClick:()=>M(_)},D(_.amc_start_date&&_.amc_start_date!="0000-00-00"?y(Ve)(_.amc_start_date).format("MMM. DD, YYYY"):""),9,nt),l("td",{onClick:()=>M(_)},D(_.amc_end_date&&_.amc_end_date!="0000-00-00"?y(Ve)(_.amc_end_date).format("MMM. DD, YYYY"):""),9,ot)]))),128))])]),_:1}),((T=k.value)==null?void 0:T.length)==0?(w(),J(be,{key:0,class:"pa-3 text-center"},{default:i(()=>[q("No record at the moment")]),_:1})):se("",!0)]}),_:1})]),s(xe,{modelValue:p.value.status,"onUpdate:modelValue":S[3]||(S[3]=T=>p.value.status=T),persistent:"",width:"600"},{default:i(()=>[s(le,null,{default:i(()=>[s(Ae,{class:"text-capitalize mb-3 d-flex justify-space-between align-center"},{default:i(()=>[q(D(p.value.action+" Warranty")+" ",1),s(Z,{icon:y(Oe),variant:"flat",size:"small",onClick:S[1]||(S[1]=T=>p.value.status=!1)},null,8,["icon"])]),_:1}),s(Ye,null,{default:i(()=>[s(y(Te),{as:"v-form"},{default:i(()=>[s(ee,{class:"mb-0"},{default:i(()=>[l("div",it,[s(ie,{modelValue:p.value.data.warranty_id,"onUpdate:modelValue":S[2]||(S[2]=T=>p.value.data.warranty_id=T),items:a.value,"item-title":"warranty_title","item-value":"id",label:"Select Warranty",density:"compact",variant:"outlined"},null,8,["modelValue","items"])]),l("div",rt,[s(Z,{color:"primary",loading:p.value.loading,onClick:W,disabled:!p.value.data.warranty_id},{default:i(()=>[q("Save")]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(xe,{modelValue:b.value,"onUpdate:modelValue":S[5]||(S[5]=T=>b.value=T),width:"95%","max-width":"900"},{default:i(()=>[s(le,{class:"bg-black"},{default:i(()=>[s(ze,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:$.value,"onUpdate:modelValue":S[4]||(S[4]=T=>$.value=T)},{default:i(()=>[(w(!0),te(me,null,pe(C.value,(T,_)=>(w(),J(je,{key:_,"reverse-transition":"fade",transition:"fade"},{default:i(()=>[l("div",ut,[s(we,{src:O.value+"/file/"+T.path},null,8,["src"])])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),s(Le,{options:N.value},null,8,["options"])]),_:1}))}},ct={class:"v-col-12 pt-0 pb-2"},mt=l("thead",null,[l("tr",null,[l("th",{class:"text-left text-primary"},"ISR ID"),l("th",{class:"text-left text-primary"},"Urgency"),l("th",{class:"text-left text-primary"},"Priority"),l("th",{class:"text-left text-primary"},"Reported by"),l("th",{class:"text-left text-primary"},"Handled by"),l("th",{class:"text-left text-primary"},"Date Reported"),l("th",{class:"text-left text-primary"},"Date Completed"),l("th",{class:"text-left text-primary"},"Status"),l("th",{class:"text-left text-primary"})])],-1),pt={__name:"AssetMaintenances",props:{asset:{type:Object,default:null}},setup(j){const V=j,G=Ne(),L=()=>{G.push({name:"NewMaintenance",query:{type:"details",asset_code:k.value.asset_code,asset_id:k.value.id,comp:k.value.company_id,loc:k.value.location_id,title:k.value.asset_name}})},O=b=>{G.push({name:"EditMaintenance",params:{id:b},query:{type:"details",pd:"ox2rKaIYFhBOQW31j6kkiMrJ4KfnYpLmwJhMzBFwPBlVjgGR4g",v:1,vv:"xK2sX1sDL1BBAvmuoPpWoNRgc4wzbdZ9F2OXAKrS3N2g65xNgy"}}).catch(C=>{console.log(C)})},N=b=>b?b==1?"Normal":b==2?"Medium":"High":"",p=(b,C=5)=>{let $="0000"+b;return $.substring($.length-C)},k=z({});return Se(()=>V.asset,(b,C)=>{k.value=b,console.log("assetDetail.value",k.value)},{deep:!0}),(b,C)=>(w(),J(ee,null,{default:i(()=>[l("div",ct,[k.value.status_id!=2?(w(),J(Z,{key:0,onClick:L,class:"mb-3",size:"small"},{default:i(()=>[q(" New Maintenance "),s($e,{class:"ml-2",icon:y(Ue)},null,8,["icon"])]),_:1})):se("",!0),s(le,null,{default:i(()=>[s(Ce,{density:"compact"},{default:i(()=>[mt,l("tbody",null,[(w(!0),te(me,null,pe(V.asset.maintenance,($,g)=>{var P,M,W;return w(),te("tr",{key:$.id},[l("td",null,"ISR-2"+D(p($.id)),1),l("td",null,D(N($.urgency)),1),l("td",null,D(N($.priority)),1),l("td",null,D((P=$.profile)==null?void 0:P.display_name),1),l("td",null,D((M=$.handle_by)==null?void 0:M.display_name),1),l("td",null,D(y(ke)($.created_at)),1),l("td",null,D($.date_closed?y(ke)($.date_closed):""),1),l("td",null,D((W=$.status)==null?void 0:W.title),1),l("td",null,[s(Z,{color:"info",size:"x-small",onClick:a=>O($.id)},{default:i(()=>[q("Details")]),_:2},1032,["onClick"])])])}),128))])]),_:1}),V.asset.maintenance&&V.asset.maintenance.length==0?(w(),J(be,{key:0,class:"pa-3 text-center"},{default:i(()=>[q("No record at the moment")]),_:1})):se("",!0)]),_:1})])]),_:1}))}},vt={class:"v-col-12 pt-0 pb-2"},ft=l("thead",null,[l("tr",null,[l("th",{class:"text-left text-primary"},"#"),l("th",{class:"text-left text-primary"},"Transferred from"),l("th",{class:"text-left text-primary"},"Remarks"),l("th",{class:"text-left text-primary"},"Date")])],-1),_t={__name:"AssetAllotedLocations",props:{asset:{type:Object,default:null}},setup(j){const V=j;return(G,L)=>(w(),J(ee,null,{default:i(()=>[l("div",vt,[s(le,null,{default:i(()=>[s(Ce,{density:"compact"},{default:i(()=>[ft,l("tbody",null,[(w(!0),te(me,null,pe(V.asset.allotted_informations,(O,N)=>{var p;return w(),te("tr",{key:O.id},[l("td",null,D(N+1),1),l("td",null,D((p=O.location)==null?void 0:p.title),1),l("td",null,D(O.remarks),1),l("td",null,D(y(ke)(O.created_at)),1)])}),128))])]),_:1}),V.asset.allotted_informations&&V.asset.allotted_informations.length==0?(w(),J(be,{key:0,class:"pa-3 text-center"},{default:i(()=>[q("No record at the moment")]),_:1})):se("",!0)]),_:1})])]),_:1}))}},yt=We("companies",{state:()=>({companies:[]}),getters:{list:j=>j.companies},actions:{async getCompanies(j){await ce(j).get("/api/company/state/list").then(V=>{this.companies=Object.assign([],V.data)}).catch(V=>{console.log("getCompanies error: ",V)})}}}),ht=We("locations",{state:()=>({locations:[]}),getters:{list:j=>j.locations},actions:{async getLocations(j){await ce(j).get("/api/location/state/location-list").then(V=>{this.locations=Object.assign([],V.data)}).catch(V=>{console.log("getlocations error: ",V)})}}}),gt={class:"text-primary text-capitalize"},Vt={class:"d-flex align-center"},bt=l("div",{class:"v-col-12 font-weight-bold"},"Asset Info",-1),$t={class:"v-col-12 v-col-md-6 pt-0 pb-2"},xt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},wt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},kt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},St={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ct={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Mt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Dt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ut={class:"v-col-12 v-col-md-12 pt-0 pb-2"},At={key:0,class:"v-col-12 pt-0 font-weight-bold"},Ot={key:1,class:"v-col-12 pt-0"},Yt={class:"v-col-12 pt-0 text-capitalize"},zt={class:"v-col-12"},jt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Nt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Wt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Tt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Lt={class:"v-col-12 v-col-md-12 pt-0 pb-2"},It={class:"v-col-12"},Ft={class:"v-col-12 v-col-md-6 pt-0 pb-2"},qt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Pt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Rt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ht={class:"v-col-12"},Bt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Et={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Jt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Kt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Zt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Gt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Xt={class:"v-col-12 mb-6"},Qt={class:"v-col-12 mb-6"},ea={class:"v-col-12 mb-6"},ta=l("div",{class:"v-col-12 pt-0 font-weight-bold"},"Attachment",-1),aa={class:"v-col-12 pt-0"},la={class:"v-col-12 pb-2"},sa={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},na={class:"v-col-12 pt-0 pb-2"},va={__name:"AssetForm",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(j){const V=j,G=Ne(),L=z({}),O=De(),N=yt();N.list.length==0&&N.getCompanies(O.token);const p=Je();p.list.length==0&&p.getCategories(O.token);const k=ht();k.list.length==0&&k.getLocations(O.token);const b=Ke();(b.list.length==0||b.conditions.length==0)&&b.getStatuses(O.token);const C=Ze();C.list.length==0&&(console.log("fORM",C.list),C.getVendors(O.token));const $=z(window.location.origin),g=z("specification"),P=v=>{g.value=v};let M=Be({Name:Q().required().max(150),"Serial Number":Q().max(80).nullable(),"Asset Code":Q().max(50).nullable(),"Section code":Q().max(30).nullable(),Category:Q().required(),Company:Q().required(),Location:Q().required(),"Asset Status":Q().required(),Specification:Q().max(120).nullable(),Brand:Q().required(),Model:Q().required(),Condition:Q().required()});const W=z(!1),a=z({}),K=z([]),ve=He(()=>K.value.map(v=>v.id)),U=v=>{a.value=Object.assign({},v),K.value=v&&v.attachments?Object.assign([],v.attachments):[],v&&v.financial_information&&(a.value.capitalization_price=v.financial_information.capitalization_price,a.value.depreciation_percentage=v.financial_information.depreciation_percentage,a.value.scrap_value=v.financial_information.scrap_value,a.value.scrap_date=v.financial_information.scrap_date,a.value.capitalization_date=v.financial_information.capitalization_date,a.value.end_of_life=v.financial_information.end_of_life)};U(V.asset),Se(()=>V.asset,v=>{U(v)});const S=async()=>{W.value=!0,a.value.file_ids=ve.value,a.value.company_code=N.list.filter(v=>v.id==a.value.company_id)[0].code,a.value.category_code=p.list.filter(v=>v.id==a.value.category_id)[0].code,a.value.financial_information_id=a.value.financial_information?a.value.financial_information.id:null,await ce(O.token).post("/api/asset/save",a.value).then(v=>{L.value={status:!0,type:"success",text:v.data.message},W.value=!1,V.page=="add"&&G.push({name:"edit-asset",params:{id:v.data.asset.id}}).catch(t=>{console.log("router.push",t)})}).catch(v=>{console.log("saveAsset",v),L.value={status:!0,type:"error",text:"Error while saving asset"},W.value=!1})},T=v=>{let t=null;v.map(e=>{t=K.value.find(f=>f.id==e.id),t||K.value.push(e)})},_=z(!1),R=z(1),fe=v=>{R.value=v,_.value=!0},_e=v=>{K.value=K.value.filter(t=>t.id!==v)};return(v,t)=>(w(),J(le,{loading:W.value,"max-width":"1600px",class:"mx-auto elevation-0"},{default:i(()=>[s(y(Te),{as:"v-form","validation-schema":y(M)},{default:i(()=>[s(Ae,{class:"pb-6 pt-3 d-flex align-center justify-space-between"},{default:i(()=>[l("div",gt,D(V.page+" Asset"),1),l("div",Vt,[s(Z,{color:"primary",loading:W.value,onClick:S},{default:i(()=>[q("Save")]),_:1},8,["loading"])])]),_:1}),s(Ye,null,{default:i(()=>[s(ee,null,{default:i(()=>[bt,l("div",$t,[s(y(E),{name:"Name",modelValue:a.value.asset_name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.asset_name=e)},{default:i(({field:e,errors:f})=>[s(F,B({modelValue:a.value.asset_name,"onUpdate:modelValue":t[0]||(t[0]=h=>a.value.asset_name=h)},e,{label:"Name*",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",xt,[s(y(E),{name:"Serial Number",modelValue:a.value.serial_number,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value.serial_number=e)},{default:i(({field:e,errors:f})=>[s(F,B({modelValue:a.value.serial_number,"onUpdate:modelValue":t[2]||(t[2]=h=>a.value.serial_number=h)},e,{label:"Serial Number(Optional)",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",wt,[s(y(E),{name:"Section code",modelValue:a.value.section_code,"onUpdate:modelValue":t[5]||(t[5]=e=>a.value.section_code=e)},{default:i(({field:e,errors:f})=>[s(F,B({modelValue:a.value.section_code,"onUpdate:modelValue":t[4]||(t[4]=h=>a.value.section_code=h)},e,{label:"Section code (optional)",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",kt,[s(ie,{modelValue:a.value.category_id,"onUpdate:modelValue":t[6]||(t[6]=e=>a.value.category_id=e),items:y(p).list,"item-title":"title","item-value":"id",label:"Category*",density:"compact",variant:"outlined",rules:[e=>!!e||"Category is required"]},null,8,["modelValue","items","rules"])]),l("div",St,[s(ie,{modelValue:a.value.company_id,"onUpdate:modelValue":t[7]||(t[7]=e=>a.value.company_id=e),items:y(N).list,"item-title":"title","item-value":"id",label:"Company*",density:"compact",variant:"outlined",rules:[e=>!!e||"Company is required"]},null,8,["modelValue","items","rules"])]),l("div",Ct,[s(ie,{modelValue:a.value.location_id,"onUpdate:modelValue":t[8]||(t[8]=e=>a.value.location_id=e),items:y(k).list,"item-title":"title","item-value":"id",label:"Location*",density:"compact",variant:"outlined",rules:[e=>!!e||"Location is required"]},null,8,["modelValue","items","rules"])]),l("div",Mt,[s(y(E),{name:"Asset Code",modelValue:a.value.asset_code,"onUpdate:modelValue":t[10]||(t[10]=e=>a.value.asset_code=e)},{default:i(({field:e,errors:f})=>[s(F,B({readonly:"",modelValue:a.value.asset_code,"onUpdate:modelValue":t[9]||(t[9]=h=>a.value.asset_code=h)},e,{label:"Asset Code (Auto Generated)",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Dt,[s(ie,{modelValue:a.value.status_id,"onUpdate:modelValue":t[11]||(t[11]=e=>a.value.status_id=e),items:y(b).assets,disabled:a.value.status_id==2,"item-title":"title","item-value":"id",label:"Asset Status*",density:"compact",variant:"outlined",rules:[e=>!!e||"Asset Status is required"]},null,8,["modelValue","items","disabled","rules"])]),l("div",Ut,[s(Me,{modelValue:a.value.remarks,"onUpdate:modelValue":t[12]||(t[12]=e=>a.value.remarks=e),density:"compact",label:"Remarks",variant:"outlined"},null,8,["modelValue"])])]),_:1}),s(ee,null,{default:i(()=>[V.page=="edit"?(w(),te("div",At," Additional Info ")):se("",!0),V.page=="edit"?(w(),te("div",Ot,[s(Z,{class:"mr-2 mb-2",onClick:t[13]||(t[13]=()=>P("specification")),color:g.value=="specification"?"primary":"white"},{default:i(()=>[q("Specification")]),_:1},8,["color"]),s(Z,{class:"mr-2 mb-2",onClick:t[14]||(t[14]=()=>P("purchase")),color:g.value=="purchase"?"primary":"white"},{default:i(()=>[q("Purchase")]),_:1},8,["color"]),s(Z,{class:"mr-2 mb-2",onClick:t[15]||(t[15]=()=>P("financial")),color:g.value=="financial"?"primary":"white"},{default:i(()=>[q("Financial")]),_:1},8,["color"]),s(Z,{class:"mr-2 mb-2",onClick:t[16]||(t[16]=()=>P("warranty")),color:g.value=="warranty"?"primary":"white"},{default:i(()=>[q("Warranty")]),_:1},8,["color"]),s(Z,{class:"mr-2 mb-2",onClick:t[17]||(t[17]=()=>P("allotted")),color:g.value=="allotted"?"primary":"white"},{default:i(()=>[q("Allotted")]),_:1},8,["color"]),s(Z,{class:"mr-2 mb-2",onClick:t[18]||(t[18]=()=>P("maintenance")),color:g.value=="maintenance"?"primary":"white"},{default:i(()=>[q("Maintenance")]),_:1},8,["color"])])):se("",!0),l("div",Yt,D(g.value+" Information"),1),ue(l("div",zt,[s(ee,null,{default:i(()=>[l("div",jt,[s(y(E),{name:"Specification",modelValue:a.value.specification,"onUpdate:modelValue":t[20]||(t[20]=e=>a.value.specification=e)},{default:i(({field:e,errors:f})=>[s(F,B({modelValue:a.value.specification,"onUpdate:modelValue":t[19]||(t[19]=h=>a.value.specification=h)},e,{label:"Specification*",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Nt,[s(F,{modelValue:a.value.model,"onUpdate:modelValue":t[21]||(t[21]=e=>a.value.model=e),label:"Model*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),l("div",Wt,[s(F,{modelValue:a.value.brand,"onUpdate:modelValue":t[22]||(t[22]=e=>a.value.brand=e),label:"Brand*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),l("div",Tt,[s(ie,{modelValue:a.value.condition_id,"onUpdate:modelValue":t[23]||(t[23]=e=>a.value.condition_id=e),items:y(b).conditions,"item-title":"title","item-value":"id",label:"Condition*",density:"compact",variant:"outlined",rules:[e=>!!e||"Condition is required"]},null,8,["modelValue","items","rules"])]),l("div",Lt,[s(Me,{modelValue:a.value.remarks,"onUpdate:modelValue":t[24]||(t[24]=e=>a.value.remarks=e),label:"Asset Remarks*",density:"compact",variant:"outlined",rows:"2"},null,8,["modelValue"])])]),_:1})],512),[[de,g.value=="specification"]]),ue(l("div",It,[s(ee,null,{default:i(()=>[l("div",Ft,[s(y(E),{name:"Price",modelValue:a.value.price,"onUpdate:modelValue":t[26]||(t[26]=e=>a.value.price=e)},{default:i(({field:e,errors:f})=>[s(F,B({modelValue:a.value.price,"onUpdate:modelValue":t[25]||(t[25]=h=>a.value.price=h)},e,{label:"Price",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",qt,[s(ie,{modelValue:a.value.vendor_id,"onUpdate:modelValue":t[27]||(t[27]=e=>a.value.vendor_id=e),items:y(C).list,"item-title":"title","item-value":"id",label:"Vendor",density:"compact",variant:"outlined",rules:[e=>!!e||"Vendor is required"]},null,8,["modelValue","items","rules"])]),l("div",Pt,[s(y(E),{name:"PO Number",modelValue:a.value.po_number,"onUpdate:modelValue":t[29]||(t[29]=e=>a.value.po_number=e)},{default:i(({field:e,errors:f})=>[s(F,B({modelValue:a.value.po_number,"onUpdate:modelValue":t[28]||(t[28]=h=>a.value.po_number=h)},e,{label:"PO Number",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Rt,[s(y(E),{name:"Purchase Date",modelValue:a.value.purchased_date,"onUpdate:modelValue":t[31]||(t[31]=e=>a.value.purchased_date=e)},{default:i(({field:e,errors:f})=>[s(F,B({type:"date",modelValue:a.value.purchased_date,"onUpdate:modelValue":t[30]||(t[30]=h=>a.value.purchased_date=h)},e,{label:"Purchase Date",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[de,g.value=="purchase"]]),ue(l("div",Ht,[s(ee,null,{default:i(()=>[l("div",Bt,[s(y(E),{name:"Capitalization Price",modelValue:a.value.capitalization_price,"onUpdate:modelValue":t[33]||(t[33]=e=>a.value.capitalization_price=e)},{default:i(({field:e,errors:f})=>[s(F,B({modelValue:a.value.capitalization_price,"onUpdate:modelValue":t[32]||(t[32]=h=>a.value.capitalization_price=h)},e,{label:"Capitalization Price",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Et,[s(y(E),{name:"Depreciation Percentage",modelValue:a.value.depreciation_percentage,"onUpdate:modelValue":t[35]||(t[35]=e=>a.value.depreciation_percentage=e)},{default:i(({field:e,errors:f})=>[s(F,B({modelValue:a.value.depreciation_percentage,"onUpdate:modelValue":t[34]||(t[34]=h=>a.value.depreciation_percentage=h)},e,{label:"Depreciation Percentage",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Jt,[s(y(E),{name:"Scrap Value",modelValue:a.value.scrap_value,"onUpdate:modelValue":t[37]||(t[37]=e=>a.value.scrap_value=e)},{default:i(({field:e,errors:f})=>[s(F,B({modelValue:a.value.scrap_value,"onUpdate:modelValue":t[36]||(t[36]=h=>a.value.scrap_value=h)},e,{label:"Scrap Value",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Kt,[s(y(E),{name:"Scrap Date",modelValue:a.value.scrap_date,"onUpdate:modelValue":t[39]||(t[39]=e=>a.value.scrap_date=e)},{default:i(({field:e,errors:f})=>[s(F,B({type:"date",modelValue:a.value.scrap_date,"onUpdate:modelValue":t[38]||(t[38]=h=>a.value.scrap_date=h)},e,{label:"Scrap Date",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Zt,[s(y(E),{name:"Capitalization Date",modelValue:a.value.capitalization_date,"onUpdate:modelValue":t[41]||(t[41]=e=>a.value.capitalization_date=e)},{default:i(({field:e,errors:f})=>[s(F,B({type:"date",modelValue:a.value.capitalization_date,"onUpdate:modelValue":t[40]||(t[40]=h=>a.value.capitalization_date=h)},e,{label:"Capitalization Date",variant:"outlined",density:"compact","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Gt,[s(y(E),{name:"End of Life",modelValue:a.value.end_of_life,"onUpdate:modelValue":t[43]||(t[43]=e=>a.value.end_of_life=e)},{default:i(({field:e,errors:f})=>[s(F,B({type:"date",modelValue:a.value.end_of_life,"onUpdate:modelValue":t[42]||(t[42]=h=>a.value.end_of_life=h)},e,{label:"End of Life",density:"compact",variant:"outlined","error-messages":f}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[de,g.value=="financial"]]),ue(l("div",Xt,[V.page!="add"?(w(),J(dt,{key:0,asset:a.value,page:V.page},null,8,["asset","page"])):se("",!0)],512),[[de,g.value=="warranty"]]),ue(l("div",Qt,[s(_t,{asset:a.value},null,8,["asset"])],512),[[de,g.value=="allotted"]]),ue(l("div",ea,[s(pt,{asset:a.value},null,8,["asset"])],512),[[de,g.value=="maintenance"]]),ta,l("div",aa,[s(ee,null,{default:i(()=>[l("div",la,[s(Ee,{options:{multiSelect:!0},onSelect:T})])]),_:1}),K.value.length>0?(w(),J(ee,{key:0,class:"px-1"},{default:i(()=>[(w(!0),te(me,null,pe(K.value,(e,f)=>(w(),te("div",{key:e.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[s(Z,{style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:y(Oe),size:"26px",color:"error",onClick:()=>_e(e.id)},null,8,["icon","onClick"]),s(le,{onClick:()=>fe(f)},{default:i(()=>[s(we,{src:$.value+"/file/"+e.path,cover:"","aspect-ratio":"1"},null,8,["src"])]),_:2},1032,["onClick"])]))),128)),s(xe,{modelValue:_.value,"onUpdate:modelValue":t[45]||(t[45]=e=>_.value=e),width:"95%","max-width":"900"},{default:i(()=>[s(le,{class:"bg-black"},{default:i(()=>[s(ze,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:R.value,"onUpdate:modelValue":t[44]||(t[44]=e=>R.value=e)},{default:i(()=>[(w(!0),te(me,null,pe(K.value,(e,f)=>(w(),J(je,{key:f,"reverse-transition":"fade",transition:"fade"},{default:i(()=>[l("div",sa,[s(we,{src:$.value+"/file/"+e.path},null,8,["src"])])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):(w(),J(ee,{key:1},{default:i(()=>[l("div",na,[s(be,{color:"grey-lighten-4",class:"pa-6 text-center"},{default:i(()=>[q(" Attachment is empty at the moment. ")]),_:1})])]),_:1}))])]),_:1})]),_:1})]),_:1},8,["validation-schema"]),s(Le,{options:L.value},null,8,["options"])]),_:1},8,["loading"]))}};export{va as _};
