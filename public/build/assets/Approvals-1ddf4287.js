import{I as Ue,r as f,c as V,w as i,m as Oe,o as s,s as A,b as e,d as a,e as r,j as re,y as c,t as u,E as y,H as S,p as o,ae as de,q as X,D as C,ah as me,k as P,W as ge,X as ce,aw as Ie,_ as D,i as F,af as M,ax as ne,ay as ie,az as xe,aA as ke,F as Z,aB as Se,Y as Pe,Z as De,ad as z,f as Ne,a2 as $e,a3 as be}from"./app-ba3df10b.js";import{u as ue}from"./formatDate-b9aad8c5.js";import{_ as Be}from"./AppSnackBar-204e99b2.js";const Le={class:"v-col-3 mt-auto font-weight-bold"},Fe={class:"d-flex"},Me=e("div",{class:"mr-2"},"FROM:",-1),ze={class:"d-flex"},He=e("div",{class:"mr-6 pr-2"},"TO:",-1),Ke={class:"v-col-6 text-center"},Ye=e("img",{src:"/assets/images/grandiose-logo.jpg",style:{"max-height":"100px"}},null,-1),Ge=e("br",null,null,-1),Qe={class:"v-col-3 mt-auto font-weight-bold text-right"},Je=e("br",null,null,-1),We=e("div",{class:"v-col-12 v-col-md-1 py-1"},"IMG",-1),Xe=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ITEM DESC",-1),Ze=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ASSET NO",-1),el=e("div",{class:"v-col-12 v-col-md-1 py-1"},"QTY",-1),ll=e("div",{class:"v-col-12 v-col-md-1 py-1"},"UOM",-1),al=e("div",{class:"v-col-12 v-col-md-1 py-1"},"WEIGHT",-1),sl=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ITEM VALUE",-1),tl=e("div",{class:"v-col-12 v-col-md-1 py-1"},"COUNTRY OF ORIGIN",-1),ol=e("div",{class:"v-col-12 v-col-md-2 py-1"},[r(" REMARKS"),e("br"),r("REASON FOR REQUEST ")],-1),rl={class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},dl={style:{position:"relative"}},cl={key:0,class:"checkbox-notice"},nl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},il={key:0},ul={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},vl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},_l={key:1,class:"bg-light-gray d-flex flex-column-reverse flex-start-end"},pl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},yl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},hl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},fl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},ml={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},gl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},xl={key:0,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},kl={key:1,class:"v-col-12 v-col-md-2 py-1 d-flex"},bl={key:0},Vl=e("strong",null," Asset Supervisor - Projects",-1),wl=e("br",null,null,-1),El={key:2,class:"v-col-12 v-col-md-2 py-1"},Al={key:0},Cl=e("strong",null," Asset Supervisor - Projects",-1),ql=e("br",null,null,-1),Rl={style:{"text-wrap":"wrap"}},jl={key:1},Tl=e("strong",null," Commercial Manager - Projects",-1),Ul=e("br",null,null,-1),Ol={style:{"text-wrap":"wrap"}},Il={key:2},Sl=e("strong",null," Releasing",-1),Pl=e("br",null,null,-1),Dl={style:{"text-wrap":"wrap"}},Nl={key:3,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},$l={key:0},Bl=e("strong",null," Asset Supervisor - Projects",-1),Ll=e("br",null,null,-1),Fl={style:{"text-wrap":"wrap"}},Ml={key:1},zl=e("strong",null," Commercial Manager - Projects",-1),Hl=e("br",null,null,-1),Kl={style:{"text-wrap":"wrap"}},Yl={key:2},Gl=e("strong",null," Releasing",-1),Ql=e("br",null,null,-1),Jl={style:{"text-wrap":"wrap"}},Wl={key:0,class:"my-auto"},Xl={class:"pa-0 ma-0 v-col-1 my-auto",style:{position:"relative"}},Zl={key:0,class:"checkbox-notice"},ea={key:4,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},la={key:0,style:{"border-bottom":"1px solid #000000"},class:"pa-1"},aa={key:0},sa=e("strong",null," Asset Supervisor - Projects",-1),ta=e("br",null,null,-1),oa={style:{"text-wrap":"wrap"}},ra={key:1},da=e("strong",null," Commercial Manager - Projects",-1),ca=e("br",null,null,-1),na={style:{"text-wrap":"wrap"}},ia={key:2},ua=e("strong",null," Releasing",-1),va=e("br",null,null,-1),_a={style:{"text-wrap":"wrap"}},pa={key:3},ya=e("strong",null," Receiver",-1),ha={style:{"text-wrap":"wrap"}},fa={key:1},ma={key:2},ga={key:3},xa={key:0,class:"v-col-12 text-center font-weight-bold text-info"},ka=e("br",null,null,-1),ba={key:1,class:"v-col-12 text-center font-weight-bold text-info"},Va={key:0,class:"ml-5 d-flex"},wa=e("div",{class:"px-2 mr-5"},"|",-1),Ea={key:1,class:"ml-6"},Aa={class:"v-col-12 px-0 my-0"},Ca=["data"],qa={class:"v-col-12 v-col-md-3 pa-0 mb-4"},Ra=e("div",{class:"text-center py-1 font-weight-bold"}," Requested By ",-1),ja={class:"text-center py-1"},Ta={class:"text-center py-1"},Ua={class:"text-center text-caption"},Oa={key:0},Ia={key:0,class:"d-flex"},Sa=["onClick"],Pa=["onClick"],Da={key:1},Na=["onClick"],$a=["onClick"],Ba={class:"text-center py-1"},La={class:"text-center py-1"},Fa={class:"text-center text-caption"},Ma={key:2,class:"v-col-12 text-caption",style:{border:"1px solid red","border-radius":"5px"}},za={class:"v-col-12 text-center"},Ha=e("div",{class:"v-col-12 text-center mt-3 font-weight-bold"}," REASON FOR REJECTION ",-1),Ka={class:"v-col-12"},Wa={__name:"Approvals",setup(Ya){const n=Ue(),ve=f(!0),v=f({}),ee=f({}),k=f(!1),le=f(!1),ae=f(!1),R=f(!1),N=f([]),H=f(!1),$=f(""),K=f(!1),Ve=f(n.query.id),m=f(""),_e=f(0),J=f([]),pe=async()=>{let _={id:n.query.id,profile_id:n.query.pid,order:n.query.o};if(!n.query.id||!n.query.pv){ve.value=!1;return}await axios.post("/api/pv/fetch/request-assets/data",_).then(d=>{var g,j,T,x,q,G,Q,l,b,w,E;if(v.value=d.data,!v.value.access){ve.value=!1;return}m.value=(j=(g=d.data)==null?void 0:g.data)==null?void 0:j.status,_e.value=(x=(T=d.data)==null?void 0:T.data)==null?void 0:x.request_type_id,J.value=(G=(q=d.data)==null?void 0:q.data)==null?void 0:G.attachment,((b=(l=(Q=v.value)==null?void 0:Q.data)==null?void 0:l.request_approvals)==null?void 0:b.length)>0&&(k.value=v.value.data.request_approvals.filter(p=>{var t;return p.profile_id==n.query.pid&&p.orders==n.query.o&&p.status=="awaiting-approval"&&((t=p.profile)==null?void 0:t.role)=="asset-supervisor"})[0],le.value=v.value.data.request_approvals.filter(p=>p.profile_id==n.query.pid&&p.orders==n.query.o&&p.status=="awaiting-approval"&&p.approval_type=="releasing")[0],ae.value=v.value.data.request_approvals.filter(p=>{var t;return p.profile_id==n.query.pid&&p.orders==n.query.o&&p.status=="awaiting-approval"&&((t=p.profile)==null?void 0:t.role)=="commercial-manager"})[0],R.value=v.value.data.request_approvals.filter(p=>p.profile_id==n.query.pid&&p.orders==n.query.o&&p.status=="awaiting-approval"&&p.approval_type=="receiver")[0],oe.value=v.value.data.request_approvals[v.value.data.request_approvals.length-1].approval_type,(R.value||k.value)&&m.value!="cancelled"&&(K.value=!0)),N.value=(E=(w=v.value)==null?void 0:w.data)==null?void 0:E.items}).catch(d=>{console.log(d.response.data)})},se=f(1),B=f("image"),we=(_,d)=>{let g=_.path.split(".");B.value=g[g.length-1],se.value=d,L.value=!0},Ee=()=>{window.print()},te=f(window.location.origin),L=f(!1),ye=f(1),Ae=_=>{ye.value=_,L.value=!0},oe=f(""),he=f({}),Ce=_=>{H.value=!0,he.value=_},qe=()=>{H.value=!1,$.value=""},W=(_,d=null)=>{if(H.value=!1,m.value!="cancelled"&&(_.status=="awaiting-approval"||_.status=="reject")&&n.query.pid==_.profile_id&&n.query.o==_.orders){ee.value={status:!0,type:"info",text:"Please wait..."};let g=[];(k.value||ae.value||R.value||le.value)&&(g=N.value.map((x,q)=>(delete x.created_at,delete x.assets,delete x.updated_at,delete x.attachment,x)));let j={},T="";$.value&&d&&(T=$.value),j={profile_id:n.query.pid,id:n.query.id,order:n.query.o,type:v.value.data.types,assets:g,is_reject:T,requestor_id:v.value.data.profile_id},axios.post("/api/pv/store/request-asset/approve-data",j).then(x=>{let q="success";x.data.success||(q="error"),ee.value={status:!0,type:q,text:x.data.message},K.value=!1,setTimeout(()=>{pe()},500)}).catch(x=>{console.log(x.response.data)});return}},Re=_=>{if(_=="approve")return"Approved";if(_=="reviewer")return"Reviewed";if(_=="receiver")return"Received";if(_=="transport")return"Transport Arranged";if(_=="releasing")return"Released";if(_=="verify")return"Verified"},je=()=>{let _=R.value;K.value=!1,N.value.map(d=>{_?d.is_received=Y.value:d.is_available=Y.value})},Te=(_,d=6)=>{let g="00000"+_;return g.substring(g.length-d)},fe=()=>{let _=!0,d=R.value;N.value.map(g=>{d?g.is_received||(_=!1):g.is_available||(_=!1)}),Y.value=_},Y=f(!1);return pe(),(_,d)=>(s(),V(Oe,{style:{"max-width":"90%"},class:"mt-0 pt-0"},{default:i(()=>{var g,j,T,x,q,G,Q;return[((g=N.value)==null?void 0:g.length)>0?(s(),V(A,{key:0,class:"mt-0 pt-0 no-print mt-2"},{default:i(()=>[e("div",null,[a(re,{color:"primary",size:"small",onClick:Ee},{default:i(()=>[r("Print")]),_:1})])]),_:1})):c("",!0),a(A,{class:"mt-0 pt-0"},{default:i(()=>{var l,b,w,E,p,t,U,O,I;return[e("div",Le,[e("div",Fe,[Me,e("div",null,u((b=(l=v.value.data)==null?void 0:l.transfer_from)==null?void 0:b.title),1)]),e("div",ze,[He,e("div",null,u((E=(w=v.value.data)==null?void 0:w.transfer_to)==null?void 0:E.title),1)])]),e("div",Ke,[Ye,Ge,e("strong",null,u((t=(p=v.value.data)==null?void 0:p.setup)==null?void 0:t.title),1)]),e("div",Qe,[r(" SN-"+u(((O=(U=v.value)==null?void 0:U.data)==null?void 0:O.types)=="request"?"5":"3")+u(Te(Ve.value)),1),Je,r(" "+u(y(ue)((I=v.value.data)==null?void 0:I.created_at)),1)])]}),_:1}),a(S,{class:"my-5"}),a(A,null,{default:i(()=>[We,Xe,Ze,el,ll,al,sl,tl,ol,e("div",rl,[r(" REMARKS "),e("div",dl,[K.value?(s(),o("div",cl)):c("",!0),k.value||R.value?(s(),V(de,{key:1,modelValue:Y.value,"onUpdate:modelValue":[d[0]||(d[0]=l=>Y.value=l),je],class:"pa-0 ma-0 v-col-1","hide-details":"",disabled:m.value=="cancelled",variant:"underlined",density:"compact"},null,8,["modelValue","disabled"])):c("",!0)])])]),_:1}),(s(!0),o(Z,null,X(N.value,(l,b)=>(s(),V(A,{class:"mt-1 approval-form-pr",key:l.id},{default:i(()=>{var w,E,p,t,U,O,I;return[e("div",nl,[(w=l.attachment)!=null&&w.id?(s(),o("div",il,[a(P,{onClick:()=>Ae(l),maxHeight:"40",variant:"text",class:"ma-2"},{default:i(()=>[a(C,{size:"large",icon:y(me),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"]),a(ce,{modelValue:L.value,"onUpdate:modelValue":d[1]||(d[1]=h=>L.value=h),width:"95%","max-width":"900"},{default:i(()=>[a(P,{class:"bg-black"},{default:i(()=>[e("div",ul,[a(ge,{src:te.value+"/file/"+ye.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])])):(s(),V(P,{key:1,maxHeight:"40",variant:"text",class:"ma-2"},{default:i(()=>[a(C,{size:"large",icon:y(Ie)},null,8,["icon"])]),_:1})),a(D,{value:l.item_description,variant:"underlined",density:"compact","hide-details":"",rows:"2",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0},null,8,["value"])]),e("div",vl,[k.value&&m.value!="cancelled"?(s(),V(F,{key:0,modelValue:l.asset_code,"onUpdate:modelValue":h=>l.asset_code=h,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:M(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])):(s(),o("div",_l,u(l.asset_code),1))]),e("div",pl,[a(F,{value:l.qty,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",yl,[a(F,{value:l.uom,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",hl,[a(F,{modelValue:l.weight,"onUpdate:modelValue":h=>l.weight=h,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:M(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",fl,[a(F,{modelValue:l.item_value,"onUpdate:modelValue":h=>l.item_value=h,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:M(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",ml,[a(F,{modelValue:l.country_of_origin,"onUpdate:modelValue":h=>l.country_of_origin=h,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:M(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",gl,[a(D,{value:l.reason_for_request,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0,rows:"2"},null,8,["value"])]),k.value?(s(),o("div",xl,[a(D,{modelValue:l.remarks,"onUpdate:modelValue":h=>l.remarks=h,variant:"underlined",density:"compact","hide-details":"",class:M(["text-remarks",`${m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`]),placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue","class"]),a(de,{disabled:m.value=="cancelled",modelValue:l.is_available,"onUpdate:modelValue":[h=>l.is_available=h,fe],class:"pa-0 ma-0 v-col-1","hide-details":"",variant:"underlined",density:"compact"},null,8,["disabled","modelValue","onUpdate:modelValue"])])):c("",!0),ae.value?(s(),o("div",kl,[e("div",null,[l.remarks?(s(),o("div",bl,[Vl,r(),wl,e("p",null,u(l.remarks),1),r(" ------- ")])):c("",!0),a(D,{modelValue:l.remarks_commercial,"onUpdate:modelValue":h=>l.remarks_commercial=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])])):le.value?(s(),o("div",El,[e("div",null,[l.remarks?(s(),o("div",Al,[Cl,r(),ql,e("pre",Rl,u(l.remarks),1),r(" ------- ")])):c("",!0),l.remarks_commercial?(s(),o("div",jl,[Tl,r(),Ul,e("pre",Ol,u(l.remarks_commercial),1),r(" ------- ")])):c("",!0),l.remarks_release?(s(),o("div",Il,[Sl,r(),Pl,e("pre",Dl,u(l.remarks_release),1),r(" ------- ")])):c("",!0)]),a(D,{modelValue:l.remarks_release,"onUpdate:modelValue":h=>l.remarks_release=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):R.value?(s(),o("div",Nl,[e("div",null,[e("div",null,[l.remarks?(s(),o("div",$l,[Bl,r(),Ll,e("pre",Fl,u(l.remarks),1),r(" ------- ")])):c("",!0),l.remarks_commercial?(s(),o("div",Ml,[zl,r(),Hl,e("pre",Kl,u(l.remarks_commercial),1),r(" ------- ")])):c("",!0),l.remarks_release?(s(),o("div",Yl,[Gl,r(),Ql,e("pre",Jl,u(l.remarks_release),1),r(" ------- ")])):c("",!0)]),a(D,{modelValue:l.remarks_receive,"onUpdate:modelValue":h=>l.remarks_receive=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(p=(E=v.value)==null?void 0:E.data)!=null&&p.is_available?(s(),o("div",Wl,[a(C,{class:"mt-3",icon:l.is_available?y(ne):y(ie),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):c("",!0),e("div",Xl,[K.value?(s(),o("div",Zl)):c("",!0),a(de,{modelValue:l.is_received,"onUpdate:modelValue":[h=>l.is_received=h,fe],"hide-details":"",variant:"underlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])])])):(s(),o("div",ea,[l.remarks||l.remarks_commercial||l.remarks_release||l.remarks_receive?(s(),o("div",la,[l.remarks?(s(),o("div",aa,[sa,r(),ta,e("pre",oa,u(l.remarks),1),r(" ------- ")])):c("",!0),l.remarks_commercial?(s(),o("div",ra,[da,r(),ca,e("pre",na,u(l.remarks_commercial),1),r(" ------- ")])):c("",!0),l.remarks_release?(s(),o("div",ia,[ua,r(),va,e("pre",_a,u(l.remarks_release),1),r(" ------- ")])):c("",!0),l.remarks_receive?(s(),o("div",pa,[ya,r(),e("pre",ha,u(l.remarks_receive),1)])):c("",!0)])):(s(),o("div",fa)),(U=(t=v.value)==null?void 0:t.data)!=null&&U.is_available?(s(),o("div",ma,[a(C,{class:"mt-3",icon:l.is_available?y(ne):y(ie),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):c("",!0),((I=(O=v.value)==null?void 0:O.data)==null?void 0:I.status)=="complete"&&oe.value=="receiver"?(s(),o("div",ga,[a(C,{class:"mt-3",icon:l.is_received?y(xe):y(ke),color:`${l.is_received?"success":"error"}`},null,8,["icon","color"])])):c("",!0)]))]}),_:2},1024))),128)),k.value?(s(),V(A,{key:1,class:"mt-3"},{default:i(()=>[m.value!=="cancelled"?(s(),o("div",xa,[r(" YOU CAN UPDATE SOME DATA AND"),ka,r(" PLEASE TICK CHECKBOX IF ASSET IS AVAILABLE BEFORE CLICKING THE APPROVE BUTTON ")])):(s(),o("div",ba," THIS REQUEST HAS BEEN CANCELLED. "))]),_:1})):c("",!0),(T=(j=v.value)==null?void 0:j.data)!=null&&T.is_available&&m.value!=="cancelled"?(s(),V(A,{key:2,class:"mt-6 mb-2"},{default:i(()=>[a(P,{variant:"text",class:"v-col-12 text-center pt-2 font-weight-bold pb-0 d-flex justify-center"},{default:i(()=>{var l;return[e("div",null,[a(C,{icon:y(ne),color:"success"},null,8,["icon"]),r(" AVAILABLE "),a(C,{icon:y(ie),color:"error",class:"ml-5"},null,8,["icon"]),r(" NOT AVAILABLE ")]),R.value?(s(),o("div",Va,[wa,e("div",null,[a(C,{icon:y(Se)},null,8,["icon"]),r(" TICK RECEIVED ASSETS "),a(S,{thickness:8,color:"error",class:"divider-notice"})])])):c("",!0),((l=v.value.data)==null?void 0:l.status)=="complete"&&oe.value=="receiver"?(s(),o("div",Ea,[a(C,{icon:y(xe),color:"success"},null,8,["icon"]),r(" RECEIVED "),a(C,{icon:y(ke),color:"error",class:"ml-5"},null,8,["icon"]),r(" NOT RECEIVE ")])):c("",!0)]}),_:1})]),_:1})):c("",!0),a(A,{class:"mt-3"},{default:i(()=>[e("div",Aa,[a(S),a(S)])]),_:1}),_e.value==2&&((x=J.value)==null?void 0:x.length)>0?(s(),V(A,{key:3,class:"my-3 d-flex justify-center"},{default:i(()=>[(s(!0),o(Z,null,X(J.value,(l,b)=>(s(),o("div",{key:l.id,class:"pa-2",style:{position:"relative"}},[a(P,{onClick:()=>we(l,b)},{default:i(()=>[a(C,{size:"large",icon:y(me),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"])]))),128)),a(ce,{modelValue:L.value,"onUpdate:modelValue":d[3]||(d[3]=l=>L.value=l),width:"95%","max-width":"900"},{default:i(()=>[a(P,{class:"bg-black"},{default:i(()=>[a(Pe,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:se.value,"onUpdate:modelValue":d[2]||(d[2]=l=>se.value=l)},{default:i(()=>[(s(!0),o(Z,null,X(J.value,(l,b)=>(s(),V(De,{key:b,"reverse-transition":"fade",transition:"fade"},{default:i(()=>[e("div",{style:z(`${B.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[B.value=="jpg"||B.value=="jpeg"||B.value=="png"?(s(),V(ge,{key:0,src:te.value+"/file/"+l.path},null,8,["src"])):c("",!0),B.value=="pdf"?(s(),o("object",{key:1,data:te.value+"/file/"+l.path,type:"application/pdf",width:"100%",height:"800px"},null,8,Ca)):c("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):c("",!0),((q=v.value.data)==null?void 0:q.request_approvals.length)>0?(s(),V(A,{key:4},{default:i(()=>{var l,b,w,E,p;return[e("div",qa,[e("div",{class:"text-center mx-2 py-4 font-weight-bold",style:z(`${m.value=="cancelled"?"color: red;":"color: rgb(3, 167, 3);"} border: 1px solid #ccc; font-size: 17px;`)},u(m.value=="cancelled"?"CANCELLED":"APPROVED"),5),Ra,e("div",ja,u((b=(l=v.value.data)==null?void 0:l.profile)==null?void 0:b.display_name),1),e("div",Ta,u((E=(w=v.value.data)==null?void 0:w.profile)==null?void 0:E.designation),1),e("div",Ua,u(y(ue)((p=v.value.data)==null?void 0:p.created_at)),1)]),(s(!0),o(Z,null,X(v.value.data.request_approvals,t=>{var U,O,I;return s(),o("div",{class:"v-col-12 v-col-md-3 pa-0 mb-4",key:t.id},[((U=t.profile)==null?void 0:U.role)=="commercial-manager"&&y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?(s(),o("div",Oa,[t.status=="awaiting-approval"?(s(),o("div",Ia,[e("div",{onClick:h=>Ce(t),class:"cursor-pointer text-center py-5 v-col-6",style:z(`border:1px solid #ccc; ${y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":"background-color: none;"}`)}," REJECT ",12,Sa),e("div",{onClick:h=>W(t,"reject"),class:"cursor-pointer text-center py-5 v-col-6",style:z(`border:1px solid #ccc; ${y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(3, 167, 3);color:#fff;":"background-color: none"}`)}," APPROVE ",12,Pa)])):t.status=="reject"||t.status=="done"||t.status=="pending"?(s(),o("div",Da,[e("div",{onClick:h=>W(t),class:"cursor-pointer text-center mx-2 py-5",style:z(`border:1px solid #ccc; ${t.status=="reject"&&y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},u(t.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,Na)])):c("",!0)])):(s(),o("div",{key:1,onClick:h=>W(t),class:"cursor-pointer text-center mx-2 py-5",style:z(`border:1px solid #ccc; ${m.value!="cancelled"&&t.status=="awaiting-approval"&&y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},u(t.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,$a)),e("div",{class:M(`text-center py-1 font-weight-bold ${t.status=="reject"?"text-error text-uppercase":""}`)},u(t.status=="reject"?"Rejected":Re(t.approval_type))+" By ",3),e("div",Ba,u((O=t.profile)==null?void 0:O.display_name),1),e("div",La,u((I=t.profile)==null?void 0:I.designation),1),e("div",Fa,u(t.date_approved?y(ue)(t.date_approved):""),1),t.reason_rejected?(s(),o("div",Ma,[r(" Reason rejected "),a(S,{class:"my-2"}),r(" "+u(t.reason_rejected),1)])):c("",!0)])}),128))]}),_:1})):c("",!0),((Q=(G=v.value)==null?void 0:G.data)==null?void 0:Q.status)!=="complete"?(s(),V(A,{key:5,class:"no-print"},{default:i(()=>[e("div",za,[a(S),r(" You will receive a notification once you click the approve button. "),a(S)])]),_:1})):c("",!0),a(ce,{width:"500",modelValue:H.value,"onUpdate:modelValue":d[6]||(d[6]=l=>H.value=l),persistent:""},{default:i(()=>[a(P,null,{default:i(()=>[a(Ne,null,{default:i(()=>[a(A,null,{default:i(()=>[Ha,e("div",Ka,[a(D,{modelValue:$.value,"onUpdate:modelValue":d[4]||(d[4]=l=>$.value=l),label:"STATE YOUR REASON HERE",variant:"outlined"},null,8,["modelValue"])])]),_:1})]),_:1}),a($e,null,{default:i(()=>[a(be),a(re,{onClick:qe},{default:i(()=>[r("Cancel")]),_:1}),a(re,{color:"success",disabled:!$.value,onClick:d[5]||(d[5]=l=>W(he.value,"reject"))},{default:i(()=>[r("Confirm")]),_:1},8,["disabled"]),a(be)]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Be,{options:ee.value},null,8,["options"])]}),_:1}))}};export{Wa as default};
