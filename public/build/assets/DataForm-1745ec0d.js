import{a as Je,r as f,G as Ze,u as We,O as te,I as Xe,H as fe,o as n,c as h,w as d,d as o,v as et,k as U,V as tt,b as a,t as v,p as V,z as y,ae as he,y as u,E as ae,f as $,s as g,j as S,e as C,J as F,i as K,q as M,F as R,P as ye,R as le,Q as H,M as at,U as ge,Y as lt,C as J,D as st,ag as ot,S as dt,T as it,ac as nt,aZ as Ve,a_ as be,a$ as we,b0 as ke,b1 as rt,Z as ut,_ as ct,m as vt,n as I}from"./app-18832ec5.js";import{_ as pt}from"./ApppageHeader-87b55043.js";import{_ as xe,r as Se}from"./Studio-b2374681.js";import{_ as _t}from"./AppSnackBar-cf7c3ded.js";import{Q as mt}from"./QrcodeReaderVue3.common-81ed4b09.js";import{d as ft,e as ht}from"./encrypt-6a2adfa1.js";import{u as Ce}from"./formatDate-559e9d83.js";const yt={key:0,class:"text-error text-h6"},gt={class:"v-col-12 v-col-md-8"},Vt={key:0,class:"no-print"},bt={class:"v-col-12 v-col-md-6"},wt={class:"v-col-12 v-col-md-6"},kt={class:"v-col-12 v-col-md-6"},xt={class:"v-col-12 v-col-md-6"},St={class:"v-col-12"},Ct={class:"wd-100"},Tt={class:"wd-60 text-caption"},qt={class:"wd-40"},At={class:"wd-60"},Ut={class:"wd-40"},jt={class:"wd-100"},Ot={class:"v-col-12"},Et=a("small",{class:"mx-5 text-info"},"UOM: ( pcs, pack, box, etc.. )",-1),Dt=a("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),Rt=a("div",{class:"wd-15"},"ASSET CODE",-1),It=a("div",{class:"wd-5"},"QTY",-1),Nt=a("div",{class:"wd-10"},"UOM",-1),zt=a("div",{class:"wd-10"},"WEIGHT",-1),Ft=a("div",{class:"wd-10"},"VALUE",-1),Mt=a("div",{class:"wd-15"},"REASON FOR REQUEST",-1),Pt={class:"wd-30"},Bt={class:"wd-15"},Lt={class:"wd-5"},Qt={class:"wd-10"},$t={class:"wd-10"},Yt={class:"wd-10"},Gt={class:"wd-15"},Kt={class:"v-col-12 v-col-md-1 px-1 no-print"},Ht={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},Jt={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},Zt={class:"v-col-12 pt-0 pb-0"},Wt={class:"v-col-12 v-col-md-1 custom-width-description"},Xt={class:"v-col-12 v-col-md-2 d-flex"},ea={class:"v-col-12 v-col-md-1"},ta={class:"v-col-12 v-col-md-1 custom-width-uom"},aa={class:"v-col-12 v-col-md-1 my-auto"},la=a("br",null,null,-1),sa=a("small",null,"(KG)",-1),oa={class:"v-col-12 v-col-md-1 my-auto"},da=a("br",null,null,-1),ia=a("small",null,"(AED)",-1),na={class:"v-col-12 v-col-md-2 d-flex"},ra={key:0},ua=a("div",null,"Additional File can be upload here",-1),ca=["data"],va={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},pa=a("div",null,"APPROVAL SETUP",-1),_a={key:0,class:"no-print"},ma=a("div",{class:"wd-20"},"Requestor",-1),fa={class:"wd-50"},ha=a("div",{class:"wd-10"},"Status",-1),ya=a("div",{class:"wd-20"},"Date Approved",-1),ga={class:"wd-20"},Va={class:"wd-50"},ba={class:"wd-10"},wa={class:"wd-20"},ka=a("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),xa={class:"v-col-12 v-col-md-6"},Sa=a("div",{class:"v-col-12 v-col-md-1"},"Status",-1),Ca=a("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),Ta={class:"v-col-12 v-col-md-2"},qa={class:"v-col-12 v-col-md-7 d-flex"},Aa={class:"my-auto"},Ua={class:"v-col-12 no-print"},ja={class:"v-col-12 text-error"},Oa=a("div",{class:"v-col-12 no-print v-col-md-12 text-info"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),Ma={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(Te,{emit:qe}){const T=Te,c=Je(),se=f("Note: Administrator needs to setup signatories first."),Z=f(!1),q=Ze(),Ae=We(),i=f({}),k=f(!1),b=f([{qty:1,attachment:{}}]),Ue=f(new Date),je=f(["Nos","Set","Pcs","Pack","Pallet","SqM"]),W=s=>{if(s=="approve")return"Approved By";if(s=="reviewer")return"Reviewed By";if(s=="receiver")return"Received By";if(s=="transport")return"Transport Arranged By";if(s=="releasing")return"Released By";if(s=="verify")return"Verified By"},P=f(window.location.origin),Oe=(s,l)=>{b.value[s].attachment=l[0]},A=f([]),Ee=s=>{let l=null;s.map(e=>{l=A.value.find(t=>t.id==e.id),l||A.value.push(e)})},De=s=>{A.value=A.value.filter(l=>l.id!==s)},N=f("image"),Re=(s,l)=>{let e=s.path.split(".");N.value=e[e.length-1],B.value=l,z.value=!0},z=f(!1),B=f(1),Ie=s=>{B.value=s,z.value=!0},Ne=s=>{b.value[s].attachment=""},oe=f(""),L=f(!1),de=f([]),ze=async()=>{let s="request";T.headertitle=="Transfer Assets"&&(s="transfer"),await I(c.token).get("/api/fetch/approval-setups/non-paginated/data/"+s).then(l=>{var e,t;de.value=l.data,oe.value=(t=(e=l.data.filter(_=>_.id==p.value.request_type_id))==null?void 0:e[0])==null?void 0:t.title}).catch(l=>{})},Q=f(!1),ie=f(0),Fe=s=>{ie.value=s,Q.value=!0},ne=async(s,l)=>{let e=ie.value;l!==void 0&&(e=l),await I(c.token).get("/api/fetch/asset-info/by/asset-code/"+s).then(t=>{b.value[e].item_description=t.data.asset_name,b.value[e].asset_code=s,Q.value=!1}).catch(t=>{})},O=f({}),re=f([]),Me=async()=>{await I(c.token).get("/api/fetch/companies").then(s=>{re.value=s.data}).catch(s=>{})},ue=f(""),ce=f(""),X=f([]),Pe=async()=>{await I(c.token).get("/api/fetch/locations/non-paginated/data").then(s=>{var l,e,t,_;X.value=s.data,ue.value=(e=(l=s.data.filter(w=>w.id==p.value.transferred_from))==null?void 0:l[0])==null?void 0:e.title,ce.value=(_=(t=s.data.filter(w=>w.id==p.value.transferred_to))==null?void 0:t[0])==null?void 0:_.title}).catch(s=>{})},Be=()=>{b.value.push({qty:1,attachment:{}}),E()},Le=(s,l)=>{b.value.splice(l,1),E()},Qe=()=>{O.value={status:!0,type:"success",text:"Draft has been removed!"},localStorage.removeItem("draft-transfer"),setTimeout(()=>{location.reload()},500)},$e=()=>{O.value={status:!0,type:"info",text:"Please wait..."};let s={data:i.value,assets:b.value,approval:j.value,profile_id:c.user.profile.id,role:c.user.profile.role,type:"transfer"};localStorage.setItem("draft-transfer",ht(s)),setTimeout(()=>{L.value=!0,O.value={status:!0,type:"success",text:"Data has been saved to Draft"}},800)},Ye=te(()=>A.value.map(s=>s.id)),Ge=()=>{O.value={status:!0,type:"info",text:"Please wait..."};let s=b.value.map((e,t)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),l={data:i.value,assets:s,approval:j.value,profile_id:c.user.profile.id,role:c.user.profile.role,type:"transfer",additionalFiles:Ye.value};I(c.token).post("/api/request-asset/store-update/data",l).then(e=>{let t="",_="";e.data.message?(t=e.data.message,_="success"):e.data.error&&(t=e.data.error,_="error"),O.value={status:!0,type:_,text:t},L.value=!1,localStorage.removeItem("draft-transfer"),q.params.id||setTimeout(()=>{Ae.push({name:"EditTransferAsset",params:{id:e.data.id}}).catch(w=>{})},800)}).catch(e=>{console.log(e)})},j=f([]),Y=f(!0),ee=async()=>{await I(c.token).get("/api/fetch/request-asset/approval-setup-fetch/"+i.value.request_type_id).then(s=>{var l,e;j.value=(l=s.data)==null?void 0:l.stages,i.value.extra_attachment=s.data.enable_attachment,q.params.id&&j.value.length>0&&j.value.map((t,_)=>(t.profile_id=x.value[_].profile_id,t.status=x.value[_].status,t.date_approved=x.value[_].date_approved,t.reason_rejected=x.value[_].reason_rejected,t)),((e=s.data)==null?void 0:e.stages.length)>0?Y.value=!0:Y.value=!1}).catch(s=>{})},E=()=>{let s=!1;Z.value=!1,i.value.company_id&&i.value.request_type_id&&i.value.subject&&i.value.transferred_from&&i.value.transferred_to&&(s=!0);let l=!0;b.value.map(t=>{(!t.item_description||!t.reason_for_request||!t.uom||!t.qty||t.qty<=0)&&(l=!1)});let e=!0;j.value.map(t=>{t.profile_id||(e=!1)}),e&&l&&s&&(Z.value=!0)},ve=s=>{let l={status:s,profile_id:c.user.profile.id,ID:p.value.id};I(c.token).post("/api/request-asset/change-request/data",l).then(e=>{O.value={status:!0,type:"success",text:e.data.message},p.value.status=s,qe("saved",e.data.message)}).catch(e=>{})},pe=(s,l=6)=>{let e="00000"+s;return e.substring(e.length-l)},x=f([]),p=f({}),G=f({});Xe(()=>{var s,l,e,t,_,w;if(ze().then(()=>{Me().then(()=>{Pe()})}),q.params.id){k.value=!0;let r=T.objectdata;p.value=r,i.value.company_id=r.company_id,i.value.request_type_id=r.request_type_id,i.value.subject=r.subject,i.value.transferred_from=r.transferred_from,i.value.transferred_to=r.transferred_to,i.value.id=r.id,i.value.requestor_id=r.profile_id,x.value=r.request_approvals,b.value=r.items,G.value=(l=(s=r.request_approvals)==null?void 0:s.filter(m=>m.status=="awaiting-approval"))==null?void 0:l[0],A.value=r.attachment,ee()}else{i.value.company_id=c.user.profile.company_id;let r=localStorage.getItem("draft-transfer");r&&(r=ft(r),L.value=!0,i.value.request_type_id=(e=r==null?void 0:r.data)==null?void 0:e.request_type_id,i.value.transferred_from=(t=r==null?void 0:r.data)==null?void 0:t.transferred_from,i.value.transferred_to=(_=r==null?void 0:r.data)==null?void 0:_.transferred_to,i.value.subject=(w=r==null?void 0:r.data)==null?void 0:w.subject,i.value.request_type_id&&ee().then(()=>{x.value=r.approval,j.value.map((m,D)=>(m.profile_id=x.value[D].profile_id,m.status=x.value[D].status,m.date_approved=x.value[D].date_approved,m.reason_rejected=x.value[D].reason_rejected,m))}),b.value=r==null?void 0:r.assets)}});const Ke=f("https://assets.grandiose.ae"),He=te(()=>{var r,m,D,_e,me;let s=null,l=Ke.value+"/pv/employee-signatory",e=Se(50),t=Se(50),_=95,w=99;return((m=(r=c.user)==null?void 0:r.profile)==null?void 0:m.id)==((D=G.value)==null?void 0:D.profile_id)&&(_=(_e=G.value)==null?void 0:_e.profile_id,w=(me=G.value)==null?void 0:me.orders),p.value&&(s=l+"/transfer/approvals?o="+w+"&key="+e+"&pid="+_+"&pv="+t+"&id="+p.value.id),s});return te(()=>c.user.role=="receiving-releasing"||c.user.role=="facility"),fe(i.value,async(s,l)=>{E()}),fe(b.value,async(s,l)=>{E()}),(s,l)=>(n(),h(vt,null,{default:d(()=>[o(pt,{title:T.headertitle,class:"no-print"},null,8,["title"]),o(g,{class:"mb-3"},{default:d(()=>[o(et,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[o(U,null,{default:d(()=>[o(tt,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:d(()=>[a("div",null,v(T.headertitle)+" "+v(L.value?"(Draft)":""),1),Y.value?y("",!0):(n(),V("div",yt,v(se.value),1)),k.value?(n(),V("div",{key:1,class:he(p.value.status=="cancelled"?"text-error":p.value.status=="complete"?"text-success":"")}," STATUS ("+v(p.value.status)+") ",3)):y("",!0),a("div",null,"DATE: "+v(u(Ce)(Ue.value)),1)]),_:1}),o(ae),o($,null,{default:d(()=>[o(g,{class:"no-print"},{default:d(()=>[k.value?(n(),V("div",{key:0,class:he(`${p.value.status=="complete"?"v-col-12":"v-col-md-12"}`)}," REQUEST NO: SN-3"+v(pe(p.value.id)),3)):y("",!0),a("div",gt,[k.value&&(p.value.status=="pending"||p.value.status=="cancelled")?(n(),V("div",Vt,[p.value.status=="pending"&&i.value.requestor_id==u(c).user.profile.id?(n(),h(S,{key:0,onClick:l[0]||(l[0]=e=>ve("cancelled")),size:"small",color:"warning"},{default:d(()=>[C("Cancel request")]),_:1})):y("",!0),i.value.requestor_id==u(c).user.profile.id&&p.value.status=="cancelled"?(n(),h(S,{key:1,onClick:l[1]||(l[1]=e=>ve("pending")),size:"small",color:"info"},{default:d(()=>[C("Change status to Pending")]),_:1})):y("",!0)])):y("",!0)]),a("div",bt,[o(F,{items:de.value,modelValue:i.value.request_type_id,"onUpdate:modelValue":[l[2]||(l[2]=e=>i.value.request_type_id=e),ee],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:k.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),a("div",wt,[o(F,{items:re.value,modelValue:i.value.company_id,"onUpdate:modelValue":l[3]||(l[3]=e=>i.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),a("div",kt,[o(F,{items:X.value,modelValue:i.value.transferred_from,"onUpdate:modelValue":l[4]||(l[4]=e=>i.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),a("div",xt,[o(F,{items:X.value,modelValue:i.value.transferred_to,"onUpdate:modelValue":l[5]||(l[5]=e=>i.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"])]),a("div",St,[o(K,{modelValue:i.value.subject,"onUpdate:modelValue":l[6]||(l[6]=e=>i.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),o(g,{class:"for-print-flex mx-2 mb-1"},{default:d(()=>{var e,t;return[a("div",Ct,"REQUEST NO: "+v(p.value.id?"SN-3"+pe(p.value.id):""),1),a("div",Tt,"TYPE OF REQUEST: "+v(oe.value),1),a("div",qt,"COMPANY: "+v((t=(e=p.value)==null?void 0:e.company)==null?void 0:t.title),1),a("div",At,"LOCATION FROM: "+v(ue.value),1),a("div",Ut,"LOCATION TO: "+v(ce.value),1),a("div",jt,"SUBJECT: "+v(p.value.subject),1)]}),_:1})]),_:1})]),_:1}),o(U,{class:"my-2"},{default:d(()=>[o($,null,{default:d(()=>[o(g,null,{default:d(()=>{var e;return[a("div",Ot,[p.value.status!="complete"&&(!u(q).params.id||i.value.requestor_id==u(c).user.profile.id&&((e=T.objectdata)==null?void 0:e.status)=="pending"||u(c).user.profile.role=="superadmin"||u(c).user.profile.role=="administrator")?(n(),h(S,{key:0,size:"small",color:"primary",class:"no-print",onClick:Be},{default:d(()=>[C("Add")]),_:1})):y("",!0),Et])]}),_:1}),o(g,{class:"for-print-flex mx-2 header mb-1"},{default:d(()=>[Dt,Rt,It,Nt,zt,Ft,Mt]),_:1}),(n(!0),V(R,null,M(b.value,(e,t)=>(n(),h(g,{key:t,class:"for-print-flex mx-2 row-bordered"},{default:d(()=>[a("div",Pt,v(e.item_description),1),a("div",Bt,v(e.asset_code),1),a("div",Lt,v(e.qty),1),a("div",Qt,v(e.uom),1),a("div",$t,v(e.weight),1),a("div",Yt,v(e.item_value),1),a("div",Gt,v(e.reason_for_request),1)]),_:2},1024))),128)),(n(!0),V(R,null,M(b.value,(e,t)=>(n(),h(g,{key:t,class:"no-print"},{default:d(()=>{var _,w,r;return[a("div",Kt,[(_=e.attachment)!=null&&_.id?(n(),h(g,{key:0,class:"px-1"},{default:d(()=>[a("div",Ht,[o(K,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":m=>e.attachment.id=m},null,8,["modelValue","onUpdate:modelValue"]),!k.value||k.value&&i.value.requestor_id==u(c).user.profile.id?(n(),h(S,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:u(ye),size:"16px",color:"error",onClick:()=>Ne(t,e.attachment.id)},null,8,["icon","onClick"])):y("",!0),o(U,{onClick:()=>Ie(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),o(le,{modelValue:z.value,"onUpdate:modelValue":l[7]||(l[7]=m=>z.value=m),width:"95%","max-width":"900"},{default:d(()=>[o(U,{class:"bg-black"},{default:d(()=>[a("div",Jt,[o(H,{src:P.value+"/file/"+B.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(n(),h(g,{key:1,class:"mt-0"},{default:d(()=>[a("div",Zt,[o(at,{color:"grey-lighten-4",class:"text-center"},{default:d(()=>[o(xe,{options:{multiSelect:!1,type:"transfer-asset",userID:u(c).user.profile.id},onSelect:m=>Oe(t,m)},null,8,["options","onSelect"])]),_:2},1024)])]),_:2},1024))]),a("div",Wt,[o(ge,{modelValue:e.item_description,"onUpdate:modelValue":m=>e.item_description=m,variant:"outlined",density:"compact","hide-details":"",label:"ITEM DESC*",rows:"2",class:"no-print"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",Xt,[o(K,{modelValue:e.asset_code,"onUpdate:modelValue":m=>e.asset_code=m,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE","append-inner-icon":u(lt),"onClick:appendInner":m=>ne(e.asset_code,t)},null,8,["modelValue","onUpdate:modelValue","append-inner-icon","onClick:appendInner"]),(!u(q).params.id||i.value.requestor_id==u(c).user.profile.id&&((w=T.objectdata)==null?void 0:w.status)=="pending"||u(c).user.profile.role=="superadmin"||u(c).user.profile.role=="administrator")&&p.value.status!="complete"?(n(),h(J,{key:0,onClick:m=>Fe(t),class:"ml-2 my-auto",size:"x-small",icon:u(st)},null,8,["onClick","icon"])):y("",!0)]),a("div",ea,[o(K,{type:"number","onUpdate:modelValue":[E,m=>e.qty=m],modelValue:e.qty,variant:"outlined",density:"compact","hide-details":"",class:"no-print",label:"QTY*"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",ta,[o(F,{items:je.value,modelValue:e.uom,"onUpdate:modelValue":[m=>e.uom=m,E],variant:"outlined",density:"compact","hide-details":"",label:"UOM*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),a("div",aa,[C(v(e.weight?e.weight:0),1),la,sa]),a("div",oa,[C(v(e.item_value?e.item_value:0),1),da,ia]),a("div",na,[o(ge,{modelValue:e.reason_for_request,"onUpdate:modelValue":m=>e.reason_for_request=m,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON*"},null,8,["modelValue","onUpdate:modelValue"]),!k.value||k.value&&u(c).user.profile.id==T.objectdata.profile_id&&((r=T.objectdata)==null?void 0:r.status)=="pending"?(n(),h(J,{key:0,size:"small",onClick:()=>Le(e.id,t),icon:u(ot),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):y("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),i.value.extra_attachment?(n(),h(U,{key:0},{default:d(()=>[o($,null,{default:d(()=>{var e;return[!k.value||k.value&&i.value.requestor_id==u(c).user.profile.id?(n(),V("div",ra,[ua,o(xe,{options:{multiSelect:!0,type:"transfer-asset"},onSelect:Ee})])):y("",!0),((e=A.value)==null?void 0:e.length)>0?(n(),h(g,{key:1,class:"px-1 mt-4"},{default:d(()=>[(n(!0),V(R,null,M(A.value,(t,_)=>(n(),V("div",{key:t.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[k.value&&(p.value.status=="pending"||p.value.status=="cancelled")?(n(),h(S,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:u(ye),size:"20px",color:"error",onClick:()=>De(t.id)},null,8,["icon","onClick"])):y("",!0),o(U,{onClick:()=>Re(t,_)},{default:d(()=>[t.mime=="image/jpeg"||t.mime=="image/png"?(n(),h(H,{key:0,src:P.value+"/file/"+t.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(n(),h(H,{key:1,src:P.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),o(le,{modelValue:z.value,"onUpdate:modelValue":l[9]||(l[9]=t=>z.value=t),width:"95%","max-width":"900"},{default:d(()=>[o(U,{class:"bg-black"},{default:d(()=>[o(dt,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:B.value,"onUpdate:modelValue":l[8]||(l[8]=t=>B.value=t)},{default:d(()=>[(n(!0),V(R,null,M(A.value,(t,_)=>(n(),h(it,{key:_,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[a("div",{style:nt(`${N.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[N.value=="jpg"||N.value=="jpeg"||N.value=="png"?(n(),h(H,{key:0,src:P.value+"/file/"+t.path},null,8,["src"])):y("",!0),N.value=="pdf"?(n(),V("object",{key:1,data:P.value+"/file/"+t.path,type:"application/pdf",width:"100%",height:"800px"},null,8,ca)):y("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0)]}),_:1})]),_:1})):y("",!0),o(U,{class:"my-2 page-break"},{default:d(()=>[o($,null,{default:d(()=>[o(g,null,{default:d(()=>[a("div",va,[pa,u(q).params.id?(n(),V("div",_a,[o(S,{color:"info",size:"small",target:"_blank",href:He.value},{default:d(()=>[C("View Approval Page")]),_:1},8,["href"])])):y("",!0)]),o(ae)]),_:1}),o(g,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:d(()=>{var e,t;return[ma,a("div",fa,v((t=(e=p.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),ha,ya]}),_:1}),(n(!0),V(R,null,M(x.value,e=>(n(),h(g,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:d(()=>{var t;return[a("div",ga,v(W(e.approval_type)),1),a("div",Va,v((t=e==null?void 0:e.profile)==null?void 0:t.display_name),1),a("div",ba,[e.status?(n(),h(J,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?u(Ve):e.status=="pending"?u(be):e.status=="reject"?u(we):u(ke),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0)]),a("div",wa,v(e.date_approved),1)]}),_:2},1024))),128)),o(g,{class:"no-print"},{default:d(()=>{var e,t;return[ka,a("div",xa,v((t=(e=p.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),Sa,Ca]}),_:1}),Y.value?(n(),V(R,{key:0},[(n(!0),V(R,null,M(j.value,(e,t)=>(n(),h(g,{key:e.id,class:"no-print"},{default:d(()=>[a("div",Ta,v(e.types?W(e.types):W(e.approval_type)),1),a("div",qa,[o(F,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[_=>e.profile_id=_,E],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),o(S,{variant:"text",size:"x-small",class:"no-print"},{default:d(()=>[e.status?(n(),h(J,{key:0,class:"mx-2 my-3",icon:e.status=="awaiting-approval"?u(Ve):e.status=="pending"?u(be):e.status=="reject"?u(we):u(ke),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0),o(rt,{activator:"parent",location:"top","max-width":"400"},{default:d(()=>[C(v(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)]),a("div",Aa,v(e.date_approved?u(Ce)(e.date_approved):""),1)]),_:2},1024))),128)),o(g,{class:"no-print"},{default:d(()=>{var e;return[o(ae),a("div",Ua,[(!u(q).params.id||i.value.requestor_id==u(c).user.profile.id&&((e=T.objectdata)==null?void 0:e.status)=="pending"||u(c).user.profile.role=="superadmin"||u(c).user.profile.role=="administrator")&&p.value.status!="complete"?(n(),h(S,{key:0,size:"small",disabled:!Z.value,onClick:Ge,color:"primary"},{default:d(()=>[C(v(u(q).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):y("",!0),u(q).params.id?y("",!0):(n(),h(S,{key:1,size:"small",class:"mx-3",onClick:$e,color:"warning"},{default:d(()=>[C("Save as Draft")]),_:1})),L.value?(n(),h(S,{key:2,size:"small",class:"mx-3",onClick:Qe,color:"info"},{default:d(()=>[C("Delete Draft")]),_:1})):y("",!0)])]}),_:1})],64)):(n(),h(g,{key:1},{default:d(()=>[a("div",ja,v(se.value),1)]),_:1})),o(g,null,{default:d(()=>[Oa]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(_t,{options:O.value},null,8,["options"]),o(le,{width:"500",modelValue:Q.value,"onUpdate:modelValue":l[11]||(l[11]=e=>Q.value=e)},{default:d(()=>[o(U,null,{default:d(()=>[o($,null,{default:d(()=>[o(u(mt.QrcodeStream),{onDecode:ne})]),_:1}),o(ut,null,{default:d(()=>[o(ct),o(S,{text:"Close",onClick:l[10]||(l[10]=e=>Q.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ma as _};
