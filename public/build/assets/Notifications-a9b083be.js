import{i as A,r,j as b,k as o,C as x,D as g,b as E,l as e,G as _,A as c,q as p,K as h,z as C,m as f,I as D,E as n,M as y,e as d,y as s}from"./app-f3ed5daf.js";import{_ as I}from"./ApppageHeader-eab2b98c.js";import{_ as U}from"./AppSnackBar-2f356ef2.js";const T=d("div",{class:"v-col-12 font-weight-bold"}," MAINTENANCE - RECEIVERS ",-1),k={class:"v-col-12 pt-3"},w={class:"v-col-12"},R={class:"v-col-12"},S={class:"v-col-12"},O=d("div",{class:"v-col-12 font-weight-bold"}," INCIDENT - RECEIVERS ",-1),B={class:"v-col-12 pt-3"},F={class:"v-col-12"},q={class:"v-col-12"},M={class:"v-col-12"},$=d("div",{class:"v-col-12 font-weight-bold"}," NOTIFICATION INTERVAL - FOR MAINTENANCE ",-1),j={class:"v-col-12"},z={class:"v-col-12 v-col-md-6"},K={class:"v-col-4"},L=d("div",{class:"v-col-8 mt-2"}," Asset Expiration - First Notification ",-1),G={class:"v-col-4"},H=d("div",{class:"v-col-8 mt-2"}," Asset Expiration - Second Notification ",-1),J={class:"v-col-4"},P=d("div",{class:"v-col-8 mt-2"}," Asset Expiration - Third Notification ",-1),ae={__name:"Notifications",setup(Q){const a=A(),v=r(!1),t=r([{meta_type:"maintenance-receiver",meta_value:"",profile_id:a.user.profile.id},{meta_type:"maintenance-receiver",meta_value:"",profile_id:a.user.profile.id},{meta_type:"maintenance-receiver",meta_value:"",profile_id:a.user.profile.id},{meta_type:"maintenance-receiver",meta_value:"",profile_id:a.user.profile.id},{meta_type:"incident-receiver",meta_value:"",profile_id:a.user.profile.id},{meta_type:"incident-receiver",meta_value:"",profile_id:a.user.profile.id},{meta_type:"incident-receiver",meta_value:"",profile_id:a.user.profile.id},{meta_type:"incident-receiver",meta_value:"",profile_id:a.user.profile.id},{meta_type:"first_notification",meta_value:30,profile_id:a.user.profile.id},{meta_type:"second_notification",meta_value:15,profile_id:a.user.profile.id},{meta_type:"third_notification",meta_value:1,profile_id:a.user.profile.id},{meta_type:"request_transfer",meta_value:2,profile_id:a.user.profile.id},{meta_type:"incidents",meta_value:1,profile_id:a.user.profile.id}]),m=r({loading:!0}),V=r({status:!1,type:"info",text:null});(async()=>{await g(a.token).get("/api/fetch/notification-setup").then(u=>{t.value=[{meta_type:"maintenance-receiver",meta_value:u.data[0].meta_value,profile_id:a.user.profile.id},{meta_type:"maintenance-receiver",meta_value:u.data[1].meta_value,profile_id:a.user.profile.id},{meta_type:"maintenance-receiver",meta_value:u.data[2].meta_value,profile_id:a.user.profile.id},{meta_type:"maintenance-receiver",meta_value:u.data[3].meta_value,profile_id:a.user.profile.id},{meta_type:"incident-receiver",meta_value:u.data[4].meta_value,profile_id:a.user.profile.id},{meta_type:"incident-receiver",meta_value:u.data[5].meta_value,profile_id:a.user.profile.id},{meta_type:"incident-receiver",meta_value:u.data[6].meta_value,profile_id:a.user.profile.id},{meta_type:"incident-receiver",meta_value:u.data[7].meta_value,profile_id:a.user.profile.id},{meta_type:"first_notification",meta_value:u.data[8].meta_value,profile_id:a.user.profile.id},{meta_type:"second_notification",meta_value:u.data[9].meta_value,profile_id:a.user.profile.id},{meta_type:"third_notification",meta_value:u.data[10].meta_value,profile_id:a.user.profile.id},{meta_type:"request_transfer",meta_value:u.data[11].meta_value,profile_id:a.user.profile.id},{meta_type:"incidents",meta_value:u.data[12].meta_value,profile_id:a.user.profile.id}],m.value.loading=!1}).catch(u=>{m.value.loading=!1,console.log(u)})})();const N=async function(){v.value=!0;let u={data:t.value,profile_id:a.user.profile.id};await g(a.token).post("/api/store-update/notification",u).then(l=>{V.value={status:!0,type:"success",text:l.data.message},v.value=!1}).catch(l=>{v.value=!1,console.log(l)})};return(u,l)=>(E(),b(x,null,{default:o(()=>[e(I,{title:"Notifications - Setup"}),e(n,{class:"mb-3"},{default:o(()=>[e(_,{class:"v-col-12 mt-1 col-sm-12"},{default:o(()=>[e(c,{class:"px-5",loading:m.value.loading},{default:o(()=>[e(p,null,{default:o(()=>{var i;return[h(a).user.role=="superadmin"||(i=h(a).capabilities)!=null&&i.includes("edit")?(E(),b(C,{key:0,onClick:l[0]||(l[0]=X=>N()),loading:v.value,size:"small",color:"secondary"},{default:o(()=>[f("Save")]),_:1},8,["loading"])):D("",!0)]}),_:1})]),_:1},8,["loading"])]),_:1}),e(_,{class:"v-col-12 v-col-md-6 mt-1 col-sm-12"},{default:o(()=>[e(c,{class:"px-5",loading:m.value.loading},{default:o(()=>[e(p,null,{default:o(()=>[e(n,{class:"pb-2"},{default:o(()=>[T,e(y),d("div",k,[e(s,{"hide-details":"auto",modelValue:t.value[0].meta_value,"onUpdate:modelValue":l[1]||(l[1]=i=>t.value[0].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",w,[e(s,{"hide-details":"auto",modelValue:t.value[1].meta_value,"onUpdate:modelValue":l[2]||(l[2]=i=>t.value[1].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",R,[e(s,{"hide-details":"auto",modelValue:t.value[2].meta_value,"onUpdate:modelValue":l[3]||(l[3]=i=>t.value[2].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",S,[e(s,{"hide-details":"auto",modelValue:t.value[3].meta_value,"onUpdate:modelValue":l[4]||(l[4]=i=>t.value[3].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),e(_,{class:"v-col-12 v-col-md-6 mt-1 col-sm-12"},{default:o(()=>[e(c,{class:"px-5",loading:m.value.loading},{default:o(()=>[e(p,null,{default:o(()=>[e(n,{class:"pb-2"},{default:o(()=>[O,e(y),d("div",B,[e(s,{"hide-details":"auto",modelValue:t.value[4].meta_value,"onUpdate:modelValue":l[5]||(l[5]=i=>t.value[4].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",F,[e(s,{"hide-details":"auto",modelValue:t.value[5].meta_value,"onUpdate:modelValue":l[6]||(l[6]=i=>t.value[5].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",q,[e(s,{"hide-details":"auto",modelValue:t.value[6].meta_value,"onUpdate:modelValue":l[7]||(l[7]=i=>t.value[6].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",M,[e(s,{"hide-details":"auto",modelValue:t.value[7].meta_value,"onUpdate:modelValue":l[8]||(l[8]=i=>t.value[7].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),e(_,{class:"v-col-12 v-col-md-12 mt-1 col-sm-12"},{default:o(()=>[e(c,{class:"px-5",loading:m.value.loading},{default:o(()=>[e(p,null,{default:o(()=>[e(n,{class:"pb-2"},{default:o(()=>[$,e(y),d("div",j,[e(n,null,{default:o(()=>[d("div",z,[e(n,null,{default:o(()=>[d("div",K,[e(s,{type:"number","hide-details":"auto",modelValue:t.value[8].meta_value,"onUpdate:modelValue":l[9]||(l[9]=i=>t.value[8].meta_value=i),label:"Days",variant:"outlined",density:"compact"},null,8,["modelValue"]),f(" Days before expiration ")]),L]),_:1}),e(n,null,{default:o(()=>[d("div",G,[e(s,{type:"number","hide-details":"auto",modelValue:t.value[9].meta_value,"onUpdate:modelValue":l[10]||(l[10]=i=>t.value[9].meta_value=i),label:"Days",variant:"outlined",density:"compact"},null,8,["modelValue"]),f(" Day(s) before expiration ")]),H]),_:1}),e(n,null,{default:o(()=>[d("div",J,[e(s,{type:"number","hide-details":"auto",modelValue:t.value[10].meta_value,"onUpdate:modelValue":l[11]||(l[11]=i=>t.value[10].meta_value=i),label:"Days",variant:"outlined",density:"compact"},null,8,["modelValue"]),f(" Day(s) before expiration ")]),P]),_:1})])]),_:1})])]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),e(U,{options:V.value},null,8,["options"])]),_:1}))}};export{ae as default};
