import{I as Ue,r as f,c as V,w as i,m as Oe,o as s,s as C,b as e,d as a,e as r,j as re,y as c,t as _,E as y,H as S,p as o,af as de,q as X,D as A,ai as me,k as P,W as ge,X as ce,ay as Ie,_ as D,ag as F,i as M,az as ne,aA as ie,aB as xe,aC as ke,F as Z,aD as Se,Y as Pe,Z as De,ae as z,f as Ne,a2 as $e,a3 as be}from"./app-cbca2ade.js";import{u as ue}from"./formatDate-b9aad8c5.js";import{_ as Be}from"./AppSnackBar-9cc5c9ac.js";const Le={class:"v-col-3 mt-auto font-weight-bold"},Fe={class:"d-flex"},Me=e("div",{class:"mr-2"},"FROM:",-1),ze={class:"d-flex"},He=e("div",{class:"mr-6 pr-2"},"TO:",-1),Ke={class:"v-col-6 text-center"},Ye=e("img",{src:"/assets/images/grandiose-logo.jpg",style:{"max-height":"100px"}},null,-1),Ge=e("br",null,null,-1),Qe={class:"v-col-3 mt-auto font-weight-bold text-right"},Je=e("br",null,null,-1),We=e("div",{class:"v-col-12 v-col-md-1 py-1"},"IMG",-1),Xe=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ITEM DESC",-1),Ze=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ASSET NO",-1),el=e("div",{class:"v-col-12 v-col-md-1 py-1"},"QTY",-1),ll=e("div",{class:"v-col-12 v-col-md-1 py-1"},"UOM",-1),al=e("div",{class:"v-col-12 v-col-md-1 py-1"},"WEIGHT",-1),sl=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ITEM VALUE",-1),tl=e("div",{class:"v-col-12 v-col-md-1 py-1"},"COUNTRY OF ORIGIN",-1),ol=e("div",{class:"v-col-12 v-col-md-2 py-1"},[r(" REMARKS"),e("br"),r("REASON FOR REQUEST ")],-1),rl={class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},dl={style:{position:"relative"}},cl={key:0,class:"checkbox-notice"},nl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},il={key:0},ul={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},vl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},pl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},_l={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},yl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},hl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},fl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},ml={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},gl={key:0,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},xl={key:1,class:"v-col-12 v-col-md-2 py-1 d-flex"},kl={key:0},bl=e("strong",null," Asset Supervisor - Projects",-1),Vl=e("br",null,null,-1),wl={key:2,class:"v-col-12 v-col-md-2 py-1"},El={key:0},Cl=e("strong",null," Asset Supervisor - Projects",-1),Al=e("br",null,null,-1),ql={style:{"text-wrap":"wrap"}},Rl={key:1},jl=e("strong",null," Commercial Manager - Projects",-1),Tl=e("br",null,null,-1),Ul={style:{"text-wrap":"wrap"}},Ol={key:2},Il=e("strong",null," Releasing",-1),Sl=e("br",null,null,-1),Pl={style:{"text-wrap":"wrap"}},Dl={key:3,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},Nl={key:0},$l=e("strong",null," Asset Supervisor - Projects",-1),Bl=e("br",null,null,-1),Ll={style:{"text-wrap":"wrap"}},Fl={key:1},Ml=e("strong",null," Commercial Manager - Projects",-1),zl=e("br",null,null,-1),Hl={style:{"text-wrap":"wrap"}},Kl={key:2},Yl=e("strong",null," Releasing",-1),Gl=e("br",null,null,-1),Ql={style:{"text-wrap":"wrap"}},Jl={key:0,class:"my-auto"},Wl={class:"pa-0 ma-0 v-col-1 my-auto",style:{position:"relative"}},Xl={key:0,class:"checkbox-notice"},Zl={key:4,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},ea={key:0,style:{"border-bottom":"1px solid #000000"},class:"pa-1"},la={key:0},aa=e("strong",null," Asset Supervisor - Projects",-1),sa=e("br",null,null,-1),ta={style:{"text-wrap":"wrap"}},oa={key:1},ra=e("strong",null," Commercial Manager - Projects",-1),da=e("br",null,null,-1),ca={style:{"text-wrap":"wrap"}},na={key:2},ia=e("strong",null," Releasing",-1),ua=e("br",null,null,-1),va={style:{"text-wrap":"wrap"}},pa={key:3},_a=e("strong",null," Receiver",-1),ya={style:{"text-wrap":"wrap"}},ha={key:1},fa={key:2},ma={key:3},ga={key:0,class:"v-col-12 text-center font-weight-bold text-info"},xa=e("br",null,null,-1),ka={key:1,class:"v-col-12 text-center font-weight-bold text-info"},ba={key:0,class:"ml-5 d-flex"},Va=e("div",{class:"px-2 mr-5"},"|",-1),wa={key:1,class:"ml-6"},Ea={class:"v-col-12 px-0 my-0"},Ca=["data"],Aa={class:"v-col-12 v-col-md-3 pa-0 mb-4"},qa=e("div",{class:"text-center py-1 font-weight-bold"}," Requested By ",-1),Ra={class:"text-center py-1"},ja={class:"text-center py-1"},Ta={class:"text-center text-caption"},Ua={key:0},Oa={key:0,class:"d-flex"},Ia=["onClick"],Sa=["onClick"],Pa={key:1},Da=["onClick"],Na=["onClick"],$a={class:"text-center py-1"},Ba={class:"text-center py-1"},La={class:"text-center text-caption"},Fa={key:2,class:"v-col-12 text-caption",style:{border:"1px solid red","border-radius":"5px"}},Ma={class:"v-col-12 text-center"},za=e("div",{class:"v-col-12 text-center mt-3 font-weight-bold"}," REASON FOR REJECTION ",-1),Ha={class:"v-col-12"},Ja={__name:"Approvals",setup(Ka){const n=Ue(),ve=f(!0),u=f({}),ee=f({}),k=f(!1),le=f(!1),ae=f(!1),R=f(!1),N=f([]),H=f(!1),$=f(""),K=f(!1),Ve=f(n.query.id),m=f(""),pe=f(0),J=f([]),_e=async()=>{let v={id:n.query.id,profile_id:n.query.pid,order:n.query.o};if(!n.query.id||!n.query.pv){ve.value=!1;return}await axios.post("/api/pv/fetch/request-assets/data",v).then(d=>{var g,j,T,x,q,G,Q,l,b,w,E;if(u.value=d.data,!u.value.access){ve.value=!1;return}m.value=(j=(g=d.data)==null?void 0:g.data)==null?void 0:j.status,pe.value=(x=(T=d.data)==null?void 0:T.data)==null?void 0:x.request_type_id,J.value=(G=(q=d.data)==null?void 0:q.data)==null?void 0:G.attachment,((b=(l=(Q=u.value)==null?void 0:Q.data)==null?void 0:l.request_approvals)==null?void 0:b.length)>0&&(k.value=u.value.data.request_approvals.filter(p=>{var t;return p.profile_id==n.query.pid&&p.orders==n.query.o&&p.status=="awaiting-approval"&&((t=p.profile)==null?void 0:t.role)=="asset-supervisor"})[0],le.value=u.value.data.request_approvals.filter(p=>p.profile_id==n.query.pid&&p.orders==n.query.o&&p.status=="awaiting-approval"&&p.approval_type=="releasing")[0],ae.value=u.value.data.request_approvals.filter(p=>{var t;return p.profile_id==n.query.pid&&p.orders==n.query.o&&p.status=="awaiting-approval"&&((t=p.profile)==null?void 0:t.role)=="commercial-manager"})[0],R.value=u.value.data.request_approvals.filter(p=>p.profile_id==n.query.pid&&p.orders==n.query.o&&p.status=="awaiting-approval"&&p.approval_type=="receiver")[0],oe.value=u.value.data.request_approvals[u.value.data.request_approvals.length-1].approval_type,(R.value||k.value)&&m.value!="cancelled"&&(K.value=!0)),N.value=(E=(w=u.value)==null?void 0:w.data)==null?void 0:E.items}).catch(d=>{console.log(d.response.data)})},se=f(1),B=f("image"),we=(v,d)=>{let g=v.path.split(".");B.value=g[g.length-1],se.value=d,L.value=!0},Ee=()=>{window.print()},te=f(window.location.origin),L=f(!1),ye=f(1),Ce=v=>{ye.value=v,L.value=!0},oe=f(""),he=f({}),Ae=v=>{H.value=!0,he.value=v},qe=()=>{H.value=!1,$.value=""},W=(v,d=null)=>{if(H.value=!1,m.value!="cancelled"&&(v.status=="awaiting-approval"||v.status=="reject")&&n.query.pid==v.profile_id&&n.query.o==v.orders){ee.value={status:!0,type:"info",text:"Please wait..."};let g=[];(k.value||ae.value||R.value||le.value)&&(g=N.value.map((x,q)=>(delete x.created_at,delete x.assets,delete x.updated_at,delete x.attachment,x)));let j={},T="";$.value&&d&&(T=$.value),j={profile_id:n.query.pid,id:n.query.id,order:n.query.o,type:u.value.data.types,assets:g,is_reject:T,requestor_id:u.value.data.profile_id},axios.post("/api/pv/store/request-asset/approve-data",j).then(x=>{let q="success";x.data.success||(q="error"),ee.value={status:!0,type:q,text:x.data.message},K.value=!1,setTimeout(()=>{_e()},500)}).catch(x=>{console.log(x.response.data)});return}},Re=v=>{if(v=="approve")return"Approved";if(v=="reviewer")return"Reviewed";if(v=="receiver")return"Received";if(v=="transport")return"Transport Arranged";if(v=="releasing")return"Released";if(v=="verify")return"Verified"},je=()=>{let v=R.value;K.value=!1,N.value.map(d=>{v?d.is_received=Y.value:d.is_available=Y.value})},Te=(v,d=6)=>{let g="00000"+v;return g.substring(g.length-d)},fe=()=>{let v=!0,d=R.value;N.value.map(g=>{d?g.is_received||(v=!1):g.is_available||(v=!1)}),Y.value=v},Y=f(!1);return _e(),(v,d)=>(s(),V(Oe,{style:{"max-width":"90%"},class:"mt-0 pt-0"},{default:i(()=>{var g,j,T,x,q,G,Q;return[((g=N.value)==null?void 0:g.length)>0?(s(),V(C,{key:0,class:"mt-0 pt-0 no-print mt-2"},{default:i(()=>[e("div",null,[a(re,{color:"primary",size:"small",onClick:Ee},{default:i(()=>[r("Print")]),_:1})])]),_:1})):c("",!0),a(C,{class:"mt-0 pt-0"},{default:i(()=>{var l,b,w,E,p,t,U,O,I;return[e("div",Le,[e("div",Fe,[Me,e("div",null,_((b=(l=u.value.data)==null?void 0:l.transfer_from)==null?void 0:b.title),1)]),e("div",ze,[He,e("div",null,_((E=(w=u.value.data)==null?void 0:w.transfer_to)==null?void 0:E.title),1)])]),e("div",Ke,[Ye,Ge,e("strong",null,_((t=(p=u.value.data)==null?void 0:p.setup)==null?void 0:t.title),1)]),e("div",Qe,[r(" SN-"+_(((O=(U=u.value)==null?void 0:U.data)==null?void 0:O.types)=="request"?"5":"3")+_(Te(Ve.value)),1),Je,r(" "+_(y(ue)((I=u.value.data)==null?void 0:I.created_at)),1)])]}),_:1}),a(S,{class:"my-5"}),a(C,null,{default:i(()=>[We,Xe,Ze,el,ll,al,sl,tl,ol,e("div",rl,[r(" REMARKS "),e("div",dl,[K.value?(s(),o("div",cl)):c("",!0),k.value||R.value?(s(),V(de,{key:1,modelValue:Y.value,"onUpdate:modelValue":[d[0]||(d[0]=l=>Y.value=l),je],class:"pa-0 ma-0 v-col-1","hide-details":"",disabled:m.value=="cancelled",variant:"underlined",density:"compact"},null,8,["modelValue","disabled"])):c("",!0)])])]),_:1}),(s(!0),o(Z,null,X(N.value,(l,b)=>(s(),V(C,{class:"mt-1 approval-form-pr",key:l.id},{default:i(()=>{var w,E,p,t,U,O,I;return[e("div",nl,[(w=l.attachment)!=null&&w.id?(s(),o("div",il,[a(P,{onClick:()=>Ce(l),maxHeight:"40",variant:"text",class:"ma-2"},{default:i(()=>[a(A,{size:"large",icon:y(me),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"]),a(ce,{modelValue:L.value,"onUpdate:modelValue":d[1]||(d[1]=h=>L.value=h),width:"95%","max-width":"900"},{default:i(()=>[a(P,{class:"bg-black"},{default:i(()=>[e("div",ul,[a(ge,{src:te.value+"/file/"+ye.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])])):(s(),V(P,{key:1,maxHeight:"40",variant:"text",class:"ma-2"},{default:i(()=>[a(A,{size:"large",icon:y(Ie)},null,8,["icon"])]),_:1})),a(D,{value:l.item_description,variant:"underlined",density:"compact","hide-details":"",rows:"2",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0},null,8,["value"])]),e("div",vl,[a(M,{modelValue:l.asset_code,"onUpdate:modelValue":h=>l.asset_code=h,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:F(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",pl,[a(M,{value:l.qty,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",_l,[a(M,{value:l.uom,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",yl,[a(M,{modelValue:l.weight,"onUpdate:modelValue":h=>l.weight=h,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:F(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",hl,[a(M,{modelValue:l.item_value,"onUpdate:modelValue":h=>l.item_value=h,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:F(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",fl,[a(M,{modelValue:l.country_of_origin,"onUpdate:modelValue":h=>l.country_of_origin=h,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:F(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",ml,[a(D,{value:l.reason_for_request,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0,rows:"2"},null,8,["value"])]),k.value?(s(),o("div",gl,[a(D,{modelValue:l.remarks,"onUpdate:modelValue":h=>l.remarks=h,variant:"underlined",density:"compact","hide-details":"",class:F(["text-remarks",`${m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`]),placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue","class"]),a(de,{disabled:m.value=="cancelled",modelValue:l.is_available,"onUpdate:modelValue":[h=>l.is_available=h,fe],class:"pa-0 ma-0 v-col-1","hide-details":"",variant:"underlined",density:"compact"},null,8,["disabled","modelValue","onUpdate:modelValue"])])):c("",!0),ae.value?(s(),o("div",xl,[e("div",null,[l.remarks?(s(),o("div",kl,[bl,r(),Vl,e("p",null,_(l.remarks),1),r(" ------- ")])):c("",!0),a(D,{modelValue:l.remarks_commercial,"onUpdate:modelValue":h=>l.remarks_commercial=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])])):le.value?(s(),o("div",wl,[e("div",null,[l.remarks?(s(),o("div",El,[Cl,r(),Al,e("pre",ql,_(l.remarks),1),r(" ------- ")])):c("",!0),l.remarks_commercial?(s(),o("div",Rl,[jl,r(),Tl,e("pre",Ul,_(l.remarks_commercial),1),r(" ------- ")])):c("",!0),l.remarks_release?(s(),o("div",Ol,[Il,r(),Sl,e("pre",Pl,_(l.remarks_release),1),r(" ------- ")])):c("",!0)]),a(D,{modelValue:l.remarks_release,"onUpdate:modelValue":h=>l.remarks_release=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):R.value?(s(),o("div",Dl,[e("div",null,[e("div",null,[l.remarks?(s(),o("div",Nl,[$l,r(),Bl,e("pre",Ll,_(l.remarks),1),r(" ------- ")])):c("",!0),l.remarks_commercial?(s(),o("div",Fl,[Ml,r(),zl,e("pre",Hl,_(l.remarks_commercial),1),r(" ------- ")])):c("",!0),l.remarks_release?(s(),o("div",Kl,[Yl,r(),Gl,e("pre",Ql,_(l.remarks_release),1),r(" ------- ")])):c("",!0)]),a(D,{modelValue:l.remarks_receive,"onUpdate:modelValue":h=>l.remarks_receive=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(p=(E=u.value)==null?void 0:E.data)!=null&&p.is_available?(s(),o("div",Jl,[a(A,{class:"mt-3",icon:l.is_available?y(ne):y(ie),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):c("",!0),e("div",Wl,[K.value?(s(),o("div",Xl)):c("",!0),a(de,{modelValue:l.is_received,"onUpdate:modelValue":[h=>l.is_received=h,fe],"hide-details":"",variant:"underlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])])])):(s(),o("div",Zl,[l.remarks||l.remarks_commercial||l.remarks_release||l.remarks_receive?(s(),o("div",ea,[l.remarks?(s(),o("div",la,[aa,r(),sa,e("pre",ta,_(l.remarks),1),r(" ------- ")])):c("",!0),l.remarks_commercial?(s(),o("div",oa,[ra,r(),da,e("pre",ca,_(l.remarks_commercial),1),r(" ------- ")])):c("",!0),l.remarks_release?(s(),o("div",na,[ia,r(),ua,e("pre",va,_(l.remarks_release),1),r(" ------- ")])):c("",!0),l.remarks_receive?(s(),o("div",pa,[_a,r(),e("pre",ya,_(l.remarks_receive),1)])):c("",!0)])):(s(),o("div",ha)),(U=(t=u.value)==null?void 0:t.data)!=null&&U.is_available?(s(),o("div",fa,[a(A,{class:"mt-3",icon:l.is_available?y(ne):y(ie),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):c("",!0),((I=(O=u.value)==null?void 0:O.data)==null?void 0:I.status)=="complete"&&oe.value=="receiver"?(s(),o("div",ma,[a(A,{class:"mt-3",icon:l.is_received?y(xe):y(ke),color:`${l.is_received?"success":"error"}`},null,8,["icon","color"])])):c("",!0)]))]}),_:2},1024))),128)),k.value?(s(),V(C,{key:1,class:"mt-3"},{default:i(()=>[m.value!=="cancelled"?(s(),o("div",ga,[r(" YOU CAN UPDATE SOME DATA AND"),xa,r(" PLEASE TICK CHECKBOX IF ASSET IS AVAILABLE BEFORE CLICKING THE APPROVE BUTTON ")])):(s(),o("div",ka," THIS REQUEST HAS BEEN CANCELLED. "))]),_:1})):c("",!0),(T=(j=u.value)==null?void 0:j.data)!=null&&T.is_available&&m.value!=="cancelled"?(s(),V(C,{key:2,class:"mt-6 mb-2"},{default:i(()=>[a(P,{variant:"text",class:"v-col-12 text-center pt-2 font-weight-bold pb-0 d-flex justify-center"},{default:i(()=>{var l;return[e("div",null,[a(A,{icon:y(ne),color:"success"},null,8,["icon"]),r(" AVAILABLE "),a(A,{icon:y(ie),color:"error",class:"ml-5"},null,8,["icon"]),r(" NOT AVAILABLE ")]),R.value?(s(),o("div",ba,[Va,e("div",null,[a(A,{icon:y(Se)},null,8,["icon"]),r(" TICK RECEIVED ASSETS "),a(S,{thickness:8,color:"error",class:"divider-notice"})])])):c("",!0),((l=u.value.data)==null?void 0:l.status)=="complete"&&oe.value=="receiver"?(s(),o("div",wa,[a(A,{icon:y(xe),color:"success"},null,8,["icon"]),r(" RECEIVED "),a(A,{icon:y(ke),color:"error",class:"ml-5"},null,8,["icon"]),r(" NOT RECEIVE ")])):c("",!0)]}),_:1})]),_:1})):c("",!0),a(C,{class:"mt-3"},{default:i(()=>[e("div",Ea,[a(S),a(S)])]),_:1}),pe.value==2&&((x=J.value)==null?void 0:x.length)>0?(s(),V(C,{key:3,class:"my-3 d-flex justify-center"},{default:i(()=>[(s(!0),o(Z,null,X(J.value,(l,b)=>(s(),o("div",{key:l.id,class:"pa-2",style:{position:"relative"}},[a(P,{onClick:()=>we(l,b)},{default:i(()=>[a(A,{size:"large",icon:y(me),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"])]))),128)),a(ce,{modelValue:L.value,"onUpdate:modelValue":d[3]||(d[3]=l=>L.value=l),width:"95%","max-width":"900"},{default:i(()=>[a(P,{class:"bg-black"},{default:i(()=>[a(Pe,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:se.value,"onUpdate:modelValue":d[2]||(d[2]=l=>se.value=l)},{default:i(()=>[(s(!0),o(Z,null,X(J.value,(l,b)=>(s(),V(De,{key:b,"reverse-transition":"fade",transition:"fade"},{default:i(()=>[e("div",{style:z(`${B.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[B.value=="jpg"||B.value=="jpeg"||B.value=="png"?(s(),V(ge,{key:0,src:te.value+"/file/"+l.path},null,8,["src"])):c("",!0),B.value=="pdf"?(s(),o("object",{key:1,data:te.value+"/file/"+l.path,type:"application/pdf",width:"100%",height:"800px"},null,8,Ca)):c("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):c("",!0),((q=u.value.data)==null?void 0:q.request_approvals.length)>0?(s(),V(C,{key:4},{default:i(()=>{var l,b,w,E,p;return[e("div",Aa,[e("div",{class:"text-center mx-2 py-4 font-weight-bold",style:z(`${m.value=="cancelled"?"color: red;":"color: rgb(3, 167, 3);"} border: 1px solid #ccc; font-size: 17px;`)},_(m.value=="cancelled"?"CANCELLED":"APPROVED"),5),qa,e("div",Ra,_((b=(l=u.value.data)==null?void 0:l.profile)==null?void 0:b.display_name),1),e("div",ja,_((E=(w=u.value.data)==null?void 0:w.profile)==null?void 0:E.designation),1),e("div",Ta,_(y(ue)((p=u.value.data)==null?void 0:p.created_at)),1)]),(s(!0),o(Z,null,X(u.value.data.request_approvals,t=>{var U,O,I;return s(),o("div",{class:"v-col-12 v-col-md-3 pa-0 mb-4",key:t.id},[((U=t.profile)==null?void 0:U.role)=="commercial-manager"&&y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?(s(),o("div",Ua,[t.status=="awaiting-approval"?(s(),o("div",Oa,[e("div",{onClick:h=>Ae(t),class:"cursor-pointer text-center py-5 v-col-6",style:z(`border:1px solid #ccc; ${y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":"background-color: none;"}`)}," REJECT ",12,Ia),e("div",{onClick:h=>W(t,"reject"),class:"cursor-pointer text-center py-5 v-col-6",style:z(`border:1px solid #ccc; ${y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(3, 167, 3);color:#fff;":"background-color: none"}`)}," APPROVE ",12,Sa)])):t.status=="reject"||t.status=="done"||t.status=="pending"?(s(),o("div",Pa,[e("div",{onClick:h=>W(t),class:"cursor-pointer text-center mx-2 py-5",style:z(`border:1px solid #ccc; ${t.status=="reject"&&y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},_(t.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,Da)])):c("",!0)])):(s(),o("div",{key:1,onClick:h=>W(t),class:"cursor-pointer text-center mx-2 py-5",style:z(`border:1px solid #ccc; ${m.value!="cancelled"&&t.status=="awaiting-approval"&&y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},_(t.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,Na)),e("div",{class:F(`text-center py-1 font-weight-bold ${t.status=="reject"?"text-error text-uppercase":""}`)},_(t.status=="reject"?"Rejected":Re(t.approval_type))+" By ",3),e("div",$a,_((O=t.profile)==null?void 0:O.display_name),1),e("div",Ba,_((I=t.profile)==null?void 0:I.designation),1),e("div",La,_(t.date_approved?y(ue)(t.date_approved):""),1),t.reason_rejected?(s(),o("div",Fa,[r(" Reason rejected "),a(S,{class:"my-2"}),r(" "+_(t.reason_rejected),1)])):c("",!0)])}),128))]}),_:1})):c("",!0),((Q=(G=u.value)==null?void 0:G.data)==null?void 0:Q.status)!=="complete"?(s(),V(C,{key:5,class:"no-print"},{default:i(()=>[e("div",Ma,[a(S),r(" You will receive a notification once you click the approve button. "),a(S)])]),_:1})):c("",!0),a(ce,{width:"500",modelValue:H.value,"onUpdate:modelValue":d[6]||(d[6]=l=>H.value=l),persistent:""},{default:i(()=>[a(P,null,{default:i(()=>[a(Ne,null,{default:i(()=>[a(C,null,{default:i(()=>[za,e("div",Ha,[a(D,{modelValue:$.value,"onUpdate:modelValue":d[4]||(d[4]=l=>$.value=l),label:"STATE YOUR REASON HERE",variant:"outlined"},null,8,["modelValue"])])]),_:1})]),_:1}),a($e,null,{default:i(()=>[a(be),a(re,{onClick:qe},{default:i(()=>[r("Cancel")]),_:1}),a(re,{color:"success",disabled:!$.value,onClick:d[5]||(d[5]=l=>W(he.value,"reject"))},{default:i(()=>[r("Confirm")]),_:1},8,["disabled"]),a(be)]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Be,{options:ee.value},null,8,["options"])]}),_:1}))}};export{Ja as default};
