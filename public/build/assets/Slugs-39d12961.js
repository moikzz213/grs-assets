import{d as h,e as z,f as d,w as l,v as T,x as F,o as u,g as a,A as k,q as x,i as C,E as n,m as _,h as f,C as g,z as w,H as N,c as A,y as B,b as c,t as D,l as P,F as U}from"./app-96caf3da.js";import{_ as L}from"./AppPageHeader-dbda4c03.js";import{_ as E}from"./AppSnackBar-bd4002fc.js";const q=c("div",{class:"v-col-1"},"#",-1),H=c("div",{class:"v-col-4 text-uppercase"},"Page Title",-1),K=c("div",{class:"v-col-7 text-uppercase"},"Page Slug",-1),M=c("div",{class:"v-col-9 my-0 py-0"},null,-1),O={class:"v-col-1"},R={class:"v-col-4"},j={class:"v-col-4"},G={class:"v-col-3 my-auto"},Y={__name:"Slugs",setup(I){const r=h([{title:"",slug:""}]),o=z(),p=h(!1),b=()=>{r.value.push({title:"",slug:""})},m=h({loading:!0}),V=h({status:!1,type:"info",text:null});(async()=>{await F(o.token).get("/api/fetch/pages-slug").then(i=>{r.value=i.data,m.value.loading=!1}).catch(i=>{m.value.loading=!1,console.log(i)})})();const $=i=>{let t=r.value;t.splice(i,1),r.value=[...t]},S=async function(){p.value=!0;let i=!1,s={data:r.value.map((e,v)=>(delete e.id,delete e.created_at,delete e.updated_at,delete e.link,(!e.slug||!e.title)&&(i=!0),e)),author:o.user.profile.id};if(i){V.value={status:!0,type:"error",text:"Fill-up the fields"},setTimeout(()=>{p.value=!1},1e3);return}await F(o.token).post("/api/store-page/settings",s).then(e=>{V.value={status:!0,type:"success",text:e.data.message},p.value=!1}).catch(e=>{p.value=!1,console.log(e)})};return(i,t)=>(u(),d(T,null,{default:l(()=>[a(L,{title:"Page List"}),a(w,{class:"mb-3"},{default:l(()=>[a(k,{class:"v-col-12 mt-1 col-sm-12"},{default:l(()=>[a(x,{class:"px-5",loading:m.value.loading},{default:l(()=>[a(C,null,{default:l(()=>{var s,e;return[n(o).user.role=="superadmin"||(s=n(o).capabilities)!=null&&s.includes("add")?(u(),d(_,{key:0,onClick:t[0]||(t[0]=v=>b()),size:"small",color:"primary"},{default:l(()=>[f("Add New")]),_:1})):g("",!0),n(o).user.role=="superadmin"||(e=n(o).capabilities)!=null&&e.includes("edit")?(u(),d(_,{key:1,onClick:t[1]||(t[1]=v=>S()),loading:p.value,size:"small",color:"secondary",class:"mx-5"},{default:l(()=>[f("Save")]),_:1},8,["loading"])):g("",!0)]}),_:1})]),_:1},8,["loading"])]),_:1}),a(k,{class:"v-col-12 mt-1 col-sm-12"},{default:l(()=>[a(x,{class:"px-5",loading:m.value.loading},{default:l(()=>[a(C,null,{default:l(()=>[a(w,null,{default:l(()=>[q,H,K,M,a(N)]),_:1}),(u(!0),A(U,null,B(r.value,(s,e)=>(u(),d(w,{key:e,class:"parent-row-show"},{default:l(()=>{var v;return[c("div",O,D(e+1),1),c("div",R,[a(P,{"hide-details":"",label:"Page Title here",variant:"outlined",modelValue:s.title,"onUpdate:modelValue":y=>s.title=y,density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),c("div",j,[a(P,{"hide-details":"",modelValue:s.slug,"onUpdate:modelValue":y=>s.slug=y,label:"Slug here",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),c("div",G,[n(o).user.role=="superadmin"||(v=n(o).capabilities)!=null&&v.includes("delete")?(u(),d(_,{key:0,onClick:y=>$(e),size:"small",color:"error",class:"mx-1 show-hover"},{default:l(()=>[f("Delete")]),_:2},1032,["onClick"])):g("",!0)]),a(N)]}),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1}),r.value.length>10?(u(),d(k,{key:0,class:"v-col-12 mt-1 col-sm-12"},{default:l(()=>[a(x,{class:"px-5",loading:m.value.loading},{default:l(()=>[a(C,null,{default:l(()=>{var s,e;return[(s=n(o).capabilities)!=null&&s.includes("add")?(u(),d(_,{key:0,onClick:t[2]||(t[2]=v=>b()),size:"small",color:"primary"},{default:l(()=>[f("Add New")]),_:1})):g("",!0),(e=n(o).capabilities)!=null&&e.includes("edit")?(u(),d(_,{key:1,onClick:t[3]||(t[3]=v=>S()),loading:p.value,size:"small",color:"secondary",class:"mx-5"},{default:l(()=>[f("Save")]),_:1},8,["loading"])):g("",!0)]}),_:1})]),_:1},8,["loading"])]),_:1})):g("",!0)]),_:1}),a(E,{options:V.value},null,8,["options"])]),_:1}))}};export{Y as default};
