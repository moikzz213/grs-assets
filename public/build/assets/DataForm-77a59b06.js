import{a as Je,r as f,G as Ze,u as We,O as te,I as Xe,H as fe,o as r,c as h,w as d,d as o,v as et,k as A,V as tt,b as s,t as c,p as V,z as y,ad as he,y as u,E as ae,f as $,s as g,j as S,e as j,J as F,i as K,q as M,F as D,P as ye,R as le,Q as H,M as at,U as ge,Y as lt,C as J,D as st,af as ot,S as dt,T as it,ab as rt,aZ as Ve,a_ as be,a$ as we,b0 as ke,b1 as nt,Z as ut,_ as ct,m as vt,n as I}from"./app-5d8bd7eb.js";import{_ as pt}from"./AppPageHeader-6de8fcd2.js";import{_ as xe,r as Se}from"./Studio-baf3ee38.js";import{_ as _t}from"./AppSnackBar-a578c96e.js";import{Q as mt}from"./QrcodeReaderVue3.common-4c6205dc.js";import{d as ft,e as ht}from"./encrypt-34f4269b.js";import{u as Ce}from"./formatDate-559e9d83.js";const yt={key:0,class:"text-error text-h6"},gt={class:"v-col-12 v-col-md-8"},Vt={key:0,class:"no-print"},bt={class:"v-col-12 v-col-md-6"},wt={class:"v-col-12 v-col-md-6"},kt={class:"v-col-12 v-col-md-6"},xt={class:"v-col-12 v-col-md-6"},St={class:"v-col-12"},Ct={class:"wd-100"},Tt={class:"wd-60 text-caption"},qt={class:"wd-40"},At={class:"wd-60"},Ut={class:"wd-40"},jt={class:"wd-100"},Ot={class:"v-col-12"},Et=s("small",{class:"mx-5 text-info"},"UOM: ( pcs, pack, box, etc.. )",-1),Rt=s("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),Dt=s("div",{class:"wd-15"},"ASSET CODE",-1),It=s("div",{class:"wd-5"},"QTY",-1),Nt=s("div",{class:"wd-10"},"UOM",-1),zt=s("div",{class:"wd-10"},"WEIGHT",-1),Ft=s("div",{class:"wd-10"},"VALUE",-1),Mt=s("div",{class:"wd-15"},"REASON FOR REQUEST",-1),Pt={class:"wd-30"},Bt={class:"wd-15"},Lt={class:"wd-5"},Qt={class:"wd-10"},$t={class:"wd-10"},Yt={class:"wd-10"},Gt={class:"wd-15"},Kt={class:"v-col-12 v-col-md-1 px-1 no-print"},Ht={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},Jt={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},Zt={class:"v-col-12 pt-0 pb-0"},Wt={class:"v-col-12 v-col-md-1 custom-width-description"},Xt={class:"v-col-12 v-col-md-2 d-flex"},ea={class:"v-col-12 v-col-md-1"},ta={class:"v-col-12 v-col-md-1 custom-width-uom"},aa={class:"v-col-12 v-col-md-1 mt-3"},la={class:"v-col-12 v-col-md-1 mt-3"},sa={class:"v-col-12 v-col-md-2 d-flex"},oa={key:0},da=s("div",null,"Additional File can be upload here",-1),ia=["data"],ra={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},na=s("div",null,"APPROVAL SETUP",-1),ua={key:0,class:"no-print"},ca=s("div",{class:"wd-20"},"Requestor",-1),va={class:"wd-50"},pa=s("div",{class:"wd-10"},"Status",-1),_a=s("div",{class:"wd-20"},"Date Approved",-1),ma={class:"wd-20"},fa={class:"wd-50"},ha={class:"wd-10"},ya={class:"wd-20"},ga=s("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),Va={class:"v-col-12 v-col-md-6"},ba=s("div",{class:"v-col-12 v-col-md-1"},"Status",-1),wa=s("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),ka={class:"v-col-12 v-col-md-2"},xa={class:"v-col-12 v-col-md-7 d-flex"},Sa={class:"my-auto"},Ca={class:"v-col-12 no-print"},Ta={class:"v-col-12 text-error"},qa=s("div",{class:"v-col-12 no-print v-col-md-12 text-info"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),Ia={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(Te,{emit:qe}){const C=Te,v=Je(),se=f("Note: Administrator needs to setup signatories first."),Z=f(!1),T=Ze(),Ae=We(),i=f({}),k=f(!1),b=f([{qty:1,attachment:{}}]),Ue=f(new Date),je=f(["Nos","Set","Pcs","Pack","Pallet","SqM"]),W=l=>{if(l=="approve")return"Approved By";if(l=="reviewer")return"Reviewed By";if(l=="receiver")return"Received By";if(l=="transport")return"Transport Arranged By";if(l=="releasing")return"Released By";if(l=="verify")return"Verified By"},P=f(window.location.origin),Oe=(l,a)=>{b.value[l].attachment=a[0]},q=f([]),Ee=l=>{let a=null;l.map(e=>{a=q.value.find(t=>t.id==e.id),a||q.value.push(e)})},Re=l=>{q.value=q.value.filter(a=>a.id!==l)},N=f("image"),De=(l,a)=>{let e=l.path.split(".");N.value=e[e.length-1],B.value=a,z.value=!0},z=f(!1),B=f(1),Ie=l=>{B.value=l,z.value=!0},Ne=l=>{b.value[l].attachment=""},oe=f(""),L=f(!1),de=f([]),ze=async()=>{let l="request";C.headertitle=="Transfer Assets"&&(l="transfer"),await I(v.token).get("/api/fetch/approval-setups/non-paginated/data/"+l).then(a=>{var e,t;de.value=a.data,oe.value=(t=(e=a.data.filter(_=>_.id==p.value.request_type_id))==null?void 0:e[0])==null?void 0:t.title}).catch(a=>{})},Q=f(!1),ie=f(0),Fe=l=>{ie.value=l,Q.value=!0},re=async(l,a)=>{let e=ie.value;a!==void 0&&(e=a),await I(v.token).get("/api/fetch/asset-info/by/asset-code/"+l).then(t=>{b.value[e].item_description=t.data.asset_name,b.value[e].asset_code=l,Q.value=!1}).catch(t=>{})},O=f({}),ne=f([]),Me=async()=>{await I(v.token).get("/api/fetch/companies").then(l=>{ne.value=l.data}).catch(l=>{})},ue=f(""),ce=f(""),X=f([]),Pe=async()=>{await I(v.token).get("/api/fetch/locations/non-paginated/data").then(l=>{var a,e,t,_;X.value=l.data,ue.value=(e=(a=l.data.filter(w=>w.id==p.value.transferred_from))==null?void 0:a[0])==null?void 0:e.title,ce.value=(_=(t=l.data.filter(w=>w.id==p.value.transferred_to))==null?void 0:t[0])==null?void 0:_.title}).catch(l=>{})},Be=()=>{b.value.push({qty:1,attachment:{}}),E()},Le=(l,a)=>{b.value.splice(a,1),E()},Qe=()=>{O.value={status:!0,type:"success",text:"Draft has been removed!"},localStorage.removeItem("draft-transfer"),setTimeout(()=>{location.reload()},500)},$e=()=>{O.value={status:!0,type:"info",text:"Please wait..."};let l={data:i.value,assets:b.value,approval:U.value,profile_id:v.user.profile.id,role:v.user.profile.role,type:"transfer"};localStorage.setItem("draft-transfer",ht(l)),setTimeout(()=>{L.value=!0,O.value={status:!0,type:"success",text:"Data has been saved to Draft"}},800)},Ye=te(()=>q.value.map(l=>l.id)),Ge=()=>{O.value={status:!0,type:"info",text:"Please wait..."};let l=b.value.map((e,t)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),a={data:i.value,assets:l,approval:U.value,profile_id:v.user.profile.id,role:v.user.profile.role,type:"transfer",additionalFiles:Ye.value};I(v.token).post("/api/request-asset/store-update/data",a).then(e=>{let t="",_="";e.data.message?(t=e.data.message,_="success"):e.data.error&&(t=e.data.error,_="error"),O.value={status:!0,type:_,text:t},L.value=!1,localStorage.removeItem("draft-transfer"),T.params.id||setTimeout(()=>{Ae.push({name:"EditTransferAsset",params:{id:e.data.id}}).catch(w=>{})},800)}).catch(e=>{console.log(e)})},U=f([]),Y=f(!0),ee=async()=>{await I(v.token).get("/api/fetch/request-asset/approval-setup-fetch/"+i.value.request_type_id).then(l=>{var a,e;U.value=(a=l.data)==null?void 0:a.stages,i.value.extra_attachment=l.data.enable_attachment,T.params.id&&U.value.length>0&&U.value.map((t,_)=>(t.profile_id=x.value[_].profile_id,t.status=x.value[_].status,t.date_approved=x.value[_].date_approved,t.reason_rejected=x.value[_].reason_rejected,t)),((e=l.data)==null?void 0:e.stages.length)>0?Y.value=!0:Y.value=!1}).catch(l=>{})},E=()=>{let l=!1;Z.value=!1,i.value.company_id&&i.value.request_type_id&&i.value.subject&&i.value.transferred_from&&i.value.transferred_to&&(l=!0);let a=!0;b.value.map(t=>{(!t.item_description||!t.reason_for_request||!t.uom||!t.qty||t.qty<=0)&&(a=!1)});let e=!0;U.value.map(t=>{t.profile_id||(e=!1)}),e&&a&&l&&(Z.value=!0)},ve=l=>{let a={status:l,profile_id:v.user.profile.id,ID:p.value.id};I(v.token).post("/api/request-asset/change-request/data",a).then(e=>{O.value={status:!0,type:"success",text:e.data.message},p.value.status=l,qe("saved",e.data.message)}).catch(e=>{})},pe=(l,a=6)=>{let e="00000"+l;return e.substring(e.length-a)},x=f([]),p=f({}),G=f({});Xe(()=>{var l,a,e,t,_,w;if(ze().then(()=>{Me().then(()=>{Pe()})}),T.params.id){k.value=!0;let n=C.objectdata;p.value=n,i.value.company_id=n.company_id,i.value.request_type_id=n.request_type_id,i.value.subject=n.subject,i.value.transferred_from=n.transferred_from,i.value.transferred_to=n.transferred_to,i.value.id=n.id,i.value.requestor_id=n.profile_id,x.value=n.request_approvals,b.value=n.items,G.value=(a=(l=n.request_approvals)==null?void 0:l.filter(m=>m.status=="awaiting-approval"))==null?void 0:a[0],q.value=n.attachment,ee()}else{i.value.company_id=v.user.profile.company_id;let n=localStorage.getItem("draft-transfer");n&&(n=ft(n),L.value=!0,i.value.request_type_id=(e=n==null?void 0:n.data)==null?void 0:e.request_type_id,i.value.transferred_from=(t=n==null?void 0:n.data)==null?void 0:t.transferred_from,i.value.transferred_to=(_=n==null?void 0:n.data)==null?void 0:_.transferred_to,i.value.subject=(w=n==null?void 0:n.data)==null?void 0:w.subject,i.value.request_type_id&&ee().then(()=>{x.value=n.approval,U.value.map((m,R)=>(m.profile_id=x.value[R].profile_id,m.status=x.value[R].status,m.date_approved=x.value[R].date_approved,m.reason_rejected=x.value[R].reason_rejected,m))}),b.value=n==null?void 0:n.assets)}});const Ke=f("https://assets.grandiose.ae"),He=te(()=>{var n,m,R,_e,me;let l=null,a=Ke.value+"/pv/employee-signatory",e=Se(50),t=Se(50),_=95,w=99;return((m=(n=v.user)==null?void 0:n.profile)==null?void 0:m.id)==((R=G.value)==null?void 0:R.profile_id)&&(_=(_e=G.value)==null?void 0:_e.profile_id,w=(me=G.value)==null?void 0:me.orders),p.value&&(l=a+"/transfer/approvals?o="+w+"&key="+e+"&pid="+_+"&pv="+t+"&id="+p.value.id),l});return te(()=>v.user.role=="receiving-releasing"||v.user.role=="facility"),fe(i.value,async(l,a)=>{E()}),fe(b.value,async(l,a)=>{E()}),(l,a)=>(r(),h(vt,null,{default:d(()=>[o(pt,{title:C.headertitle,class:"no-print"},null,8,["title"]),o(g,{class:"mb-3"},{default:d(()=>[o(et,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[o(A,null,{default:d(()=>[o(tt,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:d(()=>[s("div",null,c(C.headertitle)+" "+c(L.value?"(Draft)":""),1),Y.value?y("",!0):(r(),V("div",yt,c(se.value),1)),k.value?(r(),V("div",{key:1,class:he(p.value.status=="cancelled"?"text-error":p.value.status=="complete"?"text-success":"")}," STATUS ("+c(p.value.status)+") ",3)):y("",!0),s("div",null,"DATE: "+c(u(Ce)(Ue.value)),1)]),_:1}),o(ae),o($,null,{default:d(()=>[o(g,{class:"no-print"},{default:d(()=>[k.value?(r(),V("div",{key:0,class:he(`${p.value.status=="complete"?"v-col-12":"v-col-md-12"}`)}," REQUEST NO: SN-3"+c(pe(p.value.id)),3)):y("",!0),s("div",gt,[k.value&&(p.value.status=="pending"||p.value.status=="cancelled")?(r(),V("div",Vt,[p.value.status=="pending"&&i.value.requestor_id==u(v).user.profile.id?(r(),h(S,{key:0,onClick:a[0]||(a[0]=e=>ve("cancelled")),size:"small",color:"warning"},{default:d(()=>[j("Cancel request")]),_:1})):y("",!0),i.value.requestor_id==u(v).user.profile.id&&p.value.status=="cancelled"?(r(),h(S,{key:1,onClick:a[1]||(a[1]=e=>ve("pending")),size:"small",color:"info"},{default:d(()=>[j("Change status to Pending")]),_:1})):y("",!0)])):y("",!0)]),s("div",bt,[o(F,{items:de.value,modelValue:i.value.request_type_id,"onUpdate:modelValue":[a[2]||(a[2]=e=>i.value.request_type_id=e),ee],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:k.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),s("div",wt,[o(F,{items:ne.value,modelValue:i.value.company_id,"onUpdate:modelValue":a[3]||(a[3]=e=>i.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),s("div",kt,[o(F,{items:X.value,modelValue:i.value.transferred_from,"onUpdate:modelValue":a[4]||(a[4]=e=>i.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),s("div",xt,[o(F,{items:X.value,modelValue:i.value.transferred_to,"onUpdate:modelValue":a[5]||(a[5]=e=>i.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"])]),s("div",St,[o(K,{modelValue:i.value.subject,"onUpdate:modelValue":a[6]||(a[6]=e=>i.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),o(g,{class:"for-print-flex mx-2 mb-1"},{default:d(()=>{var e,t;return[s("div",Ct,"REQUEST NO: "+c(p.value.id?"SN-3"+pe(p.value.id):""),1),s("div",Tt,"TYPE OF REQUEST: "+c(oe.value),1),s("div",qt,"COMPANY: "+c((t=(e=p.value)==null?void 0:e.company)==null?void 0:t.title),1),s("div",At,"LOCATION FROM: "+c(ue.value),1),s("div",Ut,"LOCATION TO: "+c(ce.value),1),s("div",jt,"SUBJECT: "+c(p.value.subject),1)]}),_:1})]),_:1})]),_:1}),o(A,{class:"my-2"},{default:d(()=>[o($,null,{default:d(()=>[o(g,null,{default:d(()=>{var e;return[s("div",Ot,[p.value.status!="complete"&&(!u(T).params.id||i.value.requestor_id==u(v).user.profile.id&&((e=C.objectdata)==null?void 0:e.status)=="pending"||u(v).user.profile.role=="superadmin"||u(v).user.profile.role=="administrator")?(r(),h(S,{key:0,size:"small",color:"primary",class:"no-print",onClick:Be},{default:d(()=>[j("Add")]),_:1})):y("",!0),Et])]}),_:1}),o(g,{class:"for-print-flex mx-2 header mb-1"},{default:d(()=>[Rt,Dt,It,Nt,zt,Ft,Mt]),_:1}),(r(!0),V(D,null,M(b.value,(e,t)=>(r(),h(g,{key:t,class:"for-print-flex mx-2 row-bordered"},{default:d(()=>[s("div",Pt,c(e.item_description),1),s("div",Bt,c(e.asset_code),1),s("div",Lt,c(e.qty),1),s("div",Qt,c(e.uom),1),s("div",$t,c(e.weight),1),s("div",Yt,c(e.item_value),1),s("div",Gt,c(e.reason_for_request),1)]),_:2},1024))),128)),(r(!0),V(D,null,M(b.value,(e,t)=>(r(),h(g,{key:t,class:"no-print"},{default:d(()=>{var _,w,n;return[s("div",Kt,[(_=e.attachment)!=null&&_.id?(r(),h(g,{key:0,class:"px-1"},{default:d(()=>[s("div",Ht,[o(K,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":m=>e.attachment.id=m},null,8,["modelValue","onUpdate:modelValue"]),!k.value||k.value&&i.value.requestor_id==u(v).user.profile.id?(r(),h(S,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:u(ye),size:"16px",color:"error",onClick:()=>Ne(t,e.attachment.id)},null,8,["icon","onClick"])):y("",!0),o(A,{onClick:()=>Ie(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),o(le,{modelValue:z.value,"onUpdate:modelValue":a[7]||(a[7]=m=>z.value=m),width:"95%","max-width":"900"},{default:d(()=>[o(A,{class:"bg-black"},{default:d(()=>[s("div",Jt,[o(H,{src:P.value+"/file/"+B.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(r(),h(g,{key:1,class:"mt-0"},{default:d(()=>[s("div",Zt,[o(at,{color:"grey-lighten-4",class:"text-center"},{default:d(()=>[o(xe,{options:{multiSelect:!1,type:"transfer-asset"},onSelect:m=>Oe(t,m)},null,8,["onSelect"])]),_:2},1024)])]),_:2},1024))]),s("div",Wt,[o(ge,{modelValue:e.item_description,"onUpdate:modelValue":m=>e.item_description=m,variant:"outlined",density:"compact","hide-details":"",label:"ITEM DESC*",rows:"2",class:"no-print"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Xt,[o(K,{modelValue:e.asset_code,"onUpdate:modelValue":m=>e.asset_code=m,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE","append-inner-icon":u(lt),"onClick:appendInner":m=>re(e.asset_code,t)},null,8,["modelValue","onUpdate:modelValue","append-inner-icon","onClick:appendInner"]),(!u(T).params.id||i.value.requestor_id==u(v).user.profile.id&&((w=C.objectdata)==null?void 0:w.status)=="pending"||u(v).user.profile.role=="superadmin"||u(v).user.profile.role=="administrator")&&p.value.status!="complete"?(r(),h(J,{key:0,onClick:m=>Fe(t),class:"ml-2 my-auto",size:"x-small",icon:u(st)},null,8,["onClick","icon"])):y("",!0)]),s("div",ea,[o(K,{type:"number","onUpdate:modelValue":[E,m=>e.qty=m],modelValue:e.qty,variant:"outlined",density:"compact","hide-details":"",class:"no-print",label:"QTY*"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ta,[o(F,{items:je.value,modelValue:e.uom,"onUpdate:modelValue":[m=>e.uom=m,E],variant:"outlined",density:"compact","hide-details":"",label:"UOM*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),s("div",aa,c(e.weight?e.weight:0)+" (KG) ",1),s("div",la,c(e.item_value?e.item_value:0)+" AED ",1),s("div",sa,[o(ge,{modelValue:e.reason_for_request,"onUpdate:modelValue":m=>e.reason_for_request=m,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON*"},null,8,["modelValue","onUpdate:modelValue"]),!k.value||k.value&&u(v).user.profile.id==C.objectdata.profile_id&&((n=C.objectdata)==null?void 0:n.status)=="pending"?(r(),h(J,{key:0,size:"small",onClick:()=>Le(e.id,t),icon:u(ot),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):y("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),i.value.extra_attachment?(r(),h(A,{key:0},{default:d(()=>[o($,null,{default:d(()=>{var e;return[!k.value||k.value&&i.value.requestor_id==u(v).user.profile.id?(r(),V("div",oa,[da,o(xe,{options:{multiSelect:!0,type:"transfer-asset"},onSelect:Ee})])):y("",!0),((e=q.value)==null?void 0:e.length)>0?(r(),h(g,{key:1,class:"px-1 mt-4"},{default:d(()=>[(r(!0),V(D,null,M(q.value,(t,_)=>(r(),V("div",{key:t.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[k.value&&(p.value.status=="pending"||p.value.status=="cancelled")?(r(),h(S,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:u(ye),size:"20px",color:"error",onClick:()=>Re(t.id)},null,8,["icon","onClick"])):y("",!0),o(A,{onClick:()=>De(t,_)},{default:d(()=>[t.mime=="image/jpeg"||t.mime=="image/png"?(r(),h(H,{key:0,src:P.value+"/file/"+t.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(r(),h(H,{key:1,src:P.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),o(le,{modelValue:z.value,"onUpdate:modelValue":a[9]||(a[9]=t=>z.value=t),width:"95%","max-width":"900"},{default:d(()=>[o(A,{class:"bg-black"},{default:d(()=>[o(dt,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:B.value,"onUpdate:modelValue":a[8]||(a[8]=t=>B.value=t)},{default:d(()=>[(r(!0),V(D,null,M(q.value,(t,_)=>(r(),h(it,{key:_,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[s("div",{style:rt(`${N.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[N.value=="jpg"||N.value=="jpeg"||N.value=="png"?(r(),h(H,{key:0,src:P.value+"/file/"+t.path},null,8,["src"])):y("",!0),N.value=="pdf"?(r(),V("object",{key:1,data:P.value+"/file/"+t.path,type:"application/pdf",width:"100%",height:"800px"},null,8,ia)):y("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0)]}),_:1})]),_:1})):y("",!0),o(A,{class:"my-2 page-break"},{default:d(()=>[o($,null,{default:d(()=>[o(g,null,{default:d(()=>[s("div",ra,[na,u(T).params.id?(r(),V("div",ua,[o(S,{color:"info",size:"small",target:"_blank",href:He.value},{default:d(()=>[j("View Approval Page")]),_:1},8,["href"])])):y("",!0)]),o(ae)]),_:1}),o(g,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:d(()=>{var e,t;return[ca,s("div",va,c((t=(e=p.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),pa,_a]}),_:1}),(r(!0),V(D,null,M(x.value,e=>(r(),h(g,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:d(()=>{var t;return[s("div",ma,c(W(e.approval_type)),1),s("div",fa,c((t=e==null?void 0:e.profile)==null?void 0:t.display_name),1),s("div",ha,[e.status?(r(),h(J,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?u(Ve):e.status=="pending"?u(be):e.status=="reject"?u(we):u(ke),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0)]),s("div",ya,c(e.date_approved),1)]}),_:2},1024))),128)),o(g,{class:"no-print"},{default:d(()=>{var e,t;return[ga,s("div",Va,c((t=(e=p.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),ba,wa]}),_:1}),Y.value?(r(),V(D,{key:0},[(r(!0),V(D,null,M(U.value,(e,t)=>(r(),h(g,{key:e.id,class:"no-print"},{default:d(()=>[s("div",ka,c(e.types?W(e.types):W(e.approval_type)),1),s("div",xa,[o(F,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[_=>e.profile_id=_,E],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),o(S,{variant:"text",size:"x-small",class:"no-print"},{default:d(()=>[e.status?(r(),h(J,{key:0,class:"mx-2 my-3",icon:e.status=="awaiting-approval"?u(Ve):e.status=="pending"?u(be):e.status=="reject"?u(we):u(ke),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0),o(nt,{activator:"parent",location:"top","max-width":"400"},{default:d(()=>[j(c(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)]),s("div",Sa,c(e.date_approved?u(Ce)(e.date_approved):""),1)]),_:2},1024))),128)),o(g,{class:"no-print"},{default:d(()=>{var e;return[o(ae),s("div",Ca,[(!u(T).params.id||i.value.requestor_id==u(v).user.profile.id&&((e=C.objectdata)==null?void 0:e.status)=="pending"||u(v).user.profile.role=="superadmin"||u(v).user.profile.role=="administrator")&&p.value.status!="complete"?(r(),h(S,{key:0,size:"small",disabled:!Z.value,onClick:Ge,color:"primary"},{default:d(()=>[j(c(u(T).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):y("",!0),u(T).params.id?y("",!0):(r(),h(S,{key:1,size:"small",class:"mx-3",onClick:$e,color:"warning"},{default:d(()=>[j("Save as Draft")]),_:1})),L.value?(r(),h(S,{key:2,size:"small",class:"mx-3",onClick:Qe,color:"info"},{default:d(()=>[j("Delete Draft")]),_:1})):y("",!0)])]}),_:1})],64)):(r(),h(g,{key:1},{default:d(()=>[s("div",Ta,c(se.value),1)]),_:1})),o(g,null,{default:d(()=>[qa]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(_t,{options:O.value},null,8,["options"]),o(le,{width:"500",modelValue:Q.value,"onUpdate:modelValue":a[11]||(a[11]=e=>Q.value=e)},{default:d(()=>[o(A,null,{default:d(()=>[o($,null,{default:d(()=>[o(u(mt.QrcodeStream),{onDecode:re})]),_:1}),o(ut,null,{default:d(()=>[o(ct),o(S,{text:"Close",onClick:a[10]||(a[10]=e=>Q.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ia as _};
