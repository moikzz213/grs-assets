import{I as Oe,r as h,c as V,w as i,m as Ie,o as s,s as C,b as e,d as a,e as r,j as ce,y as c,t as u,E as y,H as S,p as o,af as ne,q as X,D as A,ai as ge,k as P,W as xe,X as ie,az as Se,_ as D,i as F,ag as M,aA as ue,aB as ve,aC as ke,aD as be,F as Z,aE as Pe,Y as De,Z as Ne,ae as z,f as $e,a2 as Be,a3 as Ve}from"./app-ce310ef3.js";import{u as pe}from"./formatDate-b9aad8c5.js";import{_ as Le}from"./AppSnackBar-e73a4ac7.js";const Fe={class:"v-col-3 mt-auto font-weight-bold"},Me={class:"d-flex"},ze=e("div",{class:"mr-2"},"FROM:",-1),He={class:"d-flex"},Ke=e("div",{class:"mr-6 pr-2"},"TO:",-1),Ye={class:"v-col-6 text-center"},Ge=e("img",{src:"/assets/images/grandiose-logo.jpg",style:{"max-height":"100px"}},null,-1),Qe=e("br",null,null,-1),Je={class:"v-col-3 mt-auto font-weight-bold text-right"},We=e("br",null,null,-1),Xe=e("div",{class:"v-col-12 v-col-md-1 py-1"},"IMG",-1),Ze=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ITEM DESC",-1),el=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ASSET NO",-1),ll=e("div",{class:"v-col-12 v-col-md-1 py-1"},"QTY",-1),al=e("div",{class:"v-col-12 v-col-md-1 py-1"},"UOM",-1),sl=e("div",{class:"v-col-12 v-col-md-1 py-1"},"WEIGHT",-1),tl=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ITEM VALUE",-1),ol=e("div",{class:"v-col-12 v-col-md-1 py-1"},"COUNTRY OF ORIGIN",-1),rl=e("div",{class:"v-col-12 v-col-md-2 py-1"},[r(" REMARKS"),e("br"),r("REASON FOR REQUEST ")],-1),dl={class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},cl={style:{position:"relative"}},nl={key:0,class:"checkbox-notice"},il={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},ul={key:0},vl={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},pl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},_l={key:1,class:"bg-light-gray d-flex flex-column-reverse flex-start-end"},yl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},fl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},hl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},ml={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},gl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},xl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},kl={key:0,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},bl={key:1,class:"v-col-12 v-col-md-2 py-1 d-flex"},Vl={key:0},wl=e("strong",null," Asset Supervisor - Projects",-1),El=e("br",null,null,-1),Cl={key:2,class:"v-col-12 v-col-md-2 py-1"},Al={key:0},ql=e("strong",null," Asset Supervisor - Projects",-1),Rl=e("br",null,null,-1),jl={style:{"text-wrap":"wrap"}},Tl={key:1},Ul=e("strong",null," Commercial Manager - Projects",-1),Ol=e("br",null,null,-1),Il={style:{"text-wrap":"wrap"}},Sl={key:2},Pl=e("strong",null," Releasing",-1),Dl=e("br",null,null,-1),Nl={style:{"text-wrap":"wrap"}},$l={key:3,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},Bl={key:0},Ll=e("strong",null," Asset Supervisor - Projects",-1),Fl=e("br",null,null,-1),Ml={style:{"text-wrap":"wrap"}},zl={key:1},Hl=e("strong",null," Commercial Manager - Projects",-1),Kl=e("br",null,null,-1),Yl={style:{"text-wrap":"wrap"}},Gl={key:2},Ql=e("strong",null," Releasing",-1),Jl=e("br",null,null,-1),Wl={style:{"text-wrap":"wrap"}},Xl={key:0,class:"my-auto"},Zl={class:"pa-0 ma-0 v-col-1 my-auto",style:{position:"relative"}},ea={key:0,class:"checkbox-notice"},la={key:4,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},aa={key:0,style:{"border-bottom":"1px solid #000000"},class:"pa-1"},sa={key:0},ta=e("strong",null," Asset Supervisor - Projects",-1),oa=e("br",null,null,-1),ra={style:{"text-wrap":"wrap"}},da={key:1},ca=e("strong",null," Commercial Manager - Projects",-1),na=e("br",null,null,-1),ia={style:{"text-wrap":"wrap"}},ua={key:2},va=e("strong",null," Releasing",-1),pa=e("br",null,null,-1),_a={style:{"text-wrap":"wrap"}},ya={key:3},fa=e("strong",null," Receiver",-1),ha={style:{"text-wrap":"wrap"}},ma={key:1},ga={key:2},xa={key:3},ka={key:0,class:"v-col-12 text-center font-weight-bold text-info"},ba=e("br",null,null,-1),Va={key:1,class:"v-col-12 text-center font-weight-bold text-info"},wa={key:0,class:"ml-5 d-flex"},Ea=e("div",{class:"px-2 mr-5"},"|",-1),Ca={key:1,class:"ml-6"},Aa={class:"v-col-12 px-0 my-0"},qa=["data"],Ra={class:"v-col-12 v-col-md-3 pa-0 mb-4"},ja=e("div",{class:"text-center py-1 font-weight-bold"}," Requested By ",-1),Ta={class:"text-center py-1"},Ua={class:"text-center py-1"},Oa={class:"text-center text-caption"},Ia={key:0},Sa={key:0,class:"d-flex"},Pa=["onClick"],Da=["onClick"],Na={key:1},$a=["onClick"],Ba=["onClick"],La={class:"text-center py-1"},Fa={class:"text-center py-1"},Ma={class:"text-center text-caption"},za={key:2,class:"v-col-12 text-caption",style:{border:"1px solid red","border-radius":"5px"}},Ha={class:"v-col-12 text-center"},Ka=e("div",{class:"v-col-12 text-center mt-3 font-weight-bold"}," REASON FOR REJECTION ",-1),Ya={class:"v-col-12"},Xa={__name:"Approvals",setup(Ga){const n=Oe(),_e=h(!0),v=h({}),ee=h({}),k=h(!1),le=h(!1),ae=h(!1),R=h(!1),N=h([]),H=h(!1),$=h(""),K=h(!1),we=h(n.query.id),m=h(""),se=h(0),J=h([]),ye=async()=>{let p={id:n.query.id,profile_id:n.query.pid,order:n.query.o};if(!n.query.id||!n.query.pv){_e.value=!1;return}await axios.post("/api/pv/fetch/request-assets/data",p).then(d=>{var g,j,T,x,q,G,Q,l,b,w,E;if(v.value=d.data,!v.value.access){_e.value=!1;return}m.value=(j=(g=d.data)==null?void 0:g.data)==null?void 0:j.status,se.value=(x=(T=d.data)==null?void 0:T.data)==null?void 0:x.request_type_id,J.value=(G=(q=d.data)==null?void 0:q.data)==null?void 0:G.attachment,((b=(l=(Q=v.value)==null?void 0:Q.data)==null?void 0:l.request_approvals)==null?void 0:b.length)>0&&(k.value=v.value.data.request_approvals.filter(_=>{var t;return _.profile_id==n.query.pid&&_.orders==n.query.o&&_.status=="awaiting-approval"&&((t=_.profile)==null?void 0:t.role)=="asset-supervisor"})[0],le.value=v.value.data.request_approvals.filter(_=>_.profile_id==n.query.pid&&_.orders==n.query.o&&_.status=="awaiting-approval"&&_.approval_type=="releasing")[0],ae.value=v.value.data.request_approvals.filter(_=>{var t;return _.profile_id==n.query.pid&&_.orders==n.query.o&&_.status=="awaiting-approval"&&((t=_.profile)==null?void 0:t.role)=="commercial-manager"})[0],R.value=v.value.data.request_approvals.filter(_=>_.profile_id==n.query.pid&&_.orders==n.query.o&&_.status=="awaiting-approval"&&_.approval_type=="receiver")[0],re.value=v.value.data.request_approvals[v.value.data.request_approvals.length-1].approval_type,(R.value||k.value)&&m.value!="cancelled"&&(K.value=!0)),N.value=(E=(w=v.value)==null?void 0:w.data)==null?void 0:E.items}).catch(d=>{console.log(d.response.data)})},te=h(1),B=h("image"),Ee=(p,d)=>{let g=p.path.split(".");B.value=g[g.length-1],te.value=d,L.value=!0},Ce=()=>{window.print()},oe=h(window.location.origin),L=h(!1),fe=h(1),Ae=p=>{fe.value=p,L.value=!0},re=h(""),he=h({}),qe=p=>{H.value=!0,he.value=p},Re=()=>{H.value=!1,$.value=""},W=(p,d=null)=>{if(H.value=!1,m.value!="cancelled"&&(p.status=="awaiting-approval"||p.status=="reject")&&n.query.pid==p.profile_id&&n.query.o==p.orders){ee.value={status:!0,type:"info",text:"Please wait..."};let g=[];(k.value||ae.value||R.value||le.value)&&(g=N.value.map((x,q)=>(delete x.created_at,delete x.assets,delete x.updated_at,delete x.attachment,x)));let j={},T="";$.value&&d&&(T=$.value),j={profile_id:n.query.pid,id:n.query.id,order:n.query.o,type:v.value.data.types,assets:g,is_reject:T,requestor_id:v.value.data.profile_id},axios.post("/api/pv/store/request-asset/approve-data",j).then(x=>{let q="success";x.data.success||(q="error"),ee.value={status:!0,type:q,text:x.data.message},K.value=!1,setTimeout(()=>{ye()},500)}).catch(x=>{console.log(x.response.data)});return}},je=p=>{if(p=="approve")return"Approved";if(p=="reviewer")return"Reviewed";if(p=="receiver")return"Received";if(p=="transport")return"Transport Arranged";if(p=="releasing")return"Released";if(p=="verify")return"Verified"},Te=()=>{let p=R.value;K.value=!1,N.value.map(d=>{p?d.is_received=Y.value:d.is_available=Y.value})},Ue=(p,d=6)=>{let g="00000"+p;return g.substring(g.length-d)},me=()=>{let p=!0,d=R.value;N.value.map(g=>{d?g.is_received||(p=!1):g.is_available||(p=!1)}),Y.value=p},Y=h(!1);return ye(),(p,d)=>(s(),V(Ie,{style:{"max-width":"90%"},class:"mt-0 pt-0"},{default:i(()=>{var g,j,T,x,q,G,Q;return[((g=N.value)==null?void 0:g.length)>0?(s(),V(C,{key:0,class:"mt-0 pt-0 no-print mt-2"},{default:i(()=>[e("div",null,[a(ce,{color:"primary",size:"small",onClick:Ce},{default:i(()=>[r("Print")]),_:1})])]),_:1})):c("",!0),a(C,{class:"mt-0 pt-0"},{default:i(()=>{var l,b,w,E,_,t,U,O,I;return[e("div",Fe,[e("div",Me,[ze,e("div",null,u((b=(l=v.value.data)==null?void 0:l.transfer_from)==null?void 0:b.title),1)]),e("div",He,[Ke,e("div",null,u((E=(w=v.value.data)==null?void 0:w.transfer_to)==null?void 0:E.title),1)])]),e("div",Ye,[Ge,Qe,e("strong",null,u((t=(_=v.value.data)==null?void 0:_.setup)==null?void 0:t.title),1)]),e("div",Je,[r(" SN-"+u(((O=(U=v.value)==null?void 0:U.data)==null?void 0:O.types)=="request"?"5":"3")+u(Ue(we.value)),1),We,r(" "+u(y(pe)((I=v.value.data)==null?void 0:I.created_at)),1)])]}),_:1}),a(S,{class:"my-5"}),a(C,null,{default:i(()=>[Xe,Ze,el,ll,al,sl,tl,ol,rl,e("div",dl,[r(" REMARKS "),e("div",cl,[K.value?(s(),o("div",nl)):c("",!0),k.value||R.value?(s(),V(ne,{key:1,modelValue:Y.value,"onUpdate:modelValue":[d[0]||(d[0]=l=>Y.value=l),Te],class:"pa-0 ma-0 v-col-1","hide-details":"",disabled:m.value=="cancelled",variant:"underlined",density:"compact"},null,8,["modelValue","disabled"])):c("",!0)])])]),_:1}),(s(!0),o(Z,null,X(N.value,(l,b)=>(s(),V(C,{class:"mt-1 approval-form-pr",key:l.id},{default:i(()=>{var w,E,_,t,U,O,I;return[e("div",il,[(w=l.attachment)!=null&&w.id?(s(),o("div",ul,[a(P,{onClick:()=>Ae(l),maxHeight:"40",variant:"text",class:"ma-2"},{default:i(()=>[a(A,{size:"large",icon:y(ge),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"]),a(ie,{modelValue:L.value,"onUpdate:modelValue":d[1]||(d[1]=f=>L.value=f),width:"95%","max-width":"900"},{default:i(()=>[a(P,{class:"bg-black"},{default:i(()=>[e("div",vl,[a(xe,{src:oe.value+"/file/"+fe.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])])):(s(),V(P,{key:1,maxHeight:"40",variant:"text",class:"ma-2"},{default:i(()=>[a(A,{size:"large",icon:y(Se)},null,8,["icon"])]),_:1})),a(D,{value:l.item_description,variant:"underlined",density:"compact","hide-details":"",rows:"2",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0},null,8,["value"])]),e("div",pl,[k.value&&m.value!="cancelled"?(s(),V(F,{key:0,modelValue:l.asset_code,"onUpdate:modelValue":f=>l.asset_code=f,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:M(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])):(s(),o("div",_l,u(l.asset_code),1))]),e("div",yl,[a(F,{value:l.qty,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",fl,[a(F,{value:l.uom,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",hl,[a(F,{modelValue:l.weight,"onUpdate:modelValue":f=>l.weight=f,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:M(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",ml,[a(F,{modelValue:l.item_value,"onUpdate:modelValue":f=>l.item_value=f,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:M(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",gl,[a(F,{modelValue:l.country_of_origin,"onUpdate:modelValue":f=>l.country_of_origin=f,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||m.value=="cancelled",class:M(`${!k.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",xl,[a(D,{value:l.reason_for_request,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0,rows:"2"},null,8,["value"])]),k.value?(s(),o("div",kl,[a(D,{modelValue:l.remarks,"onUpdate:modelValue":f=>l.remarks=f,variant:"underlined",density:"compact","hide-details":"",class:M(["text-remarks",`${m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`]),placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue","class"]),a(ne,{disabled:m.value=="cancelled",modelValue:l.is_available,"onUpdate:modelValue":[f=>l.is_available=f,me],class:"pa-0 ma-0 v-col-1","hide-details":"",variant:"underlined",density:"compact"},null,8,["disabled","modelValue","onUpdate:modelValue"])])):c("",!0),ae.value?(s(),o("div",bl,[e("div",null,[l.remarks?(s(),o("div",Vl,[wl,r(),El,e("p",null,u(l.remarks),1),r(" ------- ")])):c("",!0),a(D,{modelValue:l.remarks_commercial,"onUpdate:modelValue":f=>l.remarks_commercial=f,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])])):le.value?(s(),o("div",Cl,[e("div",null,[l.remarks?(s(),o("div",Al,[ql,r(),Rl,e("pre",jl,u(l.remarks),1),r(" ------- ")])):c("",!0),l.remarks_commercial?(s(),o("div",Tl,[Ul,r(),Ol,e("pre",Il,u(l.remarks_commercial),1),r(" ------- ")])):c("",!0),l.remarks_release?(s(),o("div",Sl,[Pl,r(),Dl,e("pre",Nl,u(l.remarks_release),1),r(" ------- ")])):c("",!0)]),a(D,{modelValue:l.remarks_release,"onUpdate:modelValue":f=>l.remarks_release=f,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):R.value?(s(),o("div",$l,[e("div",null,[e("div",null,[l.remarks?(s(),o("div",Bl,[Ll,r(),Fl,e("pre",Ml,u(l.remarks),1),r(" ------- ")])):c("",!0),l.remarks_commercial?(s(),o("div",zl,[Hl,r(),Kl,e("pre",Yl,u(l.remarks_commercial),1),r(" ------- ")])):c("",!0),l.remarks_release?(s(),o("div",Gl,[Ql,r(),Jl,e("pre",Wl,u(l.remarks_release),1),r(" ------- ")])):c("",!0)]),a(D,{modelValue:l.remarks_receive,"onUpdate:modelValue":f=>l.remarks_receive=f,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(_=(E=v.value)==null?void 0:E.data)!=null&&_.is_available?(s(),o("div",Xl,[a(A,{class:"mt-3",icon:l.is_available?y(ue):y(ve),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):c("",!0),e("div",Zl,[K.value?(s(),o("div",ea)):c("",!0),a(ne,{modelValue:l.is_received,"onUpdate:modelValue":[f=>l.is_received=f,me],"hide-details":"",variant:"underlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])])])):(s(),o("div",la,[l.remarks||l.remarks_commercial||l.remarks_release||l.remarks_receive?(s(),o("div",aa,[l.remarks?(s(),o("div",sa,[ta,r(),oa,e("pre",ra,u(l.remarks),1),r(" ------- ")])):c("",!0),l.remarks_commercial?(s(),o("div",da,[ca,r(),na,e("pre",ia,u(l.remarks_commercial),1),r(" ------- ")])):c("",!0),l.remarks_release?(s(),o("div",ua,[va,r(),pa,e("pre",_a,u(l.remarks_release),1),r(" ------- ")])):c("",!0),l.remarks_receive?(s(),o("div",ya,[fa,r(),e("pre",ha,u(l.remarks_receive),1)])):c("",!0)])):(s(),o("div",ma)),(U=(t=v.value)==null?void 0:t.data)!=null&&U.is_available?(s(),o("div",ga,[a(A,{class:"mt-3",icon:l.is_available?y(ue):y(ve),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):c("",!0),((I=(O=v.value)==null?void 0:O.data)==null?void 0:I.status)=="complete"&&re.value=="receiver"?(s(),o("div",xa,[a(A,{class:"mt-3",icon:l.is_received?y(ke):y(be),color:`${l.is_received?"success":"error"}`},null,8,["icon","color"])])):c("",!0)]))]}),_:2},1024))),128)),k.value?(s(),V(C,{key:1,class:"mt-3"},{default:i(()=>[m.value!=="cancelled"?(s(),o("div",ka,[r(" YOU CAN UPDATE SOME DATA AND"),ba,r(" PLEASE TICK CHECKBOX IF ASSET IS AVAILABLE BEFORE CLICKING THE APPROVE BUTTON ")])):(s(),o("div",Va," THIS REQUEST HAS BEEN CANCELLED. "))]),_:1})):c("",!0),(T=(j=v.value)==null?void 0:j.data)!=null&&T.is_available&&m.value!=="cancelled"?(s(),V(C,{key:2,class:"mt-6 mb-2"},{default:i(()=>[a(P,{variant:"text",class:"v-col-12 text-center pt-2 font-weight-bold pb-0 d-flex justify-center"},{default:i(()=>{var l;return[e("div",null,[a(A,{icon:y(ue),color:"success"},null,8,["icon"]),r(" AVAILABLE "),a(A,{icon:y(ve),color:"error",class:"ml-5"},null,8,["icon"]),r(" NOT AVAILABLE ")]),R.value?(s(),o("div",wa,[Ea,e("div",null,[a(A,{icon:y(Pe)},null,8,["icon"]),r(" TICK RECEIVED ASSETS "),a(S,{thickness:8,color:"error",class:"divider-notice"})])])):c("",!0),((l=v.value.data)==null?void 0:l.status)=="complete"&&re.value=="receiver"?(s(),o("div",Ca,[a(A,{icon:y(ke),color:"success"},null,8,["icon"]),r(" RECEIVED "),a(A,{icon:y(be),color:"error",class:"ml-5"},null,8,["icon"]),r(" NOT RECEIVE ")])):c("",!0)]}),_:1})]),_:1})):c("",!0),a(C,{class:"mt-3"},{default:i(()=>[e("div",Aa,[a(S),a(S)])]),_:1}),se.value==2&&((x=J.value)==null?void 0:x.length)>0?(s(),V(C,{key:3,class:"my-3 d-flex justify-center"},{default:i(()=>[(s(!0),o(Z,null,X(J.value,(l,b)=>(s(),o("div",{key:l.id,class:"pa-2",style:{position:"relative"}},[a(P,{onClick:()=>Ee(l,b)},{default:i(()=>[a(A,{size:"large",icon:y(ge),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"])]))),128)),a(ie,{modelValue:L.value,"onUpdate:modelValue":d[3]||(d[3]=l=>L.value=l),width:"95%","max-width":"900"},{default:i(()=>[a(P,{class:"bg-black"},{default:i(()=>[a(De,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:te.value,"onUpdate:modelValue":d[2]||(d[2]=l=>te.value=l)},{default:i(()=>[(s(!0),o(Z,null,X(J.value,(l,b)=>(s(),V(Ne,{key:b,"reverse-transition":"fade",transition:"fade"},{default:i(()=>[e("div",{style:z(`${B.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[B.value=="jpg"||B.value=="jpeg"||B.value=="png"?(s(),V(xe,{key:0,src:oe.value+"/file/"+l.path},null,8,["src"])):c("",!0),B.value=="pdf"?(s(),o("object",{key:1,data:oe.value+"/file/"+l.path,type:"application/pdf",width:"100%",height:"800px"},null,8,qa)):c("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):c("",!0),((q=v.value.data)==null?void 0:q.request_approvals.length)>0?(s(),V(C,{key:4},{default:i(()=>{var l,b,w,E,_;return[e("div",Ra,[e("div",{class:"text-center mx-2 py-4 font-weight-bold",style:z(`${m.value=="cancelled"?"color: red;":"color: rgb(3, 167, 3);"} border: 1px solid #ccc; font-size: 17px;`)},u(m.value=="cancelled"?"CANCELLED":"APPROVED"),5),ja,e("div",Ta,u((b=(l=v.value.data)==null?void 0:l.profile)==null?void 0:b.display_name),1),e("div",Ua,u((E=(w=v.value.data)==null?void 0:w.profile)==null?void 0:E.designation),1),e("div",Oa,u(y(pe)((_=v.value.data)==null?void 0:_.created_at)),1)]),(s(!0),o(Z,null,X(v.value.data.request_approvals,t=>{var U,O,I,f;return s(),o("div",{class:"v-col-12 v-col-md-3 pa-0 mb-4",key:t.id},[(t.profile.ecode=="100884"||t.profile.ecode=="102587"||t.profile.ecode=="100316"||((U=t.profile)==null?void 0:U.role)=="commercial-manager"||((O=t.profile)==null?void 0:O.role)=="technical-operation"&&se.value==2)&&y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?(s(),o("div",Ia,[t.status=="awaiting-approval"?(s(),o("div",Sa,[e("div",{onClick:de=>qe(t),class:"cursor-pointer text-center py-5 v-col-6",style:z(`border:1px solid #ccc; ${y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":"background-color: none;"}`)}," REJECT ",12,Pa),e("div",{onClick:de=>W(t,"reject"),class:"cursor-pointer text-center py-5 v-col-6",style:z(`border:1px solid #ccc; ${y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(3, 167, 3);color:#fff;":"background-color: none"}`)}," APPROVE ",12,Da)])):t.status=="reject"||t.status=="done"||t.status=="pending"?(s(),o("div",Na,[e("div",{onClick:de=>W(t),class:"cursor-pointer text-center mx-2 py-5",style:z(`border:1px solid #ccc; ${t.status=="reject"&&y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},u(t.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,$a)])):c("",!0)])):(s(),o("div",{key:1,onClick:de=>W(t),class:"cursor-pointer text-center mx-2 py-5",style:z(`border:1px solid #ccc; ${m.value!="cancelled"&&t.status=="awaiting-approval"&&y(n).query.pid==t.profile_id&&y(n).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},u(t.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,Ba)),e("div",{class:M(`text-center py-1 font-weight-bold ${t.status=="reject"?"text-error text-uppercase":""}`)},u(t.status=="reject"?"Rejected":je(t.approval_type))+" By ",3),e("div",La,u((I=t.profile)==null?void 0:I.display_name),1),e("div",Fa,u((f=t.profile)==null?void 0:f.designation),1),e("div",Ma,u(t.date_approved?y(pe)(t.date_approved):""),1),t.reason_rejected?(s(),o("div",za,[r(" Reason rejected "),a(S,{class:"my-2"}),r(" "+u(t.reason_rejected),1)])):c("",!0)])}),128))]}),_:1})):c("",!0),((Q=(G=v.value)==null?void 0:G.data)==null?void 0:Q.status)!=="complete"?(s(),V(C,{key:5,class:"no-print"},{default:i(()=>[e("div",Ha,[a(S),r(" You will receive a notification once you click the approve button. "),a(S)])]),_:1})):c("",!0),a(ie,{width:"500",modelValue:H.value,"onUpdate:modelValue":d[6]||(d[6]=l=>H.value=l),persistent:""},{default:i(()=>[a(P,null,{default:i(()=>[a($e,null,{default:i(()=>[a(C,null,{default:i(()=>[Ka,e("div",Ya,[a(D,{modelValue:$.value,"onUpdate:modelValue":d[4]||(d[4]=l=>$.value=l),label:"STATE YOUR REASON HERE",variant:"outlined"},null,8,["modelValue"])])]),_:1})]),_:1}),a(Be,null,{default:i(()=>[a(Ve),a(ce,{onClick:Re},{default:i(()=>[r("Cancel")]),_:1}),a(ce,{color:"success",disabled:!$.value,onClick:d[5]||(d[5]=l=>W(he.value,"reject"))},{default:i(()=>[r("Confirm")]),_:1},8,["disabled"]),a(Ve)]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Le,{options:ee.value},null,8,["options"])]}),_:1}))}};export{Xa as default};
