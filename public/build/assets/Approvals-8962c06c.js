import{I as Ie,r as f,c as V,w as p,m as Se,o as a,s as C,b as e,d as s,e as o,j as ce,y as d,t as n,E as y,H as P,p as r,af as ie,q as X,D as A,ai as ge,k as D,W as xe,X as ue,az as Pe,_ as S,i as F,ag as M,aA as ve,aB as _e,aC as be,aD as Ve,F as Z,aE as De,Y as Ne,Z as $e,ae as z,f as Be,a2 as Le,a3 as we}from"./app-d2aeeebd.js";import{u as pe}from"./formatDate-b9aad8c5.js";import{_ as Fe}from"./AppSnackBar-889d340c.js";const Me={class:"v-col-3 mt-auto font-weight-bold"},ze={class:"d-flex"},He=e("div",{class:"mr-2"},"FROM:",-1),Ke={class:"d-flex"},Ye=e("div",{class:"mr-6 pr-2"},"TO:",-1),Ge={class:"v-col-6 text-center"},Je=e("img",{src:"/assets/images/grandiose-logo.jpg",style:{"max-height":"100px"}},null,-1),Qe=e("br",null,null,-1),We={class:"v-col-3 mt-auto font-weight-bold text-right"},Xe=e("br",null,null,-1),Ze=e("div",{class:"v-col-12 v-col-md-1 py-1"},"IMG",-1),el=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ITEM DESC",-1),ll=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ASSET NO",-1),al=e("div",{class:"v-col-12 v-col-md-1 py-1"},"QTY",-1),sl=e("div",{class:"v-col-12 v-col-md-1 py-1"},"UOM",-1),tl=e("div",{class:"v-col-12 v-col-md-1 py-1"},"WEIGHT",-1),ol=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ITEM VALUE",-1),rl=e("div",{class:"v-col-12 v-col-md-1 py-1"},"COUNTRY OF ORIGIN",-1),dl=e("div",{class:"v-col-12 v-col-md-2 py-1"},[o(" REMARKS"),e("br"),o("REASON FOR REQUEST ")],-1),nl={class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},cl={style:{position:"relative"}},il={key:0,class:"checkbox-notice"},ul={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},vl={key:0},_l={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},pl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},yl={key:1,class:"bg-light-gray d-flex flex-column-reverse flex-start-end"},hl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},fl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},ml={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},kl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},gl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},xl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},bl={key:0,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},Vl={key:1,class:"v-col-12 v-col-md-2 py-1 d-flex"},wl={key:0},El=e("strong",null," Asset Supervisor - Projects",-1),Cl=e("br",null,null,-1),Al={key:2,class:"v-col-12 v-col-md-2 py-1"},ql={key:0},Rl=e("strong",null," Asset Supervisor - Projects",-1),Tl=e("br",null,null,-1),jl={style:{"text-wrap":"wrap"}},Ul={key:1},Ol=e("strong",null," Commercial Manager - Projects",-1),Il=e("br",null,null,-1),Sl={style:{"text-wrap":"wrap"}},Pl={key:2},Dl=e("strong",null," Transport",-1),Nl=e("br",null,null,-1),$l={style:{"text-wrap":"wrap"}},Bl={key:3},Ll=e("strong",null," Releasing",-1),Fl=e("br",null,null,-1),Ml={style:{"text-wrap":"wrap"}},zl={key:3,class:"v-col-12 v-col-md-2 py-1"},Hl={key:0},Kl=e("strong",null," Asset Supervisor - Projects",-1),Yl=e("br",null,null,-1),Gl={style:{"text-wrap":"wrap"}},Jl={key:1},Ql=e("strong",null," Commercial Manager - Projects",-1),Wl=e("br",null,null,-1),Xl={style:{"text-wrap":"wrap"}},Zl={key:2},ea=e("strong",null," Transport",-1),la=e("br",null,null,-1),aa={style:{"text-wrap":"wrap"}},sa={key:4,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},ta={key:0},oa=e("strong",null," Asset Supervisor - Projects",-1),ra=e("br",null,null,-1),da={style:{"text-wrap":"wrap"}},na={key:1},ca=e("strong",null," Commercial Manager - Projects",-1),ia=e("br",null,null,-1),ua={style:{"text-wrap":"wrap"}},va={key:2},_a=e("strong",null," Transport",-1),pa=e("br",null,null,-1),ya={style:{"text-wrap":"wrap"}},ha={key:3},fa=e("strong",null," Releasing",-1),ma=e("br",null,null,-1),ka={style:{"text-wrap":"wrap"}},ga={key:0,class:"my-auto"},xa={class:"pa-0 ma-0 v-col-1 my-auto",style:{position:"relative"}},ba={key:0,class:"checkbox-notice"},Va={key:5,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},wa={key:0,style:{"border-bottom":"1px solid #000000"},class:"pa-1"},Ea={key:0},Ca=e("strong",null," Asset Supervisor - Projects",-1),Aa=e("br",null,null,-1),qa={style:{"text-wrap":"wrap"}},Ra={key:1},Ta=e("strong",null," Commercial Manager - Projects",-1),ja=e("br",null,null,-1),Ua={style:{"text-wrap":"wrap"}},Oa={key:2},Ia=e("strong",null," Transport",-1),Sa=e("br",null,null,-1),Pa={style:{"text-wrap":"wrap"}},Da={key:3},Na=e("strong",null," Releasing",-1),$a=e("br",null,null,-1),Ba={style:{"text-wrap":"wrap"}},La={key:4},Fa=e("strong",null," Receiver",-1),Ma={style:{"text-wrap":"wrap"}},za={key:1},Ha={key:2},Ka={key:3},Ya={key:0,class:"v-col-12 text-center font-weight-bold text-info"},Ga=e("br",null,null,-1),Ja={key:1,class:"v-col-12 text-center font-weight-bold text-info"},Qa={key:0,class:"ml-5 d-flex"},Wa=e("div",{class:"px-2 mr-5"},"|",-1),Xa={key:1,class:"ml-6"},Za={class:"v-col-12 px-0 my-0"},es=["data"],ls={class:"v-col-12 v-col-md-3 pa-0 mb-4"},as=e("div",{class:"text-center py-1 font-weight-bold"}," Requested By ",-1),ss={class:"text-center py-1"},ts={class:"text-center py-1"},os={class:"text-center text-caption"},rs={key:0},ds={key:0,class:"d-flex"},ns=["onClick"],cs=["onClick"],is={key:1},us=["onClick"],vs=["onClick"],_s={class:"text-center py-1"},ps={class:"text-center py-1"},ys={class:"text-center text-caption"},hs={key:2,class:"v-col-12 text-caption",style:{border:"1px solid red","border-radius":"5px"}},fs={class:"v-col-12 text-center"},ms=e("div",{class:"v-col-12 text-center mt-3 font-weight-bold"}," REASON FOR REJECTION ",-1),ks={class:"v-col-12"},ws={__name:"Approvals",setup(gs){const u=Ie(),ye=f(!0),v=f({}),ee=f({}),x=f(!1),le=f(!1),ae=f(!1),se=f(!1),R=f(!1),N=f([]),H=f(!1),$=f(""),K=f(!1),Ee=f(u.query.id),m=f(""),te=f(0),Q=f([]),he=async()=>{let _={id:u.query.id,profile_id:u.query.pid,order:u.query.o};if(!u.query.id||!u.query.pv){ye.value=!1;return}await axios.post("/api/pv/fetch/request-assets/data",_).then(i=>{var k,T,j,g,q,G,J,l,b,w,E;if(v.value=i.data,!v.value.access){ye.value=!1;return}m.value=(T=(k=i.data)==null?void 0:k.data)==null?void 0:T.status,te.value=(g=(j=i.data)==null?void 0:j.data)==null?void 0:g.request_type_id,Q.value=(G=(q=i.data)==null?void 0:q.data)==null?void 0:G.attachment,((b=(l=(J=v.value)==null?void 0:J.data)==null?void 0:l.request_approvals)==null?void 0:b.length)>0&&(x.value=v.value.data.request_approvals.filter(c=>{var t;return c.profile_id==u.query.pid&&c.orders==u.query.o&&c.status=="awaiting-approval"&&((t=c.profile)==null?void 0:t.role)=="asset-supervisor"})[0],le.value=v.value.data.request_approvals.filter(c=>c.profile_id==u.query.pid&&c.orders==u.query.o&&c.status=="awaiting-approval"&&c.approval_type=="releasing")[0],ae.value=v.value.data.request_approvals.filter(c=>c.profile_id==u.query.pid&&c.orders==u.query.o&&c.status=="awaiting-approval"&&c.approval_type=="transport")[0],se.value=v.value.data.request_approvals.filter(c=>{var t;return c.profile_id==u.query.pid&&c.orders==u.query.o&&c.status=="awaiting-approval"&&((t=c.profile)==null?void 0:t.role)=="commercial-manager"})[0],R.value=v.value.data.request_approvals.filter(c=>c.profile_id==u.query.pid&&c.orders==u.query.o&&c.status=="awaiting-approval"&&c.approval_type=="receiver")[0],de.value=v.value.data.request_approvals[v.value.data.request_approvals.length-1].approval_type,(R.value||x.value)&&m.value!="cancelled"&&(K.value=!0)),N.value=(E=(w=v.value)==null?void 0:w.data)==null?void 0:E.items}).catch(i=>{console.log(i.response.data)})},oe=f(1),B=f("image"),Ce=(_,i)=>{let k=_.path.split(".");B.value=k[k.length-1],oe.value=i,L.value=!0},Ae=()=>{window.print()},re=f(window.location.origin),L=f(!1),fe=f(1),qe=_=>{fe.value=_,L.value=!0},de=f(""),me=f({}),Re=_=>{H.value=!0,me.value=_},Te=()=>{H.value=!1,$.value=""},W=(_,i=null)=>{if(H.value=!1,!(m.value=="cancelled"||_.status=="reject")&&(_.status=="awaiting-approval"||_.status=="reject")&&u.query.pid==_.profile_id&&u.query.o==_.orders){ee.value={status:!0,type:"info",text:"Please wait..."};let k=[];(x.value||se.value||R.value||le.value||ae.value)&&(k=N.value.map((g,q)=>(delete g.created_at,delete g.assets,delete g.updated_at,delete g.attachment,g)));let T={},j="";$.value&&i&&(j=$.value),T={profile_id:u.query.pid,id:u.query.id,order:u.query.o,type:v.value.data.types,assets:k,is_reject:j,requestor_id:v.value.data.profile_id},axios.post("/api/pv/store/request-asset/approve-data",T).then(g=>{let q="success";g.data.success||(q="error"),ee.value={status:!0,type:q,text:g.data.message},K.value=!1,setTimeout(()=>{he()},500)}).catch(g=>{console.log(g.response.data)});return}},je=_=>{if(_=="approve")return"Approved";if(_=="reviewer")return"Reviewed";if(_=="receiver")return"Received";if(_=="transport")return"Transport Arranged";if(_=="releasing")return"Released";if(_=="verify")return"Verified"},Ue=()=>{let _=R.value;K.value=!1,N.value.map(i=>{_?i.is_received=Y.value:i.is_available=Y.value})},Oe=(_,i=6)=>{let k="00000"+_;return k.substring(k.length-i)},ke=()=>{let _=!0,i=R.value;N.value.map(k=>{i?k.is_received||(_=!1):k.is_available||(_=!1)}),Y.value=_},Y=f(!1);return he(),(_,i)=>(a(),V(Se,{style:{"max-width":"90%"},class:"mt-0 pt-0"},{default:p(()=>{var k,T,j,g,q,G,J;return[((k=N.value)==null?void 0:k.length)>0?(a(),V(C,{key:0,class:"mt-0 pt-0 no-print mt-2"},{default:p(()=>[e("div",null,[s(ce,{color:"primary",size:"small",onClick:Ae},{default:p(()=>[o("Print")]),_:1})])]),_:1})):d("",!0),s(C,{class:"mt-0 pt-0"},{default:p(()=>{var l,b,w,E,c,t,U,O,I;return[e("div",Me,[e("div",ze,[He,e("div",null,n((b=(l=v.value.data)==null?void 0:l.transfer_from)==null?void 0:b.title),1)]),e("div",Ke,[Ye,e("div",null,n((E=(w=v.value.data)==null?void 0:w.transfer_to)==null?void 0:E.title),1)])]),e("div",Ge,[Je,Qe,e("strong",null,n((t=(c=v.value.data)==null?void 0:c.setup)==null?void 0:t.title),1)]),e("div",We,[o(" SN-"+n(((O=(U=v.value)==null?void 0:U.data)==null?void 0:O.types)=="request"?"5":"3")+n(Oe(Ee.value)),1),Xe,o(" "+n(y(pe)((I=v.value.data)==null?void 0:I.created_at)),1)])]}),_:1}),s(P,{class:"my-5"}),s(C,null,{default:p(()=>[Ze,el,ll,al,sl,tl,ol,rl,dl,e("div",nl,[o(" REMARKS "),e("div",cl,[K.value?(a(),r("div",il)):d("",!0),x.value||R.value?(a(),V(ie,{key:1,modelValue:Y.value,"onUpdate:modelValue":[i[0]||(i[0]=l=>Y.value=l),Ue],class:"pa-0 ma-0 v-col-1","hide-details":"",disabled:m.value=="cancelled",variant:"underlined",density:"compact"},null,8,["modelValue","disabled"])):d("",!0)])])]),_:1}),(a(!0),r(Z,null,X(N.value,(l,b)=>(a(),V(C,{class:"mt-1 approval-form-pr",key:l.id},{default:p(()=>{var w,E,c,t,U,O,I;return[e("div",ul,[(w=l.attachment)!=null&&w.id?(a(),r("div",vl,[s(D,{onClick:()=>qe(l),maxHeight:"40",variant:"text",class:"ma-2"},{default:p(()=>[s(A,{size:"large",icon:y(ge),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"]),s(ue,{modelValue:L.value,"onUpdate:modelValue":i[1]||(i[1]=h=>L.value=h),width:"95%","max-width":"900"},{default:p(()=>[s(D,{class:"bg-black"},{default:p(()=>[e("div",_l,[s(xe,{src:re.value+"/file/"+fe.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])])):(a(),V(D,{key:1,maxHeight:"40",variant:"text",class:"ma-2"},{default:p(()=>[s(A,{size:"large",icon:y(Pe)},null,8,["icon"])]),_:1})),s(S,{value:l.item_description,variant:"underlined",density:"compact","hide-details":"",rows:"2",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0},null,8,["value"])]),e("div",pl,[x.value&&m.value!="cancelled"?(a(),V(F,{key:0,modelValue:l.asset_code,"onUpdate:modelValue":h=>l.asset_code=h,variant:"underlined",density:"compact","hide-details":"",readonly:!x.value||m.value=="cancelled",class:M(`${!x.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])):(a(),r("div",yl,n(l.asset_code),1))]),e("div",hl,[s(F,{value:l.qty,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",fl,[s(F,{value:l.uom,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",ml,[s(F,{modelValue:l.weight,"onUpdate:modelValue":h=>l.weight=h,variant:"underlined",density:"compact","hide-details":"",readonly:!x.value||m.value=="cancelled",class:M(`${!x.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",kl,[s(F,{modelValue:l.item_value,"onUpdate:modelValue":h=>l.item_value=h,variant:"underlined",density:"compact","hide-details":"",readonly:!x.value||m.value=="cancelled",class:M(`${!x.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",gl,[s(F,{modelValue:l.country_of_origin,"onUpdate:modelValue":h=>l.country_of_origin=h,variant:"underlined",density:"compact","hide-details":"",readonly:!x.value||m.value=="cancelled",class:M(`${!x.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",xl,[s(S,{value:l.reason_for_request,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0,rows:"2"},null,8,["value"])]),x.value?(a(),r("div",bl,[s(S,{modelValue:l.remarks,"onUpdate:modelValue":h=>l.remarks=h,variant:"underlined",density:"compact","hide-details":"",class:M(["text-remarks",`${m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`]),placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue","class"]),s(ie,{disabled:m.value=="cancelled",modelValue:l.is_available,"onUpdate:modelValue":[h=>l.is_available=h,ke],class:"pa-0 ma-0 v-col-1","hide-details":"",variant:"underlined",density:"compact"},null,8,["disabled","modelValue","onUpdate:modelValue"])])):d("",!0),se.value?(a(),r("div",Vl,[e("div",null,[l.remarks?(a(),r("div",wl,[El,o(),Cl,e("p",null,n(l.remarks),1),o(" ------- ")])):d("",!0),s(S,{modelValue:l.remarks_commercial,"onUpdate:modelValue":h=>l.remarks_commercial=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])])):le.value?(a(),r("div",Al,[e("div",null,[l.remarks?(a(),r("div",ql,[Rl,o(),Tl,e("pre",jl,n(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(a(),r("div",Ul,[Ol,o(),Il,e("pre",Sl,n(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(a(),r("div",Pl,[Dl,o(),Nl,e("pre",$l,n(l.remarks_transport),1),o(" ------- ")])):d("",!0),l.remarks_release?(a(),r("div",Bl,[Ll,o(),Fl,e("pre",Ml,n(l.remarks_release),1),o(" ------- ")])):d("",!0)]),s(S,{modelValue:l.remarks_release,"onUpdate:modelValue":h=>l.remarks_release=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):ae.value?(a(),r("div",zl,[e("div",null,[l.remarks?(a(),r("div",Hl,[Kl,o(),Yl,e("pre",Gl,n(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(a(),r("div",Jl,[Ql,o(),Wl,e("pre",Xl,n(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(a(),r("div",Zl,[ea,o(),la,e("pre",aa,n(l.remarks_transport),1),o(" ------- ")])):d("",!0)]),s(S,{modelValue:l.remarks_transport,"onUpdate:modelValue":h=>l.remarks_transport=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):R.value?(a(),r("div",sa,[e("div",null,[e("div",null,[l.remarks?(a(),r("div",ta,[oa,o(),ra,e("pre",da,n(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(a(),r("div",na,[ca,o(),ia,e("pre",ua,n(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(a(),r("div",va,[_a,o(),pa,e("pre",ya,n(l.remarks_transport),1),o(" ------- ")])):d("",!0),l.remarks_release?(a(),r("div",ha,[fa,o(),ma,e("pre",ka,n(l.remarks_release),1),o(" ------- ")])):d("",!0)]),s(S,{modelValue:l.remarks_receive,"onUpdate:modelValue":h=>l.remarks_receive=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(c=(E=v.value)==null?void 0:E.data)!=null&&c.is_available?(a(),r("div",ga,[s(A,{class:"mt-3",icon:l.is_available?y(ve):y(_e),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),e("div",xa,[K.value?(a(),r("div",ba)):d("",!0),s(ie,{modelValue:l.is_received,"onUpdate:modelValue":[h=>l.is_received=h,ke],"hide-details":"",variant:"underlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])])])):(a(),r("div",Va,[l.remarks||l.remarks_commercial||l.remarks_release||l.remarks_receive||l.remarks_transport?(a(),r("div",wa,[l.remarks?(a(),r("div",Ea,[Ca,o(),Aa,e("pre",qa,n(l.remarks),1),o(" ------- ")])):d("",!0),l.remarks_commercial?(a(),r("div",Ra,[Ta,o(),ja,e("pre",Ua,n(l.remarks_commercial),1),o(" ------- ")])):d("",!0),l.remarks_transport?(a(),r("div",Oa,[Ia,o(),Sa,e("pre",Pa,n(l.remarks_transport),1),o(" ------- ")])):d("",!0),l.remarks_release?(a(),r("div",Da,[Na,o(),$a,e("pre",Ba,n(l.remarks_release),1),o(" ------- ")])):d("",!0),l.remarks_receive?(a(),r("div",La,[Fa,o(),e("pre",Ma,n(l.remarks_receive),1)])):d("",!0)])):(a(),r("div",za)),(U=(t=v.value)==null?void 0:t.data)!=null&&U.is_available?(a(),r("div",Ha,[s(A,{class:"mt-3",icon:l.is_available?y(ve):y(_e),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),((I=(O=v.value)==null?void 0:O.data)==null?void 0:I.status)=="complete"&&de.value=="receiver"?(a(),r("div",Ka,[s(A,{class:"mt-3",icon:l.is_received?y(be):y(Ve),color:`${l.is_received?"success":"error"}`},null,8,["icon","color"])])):d("",!0)]))]}),_:2},1024))),128)),x.value?(a(),V(C,{key:1,class:"mt-3"},{default:p(()=>[m.value!=="cancelled"?(a(),r("div",Ya,[o(" YOU CAN UPDATE SOME DATA AND"),Ga,o(" PLEASE TICK CHECKBOX IF ASSET IS AVAILABLE BEFORE CLICKING THE APPROVE BUTTON ")])):(a(),r("div",Ja," THIS REQUEST HAS BEEN CANCELLED. "))]),_:1})):d("",!0),(j=(T=v.value)==null?void 0:T.data)!=null&&j.is_available&&m.value!=="cancelled"?(a(),V(C,{key:2,class:"mt-6 mb-2"},{default:p(()=>[s(D,{variant:"text",class:"v-col-12 text-center pt-2 font-weight-bold pb-0 d-flex justify-center"},{default:p(()=>{var l;return[e("div",null,[s(A,{icon:y(ve),color:"success"},null,8,["icon"]),o(" AVAILABLE "),s(A,{icon:y(_e),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT AVAILABLE ")]),R.value?(a(),r("div",Qa,[Wa,e("div",null,[s(A,{icon:y(De)},null,8,["icon"]),o(" TICK RECEIVED ASSETS "),s(P,{thickness:8,color:"error",class:"divider-notice"})])])):d("",!0),((l=v.value.data)==null?void 0:l.status)=="complete"&&de.value=="receiver"?(a(),r("div",Xa,[s(A,{icon:y(be),color:"success"},null,8,["icon"]),o(" RECEIVED "),s(A,{icon:y(Ve),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT RECEIVE ")])):d("",!0)]}),_:1})]),_:1})):d("",!0),s(C,{class:"mt-3"},{default:p(()=>[e("div",Za,[s(P),s(P)])]),_:1}),te.value==2&&((g=Q.value)==null?void 0:g.length)>0?(a(),V(C,{key:3,class:"my-3 d-flex justify-center"},{default:p(()=>[(a(!0),r(Z,null,X(Q.value,(l,b)=>(a(),r("div",{key:l.id,class:"pa-2",style:{position:"relative"}},[s(D,{onClick:()=>Ce(l,b)},{default:p(()=>[s(A,{size:"large",icon:y(ge),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"])]))),128)),s(ue,{modelValue:L.value,"onUpdate:modelValue":i[3]||(i[3]=l=>L.value=l),width:"95%","max-width":"900"},{default:p(()=>[s(D,{class:"bg-black"},{default:p(()=>[s(Ne,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:oe.value,"onUpdate:modelValue":i[2]||(i[2]=l=>oe.value=l)},{default:p(()=>[(a(!0),r(Z,null,X(Q.value,(l,b)=>(a(),V($e,{key:b,"reverse-transition":"fade",transition:"fade"},{default:p(()=>[e("div",{style:z(`${B.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[B.value=="jpg"||B.value=="jpeg"||B.value=="png"?(a(),V(xe,{key:0,src:re.value+"/file/"+l.path},null,8,["src"])):d("",!0),B.value=="pdf"?(a(),r("object",{key:1,data:re.value+"/file/"+l.path,type:"application/pdf",width:"100%",height:"800px"},null,8,es)):d("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):d("",!0),((q=v.value.data)==null?void 0:q.request_approvals.length)>0?(a(),V(C,{key:4},{default:p(()=>{var l,b,w,E,c;return[e("div",ls,[e("div",{class:"text-center mx-2 py-4 font-weight-bold",style:z(`${m.value=="cancelled"?"color: red;":"color: rgb(3, 167, 3);"} border: 1px solid #ccc; font-size: 17px;`)},n(m.value=="cancelled"?"CANCELLED":"APPROVED"),5),as,e("div",ss,n((b=(l=v.value.data)==null?void 0:l.profile)==null?void 0:b.display_name),1),e("div",ts,n((E=(w=v.value.data)==null?void 0:w.profile)==null?void 0:E.designation),1),e("div",os,n(y(pe)((c=v.value.data)==null?void 0:c.created_at)),1)]),(a(!0),r(Z,null,X(v.value.data.request_approvals,t=>{var U,O,I,h;return a(),r("div",{class:"v-col-12 v-col-md-3 pa-0 mb-4",key:t.id},[(t.profile.ecode=="100884"||t.profile.ecode=="102587"||t.profile.ecode=="100316"||((U=t.profile)==null?void 0:U.role)=="commercial-manager"||((O=t.profile)==null?void 0:O.role)=="technical-operation"&&te.value==2)&&y(u).query.pid==t.profile_id&&y(u).query.o==t.orders?(a(),r("div",rs,[t.status=="awaiting-approval"?(a(),r("div",ds,[e("div",{onClick:ne=>Re(t),class:"cursor-pointer text-center py-5 v-col-6",style:z(`border:1px solid #ccc; ${y(u).query.pid==t.profile_id&&y(u).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":"background-color: none;"}`)}," REJECT ",12,ns),e("div",{onClick:ne=>W(t,"reject"),class:"cursor-pointer text-center py-5 v-col-6",style:z(`border:1px solid #ccc; ${y(u).query.pid==t.profile_id&&y(u).query.o==t.orders?"background-color: rgb(3, 167, 3);color:#fff;":"background-color: none"}`)}," APPROVE ",12,cs)])):t.status=="reject"||t.status=="done"||t.status=="pending"?(a(),r("div",is,[e("div",{onClick:ne=>W(t),class:"cursor-pointer text-center mx-2 py-5",style:z(`border:1px solid #ccc; ${t.status=="reject"&&y(u).query.pid==t.profile_id&&y(u).query.o==t.orders?"background-color: gray; color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},n(t.status=="done"?"APPROVED":t.status=="reject"?"REJECTED":"CLICK TO APPROVE"),13,us)])):d("",!0)])):(a(),r("div",{key:1,onClick:ne=>W(t),class:"cursor-pointer text-center mx-2 py-5",style:z(`border:1px solid #ccc; ${m.value!="cancelled"&&t.status=="awaiting-approval"&&y(u).query.pid==t.profile_id&&y(u).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},n(t.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,vs)),e("div",{class:M(`text-center py-1 font-weight-bold ${t.status=="reject"?"text-error text-uppercase":""}`)},n(t.status=="reject"?"Rejected":je(t.approval_type))+" By ",3),e("div",_s,n((I=t.profile)==null?void 0:I.display_name),1),e("div",ps,n((h=t.profile)==null?void 0:h.designation),1),e("div",ys,n(t.date_approved?y(pe)(t.date_approved):""),1),t.reason_rejected?(a(),r("div",hs,[o(" Reason rejected "),s(P,{class:"my-2"}),o(" "+n(t.reason_rejected),1)])):d("",!0)])}),128))]}),_:1})):d("",!0),((J=(G=v.value)==null?void 0:G.data)==null?void 0:J.status)!=="complete"?(a(),V(C,{key:5,class:"no-print"},{default:p(()=>[e("div",fs,[s(P),o(" You will receive a notification once you click the approve button. "),s(P)])]),_:1})):d("",!0),s(ue,{width:"500",modelValue:H.value,"onUpdate:modelValue":i[6]||(i[6]=l=>H.value=l),persistent:""},{default:p(()=>[s(D,null,{default:p(()=>[s(Be,null,{default:p(()=>[s(C,null,{default:p(()=>[ms,e("div",ks,[s(S,{modelValue:$.value,"onUpdate:modelValue":i[4]||(i[4]=l=>$.value=l),label:"STATE YOUR REASON HERE",variant:"outlined"},null,8,["modelValue"])])]),_:1})]),_:1}),s(Le,null,{default:p(()=>[s(we),s(ce,{onClick:Te},{default:p(()=>[o("Cancel")]),_:1}),s(ce,{color:"success",disabled:!$.value,onClick:i[5]||(i[5]=l=>W(me.value,"reject"))},{default:p(()=>[o("Confirm")]),_:1},8,["disabled"]),s(we)]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Fe,{options:ee.value},null,8,["options"])]}),_:1}))}};export{ws as default};
