import{G as De,u as Be,r as h,c as V,w as p,m as Le,o as s,s as j,b as l,d as t,e as o,j as le,z as d,t as i,y as _,E as z,p as r,ac as _e,q as re,C as T,ag as Ve,k as F,Q as we,R as ye,ax as ze,ad as D,U as B,i as ae,ay as de,az as ne,aA as Ee,aB as Ae,F as ce,aC as Fe,S as Me,T as Ge,ab as Y,f as Ke,Z as He,_ as Ce}from"./app-8f2f9082.js";import{u as he}from"./formatDate-559e9d83.js";import{_ as Ye}from"./AppSnackBar-7162348a.js";const Je={class:"v-col-12 v-col-md-3 mt-auto font-weight-bold"},Qe={class:"d-flex"},We=l("div",{class:"mr-2"},"FROM:",-1),Xe={class:"d-flex"},Ze=l("div",{class:"mr-6 pr-2"},"TO:",-1),el={class:"v-col-12 v-col-md-6 text-center"},ll=l("img",{src:"/assets/images/grandiose-logo.jpg",style:{"max-height":"100px"}},null,-1),al=l("br",null,null,-1),sl={class:"v-col-12 v-col-md-3 mt-auto approval-date font-weight-bold"},tl=l("br",null,null,-1),ol=l("div",{class:"v-col-1 v-col-md-1 py-1"},"IMG",-1),rl=l("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM DESC",-1),dl=l("div",{class:"v-col-1 v-col-md-1 py-1"},"ASSET NO",-1),nl=l("div",{class:"v-col-1 v-col-md-1 py-1"},"QTY",-1),cl=l("div",{class:"v-col-1 v-col-md-1 py-1"},"UOM",-1),ul=l("div",{class:"v-col-1 v-col-md-1 py-1"},"WEIGHT(KG)",-1),il=l("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM VALUE",-1),vl=l("div",{class:"v-col-2 v-col-md-2 py-1"},[o(" REMARKS"),l("br"),o("REASON FOR REQUEST ")],-1),pl={class:"v-col-2 v-col-md-3 py-1 d-flex justify-space-between"},_l={style:{position:"relative"}},yl={key:0,class:"checkbox-notice"},hl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},fl={key:0},ml={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},kl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},gl={key:1,class:"bg-light-gray d-flex flex-column-reverse flex-start-end border-bottom"},xl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},bl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},Vl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},wl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},El={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},Al={key:0,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},Cl={key:1,class:"v-col-12 v-col-md-3 py-1 d-flex"},ql={style:{width:"100%"}},Rl={key:0},Tl=l("strong",null," Asset Supervisor - Projects",-1),Ul=l("br",null,null,-1),jl={key:0},Il={key:2,class:"v-col-12 v-col-md-3 py-1"},Sl={key:0},Ol=l("strong",null," Asset Supervisor - Projects",-1),Pl=l("br",null,null,-1),$l={style:{"text-wrap":"wrap"}},Nl={key:1},Dl=l("strong",null," Commercial Manager - Projects",-1),Bl=l("br",null,null,-1),Ll={style:{"text-wrap":"wrap"}},zl={key:2},Fl=l("strong",null," Transport",-1),Ml=l("br",null,null,-1),Gl={style:{"text-wrap":"wrap"}},Kl={key:3},Hl=l("strong",null," Releasing",-1),Yl=l("br",null,null,-1),Jl={style:{"text-wrap":"wrap"}},Ql={key:3,class:"v-col-12 v-col-md-3 py-1"},Wl={key:0},Xl=l("strong",null," Asset Supervisor - Projects",-1),Zl=l("br",null,null,-1),ea={style:{"text-wrap":"wrap"}},la={key:1},aa=l("strong",null," Commercial Manager - Projects",-1),sa=l("br",null,null,-1),ta={style:{"text-wrap":"wrap"}},oa={key:2},ra=l("strong",null," Transport",-1),da=l("br",null,null,-1),na={style:{"text-wrap":"wrap"}},ca={key:4,class:"v-col-12 v-col-md-3 py-1 d-flex justify-space-between"},ua={key:0},ia=l("strong",null," Asset Supervisor - Projects",-1),va=l("br",null,null,-1),pa={style:{"text-wrap":"wrap"}},_a={key:1},ya=l("strong",null," Commercial Manager - Projects",-1),ha=l("br",null,null,-1),fa={style:{"text-wrap":"wrap"}},ma={key:2},ka=l("strong",null," Transport",-1),ga=l("br",null,null,-1),xa={style:{"text-wrap":"wrap"}},ba={key:3},Va=l("strong",null," Releasing",-1),wa=l("br",null,null,-1),Ea={style:{"text-wrap":"wrap"}},Aa={key:0,class:"my-auto"},Ca={class:"pa-0 ma-0 v-col-1 my-auto",style:{position:"relative"}},qa={key:0,class:"checkbox-notice"},Ra={key:5,class:"v-col-12 v-col-md-3 py-1 d-flex justify-space-between ssss"},Ta={key:0,style:{"border-bottom":"1px solid #000000"},class:"pa-1"},Ua={key:0},ja=l("strong",null," Asset Supervisor - Projects",-1),Ia=l("br",null,null,-1),Sa={style:{"text-wrap":"wrap"}},Oa={key:1},Pa=l("strong",null," Commercial Manager - Projects",-1),$a=l("br",null,null,-1),Na={style:{"text-wrap":"wrap"}},Da={key:2},Ba=l("strong",null," Transport",-1),La=l("br",null,null,-1),za={style:{"text-wrap":"wrap"}},Fa={key:3},Ma=l("strong",null," Releasing",-1),Ga=l("br",null,null,-1),Ka={style:{"text-wrap":"wrap"}},Ha={key:4},Ya=l("strong",null," Receiver",-1),Ja={style:{"text-wrap":"wrap"}},Qa={key:1},Wa={key:2},Xa={key:3},Za={key:0,class:"v-col-12 text-center font-weight-bold text-info"},es=l("br",null,null,-1),ls={key:1,class:"v-col-12 text-center font-weight-bold text-info"},as={key:0,class:"ml-5 d-flex"},ss=l("div",{class:"px-2 mr-5"},"|",-1),ts={key:1,class:"ml-6"},os={class:"v-col-12 px-0 my-0"},rs=["data"],ds={class:"v-col-12 v-col-md-3 pa-0 mb-4"},ns=l("div",{class:"text-center py-1 font-weight-bold"}," Requested By ",-1),cs={class:"text-center py-1"},us={class:"text-center py-1"},is={class:"text-center text-caption"},vs={key:0},ps={key:0,class:"d-flex"},_s=["onClick"],ys=["onClick"],hs={key:1},fs=["onClick"],ms=["onClick"],ks={class:"text-center py-1"},gs={class:"text-center py-1"},xs={class:"text-center text-caption"},bs={key:2,class:"v-col-12 text-caption",style:{border:"1px solid red","border-radius":"5px"}},Vs={class:"v-col-12 text-center"},ws=l("div",{class:"v-col-12 text-center mt-3 font-weight-bold"}," REASON FOR REJECTION ",-1),Es={class:"v-col-12"},Ts={__name:"Approvals",setup(As){const v=De(),qe=Be(),fe=h(!0),n=h({}),S=h({}),m=h(!1),q=h(!1),R=h(!1),g=h(!1),O=h(!1),L=h([]),J=h(!1),M=h(""),Q=h(!1),Re=h(v.query.id),f=h(""),ue=h(0),se=h([]),te=h(!1),me=async()=>{let u={id:v.query.id,profile_id:v.query.pid,order:v.query.o};if(!v.query.id||!v.query.pv){fe.value=!1;return}await axios.post("/api/pv/fetch/request-assets/data",u).then(c=>{var U,P,b,I,X,Z,e,k,w,E,C;if(n.value=c.data,!n.value.access){fe.value=!1;return}f.value=(P=(U=c.data)==null?void 0:U.data)==null?void 0:P.status,ue.value=(I=(b=c.data)==null?void 0:b.data)==null?void 0:I.request_type_id,se.value=(Z=(X=c.data)==null?void 0:X.data)==null?void 0:Z.attachment,((w=(k=(e=n.value)==null?void 0:e.data)==null?void 0:k.request_approvals)==null?void 0:w.length)>0&&(m.value=n.value.data.request_approvals.filter(a=>{var A;return a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&((A=a.profile)==null?void 0:A.role)=="asset-supervisor"})[0],q.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="releasing")[0],R.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="transport")[0],g.value=n.value.data.request_approvals.filter(a=>{var A;return a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&((A=a.profile)==null?void 0:A.role)=="commercial-manager"})[0],O.value=n.value.data.request_approvals.filter(a=>a.profile_id==v.query.pid&&a.orders==v.query.o&&a.status=="awaiting-approval"&&a.approval_type=="receiver")[0],pe.value=n.value.data.request_approvals[n.value.data.request_approvals.length-1].approval_type,(O.value||m.value)&&f.value!="cancelled"&&(Q.value=!0)),te.value=!1,n.value.data.request_approvals.filter(a=>a.status=="done"&&a.approval_type=="reviewer")[0]&&(te.value=!0),L.value=(C=(E=n.value)==null?void 0:E.data)==null?void 0:C.items}).catch(c=>{console.log(c.response.data)})},ie=h(1),G=h("image"),Te=(u,c)=>{let x=u.path.split(".");G.value=x[x.length-1],ie.value=c,K.value=!0},Ue=()=>{window.print()},ve=h(window.location.origin),K=h(!1),ke=h(1),je=u=>{ke.value=u,K.value=!0},pe=h(""),ge=h({}),Ie=u=>{J.value=!0,ge.value=u},Se=()=>{J.value=!1,M.value=""},Oe=(u,c)=>{if(u.length<11||n.value.data.types!=="request"||(S.value={status:!1},u.split("-").length<3))return!1;S.value={status:!0,type:"info",text:"Validating asset code..."},axios.get("/api/fetch-asset-info/by/asset-code-validation/"+u).then(U=>{setTimeout(()=>{if(!U.data.status){S.value={status:!0,type:"error",text:"Asset Code is invalid"};return}if(U.data.status.title==="In-Used"){S.value={status:!0,type:"error",text:"Asset is currently In-Used. You cannot use this asset code."},L.value[c].asset_code="";return}S.value={status:!0,type:"success",text:"Asset is available."}},1e3)})},oe=(u,c=null)=>{if(J.value=!1,!(f.value=="cancelled"||u.status=="reject")&&(u.status=="awaiting-approval"||u.status=="reject")&&v.query.pid==u.profile_id&&v.query.o==u.orders){S.value={status:!0,type:"info",text:"Please wait..."};let x=[];(m.value||g.value||O.value||q.value||R.value)&&(x=L.value.map((b,I)=>(delete b.created_at,delete b.assets,delete b.updated_at,delete b.attachment,b)));let U={},P="";M.value&&c&&(P=M.value),U={profile_id:v.query.pid,id:v.query.id,order:v.query.o,type:n.value.data.types,assets:x,is_reject:P,requestor_id:n.value.data.profile_id},axios.post("/api/pv/store/request-asset/approve-data",U).then(b=>{let I="success";b.data.success||(I="error"),S.value={status:!0,type:I,text:b.data.message},Q.value=!1,setTimeout(()=>{me()},500)}).catch(b=>{console.log(b.response.data)});return}},Pe=u=>{if(u=="approve")return"Approved";if(u=="reviewer")return"Reviewed";if(u=="receiver")return"Received";if(u=="transport")return"Transport Arranged";if(u=="releasing")return"Released";if(u=="verify")return"Verified"},$e=()=>{let u=O.value;Q.value=!1,L.value.map(c=>{u?c.is_received=W.value:c.is_available=W.value})},xe=u=>{localStorage.removeItem("grs-generate-list"),localStorage.setItem("grs-generate-list",btoa(JSON.stringify(n.value.data))),qe.push({name:u}).catch(c=>{})},Ne=(u,c=6)=>{let x="00000"+u;return x.substring(x.length-c)},be=()=>{let u=!0,c=O.value;L.value.map(x=>{c?x.is_received||(u=!1):x.is_available||(u=!1)}),W.value=u},W=h(!1);return me(),(u,c)=>(s(),V(Le,{style:{"max-width":"90%"},class:"mt-0 pt-0"},{default:p(()=>{var x,U,P,b,I,X,Z;return[((x=L.value)==null?void 0:x.length)>0?(s(),V(j,{key:0,class:"mt-0 pt-0 no-print mt-2"},{default:p(()=>{var e,k,w,E;return[l("div",null,[t(le,{color:"primary",class:"mx-1",size:"small",onClick:Ue},{default:p(()=>[o("Print")]),_:1}),(((e=n.value.data)==null?void 0:e.transfer_from.id)==45||((k=n.value.data)==null?void 0:k.transfer_to.id)==45)&&te.value&&n.value.data.status!=="reject"?(s(),V(le,{key:0,color:"primary",class:"mx-1",size:"small",onClick:c[0]||(c[0]=C=>xe("GenerateInvoice"))},{default:p(()=>[o("GENERATE INVOICE")]),_:1})):d("",!0),(((w=n.value.data)==null?void 0:w.transfer_from.id)==45||((E=n.value.data)==null?void 0:E.transfer_to.id)==45)&&te.value&&n.value.data.status!=="reject"?(s(),V(le,{key:1,color:"primary",class:"mx-1",size:"small",onClick:c[1]||(c[1]=C=>xe("GeneratePacking"))},{default:p(()=>[o("GENERATE PACKING LIST")]),_:1})):d("",!0)])]}),_:1})):d("",!0),t(j,{class:"mt-0 pt-0"},{default:p(()=>{var e,k,w,E,C,a,A,$,N;return[l("div",Je,[l("div",Qe,[We,l("div",null,i((k=(e=n.value.data)==null?void 0:e.transfer_from)==null?void 0:k.title),1)]),l("div",Xe,[Ze,l("div",null,i((E=(w=n.value.data)==null?void 0:w.transfer_to)==null?void 0:E.title),1)])]),l("div",el,[ll,al,l("strong",null,i((a=(C=n.value.data)==null?void 0:C.setup)==null?void 0:a.title),1)]),l("div",sl,[o(" SN-"+i((($=(A=n.value)==null?void 0:A.data)==null?void 0:$.types)=="request"?"5":"3")+i(Ne(Re.value)),1),tl,o(" "+i(_(he)((N=n.value.data)==null?void 0:N.created_at)),1)])]}),_:1}),t(z,{class:"my-5"}),t(j,null,{default:p(()=>[ol,rl,dl,nl,cl,ul,il,vl,l("div",pl,[o(" REMARKS "),l("div",_l,[Q.value?(s(),r("div",yl)):d("",!0),m.value||O.value?(s(),V(_e,{key:1,modelValue:W.value,"onUpdate:modelValue":[c[2]||(c[2]=e=>W.value=e),$e],class:"pa-0 ma-0 v-col-1","hide-details":"",disabled:f.value=="cancelled",variant:"underlined",density:"compact"},null,8,["modelValue","disabled"])):d("",!0)])])]),_:1}),(s(!0),r(ce,null,re(L.value,(e,k)=>(s(),V(j,{class:"mt-1 approval-form-pr",key:e.id},{default:p(()=>{var w,E,C,a,A,$,N,ee,H;return[l("div",hl,[(w=e.attachment)!=null&&w.id?(s(),r("div",fl,[t(F,{onClick:()=>je(e),maxHeight:"40",variant:"text",class:"ma-2"},{default:p(()=>[t(T,{size:"large",icon:_(Ve),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"]),t(ye,{modelValue:K.value,"onUpdate:modelValue":c[3]||(c[3]=y=>K.value=y),width:"95%","max-width":"900"},{default:p(()=>[t(F,{class:"bg-black"},{default:p(()=>[l("div",ml,[t(we,{src:ve.value+"/file/"+ke.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])])):(s(),V(F,{key:1,maxHeight:"40",variant:"text",class:"ma-2"},{default:p(()=>[t(T,{size:"large",icon:_(ze)},null,8,["icon"])]),_:1})),t(B,{modelValue:e.item_description,"onUpdate:modelValue":y=>e.item_description=y,variant:"underlined",density:"compact","hide-details":"",rows:"2",class:D(`${!m.value&&!g.value&&!q.value&&!R.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!m.value&&!g.value&&!q.value&&!R.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),l("div",kl,[(m.value||g.value||q.value||R.value)&&f.value!="cancelled"?(s(),V(ae,{key:0,modelValue:e.asset_code,"onUpdate:modelValue":[y=>e.asset_code=y,y=>Oe(e.asset_code,k)],variant:"underlined",density:"compact","hide-details":"",readonly:!m.value&&!g.value&&!q.value&&!R.value||f.value=="cancelled",class:D(`${!m.value&&!g.value&&!q.value&&!R.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])):(s(),r("div",gl,i(e.asset_code),1))]),l("div",xl,[t(ae,{modelValue:e.qty,"onUpdate:modelValue":y=>e.qty=y,variant:"underlined",density:"compact","hide-details":"",type:"number",readonly:!m.value&&!g.value||f.value=="cancelled",class:D(`${!m.value&&!g.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),l("div",bl,[t(ae,{modelValue:e.uom,"onUpdate:modelValue":y=>e.uom=y,variant:"underlined",density:"compact","hide-details":"",readonly:!m.value&&!g.value||f.value=="cancelled",class:D(`${!m.value&&!g.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),l("div",Vl,[t(ae,{modelValue:e.weight,"onUpdate:modelValue":y=>e.weight=y,variant:"underlined",density:"compact","hide-details":"",type:"number",class:D(`${!m.value&&!g.value&&!q.value&&!R.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!m.value&&!g.value&&!q.value&&!R.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),l("div",wl,[t(ae,{modelValue:e.item_value,"onUpdate:modelValue":y=>e.item_value=y,variant:"underlined",density:"compact","hide-details":"",type:"number",class:D(`${!m.value&&!g.value&&!q.value&&!R.value||f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),readonly:!m.value&&!g.value&&!q.value&&!R.value||f.value=="cancelled"},null,8,["modelValue","onUpdate:modelValue","class","readonly"])]),l("div",El,[t(B,{value:e.reason_for_request,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0,rows:"2"},null,8,["value"])]),m.value?(s(),r("div",Al,[t(B,{modelValue:e.remarks,"onUpdate:modelValue":y=>e.remarks=y,variant:"underlined",density:"compact","hide-details":"",class:D(["text-remarks",`${f.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`]),placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue","class"]),t(_e,{disabled:f.value=="cancelled",modelValue:e.is_available,"onUpdate:modelValue":[y=>e.is_available=y,be],class:"pa-0 ma-0 v-col-1","hide-details":"",variant:"underlined",density:"compact"},null,8,["disabled","modelValue","onUpdate:modelValue"])])):d("",!0),g.value?(s(),r("div",Cl,[l("div",ql,[e.remarks?(s(),r("div",Rl,[Tl,o(),Ul,l("p",null,i(e.remarks),1),o(" ------- ")])):d("",!0),t(B,{modelValue:e.remarks_commercial,"onUpdate:modelValue":y=>e.remarks_commercial=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(C=(E=n.value)==null?void 0:E.data)!=null&&C.is_available?(s(),r("div",jl,[t(T,{style:{position:"absolute",right:"60px"},class:"mt-3",icon:e.is_available?_(de):_(ne),color:`${e.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0)])):q.value?(s(),r("div",Il,[l("div",null,[e.remarks?(s(),r("div",Sl,[Ol,o(),Pl,l("pre",$l,i(e.remarks),1),o(" ------- ")])):d("",!0),e.remarks_commercial?(s(),r("div",Nl,[Dl,o(),Bl,l("pre",Ll,i(e.remarks_commercial),1),o(" ------- ")])):d("",!0),e.remarks_transport?(s(),r("div",zl,[Fl,o(),Ml,l("pre",Gl,i(e.remarks_transport),1),o(" ------- ")])):d("",!0),e.remarks_release?(s(),r("div",Kl,[Hl,o(),Yl,l("pre",Jl,i(e.remarks_release),1),o(" ------- ")])):d("",!0)]),t(B,{modelValue:e.remarks_release,"onUpdate:modelValue":y=>e.remarks_release=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):R.value?(s(),r("div",Ql,[l("div",null,[e.remarks?(s(),r("div",Wl,[Xl,o(),Zl,l("pre",ea,i(e.remarks),1),o(" ------- ")])):d("",!0),e.remarks_commercial?(s(),r("div",la,[aa,o(),sa,l("pre",ta,i(e.remarks_commercial),1),o(" ------- ")])):d("",!0),e.remarks_transport?(s(),r("div",oa,[ra,o(),da,l("pre",na,i(e.remarks_transport),1),o(" ------- ")])):d("",!0)]),t(B,{modelValue:e.remarks_transport,"onUpdate:modelValue":y=>e.remarks_transport=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):O.value?(s(),r("div",ca,[l("div",null,[l("div",null,[e.remarks?(s(),r("div",ua,[ia,o(),va,l("pre",pa,i(e.remarks),1),o(" ------- ")])):d("",!0),e.remarks_commercial?(s(),r("div",_a,[ya,ha,l("pre",fa,i(e.remarks_commercial),1),o(" ------- ")])):d("",!0),e.remarks_transport?(s(),r("div",ma,[ka,o(),ga,l("pre",xa,i(e.remarks_transport),1),o(" ------- ")])):d("",!0),e.remarks_release?(s(),r("div",ba,[Va,o(),wa,l("pre",Ea,i(e.remarks_release),1),o(" ------- ")])):d("",!0)]),t(B,{modelValue:e.remarks_receive,"onUpdate:modelValue":y=>e.remarks_receive=y,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(A=(a=n.value)==null?void 0:a.data)!=null&&A.is_available?(s(),r("div",Aa,[t(T,{class:"mt-3",icon:e.is_available?_(de):_(ne),color:`${e.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),l("div",Ca,[Q.value?(s(),r("div",qa)):d("",!0),t(_e,{modelValue:e.is_received,"onUpdate:modelValue":[y=>e.is_received=y,be],"hide-details":"",variant:"underlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])])])):m.value?d("",!0):(s(),r("div",Ra,[e.remarks||e.remarks_commercial||e.remarks_release||e.remarks_receive||e.remarks_transport?(s(),r("div",Ta,[e.remarks?(s(),r("div",Ua,[ja,o(),Ia,l("pre",Sa,i(e.remarks),1),o(" ------- ")])):d("",!0),e.remarks_commercial?(s(),r("div",Oa,[Pa,o(),$a,l("pre",Na,i(e.remarks_commercial),1),o(" ------- ")])):d("",!0),e.remarks_transport?(s(),r("div",Da,[Ba,o(),La,l("pre",za,i(e.remarks_transport),1),o(" ------- ")])):d("",!0),e.remarks_release?(s(),r("div",Fa,[Ma,o(),Ga,l("pre",Ka,i(e.remarks_release),1),o(" ------- ")])):d("",!0),e.remarks_receive?(s(),r("div",Ha,[Ya,l("pre",Ja,i(e.remarks_receive),1)])):d("",!0)])):(s(),r("div",Qa)),(N=($=n.value)==null?void 0:$.data)!=null&&N.is_available?(s(),r("div",Wa,[t(T,{class:"mt-3",icon:e.is_available?_(de):_(ne),color:`${e.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),((H=(ee=n.value)==null?void 0:ee.data)==null?void 0:H.status)=="complete"&&pe.value=="receiver"?(s(),r("div",Xa,[t(T,{class:"mt-3",icon:e.is_received?_(Ee):_(Ae),color:`${e.is_received?"success":"error"}`},null,8,["icon","color"])])):d("",!0)]))]}),_:2},1024))),128)),m.value?(s(),V(j,{key:1,class:"mt-3"},{default:p(()=>[f.value!=="cancelled"?(s(),r("div",Za,[o(" YOU CAN UPDATE SOME DATA AND"),es,o(" PLEASE TICK CHECKBOX IF ASSET IS AVAILABLE BEFORE CLICKING THE APPROVE BUTTON ")])):(s(),r("div",ls," THIS REQUEST HAS BEEN CANCELLED. "))]),_:1})):d("",!0),(P=(U=n.value)==null?void 0:U.data)!=null&&P.is_available&&f.value!=="cancelled"?(s(),V(j,{key:2,class:"mt-6 mb-2"},{default:p(()=>[t(F,{variant:"text",class:"v-col-12 text-center pt-2 font-weight-bold pb-0 d-flex justify-center"},{default:p(()=>{var e;return[l("div",null,[t(T,{icon:_(de),color:"success"},null,8,["icon"]),o(" AVAILABLE "),t(T,{icon:_(ne),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT AVAILABLE ")]),O.value?(s(),r("div",as,[ss,l("div",null,[t(T,{icon:_(Fe)},null,8,["icon"]),o(" TICK RECEIVED ASSETS "),t(z,{thickness:8,color:"error",class:"divider-notice"})])])):d("",!0),((e=n.value.data)==null?void 0:e.status)=="complete"&&pe.value=="receiver"?(s(),r("div",ts,[t(T,{icon:_(Ee),color:"success"},null,8,["icon"]),o(" RECEIVED "),t(T,{icon:_(Ae),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT RECEIVE ")])):d("",!0)]}),_:1})]),_:1})):d("",!0),t(j,{class:"mt-3"},{default:p(()=>[l("div",os,[t(z),t(z)])]),_:1}),ue.value==2&&((b=se.value)==null?void 0:b.length)>0?(s(),V(j,{key:3,class:"my-3 d-flex justify-center"},{default:p(()=>[(s(!0),r(ce,null,re(se.value,(e,k)=>(s(),r("div",{key:e.id,class:"pa-2",style:{position:"relative"}},[t(F,{onClick:()=>Te(e,k)},{default:p(()=>[t(T,{size:"large",icon:_(Ve),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"])]))),128)),t(ye,{modelValue:K.value,"onUpdate:modelValue":c[5]||(c[5]=e=>K.value=e),width:"95%","max-width":"900"},{default:p(()=>[t(F,{class:"bg-black"},{default:p(()=>[t(Me,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:ie.value,"onUpdate:modelValue":c[4]||(c[4]=e=>ie.value=e)},{default:p(()=>[(s(!0),r(ce,null,re(se.value,(e,k)=>(s(),V(Ge,{key:k,"reverse-transition":"fade",transition:"fade"},{default:p(()=>[l("div",{style:Y(`${G.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[G.value=="jpg"||G.value=="jpeg"||G.value=="png"?(s(),V(we,{key:0,src:ve.value+"/file/"+e.path},null,8,["src"])):d("",!0),G.value=="pdf"?(s(),r("object",{key:1,data:ve.value+"/file/"+e.path,type:"application/pdf",width:"100%",height:"800px"},null,8,rs)):d("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):d("",!0),((I=n.value.data)==null?void 0:I.request_approvals.length)>0?(s(),V(j,{key:4},{default:p(()=>{var e,k,w,E,C;return[l("div",ds,[l("div",{class:"text-center mx-2 py-4 font-weight-bold",style:Y(`${f.value=="cancelled"?"color: red;":"color: rgb(3, 167, 3);"} border: 1px solid #ccc; font-size: 17px;`)},i(f.value=="cancelled"?"CANCELLED":"APPROVED"),5),ns,l("div",cs,i((k=(e=n.value.data)==null?void 0:e.profile)==null?void 0:k.display_name),1),l("div",us,i((E=(w=n.value.data)==null?void 0:w.profile)==null?void 0:E.designation),1),l("div",is,i(_(he)((C=n.value.data)==null?void 0:C.created_at)),1)]),(s(!0),r(ce,null,re(n.value.data.request_approvals,a=>{var A,$,N,ee;return s(),r("div",{class:"v-col-12 v-col-md-3 pa-0 mb-4",key:a.id},[(a.profile.ecode=="100884"||a.profile.ecode=="102587"||a.profile.ecode=="100316"||((A=a.profile)==null?void 0:A.role)=="commercial-manager"||(($=a.profile)==null?void 0:$.role)=="technical-operation"&&ue.value==2)&&_(v).query.pid==a.profile_id&&_(v).query.o==a.orders?(s(),r("div",vs,[a.status=="awaiting-approval"?(s(),r("div",ps,[l("div",{onClick:H=>Ie(a),class:"cursor-pointer text-center py-5 v-col-6",style:Y(`border:1px solid #ccc; ${_(v).query.pid==a.profile_id&&_(v).query.o==a.orders?"background-color: rgb(182, 3, 3);color:#fff;":"background-color: none;"}`)}," REJECT ",12,_s),l("div",{onClick:H=>oe(a,"reject"),class:"cursor-pointer text-center py-5 v-col-6",style:Y(`border:1px solid #ccc; ${_(v).query.pid==a.profile_id&&_(v).query.o==a.orders?"background-color: rgb(3, 167, 3);color:#fff;":"background-color: none"}`)}," APPROVE ",12,ys)])):a.status=="reject"||a.status=="done"||a.status=="pending"?(s(),r("div",hs,[l("div",{onClick:H=>oe(a),class:"cursor-pointer text-center mx-2 py-5",style:Y(`border:1px solid #ccc; ${a.status=="reject"&&_(v).query.pid==a.profile_id&&_(v).query.o==a.orders?"background-color: gray; color:#fff;":a.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},i(a.status=="done"?"APPROVED":a.status=="reject"?"REJECTED":"CLICK TO APPROVE"),13,fs)])):d("",!0)])):(s(),r("div",{key:1,onClick:H=>oe(a),class:"cursor-pointer text-center mx-2 py-5",style:Y(`border:1px solid #ccc; ${f.value!="cancelled"&&a.status=="awaiting-approval"&&_(v).query.pid==a.profile_id&&_(v).query.o==a.orders?"background-color: rgb(182, 3, 3);color:#fff;":a.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},i(a.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,ms)),l("div",{class:D(`text-center py-1 font-weight-bold ${a.status=="reject"?"text-error text-uppercase":""}`)},i(a.status=="reject"?"Rejected":Pe(a.approval_type))+" By ",3),l("div",ks,i((N=a.profile)==null?void 0:N.display_name),1),l("div",gs,i((ee=a.profile)==null?void 0:ee.designation),1),l("div",xs,i(a.date_approved?_(he)(a.date_approved):""),1),a.reason_rejected?(s(),r("div",bs,[o(" Reason rejected "),t(z,{class:"my-2"}),o(" "+i(a.reason_rejected),1)])):d("",!0)])}),128))]}),_:1})):d("",!0),((Z=(X=n.value)==null?void 0:X.data)==null?void 0:Z.status)!=="complete"?(s(),V(j,{key:5,class:"no-print"},{default:p(()=>[l("div",Vs,[t(z),o(" You will receive a notification once you click the approve button. "),t(z)])]),_:1})):d("",!0),t(ye,{width:"500",modelValue:J.value,"onUpdate:modelValue":c[8]||(c[8]=e=>J.value=e),persistent:""},{default:p(()=>[t(F,null,{default:p(()=>[t(Ke,null,{default:p(()=>[t(j,null,{default:p(()=>[ws,l("div",Es,[t(B,{modelValue:M.value,"onUpdate:modelValue":c[6]||(c[6]=e=>M.value=e),label:"STATE YOUR REASON HERE",variant:"outlined"},null,8,["modelValue"])])]),_:1})]),_:1}),t(He,null,{default:p(()=>[t(Ce),t(le,{onClick:Se},{default:p(()=>[o("Cancel")]),_:1}),t(le,{color:"success",disabled:!M.value,onClick:c[7]||(c[7]=e=>oe(ge.value,"reject"))},{default:p(()=>[o("Confirm")]),_:1},8,["disabled"]),t(Ce)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Ye,{options:S.value},null,8,["options"])]}),_:1}))}};export{Ts as default};
