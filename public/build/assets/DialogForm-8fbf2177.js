import{r,M as $,b as u,c as f,l as a,k as t,A as K,G as V,V as A,m as h,t as D,P as y,e as k,q as T,D as z,F as S,d as M,j as C,y as P,a3 as N,x as O,I as U,O as R,J as E,z as j,Z as G}from"./app-2c5a49eb.js";import{a as I,c as J,F as L,b as Z}from"./index.esm-7f8f3b3c.js";const H={class:"text-error"},Q={class:"d-flex pa-3"},Y={__name:"DialogForm",props:{dataObject:{type:Object,default:{}},addNewDialog:{type:Boolean,default:!1},title:{type:String,default:""},freeForm:{type:Array,default:[]}},emits:["savedResponse"],setup(q,{emit:b}){const s=q,c=r(""),o=r(!1),l=r({}),_=r(s.freeForm),g=()=>{o.value=!1,l.value={},b("cancelled",o.value)},w=()=>{o.value=!1,b("save",l.value),l.value={}},x=r({});_.value.map((d,i)=>{d.required&&(x.value[d.name]=I().required())});let B=J(x.value);return $(()=>s.addNewDialog,d=>{l.value={},o.value=d,c.value="New "+s.title,s.dataObject.type&&(l.value=s.dataObject,c.value="Edit "+s.title)}),(d,i)=>(u(),f("div",null,[a(G,{width:"600",persistent:"",modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=m=>o.value=m),onKeydown:O(g,["esc"])},{default:t(()=>[a(K,{class:"pt-3"},{default:t(()=>[a(V(L),{as:"v-form","validation-schema":V(B)},{default:t(({meta:m})=>[a(A,{class:"text-h6 d-flex"},{default:t(()=>[h(D(c.value),1),a(y),k("small",H,D(d.errorMessage),1),a(y)]),_:1}),a(T,null,{default:t(()=>[a(z,null,{default:t(()=>[(u(!0),f(S,null,M(_.value,(e,p)=>(u(),f("div",{class:"v-col-12",key:p},[a(V(Z),{name:e.name,modelValue:l.value[e.name],"onUpdate:modelValue":n=>l.value[e.name]=n},{default:t(({field:n,errors:F})=>[e.type=="text"||e.type=="number"||e.type=="email"?(u(),C(P,N({key:0,type:e.type,autofocus:p===0,modelValue:l.value[e.name],"onUpdate:modelValue":v=>l.value[e.name]=v,density:"compact",variant:"outlined",label:`${e.label}${e.required?"*":" (Optional)"}`,"hide-details":""},n,{onKeydown:O(w,["enter"]),"error-messages":F}),null,16,["type","autofocus","modelValue","onUpdate:modelValue","label","onKeydown","error-messages"])):U("",!0),e.type=="select"?(u(),C(R,N({key:1,autofocus:p===0,modelValue:l.value[e.name],"onUpdate:modelValue":v=>l.value[e.name]=v,density:"compact",variant:"outlined",label:`${e.label}${e.required?"*":""}`,items:e.data,"hide-details":"","item-value":"id","item-title":"title"},n,{"error-messages":F}),null,16,["autofocus","modelValue","onUpdate:modelValue","label","items","error-messages"])):U("",!0)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])]))),128))]),_:1})]),_:1}),a(E,{class:"mt-2"}),k("div",Q,[a(y),a(j,{size:"small",text:"cancel",onClick:g,class:"mx-1"}),a(j,{size:"small",color:"primary",onClick:w,disabled:!m.valid},{default:t(()=>[h("Confirm")]),_:2},1032,["disabled"])])]),_:1},8,["validation-schema"])]),_:1})]),_:1},8,["modelValue","onKeydown"])]))}};export{Y as _};
