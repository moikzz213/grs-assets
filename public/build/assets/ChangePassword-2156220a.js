import{a as G,r as v,J as X,T as K,o as C,c as R,w as t,d as a,V as N,e as w,f as z,E as r,b as k,a8 as O,j as T,a0 as c,t as L,a4 as j,p as x,F as H,q as $,a5 as J,a6 as W,D as Z,a7 as Y,H as ea,i as g,$ as na,k as D,n as F,I as aa,L as Q}from"./app-752bbb50.js";import{c as E,a as h,F as q,b,e as la}from"./index.esm-e56d7eea.js";const ta={class:"d-flex"},oa=k("div",{class:"mb-2 text-body-2 mr-2 mt-2"},"Status",-1),ia=k("div",{class:"mb-2 text-body-2 mr-2 mt-2 ml-5"},"At Work?",-1),sa=k("div",{class:"mb-5 mt-3 bg-info pa-1"},"Note: Email reliever will only work if it's on leave",-1),ca={__name:"AccountForm",props:["user"],emits:["saved"],setup(I,{emit:M}){const d=I,V=G(),n=v({loading:!1,data:Object.assign({},d.user)}),S=v(!0);X(()=>d.user,l=>{S.value=!1,n.value.data=l});const o=v([{title:"active",color:"success"},{title:"inactive",color:"error"}]),m=v([{title:"working",color:"success"},{title:"onleave",color:"error"}]),U=K(()=>{let l="";return n.value.data.status=="active"&&(l="success"),n.value.data.status=="inactive"&&(l="error"),l}),B=K(()=>{let l="";return(n.value.data.on_leave=="working"||n.value.data.on_leave==0)&&(l="success"),(n.value.data.on_leave=="onleave"||n.value.data.on_leave==1)&&(l="error"),l}),y=l=>{n.value.data.status=l},p=l=>{n.value.data.on_leave=l},P=v([{title:"Asset Supervisor-Project",value:"asset-supervisor"},{title:"Commercial Manager-Project",value:"commercial-manager"},{title:"Facility Team",value:"facility"},{title:"Normal",value:"normal"},{title:"Technical Operation",value:"technical-operation"},{title:"Receiving/Releasing/Transport",value:"receiving-releasing"}]);let f=E({email:h().email()});const _=async()=>{let l=n.value.data;n.value.loading=!0,l.profile&&(l=l.profile),l.profile_id=V.user.profile.id,await F(V.token).post("/api/account/profile/save",l).then(e=>{n.value.loading=!1,M("saved",e.data.message)}).catch(e=>{n.value.loading=!1})};return(l,e)=>(C(),R(D,null,{default:t(()=>[a(N,{class:"text-primary text-capitalize mb-3"},{default:t(()=>[w("Account Settings")]),_:1}),a(z,null,{default:t(()=>[a(r(q),{as:"v-form","validation-schema":r(f)},{default:t(()=>[k("div",ta,[oa,a(O,{disabled:S.value},{activator:t(({props:s})=>[a(T,c(s,{class:"mb-1",color:U.value}),{default:t(()=>[w(L(n.value.data.status),1)]),_:2},1040,["color"])]),default:t(()=>[a(j,{density:"compact"},{default:t(()=>[(C(!0),x(H,null,$(o.value,(s,i)=>(C(),R(J,{key:i,value:i,onClick:()=>y(s.title)},{default:t(()=>[a(W,{class:"text-overline d-flex align-center"},{default:t(()=>[a(Z,{color:s.color,icon:r(Y),class:"mr-1"},null,8,["color","icon"]),k("div",null,L(s.title),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1},8,["disabled"]),ia,a(O,{disabled:S.value},{activator:t(({props:s})=>[a(T,c(s,{class:"mb-1",color:B.value}),{default:t(()=>[w(L(n.value.data.on_leave==0?"Working":"onLeave"),1)]),_:2},1040,["color"])]),default:t(()=>[a(j,{density:"compact"},{default:t(()=>[(C(!0),x(H,null,$(m.value,(s,i)=>(C(),R(J,{key:i,value:i,onClick:()=>p(s.title)},{default:t(()=>[a(W,{class:"text-overline d-flex align-center"},{default:t(()=>[a(Z,{color:s.color,icon:r(Y),class:"mr-1"},null,8,["color","icon"]),k("div",null,L(s.title),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1},8,["disabled"])]),a(ea),sa,a(g,c({modelValue:n.value.data.username,"onUpdate:modelValue":e[0]||(e[0]=s=>n.value.data.username=s)},l.field,{label:"Username",variant:"outlined",density:"compact","hide-details":"",class:"mb-2",disabled:!0}),null,16,["modelValue"]),a(r(b),{name:"email",modelValue:n.value.data.email,"onUpdate:modelValue":e[2]||(e[2]=s=>n.value.data.email=s)},{default:t(({field:s,errors:i})=>[a(g,c({modelValue:n.value.data.email,"onUpdate:modelValue":e[1]||(e[1]=u=>n.value.data.email=u)},s,{label:"Email",variant:"outlined",density:"compact","hide-details":"",class:"mb-2","error-messages":i}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(r(b),{name:"reliever",modelValue:n.value.data.email_reliever,"onUpdate:modelValue":e[4]||(e[4]=s=>n.value.data.email_reliever=s)},{default:t(({field:s,errors:i})=>[a(g,c({modelValue:n.value.data.email_reliever,"onUpdate:modelValue":e[3]||(e[3]=u=>n.value.data.email_reliever=u)},s,{label:"Email Reliever (Optional)",variant:"outlined",density:"compact","hide-details":"",class:"mb-2","error-messages":i}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(r(b),{name:"contact",modelValue:n.value.data.contact,"onUpdate:modelValue":e[6]||(e[6]=s=>n.value.data.contact=s)},{default:t(({field:s,errors:i})=>[a(g,c({modelValue:n.value.data.contact,"onUpdate:modelValue":e[5]||(e[5]=u=>n.value.data.contact=u)},s,{type:"number",density:"compact","hide-details":"",label:"Contact number",variant:"outlined",class:"mb-2","error-messages":i}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(r(b),{name:"role",modelValue:n.value.data.role,"onUpdate:modelValue":e[8]||(e[8]=s=>n.value.data.role=s)},{default:t(({field:s,errors:i})=>[a(na,c({modelValue:n.value.data.role,"onUpdate:modelValue":e[7]||(e[7]=u=>n.value.data.role=u)},s,{items:P.value,label:"Role",density:"compact",variant:"outlined",class:"mb-2","error-messages":i}),null,16,["modelValue","items","error-messages"])]),_:1},8,["modelValue"]),a(T,{color:"primary",size:"large",loading:n.value.loading,onClick:_},{default:t(()=>[w("Save")]),_:1},8,["loading"])]),_:1},8,["validation-schema"])]),_:1})]),_:1}))}},ma=[{name:"Afghanistan"},{name:"Åland Islands"},{name:"Albania"},{name:"Algeria"},{name:"American Samoa"},{name:"Andorra"},{name:"Angola"},{name:"Anguilla"},{name:"Antarctica"},{name:"Antigua and Barbuda"},{name:"Argentina"},{name:"Armenia"},{name:"Aruba"},{name:"Australia"},{name:"Austria"},{name:"Azerbaijan"},{name:"Bahamas"},{name:"Bahrain"},{name:"Bangladesh"},{name:"Barbados"},{name:"Belarus"},{name:"Belgium"},{name:"Belize"},{name:"Benin"},{name:"Bermuda"},{name:"Bhutan"},{name:"Bolivia (Plurinational State of)"},{name:"Bonaire, Sint Eustatius and Saba"},{name:"Bosnia and Herzegovina"},{name:"Botswana"},{name:"Bouvet Island"},{name:"Brazil"},{name:"British Indian Ocean Territory"},{name:"Brunei Darussalam"},{name:"Bulgaria"},{name:"Burkina Faso"},{name:"Burundi"},{name:"Cabo Verde"},{name:"Cambodia"},{name:"Cameroon"},{name:"Canada"},{name:"Cayman Islands"},{name:"Central African Republic"},{name:"Chad"},{name:"Chile"},{name:"China"},{name:"Christmas Island"},{name:"Cocos (Keeling) Islands"},{name:"Colombia"},{name:"Comoros"},{name:"Congo (Republic of the)"},{name:"Congo (Democratic Republic of the)"},{name:"Cook Islands"},{name:"Costa Rica"},{name:"Côte d'Ivoire"},{name:"Croatia"},{name:"Cuba"},{name:"Curaçao"},{name:"Cyprus"},{name:"Czech Republic"},{name:"Denmark"},{name:"Djibouti"},{name:"Dominica"},{name:"Dominican Republic"},{name:"Ecuador"},{name:"Egypt"},{name:"El Salvador"},{name:"Equatorial Guinea"},{name:"Eritrea"},{name:"Estonia"},{name:"Ethiopia"},{name:"Falkland Islands (Malvinas)"},{name:"Faroe Islands"},{name:"Fiji"},{name:"Finland"},{name:"France"},{name:"French Guiana"},{name:"French Polynesia"},{name:"French Southern Territories"},{name:"Gabon"},{name:"Gambia"},{name:"Georgia"},{name:"Germany"},{name:"Ghana"},{name:"Gibraltar"},{name:"Greece"},{name:"Greenland"},{name:"Grenada"},{name:"Guadeloupe"},{name:"Guam"},{name:"Guatemala"},{name:"Guernsey"},{name:"Guinea"},{name:"Guinea-Bissau"},{name:"Guyana"},{name:"Haiti"},{name:"Heard Island and McDonald Islands"},{name:"Vatican City State"},{name:"Honduras"},{name:"Hong Kong"},{name:"Hungary"},{name:"Iceland"},{name:"India"},{name:"Indonesia"},{name:"Iran"},{name:"Iraq"},{name:"Ireland"},{name:"Isle of Man"},{name:"Israel"},{name:"Italy"},{name:"Jamaica"},{name:"Japan"},{name:"Jersey"},{name:"Jordan"},{name:"Kazakhstan"},{name:"Kenya"},{name:"Kiribati"},{name:"Korea (Democratic People's Republic of)"},{name:"Korea (Republic of)"},{name:"Kuwait"},{name:"Kyrgyzstan"},{name:"Lao People's Democratic Republic"},{name:"Latvia"},{name:"Lebanon"},{name:"Lesotho"},{name:"Liberia"},{name:"Libya"},{name:"Liechtenstein"},{name:"Lithuania"},{name:"Luxembourg"},{name:"Macao"},{name:"Macedonia (the former Yugoslav Republic of)"},{name:"Madagascar"},{name:"Malawi"},{name:"Malaysia"},{name:"Maldives"},{name:"Mali"},{name:"Malta"},{name:"Marshall Islands"},{name:"Martinique"},{name:"Mauritania"},{name:"Mauritius"},{name:"Mayotte"},{name:"Mexico"},{name:"Micronesia (Federated States of)"},{name:"Moldova (Republic of)"},{name:"Monaco"},{name:"Mongolia"},{name:"Montenegro"},{name:"Montserrat"},{name:"Morocco"},{name:"Mozambique"},{name:"Myanmar"},{name:"Namibia"},{name:"Nauru"},{name:"Nepal"},{name:"Netherlands"},{name:"New Caledonia"},{name:"New Zealand"},{name:"Nicaragua"},{name:"Niger"},{name:"Nigeria"},{name:"Niue"},{name:"Norfolk Island"},{name:"Northern Mariana Islands"},{name:"Norway"},{name:"Oman"},{name:"Pakistan"},{name:"Palau"},{name:"Palestine, State of"},{name:"Panama"},{name:"Papua New Guinea"},{name:"Paraguay"},{name:"Peru"},{name:"Philippines"},{name:"Pitcairn"},{name:"Poland"},{name:"Portugal"},{name:"Puerto Rico"},{name:"Qatar"},{name:"Réunion"},{name:"Romania"},{name:"Russian Federation"},{name:"Rwanda"},{name:"Saint Barthélemy"},{name:"Saint Helena, Ascension and Tristan da Cunha"},{name:"Saint Kitts and Nevis"},{name:"Saint Lucia"},{name:"Saint Martin (French part)"},{name:"Saint Pierre and Miquelon"},{name:"Saint Vincent and the Grenadines"},{name:"Samoa"},{name:"San Marino"},{name:"Sao Tome and Principe"},{name:"Saudi Arabia"},{name:"Senegal"},{name:"Serbia"},{name:"Seychelles"},{name:"Sierra Leone"},{name:"Singapore"},{name:"Sint Maarten (Dutch part)"},{name:"Slovakia"},{name:"Slovenia"},{name:"Solomon Islands"},{name:"Somalia"},{name:"South Africa"},{name:"South Georgia and the South Sandwich Islands"},{name:"South Sudan"},{name:"Spain"},{name:"Sri Lanka"},{name:"Sudan"},{name:"Suriname"},{name:"Svalbard and Jan Mayen"},{name:"Swaziland"},{name:"Sweden"},{name:"Switzerland"},{name:"Syrian Arab Republic"},{name:"Taiwan, Province of China"},{name:"Tajikistan"},{name:"Tanzania, United Republic of"},{name:"Thailand"},{name:"Timor-Leste"},{name:"Togo"},{name:"Tokelau"},{name:"Tonga"},{name:"Trinidad and Tobago"},{name:"Tunisia"},{name:"Turkey"},{name:"Turkmenistan"},{name:"Turks and Caicos Islands"},{name:"Tuvalu"},{name:"Uganda"},{name:"Ukraine"},{name:"United Arab Emirates"},{name:"United Kingdom of Great Britain and Northern Ireland"},{name:"United States Minor Outlying Islands"},{name:"United States of America"},{name:"Uruguay"},{name:"Uzbekistan"},{name:"Vanuatu"},{name:"Venezuela (Bolivarian Republic of)"},{name:"Vietnam"},{name:"Virgin Islands (British)"},{name:"Virgin Islands (U.S.)"},{name:"Wallis and Futuna"},{name:"Western Sahara"},{name:"Yemen"},{name:"Zambia"},{name:"Zimbabwe"}],va={__name:"ProfileForm",props:["user"],emits:["saved"],setup(I,{emit:M}){var _;const d=I,V=G(),n=aa(),S=v([]);S.value=ma;const o=v({loading:!1,data:{user_id:n.params.id,display_name:null,dob:null,nationality:null}});o.value.data=Object.assign({},d.user),X(()=>d.user,l=>{o.value.data=Object.assign({},l)});const m=()=>{o.value.data=d.user.profile};(_=d.user)!=null&&_.id&&m();const U=v([]),B=async()=>{await F(V.token).get("/api/fetch/locations/non-paginated/data").then(l=>{U.value=l.data}).catch(l=>{})},y=v([]);(async()=>{await F(V.token).get("/api/fetch/companies").then(l=>{y.value=l.data}).catch(l=>{})})().then(()=>{B()});let P=E({ecode:h().required(),display_name:h().required(),first_name:h().required(),last_name:h().required()});const f=async()=>{var l,e;o.value.loading=!0,o.value.data={...o.value.data,id:(e=(l=d.user)==null?void 0:l.profile)!=null&&e.id?d.user.profile.id:d.user.id,profile_id:V.user.profile.id},await F(V.token).post("/api/account/profile/save",o.value.data).then(s=>{o.value.loading=!1,M("saved",s.data.message)}).catch(s=>{o.value.loading=!1})};return(l,e)=>(C(),R(D,null,{default:t(()=>[a(N,{class:"text-primary text-capitalize"},{default:t(()=>[w("Profile Settings")]),_:1}),a(z,null,{default:t(()=>[a(r(q),{as:"v-form","validation-schema":r(P)},{default:t(({meta:s})=>[a(r(b),{name:"ecode",modelValue:o.value.data.ecode,"onUpdate:modelValue":e[1]||(e[1]=i=>o.value.data.ecode=i)},{default:t(({field:i})=>[a(g,c({modelValue:o.value.data.ecode,"onUpdate:modelValue":e[0]||(e[0]=u=>o.value.data.ecode=u)},i,{label:"Employee ID",density:"compact",variant:"outlined",disabled:!0}),null,16,["modelValue"])]),_:1},8,["modelValue"]),a(r(b),{name:"display_name",modelValue:o.value.data.display_name,"onUpdate:modelValue":e[3]||(e[3]=i=>o.value.data.display_name=i)},{default:t(({field:i,errors:u})=>[a(g,c({modelValue:o.value.data.display_name,"onUpdate:modelValue":e[2]||(e[2]=A=>o.value.data.display_name=A)},i,{label:"Full name",density:"compact",variant:"outlined","error-messages":u}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(r(b),{name:"first_name",modelValue:o.value.data.first_name,"onUpdate:modelValue":e[5]||(e[5]=i=>o.value.data.first_name=i)},{default:t(({field:i,errors:u})=>[a(g,c({modelValue:o.value.data.first_name,"onUpdate:modelValue":e[4]||(e[4]=A=>o.value.data.first_name=A)},i,{label:"First name",density:"compact",variant:"outlined","error-messages":u}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(r(b),{name:"last_name",modelValue:o.value.data.last_name,"onUpdate:modelValue":e[7]||(e[7]=i=>o.value.data.last_name=i)},{default:t(({field:i,errors:u})=>[a(g,c({modelValue:o.value.data.last_name,"onUpdate:modelValue":e[6]||(e[6]=A=>o.value.data.last_name=A)},i,{label:"Last name",density:"compact",variant:"outlined","error-messages":u}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(g,{modelValue:o.value.data.designation,"onUpdate:modelValue":e[8]||(e[8]=i=>o.value.data.designation=i),label:"Designation",density:"compact",variant:"outlined"},null,8,["modelValue"]),a(Q,{label:"Location",items:U.value,modelValue:o.value.data.location_id,"onUpdate:modelValue":e[9]||(e[9]=i=>o.value.data.location_id=i),"item-value":"id","item-title":"title",variant:"outlined",density:"compact",class:"mb-2"},null,8,["items","modelValue"]),a(Q,{label:"Company",items:y.value,modelValue:o.value.data.company_id,"onUpdate:modelValue":e[10]||(e[10]=i=>o.value.data.company_id=i),"item-value":"id","item-title":"title",variant:"outlined",density:"compact",class:"mb-2"},null,8,["items","modelValue"]),a(T,{color:"primary",loading:o.value.loading,onClick:f,disabled:!s.valid},{default:t(()=>[w("Save")]),_:2},1032,["loading","disabled"])]),_:1},8,["validation-schema"])]),_:1})]),_:1}))}},ra={class:"d-flex align-center"},pa={__name:"ChangePassword",props:["user"],emits:["saved"],setup(I,{emit:M}){const d=I,V=aa(),n=G(),S=v("grs-asset-wvukt"),o=v("https://users.moikzz.tech"),m=v({status:!1,loading:!1,data:{username:"",password:"",password_confirmation:"",url:S.value}}),U=E({password:h().min(5).required(),password_confirmation:h().required().oneOf([la("password")],"Passwords do not match")});console.log("props.user",d.user);const B=async()=>{m.value.loading=!0,m.value.data.username=d.user?d.user.ecode:n.user.profile.ecode,await axios.post(o.value+"/api/application/reset-password",m.value.data).then(y=>{M("saved",y.data.msg),m.value={status:!1,loading:!1,data:{username:d.user?d.user.ecode:V.params.ecode,password:"11111111111111111111111",password_confirmation:"11111111111111111111111",url:S.value}}}).catch(y=>{m.value.loading=!1,console.log(y.response.data)})};return(y,p)=>(C(),x("div",null,[a(D,{loading:m.value.loading},{default:t(()=>[a(r(q),{as:"v-form","validation-schema":r(U)},{default:t(({meta:P})=>[a(N,{class:"text-primary text-capitalize mb-3"},{default:t(()=>[w(" Change password ")]),_:1}),a(z,{class:"pb-6"},{default:t(()=>[a(r(b),{name:"password",modelValue:m.value.data.password,"onUpdate:modelValue":p[1]||(p[1]=f=>m.value.data.password=f)},{default:t(({field:f,errors:_})=>[a(g,c({modelValue:m.value.data.password,"onUpdate:modelValue":p[0]||(p[0]=l=>m.value.data.password=l)},f,{label:"Password",type:"password",variant:"outlined",class:"mb-2","error-messages":_}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(r(b),{name:"password_confirmation",modelValue:m.value.data.password_confirmation,"onUpdate:modelValue":p[3]||(p[3]=f=>m.value.data.password_confirmation=f)},{default:t(({field:f,errors:_})=>[a(g,c({modelValue:m.value.data.password_confirmation,"onUpdate:modelValue":p[2]||(p[2]=l=>m.value.data.password_confirmation=l)},f,{label:"Confirm Password",type:"password",variant:"outlined",class:"mb-2","error-messages":_}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),k("div",ra,[a(T,{disabled:!P.valid,color:"primary",size:"large",onClick:B},{default:t(()=>[w(" Save ")]),_:2},1032,["disabled"])])]),_:2},1024)]),_:1},8,["validation-schema"])]),_:1},8,["loading"])]))}};export{ca as _,va as a,pa as b};
