import{i as C,r as _,j as g,k as o,C as U,D as E,b as r,l as e,G as c,A as p,q as f,K as N,z as I,m as y,I as V,E as n,M as b,e as d,y as s,c as A,t as x}from"./app-228560df.js";import{_ as T}from"./AppPageHeader-476ce8e2.js";import{_ as k}from"./AppSnackBar-c33aa6d2.js";const R=d("div",{class:"v-col-12 font-weight-bold"}," MAINTENANCE - RECEIVERS ",-1),S={class:"v-col-12 pt-3"},w={class:"v-col-12"},B={class:"v-col-12"},O={class:"v-col-12"},q=d("div",{class:"v-col-12 font-weight-bold"}," INCIDENT - RECEIVERS ",-1),F={class:"v-col-12 pt-3"},M={class:"v-col-12"},$={class:"v-col-12"},j={class:"v-col-12"},z=d("div",{class:"v-col-12 font-weight-bold"}," NOTIFICATION INTERVAL - FOR MAINTENANCE ",-1),K={class:"v-col-12"},L={class:"v-col-12 v-col-md-6"},G={class:"v-col-4"},H=d("div",{class:"v-col-8 mt-2"}," Asset Expiration - First Notification ",-1),J={class:"v-col-4"},P=d("div",{class:"v-col-8 mt-2"}," Asset Expiration - Second Notification ",-1),Q={class:"v-col-4"},W=d("div",{class:"v-col-8 mt-2"}," Asset Expiration - Third Notification ",-1),X={class:"v-col-12 v-col-md-6"},Y={class:"v-col-4"},Z={key:0},ee=d("div",{class:"v-col-8 mt-2"}," Request / Transfer Asset ",-1),ae={class:"v-col-4"},le={key:0},te=d("div",{class:"v-col-8 mt-2"}," Incidents ",-1),ve={__name:"Notifications",setup(ie){const t=C(),m=_(!1),a=_([{meta_type:"maintenance-receiver",meta_value:"",profile_id:t.user.profile.id},{meta_type:"maintenance-receiver",meta_value:"",profile_id:t.user.profile.id},{meta_type:"maintenance-receiver",meta_value:"",profile_id:t.user.profile.id},{meta_type:"maintenance-receiver",meta_value:"",profile_id:t.user.profile.id},{meta_type:"incident-receiver",meta_value:"",profile_id:t.user.profile.id},{meta_type:"incident-receiver",meta_value:"",profile_id:t.user.profile.id},{meta_type:"incident-receiver",meta_value:"",profile_id:t.user.profile.id},{meta_type:"incident-receiver",meta_value:"",profile_id:t.user.profile.id},{meta_type:"first_notification",meta_value:30,profile_id:t.user.profile.id},{meta_type:"second_notification",meta_value:15,profile_id:t.user.profile.id},{meta_type:"third_notification",meta_value:1,profile_id:t.user.profile.id},{meta_type:"request_transfer",meta_value:2,profile_id:t.user.profile.id},{meta_type:"incidents",meta_value:1,profile_id:t.user.profile.id}]),v=_({loading:!0}),h=_({status:!1,type:"info",text:null});(async()=>{await E(t.token).get("/api/fetch/notification-setup").then(u=>{a.value=[{meta_type:"maintenance-receiver",meta_value:u.data[0].meta_value,profile_id:t.user.profile.id},{meta_type:"maintenance-receiver",meta_value:u.data[1].meta_value,profile_id:t.user.profile.id},{meta_type:"maintenance-receiver",meta_value:u.data[2].meta_value,profile_id:t.user.profile.id},{meta_type:"maintenance-receiver",meta_value:u.data[3].meta_value,profile_id:t.user.profile.id},{meta_type:"incident-receiver",meta_value:u.data[4].meta_value,profile_id:t.user.profile.id},{meta_type:"incident-receiver",meta_value:u.data[5].meta_value,profile_id:t.user.profile.id},{meta_type:"incident-receiver",meta_value:u.data[6].meta_value,profile_id:t.user.profile.id},{meta_type:"incident-receiver",meta_value:u.data[7].meta_value,profile_id:t.user.profile.id},{meta_type:"first_notification",meta_value:u.data[8].meta_value,profile_id:t.user.profile.id},{meta_type:"second_notification",meta_value:u.data[9].meta_value,profile_id:t.user.profile.id},{meta_type:"third_notification",meta_value:u.data[10].meta_value,profile_id:t.user.profile.id},{meta_type:"request_transfer",meta_value:u.data[11].meta_value,profile_id:t.user.profile.id},{meta_type:"incidents",meta_value:u.data[12].meta_value,profile_id:t.user.profile.id}],v.value.loading=!1}).catch(u=>{v.value.loading=!1,console.log(u)})})();const D=async function(){m.value=!0;let u={data:a.value,profile_id:t.user.profile.id};await E(t.token).post("/api/store-update/notification",u).then(l=>{h.value={status:!0,type:"success",text:l.data.message},m.value=!1}).catch(l=>{m.value=!1,console.log(l)})};return(u,l)=>(r(),g(U,null,{default:o(()=>[e(T,{title:"Notifications - Setup"}),e(n,{class:"mb-3"},{default:o(()=>[e(c,{class:"v-col-12 mt-1 col-sm-12"},{default:o(()=>[e(p,{class:"px-5",loading:v.value.loading},{default:o(()=>[e(f,null,{default:o(()=>{var i;return[N(t).user.role=="superadmin"||(i=N(t).capabilities)!=null&&i.includes("edit")?(r(),g(I,{key:0,onClick:l[0]||(l[0]=de=>D()),loading:m.value,size:"small",color:"secondary"},{default:o(()=>[y("Save")]),_:1},8,["loading"])):V("",!0)]}),_:1})]),_:1},8,["loading"])]),_:1}),e(c,{class:"v-col-12 v-col-md-6 mt-1 col-sm-12"},{default:o(()=>[e(p,{class:"px-5",loading:v.value.loading},{default:o(()=>[e(f,null,{default:o(()=>[e(n,{class:"pb-2"},{default:o(()=>[R,e(b),d("div",S,[e(s,{"hide-details":"auto",modelValue:a.value[0].meta_value,"onUpdate:modelValue":l[1]||(l[1]=i=>a.value[0].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",w,[e(s,{"hide-details":"auto",modelValue:a.value[1].meta_value,"onUpdate:modelValue":l[2]||(l[2]=i=>a.value[1].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",B,[e(s,{"hide-details":"auto",modelValue:a.value[2].meta_value,"onUpdate:modelValue":l[3]||(l[3]=i=>a.value[2].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",O,[e(s,{"hide-details":"auto",modelValue:a.value[3].meta_value,"onUpdate:modelValue":l[4]||(l[4]=i=>a.value[3].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),e(c,{class:"v-col-12 v-col-md-6 mt-1 col-sm-12"},{default:o(()=>[e(p,{class:"px-5",loading:v.value.loading},{default:o(()=>[e(f,null,{default:o(()=>[e(n,{class:"pb-2"},{default:o(()=>[q,e(b),d("div",F,[e(s,{"hide-details":"auto",modelValue:a.value[4].meta_value,"onUpdate:modelValue":l[5]||(l[5]=i=>a.value[4].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",M,[e(s,{"hide-details":"auto",modelValue:a.value[5].meta_value,"onUpdate:modelValue":l[6]||(l[6]=i=>a.value[5].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",$,[e(s,{"hide-details":"auto",modelValue:a.value[6].meta_value,"onUpdate:modelValue":l[7]||(l[7]=i=>a.value[6].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])]),d("div",j,[e(s,{"hide-details":"auto",modelValue:a.value[7].meta_value,"onUpdate:modelValue":l[8]||(l[8]=i=>a.value[7].meta_value=i),label:"Add Email",variant:"outlined",density:"compact"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}),e(c,{class:"v-col-12 v-col-md-12 mt-1 col-sm-12"},{default:o(()=>[e(p,{class:"px-5",loading:v.value.loading},{default:o(()=>[e(f,null,{default:o(()=>[e(n,{class:"pb-2"},{default:o(()=>[z,e(b),d("div",K,[e(n,null,{default:o(()=>[d("div",L,[e(n,null,{default:o(()=>[d("div",G,[e(s,{type:"number","hide-details":"auto",modelValue:a.value[8].meta_value,"onUpdate:modelValue":l[9]||(l[9]=i=>a.value[8].meta_value=i),label:"Days",variant:"outlined",density:"compact"},null,8,["modelValue"]),y(" Days before expiration ")]),H]),_:1}),e(n,null,{default:o(()=>[d("div",J,[e(s,{type:"number","hide-details":"auto",modelValue:a.value[9].meta_value,"onUpdate:modelValue":l[10]||(l[10]=i=>a.value[9].meta_value=i),label:"Days",variant:"outlined",density:"compact"},null,8,["modelValue"]),y(" Day(s) before expiration ")]),P]),_:1}),e(n,null,{default:o(()=>[d("div",Q,[e(s,{type:"number","hide-details":"auto",modelValue:a.value[10].meta_value,"onUpdate:modelValue":l[11]||(l[11]=i=>a.value[10].meta_value=i),label:"Days",variant:"outlined",density:"compact"},null,8,["modelValue"]),y(" Day(s) before expiration ")]),W]),_:1})]),d("div",X,[e(n,null,{default:o(()=>[d("div",Y,[e(s,{type:"number","hide-details":"auto",modelValue:a.value[11].meta_value,"onUpdate:modelValue":l[12]||(l[12]=i=>a.value[11].meta_value=i),label:"Days",variant:"outlined",density:"compact"},null,8,["modelValue"]),a.value[11].meta_value>0?(r(),A("div",Z,"Notify every"+x(a.value[11].meta_value==1?"day":" "+a.value[11].meta_value+" days"),1)):V("",!0)]),ee]),_:1}),e(n,null,{default:o(()=>[d("div",ae,[e(s,{type:"number","hide-details":"auto",modelValue:a.value[12].meta_value,"onUpdate:modelValue":l[13]||(l[13]=i=>a.value[12].meta_value=i),label:"Days",variant:"outlined",density:"compact"},null,8,["modelValue"]),a.value[12].meta_value>0?(r(),A("div",le,"Notify every"+x(a.value[12].meta_value==1?"day":" "+a.value[12].meta_value+" days"),1)):V("",!0)]),te]),_:1})])]),_:1})])]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),e(k,{options:h.value},null,8,["options"])]),_:1}))}};export{ve as default};
