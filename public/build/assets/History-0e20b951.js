import{a as B,u as P,r as u,G as z,I as H,H as F,c as y,w as t,m as G,n as M,o as r,d as a,v,k as V,f as U,s as p,b as e,t as d,E as K,J as $,x as j,p as N,q,e as x,y as J,F as Q,M as W,z as T,N as X,A as Y,B as Z}from"./app-20bb8192.js";import{_ as aa}from"./AppPageHeader-422d0c89.js";import{a as ta}from"./formatDate-559e9d83.js";import{_ as ea}from"./_plugin-vue_export-helper-c27b6911.js";const R=i=>(Y("data-v-fef840c6"),i=i(),Z(),i),la=R(()=>e("div",{class:"mt-2 mr-2"},"Show",-1)),sa={class:"v-col-12"},oa=R(()=>e("thead",null,[e("tr",null,[e("th",{class:"text-left text-capitalize"}," ASSET "),e("th",{class:"text-left text-capitalize"}," CURRENT LOCATION "),e("th",{class:"text-left text-capitalize"}," REMARKS "),e("th",null,"Date")])],-1)),ca=["onClick"],ua={style:{color:"goldenrod"}},na={__name:"History",setup(i){const O=B(),S=P(),E=u([10,20,50,100]),f=u(20),_=z(),n=u([]),h=u(0),I=u(0),m=u({loading:!1}),c=u(_.params&&_.params.page?_.params.page:1),D=()=>{g()},L=s=>{let o="edit-asset";S.push({name:o,params:{id:s}}).catch(l=>{console.log(l)})},g=async()=>{m.value.loading=!0,await M(O.token).get("/api/location/fetch/"+_.params.id+"/asset-history?page="+c.value+"&show="+f.value).then(s=>{var o;m.value.loading=!1,n.value=(o=s==null?void 0:s.data)==null?void 0:o.data,h.value=s.data.last_page,c.value=s.data.current_page,I.value=s.data.total}).catch(s=>{})};return H(()=>{g()}),F(c,(s,o)=>{c.value&&s!=o&&(S.push({name:"location-asset-log",params:{page:c.value}}).catch(l=>{}),g(c.value))}),(s,o)=>(r(),y(G,null,{default:t(()=>[a(aa,{title:"ASSET - LOCATION LOGS"}),a(p,{class:"mb-3 mt-3"},{default:t(()=>[a(v,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:t(()=>[a(V,null,{default:t(()=>[a(U,null,{default:t(()=>[a(p,null,{default:t(()=>[a(v,{class:"v-col-12 col-sm-12 pt-0 text-center my-5"},{default:t(()=>[e("h3",null,d(n.value&&n.value.length>0?n.value[0].location.title:"")+" - ASSET - LOCATION LOGS",1)]),_:1})]),_:1}),a(K),a(p,{class:"mb-3"},{default:t(()=>[a(v,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:t(()=>[a(V,{class:"px-5"},{default:t(()=>[a(p,null,{default:t(()=>[a(v,{class:"v-col-6 v-col-md-2 v-col-sm-6 d-flex my-2"},{default:t(()=>[la,a($,{items:E.value,modelValue:f.value,"onUpdate:modelValue":[o[0]||(o[0]=l=>f.value=l),D],variant:"outlined",density:"compact","hide-details":"",label:"Entry"},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",sa,[a(V,{loading:m.value.loading},{default:t(()=>[a(j,null,{default:t(()=>[oa,e("tbody",null,[(r(!0),N(Q,null,q(n.value,l=>{var w,C,b,k;return r(),N("tr",{key:l.id},[e("td",{class:"cursor-pointer",onClick:da=>{var A;return L((A=l.asset)==null?void 0:A.id)}},[x(d((w=l.asset)==null?void 0:w.asset_name)+" ( ",1),e("b",ua,d((C=l.asset)==null?void 0:C.asset_code),1),x(" )")],8,ca),e("td",null,d((k=(b=l.asset)==null?void 0:b.location)==null?void 0:k.title),1),e("td",null,d(l.remarks),1),e("td",null,d(J(ta)(l.created_at)),1)])}),128))])]),_:1}),n.value.length==0?(r(),y(W,{key:0,class:"pa-3 text-center w-100"},{default:t(()=>[x("No records found")]),_:1})):T("",!0)]),_:1},8,["loading"]),h.value>1?(r(),y(X,{key:0,modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=l=>c.value=l),class:"my-4",length:h.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable",disabled:m.value.loading},null,8,["modelValue","length","disabled"])):T("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},va=ea(na,[["__scopeId","data-v-fef840c6"]]);export{va as default};
