import{a as nt,r as p,G as ct,u as vt,O as ie,I as pt,H as Se,o as i,c as g,w as d,d as o,v as _t,k as R,V as mt,b as s,t as _,p as k,z as f,ae as Ce,y as c,E as re,f as H,s as b,j as T,e as j,J as L,i as W,q as $,F as P,P as Ae,R as ne,Q as X,M as ft,U as Te,Y as ht,C as ee,D as yt,ag as gt,S as Vt,T as kt,ac as bt,aZ as Ue,a_ as je,a$ as Ee,b0 as Oe,b1 as wt,Z as xt,_ as qt,m as St,n as I}from"./app-8d9b4998.js";import{_ as Ct}from"./ApppageHeader-1adb27dc.js";import{_ as De,r as Re}from"./Studio-b67f4921.js";import{_ as At}from"./AppSnackBar-352cc345.js";import{Q as Tt}from"./QrcodeReaderVue3.common-50892d7d.js";import{d as Ut,e as jt}from"./encrypt-954f7f94.js";import{u as Ie}from"./formatDate-559e9d83.js";const Et={key:0,class:"text-error text-h6"},Ot={class:"col-12 v-col-md-4"},Dt={class:"v-col-12 v-col-md-8"},Rt={key:0,class:"text-right no-print"},It={class:"v-col-12 v-col-md-6"},Nt={class:"v-col-12 v-col-md-6"},Ft={class:"v-col-12 v-col-md-6"},Lt={class:"v-col-12 v-col-md-6 d-flex"},Pt={class:"v-col-12"},zt={class:"wd-100"},Bt={class:"wd-60"},Mt={class:"wd-40"},$t={class:"wd-60"},Qt={class:"wd-40"},Yt={class:"wd-100"},Gt={key:0,class:"v-col-12"},Kt=s("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),Ht=s("div",{class:"wd-15"},"ASSET CODE",-1),Jt=s("div",{class:"wd-5"},"QTY",-1),Zt=s("div",{class:"wd-10"},"UOM",-1),Wt=s("div",{class:"wd-10"},"WEIGHT",-1),Xt=s("div",{class:"wd-10"},"VALUE",-1),ea=s("div",{class:"wd-15"},"REASON FOR REQUEST",-1),ta={class:"wd-30"},aa={class:"wd-15"},la={class:"wd-5"},sa={class:"wd-10"},oa={class:"wd-10"},da={class:"wd-10"},ua={class:"wd-15"},ia={class:"v-col-12 v-col-md-1 px-1"},ra={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},na={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},ca={class:"v-col-12 pt-0 pb-0"},va={class:"v-col-12 v-col-md-1 custom-width-description"},pa={class:"v-col-12 v-col-md-2 d-flex"},_a={class:"v-col-12 v-col-md-1"},ma={class:"v-col-12 v-col-md-1 custom-width-uom"},fa={class:"v-col-12 v-col-md-1 mt-3"},ha=s("br",null,null,-1),ya=s("small",null,"(KG)",-1),ga={class:"v-col-12 v-col-md-1 mt-3"},Va=s("br",null,null,-1),ka=s("small",null,"(AED)",-1),ba={class:"v-col-12 v-col-md-2 d-flex"},wa={key:0},xa=s("div",null,"Additional File can be upload here",-1),qa=["data"],Sa={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},Ca=s("div",null,"APPROVAL SETUP",-1),Aa={key:0,class:"no-print"},Ta=s("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),Ua={class:"v-col-12 v-col-md-6 d-flex"},ja=s("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),Ea={key:0,class:"v-col-12 v-col-md-2"},Oa=s("div",{class:"wd-20"},"Requestor",-1),Da={class:"wd-50"},Ra=s("div",{class:"wd-10"},"Status",-1),Ia=s("div",{class:"wd-20"},"Date Approved",-1),Na={class:"wd-20"},Fa={class:"wd-50"},La={class:"wd-10"},Pa={class:"wd-20"},za={key:0,class:"v-col-12 v-col-md-2"},Ba={key:1,class:"v-col-12 v-col-md-6 d-flex"},Ma={key:2,class:"my-auto v-col-12 v-col-md-2"},$a={key:3,class:"v-col-12 v-col-md-2"},Qa={class:"v-col-12"},Ya={class:"v-col-12 text-error"},Ga=s("div",{class:"v-col-12 v-col-md-12 text-info no-print"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),al={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(Ne,{emit:Fe}){const N=Ne,v=nt(),te=p(!1),E=ct(),Le=vt(),r=p({}),x=p(!1),ae=p(!1),S=p([{qty:1,attachment:{}}]),Pe=p(new Date),le=p(["commercial-manager","superadmin"]),u=p([]),m=p({}),z=p({}),Q=p(window.location.origin),ze=(l,t)=>{S.value[l].attachment=t[0]},D=p([]),Be=l=>{let t=null;l.map(e=>{t=D.value.find(a=>a.id==e.id),t||D.value.push(e)})},Me=l=>{D.value=D.value.filter(t=>t.id!==l)},se=p(1),B=p("image"),$e=(l,t)=>{let e=l.path.split(".");B.value=e[e.length-1],se.value=t,M.value=!0},M=p(!1),ce=p(1),Qe=l=>{ce.value=l,M.value=!0},Ye=l=>{S.value[l].attachment=""},oe=l=>{if(l=="approve")return"Approved By";if(l=="reviewer")return"Reviewed By";if(l=="receiver")return"Received By";if(l=="transport")return"Transport Arranged By";if(l=="releasing")return"Released By";if(l=="verify")return"Verified By"},ve=p(""),pe=p([]),Ge=async()=>{await I(v.token).get("/api/fetch/approval-setups/non-paginated/data/request").then(l=>{var t,e;pe.value=l.data,ve.value=(e=(t=l.data.filter(a=>a.id==m.value.request_type_id))==null?void 0:t[0])==null?void 0:e.title}).catch(l=>{})},A=p({}),_e=p([]),Ke=async()=>{await I(v.token).get("/api/fetch/companies").then(l=>{_e.value=l.data}).catch(l=>{})},Y=p(!1),me=p(0),He=l=>{me.value=l,Y.value=!0},fe=async(l,t)=>{let e=me.value;t!==void 0&&(e=t),await I(v.token).get("/api/fetch/asset-info/by/asset-code/"+l).then(a=>{S.value[e].item_description=a.data.asset_name,S.value[e].asset_code=l,Y.value=!1}).catch(a=>{})},he=p(""),ye=p(""),de=p([]),Je=async()=>{await I(v.token).get("/api/fetch/locations/non-paginated/data").then(l=>{var t,e,a,h;de.value=l.data,he.value=(e=(t=l.data.filter(w=>w.id==m.value.transferred_from))==null?void 0:t[0])==null?void 0:e.title,ye.value=(h=(a=l.data.filter(w=>w.id==m.value.transferred_to))==null?void 0:a[0])==null?void 0:h.title}).catch(l=>{})},Ze=()=>{S.value.push({qty:1,attachment:{}}),F()},We=()=>{ae.value=!0,A.value={status:!0,type:"info",text:"Updating location..."};let l={authID:v.user.profile.id,data:r.value};I(v.token).post("/api/request-update/location",l).then(t=>{setTimeout(()=>{ae.value=!1,A.value={status:!0,type:"success",text:"Location updated."}},1e3)}).catch(t=>{})},Xe=(l,t)=>{A.value={status:!0,type:"info",text:"Updating User..."};let e={authID:v.user.profile.id,id:r.value.id,profile_id:l,orders:t};I(v.token).post("/api/request-update/approver",e).then(a=>{setTimeout(()=>{A.value={status:!0,type:"success",text:"User has been updated."}},800)}).catch(a=>{})},et=(l,t)=>{S.value.splice(t,1),F()},tt=()=>{A.value={status:!0,type:"success",text:"Draft has been removed!"},localStorage.removeItem("draft-request"),setTimeout(()=>{location.reload()},500)},at=()=>{A.value={status:!0,type:"info",text:"Please wait..."};let l={data:r.value,assets:S.value,approval:V.value,profile_id:v.user.profile.id,role:v.user.profile.role,type:"request"};localStorage.setItem("draft-request",jt(l)),setTimeout(()=>{Z.value=!0,A.value={status:!0,type:"success",text:"Data has been saved to Draft"}},500)},ge=p("Note: Administrator needs to setup signatories first."),lt=ie(()=>D.value.map(l=>l.id)),st=()=>{A.value={status:!0,type:"info",text:"Please wait..."};let l=S.value.map((e,a)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),t={data:r.value,assets:l,approval:V.value,profile_id:v.user.profile.id,type:"request",role:v.user.profile.role,additionalFiles:lt.value};I(v.token).post("/api/request-asset/store-update/data",t).then(e=>{let a="",h="";e.data.message?(a=e.data.message,h="success"):e.data.error&&(a=e.data.error,h="error"),A.value={status:!0,type:h,text:a},localStorage.removeItem("draft-request"),E.params.id||setTimeout(()=>{Le.push({name:"EditRequestAsset",params:{id:e.data.id}}).catch(w=>{})},800)}).catch(e=>{A.value={status:!0,type:"error",text:"Failed to update data, kindly refresh the page and check fields if it's empty"}})},V=p([]),J=p(!0),ot=p(["Nos","Set","Pcs","Pack","Pallet","SqM"]),ue=async()=>{let l=0;E.params.id&&(l=1),await I(v.token).get("/api/fetch/request-asset/approval-setup-fetch/"+r.value.request_type_id+"?isEdit="+l).then(t=>{var e,a,h,w,U,y,n,q,O,be,we,xe,qe;if(r.value.extra_attachment=t.data.enable_attachment,V.value=(e=t.data)==null?void 0:e.stages,E.params.id&&((a=t.data)==null?void 0:a.stages.length)>0){let it=u.value.length-1,rt=(h=t.data)==null?void 0:h.stages.length;it>rt?((w=V.value)==null||w.map((C,G)=>(u.value.map((K,Ka)=>{if(C.sort===K.orders)return C.profile_id=K.profile_id,C.status=K.status,C.date_approved=K.date_approved,C.reason_rejected=K.reason_rejected,C}),C)),V.value.length>1&&(V.value[V.value.length-1]={id:u.value[V.value.length-1].id,profile_id:u.value[V.value.length-1].profile_id,status:u.value[V.value.length-1].status,date_approved:u.value[V.value.length-1].date_approved,status:u.value[V.value.length-1].status,reason_rejected:"",types:u.value[V.value.length-1].approval_type,sort:u.value[V.value.length-1].orders,request_asset_id:u.value[V.value.length-1].request_asset_id,signatures:[{id:(U=u.value[V.value.length-1])==null?void 0:U.profile.id,display_name:(y=u.value[V.value.length-1])==null?void 0:y.profile.display_name,first_name:(n=u.value[V.value.length-1])==null?void 0:n.profile.first_name,last_name:(q=u.value[V.value.length-1])==null?void 0:q.profile.last_name}]})):(V.value.map((C,G)=>(C.profile_id=u.value[G].profile_id,C.status=u.value[G].status,C.date_approved=u.value[G].date_approved,C.reason_rejected=u.value[G].reason_rejected,C)),V.value.length>1&&(V.value[u.value.length-1]={id:u.value[u.value.length-1].id,profile_id:u.value[u.value.length-1].profile_id,status:u.value[u.value.length-1].status,date_approved:u.value[u.value.length-1].date_approved,status:u.value[u.value.length-1].status,reason_rejected:"",types:u.value[u.value.length-1].approval_type,sort:u.value[u.value.length-1].orders,request_asset_id:u.value[u.value.length-1].request_asset_id,signatures:[{id:(O=u.value[u.value.length-1])==null?void 0:O.profile.id,display_name:(be=u.value[u.value.length-1])==null?void 0:be.profile.display_name,first_name:(we=u.value[u.value.length-1])==null?void 0:we.profile.first_name,last_name:(xe=u.value[u.value.length-1])==null?void 0:xe.profile.last_name}]}))}((qe=t.data)==null?void 0:qe.stages.length)>0?J.value=!0:J.value=!1}).catch(t=>{})},Z=p(!1),F=()=>{let l=!1;te.value=!1,r.value.company_id&&r.value.request_type_id&&r.value.subject&&r.value.transferred_from&&r.value.transferred_to&&(l=!0);let t=!0;S.value.map(a=>{(!a.item_description||!a.reason_for_request||!a.uom||!a.qty||a.qty<=0)&&(t=!1)});let e=!0;V.value.map(a=>{a.profile_id||(e=!1)}),e&&t&&l&&(te.value=!0)},Ve=l=>{let t={status:l,profile_id:v.user.profile.id,ID:m.value.id};I(v.token).post("/api/request-asset/change-request/data",t).then(e=>{A.value={status:!0,type:"success",text:e.data.message},m.value.status=l,Fe("saved",e.data.message)}).catch(e=>{})},ke=(l,t=6)=>{let e="00000"+l;return e.substring(e.length-t)};pt(()=>{var l,t,e,a,h,w,U,y;if(Ge().then(()=>{Ke().then(()=>{Je()})}),E.params.id){x.value=!0;let n=N.objectdata;m.value=n,r.value.company_id=n.company_id,r.value.request_type_id=n.request_type_id,r.value.subject=n.subject,r.value.transferred_from=n.transferred_from,r.value.transferred_to=n.transferred_to,r.value.id=n.id,r.value.requestor_id=n.profile_id,u.value=n.request_approvals,S.value=n.items,z.value=(t=(l=n.request_approvals)==null?void 0:l.filter(q=>q.status=="awaiting-approval"))==null?void 0:t[0],!z.value&&n.status=="reject"&&(z.value=(a=(e=n.request_approvals)==null?void 0:e.filter(q=>q.status=="reject"))==null?void 0:a[0]),D.value=n.attachment,ue()}else{r.value.company_id=v.user.profile.company_id;let n=localStorage.getItem("draft-request");n&&(n=Ut(n),Z.value=!0,r.value.request_type_id=(h=n==null?void 0:n.data)==null?void 0:h.request_type_id,r.value.transferred_from=(w=n==null?void 0:n.data)==null?void 0:w.transferred_from,r.value.transferred_to=(U=n==null?void 0:n.data)==null?void 0:U.transferred_to,r.value.subject=(y=n==null?void 0:n.data)==null?void 0:y.subject,r.value.request_type_id&&ue().then(()=>{u.value=n.approval,V.value.map((q,O)=>(q.profile_id=u.value[O].profile_id,q.status=u.value[O].status,q.date_approved=u.value[O].date_approved,q.reason_rejected=u.value[O].reason_rejected,q))}),S.value=n==null?void 0:n.assets)}}),Se(r.value,async(l,t)=>{F()}),Se(S.value,async(l,t)=>{F()}),ie(()=>v.user.role=="receiving-releasing"||v.user.role=="facility");const dt=p("https://assets.grandiose.ae"),ut=ie(()=>{var U,y,n,q,O;let l=null,t=dt.value+"/pv/employee-signatory",e=Re(50),a=Re(50),h=95,w=99;return((y=(U=v.user)==null?void 0:U.profile)==null?void 0:y.id)==((n=z.value)==null?void 0:n.profile_id)&&(h=(q=z.value)==null?void 0:q.profile_id,w=(O=z.value)==null?void 0:O.orders),m.value&&(l=t+"/transfer/approvals?o="+w+"&key="+e+"&pid="+h+"&pv="+a+"&id="+m.value.id),l});return(l,t)=>(i(),g(St,null,{default:d(()=>[o(Ct,{title:N.headertitle,class:"no-print"},null,8,["title"]),o(b,{class:"mb-3"},{default:d(()=>[o(_t,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[o(R,null,{default:d(()=>[o(mt,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:d(()=>[s("div",null,_(N.headertitle)+" "+_(Z.value?"(Draft)":""),1),J.value?f("",!0):(i(),k("div",Et,_(ge.value),1)),x.value?(i(),k("div",{key:1,class:Ce(m.value.status=="cancelled"?"text-error":m.value.status=="complete"?"text-success":"")}," STATUS ("+_(m.value.status)+") ",3)):f("",!0),s("div",null,"DATE: "+_(c(Ie)(Pe.value)),1)]),_:1}),o(re),o(H,null,{default:d(()=>[o(b,{class:"no-print"},{default:d(()=>[x.value?(i(),k("div",{key:0,class:Ce(`${m.value.status=="complete"?"v-col-12":"v-col-md-12"}`)},[o(b,null,{default:d(()=>[s("div",Ot," REQUEST NO: SN-5"+_(ke(m.value.id)),1),s("div",Dt,[x.value&&(m.value.status=="pending"||m.value.status=="cancelled")?(i(),k("div",Rt,[r.value.requestor_id==c(v).user.profile.id&&m.value.status=="pending"?(i(),g(T,{key:0,onClick:t[0]||(t[0]=e=>Ve("cancelled")),color:"warning"},{default:d(()=>[j("Cancel request")]),_:1})):f("",!0),r.value.requestor_id==c(v).user.profile.id&&m.value.status=="cancelled"?(i(),g(T,{key:1,onClick:t[1]||(t[1]=e=>Ve("pending")),size:"small",color:"info"},{default:d(()=>[j("Change status to Pending")]),_:1})):f("",!0)])):f("",!0)])]),_:1})],2)):f("",!0),s("div",It,[o(L,{items:pe.value,modelValue:r.value.request_type_id,"onUpdate:modelValue":[t[2]||(t[2]=e=>r.value.request_type_id=e),ue],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:x.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),s("div",Nt,[o(L,{items:_e.value,modelValue:r.value.company_id,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),s("div",Ft,[o(L,{items:de.value,modelValue:r.value.transferred_from,"onUpdate:modelValue":t[4]||(t[4]=e=>r.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),s("div",Lt,[o(L,{items:de.value,modelValue:r.value.transferred_to,"onUpdate:modelValue":t[5]||(t[5]=e=>r.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"]),x.value&&le.value.includes(c(v).user.profile.role)?(i(),g(T,{key:0,size:"small",loading:ae.value,onClick:We,color:"success",class:"mx-2 my-auto"},{default:d(()=>[j("Save")]),_:1},8,["loading"])):f("",!0)]),s("div",Pt,[o(W,{modelValue:r.value.subject,"onUpdate:modelValue":t[6]||(t[6]=e=>r.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),o(b,{class:"for-print-flex mx-2 mb-1"},{default:d(()=>{var e,a;return[s("div",zt," REQUEST NO: "+_(m.value.id?"SN-5"+ke(m.value.id):""),1),s("div",Bt," TYPE OF REQUEST: "+_(ve.value),1),s("div",Mt," COMPANY: "+_((a=(e=m.value)==null?void 0:e.company)==null?void 0:a.title),1),s("div",$t," LOCATION FROM: "+_(he.value),1),s("div",Qt," LOCATION TO: "+_(ye.value),1),s("div",Yt," SUBJECT: "+_(m.value.subject),1)]}),_:1})]),_:1})]),_:1}),o(R,{class:"my-2"},{default:d(()=>[o(H,null,{default:d(()=>[o(b,null,{default:d(()=>{var e;return[m.value.status!="complete"&&(!c(E).params.id||r.value.requestor_id==c(v).user.profile.id&&((e=N.objectdata)==null?void 0:e.status)=="pending"||c(v).user.profile.role=="superadmin"||c(v).user.profile.role=="administrator")?(i(),k("div",Gt,[o(T,{size:"small",color:"primary",class:"no-print",onClick:Ze},{default:d(()=>[j("Add")]),_:1})])):f("",!0)]}),_:1}),o(b,{class:"for-print-flex mx-2 header mb-1 mt-0"},{default:d(()=>[Kt,Ht,Jt,Zt,Wt,Xt,ea]),_:1}),(i(!0),k(P,null,$(S.value,(e,a)=>(i(),g(b,{key:a,class:"for-print-flex mx-2 row-bordered mb-1"},{default:d(()=>[s("div",ta,_(e.item_description),1),s("div",aa,_(e.asset_code),1),s("div",la,_(e.qty),1),s("div",sa,_(e.uom),1),s("div",oa,_(e.weight),1),s("div",da,_(e.item_value),1),s("div",ua,_(e.reason_for_request),1)]),_:2},1024))),128)),(i(!0),k(P,null,$(S.value,(e,a)=>(i(),g(b,{key:a,class:"no-print"},{default:d(()=>{var h,w,U;return[s("div",ia,[(h=e.attachment)!=null&&h.id?(i(),g(b,{key:0,class:"px-1"},{default:d(()=>[s("div",ra,[o(W,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":y=>e.attachment.id=y},null,8,["modelValue","onUpdate:modelValue"]),!x.value||x.value&&r.value.requestor_id==c(v).user.profile.id?(i(),g(T,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:c(Ae),size:"16px",color:"error",onClick:()=>Ye(a,e.attachment.id)},null,8,["icon","onClick"])):f("",!0),o(R,{onClick:()=>Qe(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),o(ne,{modelValue:M.value,"onUpdate:modelValue":t[7]||(t[7]=y=>M.value=y),width:"95%","max-width":"900"},{default:d(()=>[o(R,{class:"bg-black"},{default:d(()=>[s("div",na,[o(X,{src:Q.value+"/file/"+ce.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(i(),g(b,{key:1,class:"mt-0"},{default:d(()=>[s("div",ca,[o(ft,{color:"grey-lighten-4",class:"text-center"},{default:d(()=>[o(De,{options:{multiSelect:!1,type:"request-asset",userID:c(v).user.profile.id},onSelect:y=>ze(a,y)},null,8,["options","onSelect"])]),_:2},1024)])]),_:2},1024))]),s("div",va,[o(Te,{modelValue:e.item_description,"onUpdate:modelValue":[y=>e.item_description=y,F],variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"ITEM DESC*"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",pa,[o(W,{modelValue:e.asset_code,"onUpdate:modelValue":y=>e.asset_code=y,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE","append-inner-icon":c(ht),"onClick:appendInner":y=>fe(e.asset_code,a)},null,8,["modelValue","onUpdate:modelValue","append-inner-icon","onClick:appendInner"]),(!c(E).params.id||r.value.requestor_id==c(v).user.profile.id&&((w=N.objectdata)==null?void 0:w.status)=="pending"||c(v).user.profile.role=="superadmin"||c(v).user.profile.role=="administrator")&&m.value.status!="complete"?(i(),g(ee,{key:0,onClick:y=>He(a),class:"ml-2 my-auto",size:"x-small",icon:c(yt)},null,8,["onClick","icon"])):f("",!0)]),s("div",_a,[o(W,{type:"number",modelValue:e.qty,"onUpdate:modelValue":[y=>e.qty=y,F],variant:"outlined",density:"compact","hide-details":"",label:"QTY*"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ma,[o(L,{items:ot.value,modelValue:e.uom,"onUpdate:modelValue":[y=>e.uom=y,F],variant:"outlined",density:"compact","hide-details":"",label:"UOM*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),s("div",fa,[j(_(e.weight?e.weight:0),1),ha,ya]),s("div",ga,[j(_(e.item_value?e.item_value:0),1),Va,ka]),s("div",ba,[o(Te,{modelValue:e.reason_for_request,"onUpdate:modelValue":y=>e.reason_for_request=y,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON*"},null,8,["modelValue","onUpdate:modelValue"]),!x.value||x.value&&c(v).user.profile.id==N.objectdata.profile_id&&((U=N.objectdata)==null?void 0:U.status)=="pending"?(i(),g(ee,{key:0,size:"small",onClick:()=>et(e.id,a),icon:c(gt),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):f("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),r.value.extra_attachment?(i(),g(R,{key:0},{default:d(()=>[o(H,null,{default:d(()=>{var e;return[!x.value||x.value&&r.value.requestor_id==c(v).user.profile.id?(i(),k("div",wa,[xa,o(De,{options:{multiSelect:!0,type:"request-asset"},onSelect:Be})])):f("",!0),((e=D.value)==null?void 0:e.length)>0?(i(),g(b,{key:1,class:"px-1 mt-4"},{default:d(()=>[(i(!0),k(P,null,$(D.value,(a,h)=>(i(),k("div",{key:a.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[x.value&&(m.value.status=="pending"||m.value.status=="cancelled")?(i(),g(T,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:c(Ae),size:"20px",color:"error",onClick:()=>Me(a.id)},null,8,["icon","onClick"])):f("",!0),o(R,{onClick:()=>$e(a,h)},{default:d(()=>[a.mime=="image/jpeg"||a.mime=="image/png"?(i(),g(X,{key:0,src:Q.value+"/file/"+a.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(i(),g(X,{key:1,src:Q.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),o(ne,{modelValue:M.value,"onUpdate:modelValue":t[9]||(t[9]=a=>M.value=a),width:"95%","max-width":"900"},{default:d(()=>[o(R,{class:"bg-black"},{default:d(()=>[o(Vt,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:se.value,"onUpdate:modelValue":t[8]||(t[8]=a=>se.value=a)},{default:d(()=>[(i(!0),k(P,null,$(D.value,(a,h)=>(i(),g(kt,{key:h,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[s("div",{style:bt(`${B.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[B.value=="jpg"||B.value=="jpeg"||B.value=="png"?(i(),g(X,{key:0,src:Q.value+"/file/"+a.path},null,8,["src"])):f("",!0),B.value=="pdf"?(i(),k("object",{key:1,data:Q.value+"/file/"+a.path,type:"application/pdf",width:"100%",height:"800px"},null,8,qa)):f("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):f("",!0)]}),_:1})]),_:1})):f("",!0),o(R,{class:"my-2"},{default:d(()=>[o(H,null,{default:d(()=>[o(b,null,{default:d(()=>[s("div",Sa,[Ca,c(E).params.id?(i(),k("div",Aa,[o(T,{color:"info",size:"small",target:"_blank",href:ut.value},{default:d(()=>[j("View Approval Page")]),_:1},8,["href"])])):f("",!0)]),o(re)]),_:1}),o(b,{class:"no-print"},{default:d(()=>{var e,a;return[Ta,s("div",Ua,_((a=(e=m.value)==null?void 0:e.profile)==null?void 0:a.display_name),1),ja,x.value&&le.value.includes(c(v).user.profile.role)?(i(),k("div",Ea,"Change To")):f("",!0)]}),_:1}),o(b,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:d(()=>{var e,a;return[Oa,s("div",Da,_((a=(e=m.value)==null?void 0:e.profile)==null?void 0:a.display_name),1),Ra,Ia]}),_:1}),(i(!0),k(P,null,$(u.value,e=>(i(),g(b,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:d(()=>{var a;return[s("div",Na,_(oe(e.approval_type)),1),s("div",Fa,_((a=e==null?void 0:e.profile)==null?void 0:a.display_name),1),s("div",La,[e.status?(i(),g(ee,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?c(Ue):e.status=="pending"?c(je):e.status=="reject"?c(Ee):c(Oe),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):f("",!0)]),s("div",Pa,_(e.date_approved),1)]}),_:2},1024))),128)),J.value?(i(),k(P,{key:0},[(i(!0),k(P,null,$(V.value,(e,a)=>(i(),g(b,{class:"no-print",key:e==null?void 0:e.id},{default:d(()=>[e.id?(i(),k("div",za,_(e.types?oe(e.types):oe(e.approval_type)),1)):f("",!0),e.id?(i(),k("div",Ba,[o(L,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[h=>e.profile_id=h,F],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),o(T,{variant:"text",size:"x-small"},{default:d(()=>[e.status?(i(),g(ee,{key:0,class:"mx-2 my-3 no-print",icon:e.status=="awaiting-approval"?c(Ue):e.status=="pending"?c(je):e.status=="reject"?c(Ee):c(Oe),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):f("",!0),o(wt,{activator:"parent",location:"top","max-width":"400"},{default:d(()=>[j(_(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)])):f("",!0),e.id?(i(),k("div",Ma,_(e.date_approved?c(Ie)(e.date_approved):""),1)):f("",!0),e.id&&x.value&&le.value.includes(c(v).user.profile.role)?(i(),k("div",$a,[o(L,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[h=>e.profile_id=h,h=>Xe(e.profile_id,a)],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*"},null,8,["items","modelValue","onUpdate:modelValue"])])):f("",!0)]),_:2},1024))),128)),o(b,null,{default:d(()=>{var e;return[o(re),s("div",Qa,[(!c(E).params.id||r.value.requestor_id==c(v).user.profile.id&&((e=N.objectdata)==null?void 0:e.status)=="pending"||c(v).user.profile.role=="superadmin"||c(v).user.profile.role=="administrator")&&m.value.status!="complete"?(i(),g(T,{key:0,disabled:!te.value,onClick:st,class:"no-print",color:"primary"},{default:d(()=>[j(_(c(E).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):f("",!0),c(E).params.id?f("",!0):(i(),g(T,{key:1,size:"small",class:"mx-3",onClick:at,color:"warning"},{default:d(()=>[j("Save as Draft")]),_:1})),Z.value?(i(),g(T,{key:2,size:"small",class:"mx-3",onClick:tt,color:"info"},{default:d(()=>[j("Delete Draft")]),_:1})):f("",!0)])]}),_:1})],64)):(i(),g(b,{key:1,class:"no-print"},{default:d(()=>[s("div",Ya,_(ge.value),1)]),_:1})),o(b,null,{default:d(()=>[Ga]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(At,{options:A.value},null,8,["options"]),o(ne,{width:"500",modelValue:Y.value,"onUpdate:modelValue":t[11]||(t[11]=e=>Y.value=e)},{default:d(()=>[o(R,null,{default:d(()=>[o(H,null,{default:d(()=>[o(c(Tt.QrcodeStream),{onDecode:fe})]),_:1}),o(xt,null,{default:d(()=>[o(qt),o(T,{text:"Close",onClick:t[10]||(t[10]=e=>Y.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{al as _};
