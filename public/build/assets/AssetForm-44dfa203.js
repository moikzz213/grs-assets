import{ah as Le,ad as Ie,N as qe,i as ke,r as P,O as $e,D as re,b as M,j as K,k as r,e as l,l as s,z as H,m as T,J as Ce,K as _,ac as De,A as le,H as xe,c as G,F as ve,d as fe,t as U,T as Ve,I as se,Z as Ue,V as Oe,X as Ae,q as Ye,E as J,P as ae,u as ze,ai as Ne,W as Fe,y as W,a3 as q,a0 as we,w as oe,v as ie,Y as Se,_ as Pe,$ as He}from"./app-4d09b9e7.js";import{F as je,c as Re,a as E,b as F}from"./index.esm-feb86d9b.js";import{_ as We}from"./AppSnackBar-a9c4abb9.js";import{_ as Be}from"./Studio-b8bbf1e7.js";import{u as Me}from"./formatDate-d9866ad4.js";import{u as Ee}from"./categories-debb57d1.js";import{u as Je}from"./status-f30af12e.js";import{u as Ke}from"./vendors-d503f382.js";var Te={exports:{}};(function(z,V){(function(R,N){z.exports=N()})(Le,function(){var R=1e3,N=6e4,O=36e5,f="millisecond",A="second",k="minute",x="hour",C="day",S="week",g="month",L="quarter",b="year",$="date",a="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ue=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(d){var i=["th","st","nd","rd"],n=d%100;return"["+d+(i[(n-20)%10]||i[n]||i[0])+"]"}},de=function(d,i,n){var u=String(d);return!u||u.length>=i?d:""+Array(i+1-u.length).join(n)+d},be={s:de,z:function(d){var i=-d.utcOffset(),n=Math.abs(i),u=Math.floor(n/60),o=n%60;return(i<=0?"+":"-")+de(u,2,"0")+":"+de(o,2,"0")},m:function d(i,n){if(i.date()<n.date())return-d(n,i);var u=12*(n.year()-i.year())+(n.month()-i.month()),o=i.clone().add(u,g),c=n-o<0,m=i.clone().add(u+(c?-1:1),g);return+(-(u+(n-o)/(c?o-m:m-o))||0)},a:function(d){return d<0?Math.ceil(d)||0:Math.floor(d)},p:function(d){return{M:g,y:b,w:S,d:C,D:$,h:x,m:k,s:A,ms:f,Q:L}[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(d){return d===void 0}},X="en",Z={};Z[X]=_e;var ye="$isDayjsObject",ce=function(d){return d instanceof v||!(!d||!d[ye])},p=function d(i,n,u){var o;if(!i)return X;if(typeof i=="string"){var c=i.toLowerCase();Z[c]&&(o=c),n&&(Z[c]=n,o=c);var m=i.split("-");if(!o&&m.length>1)return d(m[0])}else{var w=i.name;Z[w]=i,o=w}return!u&&o&&(X=o),o||!u&&X},t=function(d,i){if(ce(d))return d.clone();var n=typeof i=="object"?i:{};return n.date=d,n.args=arguments,new v(n)},e=be;e.l=p,e.i=ce,e.w=function(d,i){return t(d,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var v=function(){function d(n){this.$L=p(n.locale,null,!0),this.parse(n),this.$x=this.$x||n.x||{},this[ye]=!0}var i=d.prototype;return i.parse=function(n){this.$d=function(u){var o=u.date,c=u.utc;if(o===null)return new Date(NaN);if(e.u(o))return new Date;if(o instanceof Date)return new Date(o);if(typeof o=="string"&&!/Z$/i.test(o)){var m=o.match(h);if(m){var w=m[2]-1||0,D=(m[7]||"0").substring(0,3);return c?new Date(Date.UTC(m[1],w,m[3]||1,m[4]||0,m[5]||0,m[6]||0,D)):new Date(m[1],w,m[3]||1,m[4]||0,m[5]||0,m[6]||0,D)}}return new Date(o)}(n),this.init()},i.init=function(){var n=this.$d;this.$y=n.getFullYear(),this.$M=n.getMonth(),this.$D=n.getDate(),this.$W=n.getDay(),this.$H=n.getHours(),this.$m=n.getMinutes(),this.$s=n.getSeconds(),this.$ms=n.getMilliseconds()},i.$utils=function(){return e},i.isValid=function(){return this.$d.toString()!==a},i.isSame=function(n,u){var o=t(n);return this.startOf(u)<=o&&o<=this.endOf(u)},i.isAfter=function(n,u){return t(n)<this.startOf(u)},i.isBefore=function(n,u){return this.endOf(u)<t(n)},i.$g=function(n,u,o){return e.u(n)?this[u]:this.set(o,n)},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this.$d.getTime()},i.startOf=function(n,u){var o=this,c=!!e.u(u)||u,m=e.p(n),w=function(te,I){var Q=e.w(o.$u?Date.UTC(o.$y,I,te):new Date(o.$y,I,te),o);return c?Q:Q.endOf(C)},D=function(te,I){return e.w(o.toDate()[te].apply(o.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(I)),o)},Y=this.$W,j=this.$M,B=this.$D,ne="set"+(this.$u?"UTC":"");switch(m){case b:return c?w(1,0):w(31,11);case g:return c?w(1,j):w(0,j+1);case S:var ee=this.$locale().weekStart||0,me=(Y<ee?Y+7:Y)-ee;return w(c?B-me:B+(6-me),j);case C:case $:return D(ne+"Hours",0);case x:return D(ne+"Minutes",1);case k:return D(ne+"Seconds",2);case A:return D(ne+"Milliseconds",3);default:return this.clone()}},i.endOf=function(n){return this.startOf(n,!1)},i.$set=function(n,u){var o,c=e.p(n),m="set"+(this.$u?"UTC":""),w=(o={},o[C]=m+"Date",o[$]=m+"Date",o[g]=m+"Month",o[b]=m+"FullYear",o[x]=m+"Hours",o[k]=m+"Minutes",o[A]=m+"Seconds",o[f]=m+"Milliseconds",o)[c],D=c===C?this.$D+(u-this.$W):u;if(c===g||c===b){var Y=this.clone().set($,1);Y.$d[w](D),Y.init(),this.$d=Y.set($,Math.min(this.$D,Y.daysInMonth())).$d}else w&&this.$d[w](D);return this.init(),this},i.set=function(n,u){return this.clone().$set(n,u)},i.get=function(n){return this[e.p(n)]()},i.add=function(n,u){var o,c=this;n=Number(n);var m=e.p(u),w=function(j){var B=t(c);return e.w(B.date(B.date()+Math.round(j*n)),c)};if(m===g)return this.set(g,this.$M+n);if(m===b)return this.set(b,this.$y+n);if(m===C)return w(1);if(m===S)return w(7);var D=(o={},o[k]=N,o[x]=O,o[A]=R,o)[m]||1,Y=this.$d.getTime()+n*D;return e.w(Y,this)},i.subtract=function(n,u){return this.add(-1*n,u)},i.format=function(n){var u=this,o=this.$locale();if(!this.isValid())return o.invalidDate||a;var c=n||"YYYY-MM-DDTHH:mm:ssZ",m=e.z(this),w=this.$H,D=this.$m,Y=this.$M,j=o.weekdays,B=o.months,ne=o.meridiem,ee=function(I,Q,pe,ge){return I&&(I[Q]||I(u,c))||pe[Q].slice(0,ge)},me=function(I){return e.s(w%12||12,I,"0")},te=ne||function(I,Q,pe){var ge=I<12?"AM":"PM";return pe?ge.toLowerCase():ge};return c.replace(ue,function(I,Q){return Q||function(pe){switch(pe){case"YY":return String(u.$y).slice(-2);case"YYYY":return e.s(u.$y,4,"0");case"M":return Y+1;case"MM":return e.s(Y+1,2,"0");case"MMM":return ee(o.monthsShort,Y,B,3);case"MMMM":return ee(B,Y);case"D":return u.$D;case"DD":return e.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return ee(o.weekdaysMin,u.$W,j,2);case"ddd":return ee(o.weekdaysShort,u.$W,j,3);case"dddd":return j[u.$W];case"H":return String(w);case"HH":return e.s(w,2,"0");case"h":return me(1);case"hh":return me(2);case"a":return te(w,D,!0);case"A":return te(w,D,!1);case"m":return String(D);case"mm":return e.s(D,2,"0");case"s":return String(u.$s);case"ss":return e.s(u.$s,2,"0");case"SSS":return e.s(u.$ms,3,"0");case"Z":return m}return null}(I)||m.replace(":","")})},i.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},i.diff=function(n,u,o){var c,m=this,w=e.p(u),D=t(n),Y=(D.utcOffset()-this.utcOffset())*N,j=this-D,B=function(){return e.m(m,D)};switch(w){case b:c=B()/12;break;case g:c=B();break;case L:c=B()/3;break;case S:c=(j-Y)/6048e5;break;case C:c=(j-Y)/864e5;break;case x:c=j/O;break;case k:c=j/N;break;case A:c=j/R;break;default:c=j}return o?c:e.a(c)},i.daysInMonth=function(){return this.endOf(g).$D},i.$locale=function(){return Z[this.$L]},i.locale=function(n,u){if(!n)return this.$L;var o=this.clone(),c=p(n,u,!0);return c&&(o.$L=c),o},i.clone=function(){return e.w(this.$d,this)},i.toDate=function(){return new Date(this.valueOf())},i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toISOString=function(){return this.$d.toISOString()},i.toString=function(){return this.$d.toUTCString()},d}(),y=v.prototype;return t.prototype=y,[["$ms",f],["$s",A],["$m",k],["$H",x],["$W",C],["$M",g],["$y",b],["$D",$]].forEach(function(d){y[d[1]]=function(i){return this.$g(i,d[0],d[1])}}),t.extend=function(d,i){return d.$i||(d(i,v,t),d.$i=!0),t},t.locale=p,t.isDayjs=ce,t.unix=function(d){return t(1e3*d)},t.en=Z[X],t.Ls=Z,t.p={},t})})(Te);var Ze=Te.exports;const he=Ie(Ze),Ge={class:"v-col-12 pt-0 pb-2"},Xe=l("thead",null,[l("tr",null,[l("th",{class:"text-left text-primary"},"#"),l("th",{class:"text-left text-primary"},"Title"),l("th",{class:"text-left text-primary"},"Vendor"),l("th",{class:"text-left text-primary"}," Warranty Start "),l("th",{class:"text-left text-primary"},"Warranty End"),l("th",{class:"text-left text-primary"},"AMC Start"),l("th",{class:"text-left text-primary"},"AMC End")])],-1),Qe=["onClick"],et={class:"v-col-12 v-col-md-12 pt-0 pb-2"},tt={class:"v-col-12 pt-0 pb-2 d-flex justify-end"},at={__name:"AssetWarranties",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(z){const V=z,R=qe(),N=ke(),O=P({}),f=P({status:!1,action:"add",loading:!1,data:{}}),A=P([]);$e(()=>V.asset,b=>{A.value=b.pivot_warranties,g()});const k=P(0),x=(b=null)=>{f.value.status=!0,b?(f.value.action="edit",f.value.data=Object.assign({},b),k.value=b.id):(f.value.action="add",f.value.data={})},C=async()=>{f.value.loading=!0;let b={id:f.value.data.id,asset_id:R.params.id,warranty_id:f.value.data.warranty_id,old_warranty_id:k.value};await re(N.token).post("/api/asset/save-warranty",b).then($=>{L().then(()=>{O.value={status:!0,type:"success",text:$.data.message},f.value.loading=!1,f.value.status=!1})}).catch($=>{f.value.loading=!1,O.value={status:!0,type:"eroor",text:"Error while saving warranty"},console.log("err",$)})},S=P([]),g=()=>{re(N.token).get("/api/fetch-warranties/non-paginated").then(b=>{S.value=b.data}).catch(b=>{f.value.loading=!1})},L=async()=>{await re(N.token).get("/api/asset/warranty/"+R.params.id).then(b=>{A.value=b.data,f.value.loading=!1}).catch(b=>{f.value.loading=!1})};return(b,$)=>(M(),K(J,null,{default:r(()=>[l("div",Ge,[s(H,{onClick:$[0]||($[0]=()=>x()),class:"mb-3",size:"small"},{default:r(()=>[T(" New Warranty "),s(Ce,{class:"ml-2",icon:_(De)},null,8,["icon"])]),_:1}),s(le,null,{default:r(()=>{var a;return[s(xe,{density:"compact"},{default:r(()=>[Xe,l("tbody",null,[(M(!0),G(ve,null,fe(A.value,(h,ue)=>(M(),G("tr",{key:h.id,onClick:()=>x(h),class:"cursor-pointer table-cell-hover"},[l("td",null,U(ue+1),1),l("td",null,U(h.warranty_title),1),l("td",null,U(h.vendor&&h.vendor.title),1),l("td",null,U(h.warranty_start_date&&h.warranty_start_date!="0000-00-00"?_(he)(h.warranty_start_date).format("MMM. DD, YYYY"):""),1),l("td",null,U(h.warranty_end_date&&h.warranty_end_date!="0000-00-00"?_(he)(h.warranty_end_date).format("MMM. DD, YYYY"):""),1),l("td",null,U(h.amc_start_date&&h.amc_start_date!="0000-00-00"?_(he)(h.amc_start_date).format("MMM. DD, YYYY"):""),1),l("td",null,U(h.amc_end_date&&h.amc_end_date!="0000-00-00"?_(he)(h.amc_end_date).format("MMM. DD, YYYY"):""),1)],8,Qe))),128))])]),_:1}),((a=A.value)==null?void 0:a.length)==0?(M(),K(Ve,{key:0,class:"pa-3 text-center"},{default:r(()=>[T("No record at the moment")]),_:1})):se("",!0)]}),_:1})]),s(Ue,{modelValue:f.value.status,"onUpdate:modelValue":$[3]||($[3]=a=>f.value.status=a),persistent:"",width:"600"},{default:r(()=>[s(le,null,{default:r(()=>[s(Oe,{class:"text-capitalize mb-3 d-flex justify-space-between align-center"},{default:r(()=>[T(U(f.value.action+" Warranty")+" ",1),s(H,{icon:_(Ae),variant:"flat",size:"small",onClick:$[1]||($[1]=a=>f.value.status=!1)},null,8,["icon"])]),_:1}),s(Ye,null,{default:r(()=>[s(_(je),{as:"v-form"},{default:r(()=>[s(J,{class:"mb-0"},{default:r(()=>[l("div",et,[s(ae,{modelValue:f.value.data.warranty_id,"onUpdate:modelValue":$[2]||($[2]=a=>f.value.data.warranty_id=a),items:S.value,"item-title":"warranty_title","item-value":"id",label:"Select Warranty",density:"compact",variant:"outlined"},null,8,["modelValue","items"])]),l("div",tt,[s(H,{color:"primary",loading:f.value.loading,onClick:C,disabled:!f.value.data.warranty_id},{default:r(()=>[T("Save")]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(We,{options:O.value},null,8,["options"])]),_:1}))}},lt={class:"v-col-12 pt-0 pb-2"},st=l("thead",null,[l("tr",null,[l("th",{class:"text-left text-primary"},"ISR ID"),l("th",{class:"text-left text-primary"},"Urgency"),l("th",{class:"text-left text-primary"},"Priority"),l("th",{class:"text-left text-primary"},"Reported by"),l("th",{class:"text-left text-primary"},"Handled by"),l("th",{class:"text-left text-primary"},"Date Reported"),l("th",{class:"text-left text-primary"},"Date Completed"),l("th",{class:"text-left text-primary"},"Status"),l("th",{class:"text-left text-primary"})])],-1),nt={__name:"AssetMaintenances",props:{asset:{type:Object,default:null}},setup(z){const V=z,R=ze(),N=()=>{R.push({name:"NewMaintenance",query:{type:"details",asset_code:k.value.asset_code,asset_id:k.value.id,comp:k.value.company_id,loc:k.value.location_id,title:k.value.asset_name}})},O=x=>{R.push({name:"EditMaintenance",params:{id:x},query:{type:"details",pd:"ox2rKaIYFhBOQW31j6kkiMrJ4KfnYpLmwJhMzBFwPBlVjgGR4g",v:1,vv:"xK2sX1sDL1BBAvmuoPpWoNRgc4wzbdZ9F2OXAKrS3N2g65xNgy"}}).catch(C=>{console.log(C)})},f=x=>x?x==1?"Normal":x==2?"Medium":"High":"",A=(x,C=5)=>{let S="0000"+x;return S.substring(S.length-C)},k=P({});return $e(()=>V.asset,(x,C)=>{k.value=x,console.log("assetDetail.value",k.value)},{deep:!0}),(x,C)=>(M(),K(J,null,{default:r(()=>[l("div",lt,[k.value.status_id!=2?(M(),K(H,{key:0,onClick:N,class:"mb-3",size:"small"},{default:r(()=>[T(" New Maintenance "),s(Ce,{class:"ml-2",icon:_(De)},null,8,["icon"])]),_:1})):se("",!0),s(le,null,{default:r(()=>[s(xe,{density:"compact"},{default:r(()=>[st,l("tbody",null,[(M(!0),G(ve,null,fe(V.asset.maintenance,(S,g)=>{var L,b,$;return M(),G("tr",{key:S.id},[l("td",null,"ISR-2"+U(A(S.id)),1),l("td",null,U(f(S.urgency)),1),l("td",null,U(f(S.priority)),1),l("td",null,U((L=S.profile)==null?void 0:L.display_name),1),l("td",null,U((b=S.handle_by)==null?void 0:b.display_name),1),l("td",null,U(_(Me)(S.created_at)),1),l("td",null,U(S.date_closed?_(Me)(S.date_closed):""),1),l("td",null,U(($=S.status)==null?void 0:$.title),1),l("td",null,[s(H,{color:"info",size:"x-small",onClick:a=>O(S.id)},{default:r(()=>[T("Details")]),_:2},1032,["onClick"])])])}),128))])]),_:1}),V.asset.maintenance&&V.asset.maintenance.length==0?(M(),K(Ve,{key:0,class:"pa-3 text-center"},{default:r(()=>[T("No record at the moment")]),_:1})):se("",!0)]),_:1})])]),_:1}))}},ot={class:"v-col-12 pt-0 pb-2"},it=l("thead",null,[l("tr",null,[l("th",{class:"text-left text-primary"},"#"),l("th",{class:"text-left text-primary"},"Alloted to"),l("th",{class:"text-left text-primary"},"Remarks")])],-1),rt={__name:"AssetAllotedLocations",props:{asset:{type:Object,default:null}},setup(z){const V=z;return(R,N)=>(M(),K(J,null,{default:r(()=>[l("div",ot,[s(le,null,{default:r(()=>[s(xe,{density:"compact"},{default:r(()=>[it,l("tbody",null,[(M(!0),G(ve,null,fe(V.asset.allotted_informations,(O,f)=>(M(),G("tr",{key:O.id},[l("td",null,U(f+1),1),l("td",null,U(O.title),1),l("td",null,U(O.remarks),1)]))),128))])]),_:1}),V.asset.allotted_informations&&V.asset.allotted_informations.length==0?(M(),K(Ve,{key:0,class:"pa-3 text-center"},{default:r(()=>[T("No record at the moment")]),_:1})):se("",!0)]),_:1})])]),_:1}))}},ut=Ne("companies",{state:()=>({companies:[]}),getters:{list:z=>z.companies},actions:{async getCompanies(z){await re(z).get("/api/company/state/list").then(V=>{this.companies=Object.assign([],V.data)}).catch(V=>{console.log("getCompanies error: ",V)})}}}),dt=Ne("locations",{state:()=>({locations:[]}),getters:{list:z=>z.locations},actions:{async getLocations(z){await re(z).get("/api/location/state/location-list").then(V=>{this.locations=Object.assign([],V.data)}).catch(V=>{console.log("getlocations error: ",V)})}}}),ct={class:"text-primary text-capitalize"},mt={class:"d-flex align-center"},pt=l("div",{class:"v-col-12 font-weight-bold"},"Asset Info",-1),vt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},ft={class:"v-col-12 v-col-md-6 pt-0 pb-2"},_t={class:"v-col-12 v-col-md-6 pt-0 pb-2"},yt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},gt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},ht={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Vt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},bt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},$t={class:"v-col-12 v-col-md-12 pt-0 pb-2"},xt={key:0,class:"v-col-12 pt-0 font-weight-bold"},wt={key:1,class:"v-col-12 pt-0"},St={class:"v-col-12 pt-0 text-capitalize"},Mt={class:"v-col-12"},kt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ct={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Dt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ut={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ot={class:"v-col-12 v-col-md-12 pt-0 pb-2"},At={class:"v-col-12"},Yt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},zt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Nt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},jt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Wt={class:"v-col-12"},Tt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Lt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},It={class:"v-col-12 v-col-md-6 pt-0 pb-2"},qt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ft={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Pt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ht={class:"v-col-12 mb-6"},Rt={class:"v-col-12 mb-6"},Bt={class:"v-col-12 mb-6"},Et=l("div",{class:"v-col-12 pt-0 font-weight-bold"},"Attachment",-1),Jt={class:"v-col-12 pt-0"},Kt={class:"v-col-12 pb-2"},Zt={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},Gt={class:"v-col-12 pt-0 pb-2"},oa={__name:"AssetForm",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(z){const V=z,R=ze(),N=P({}),O=ke(),f=ut();f.list.length==0&&f.getCompanies(O.token);const A=Ee();A.list.length==0&&A.getCategories(O.token);const k=dt();k.list.length==0&&k.getLocations(O.token);const x=Je();(x.list.length==0||x.conditions.length==0)&&x.getStatuses(O.token);const C=Ke();C.list.length==0&&(console.log("fORM",C.list),C.getVendors(O.token));const S=P(window.location.origin),g=P("specification"),L=p=>{g.value=p};let b=Re({Name:E().required().max(150),"Serial Number":E().max(80).nullable(),"Asset Code":E().max(50).nullable(),"Section code":E().max(30).nullable(),Category:E().required(),Company:E().required(),Location:E().required(),"Asset Status":E().required(),Specification:E().max(120).nullable(),Brand:E().required(),Model:E().required(),Condition:E().required()});const $=P(!1),a=P({}),h=P([]),ue=Fe(()=>h.value.map(p=>p.id)),_e=p=>{a.value=Object.assign({},p),h.value=p&&p.attachments?Object.assign([],p.attachments):[],p&&p.financial_information&&(a.value.capitalization_price=p.financial_information.capitalization_price,a.value.depreciation_percentage=p.financial_information.depreciation_percentage,a.value.scrap_value=p.financial_information.scrap_value,a.value.scrap_date=p.financial_information.scrap_date,a.value.capitalization_date=p.financial_information.capitalization_date,a.value.end_of_life=p.financial_information.end_of_life)};_e(V.asset),$e(()=>V.asset,p=>{_e(p)});const de=async()=>{$.value=!0,a.value.file_ids=ue.value,a.value.company_code=f.list.filter(p=>p.id==a.value.company_id)[0].code,a.value.category_code=A.list.filter(p=>p.id==a.value.category_id)[0].code,a.value.financial_information_id=a.value.financial_information?a.value.financial_information.id:null,await re(O.token).post("/api/asset/save",a.value).then(p=>{N.value={status:!0,type:"success",text:p.data.message},$.value=!1,V.page=="add"&&R.push({name:"edit-asset",params:{id:p.data.asset.id}}).catch(t=>{console.log("router.push",t)})}).catch(p=>{console.log("saveAsset",p),N.value={status:!0,type:"error",text:"Error while saving asset"},$.value=!1})},be=p=>{let t=null;p.map(e=>{t=h.value.find(v=>v.id==e.id),t||h.value.push(e)})},X=P(!1),Z=P(1),ye=p=>{Z.value=p,X.value=!0},ce=p=>{h.value=h.value.filter(t=>t.id!==p)};return(p,t)=>(M(),K(le,{loading:$.value,"max-width":"1600px",class:"mx-auto elevation-0"},{default:r(()=>[s(_(je),{as:"v-form","validation-schema":_(b)},{default:r(()=>[s(Oe,{class:"pb-6 pt-3 d-flex align-center justify-space-between"},{default:r(()=>[l("div",ct,U(V.page+" Asset"),1),l("div",mt,[s(H,{color:"primary",loading:$.value,onClick:de},{default:r(()=>[T("Save")]),_:1},8,["loading"])])]),_:1}),s(Ye,null,{default:r(()=>[s(J,null,{default:r(()=>[pt,l("div",vt,[s(_(F),{name:"Name",modelValue:a.value.asset_name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.asset_name=e)},{default:r(({field:e,errors:v})=>[s(W,q({modelValue:a.value.asset_name,"onUpdate:modelValue":t[0]||(t[0]=y=>a.value.asset_name=y)},e,{label:"Name*",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",ft,[s(_(F),{name:"Serial Number",modelValue:a.value.serial_number,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value.serial_number=e)},{default:r(({field:e,errors:v})=>[s(W,q({modelValue:a.value.serial_number,"onUpdate:modelValue":t[2]||(t[2]=y=>a.value.serial_number=y)},e,{label:"Serial Number(Optional)",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",_t,[s(_(F),{name:"Section code",modelValue:a.value.section_code,"onUpdate:modelValue":t[5]||(t[5]=e=>a.value.section_code=e)},{default:r(({field:e,errors:v})=>[s(W,q({modelValue:a.value.section_code,"onUpdate:modelValue":t[4]||(t[4]=y=>a.value.section_code=y)},e,{label:"Section code (optional)",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",yt,[s(ae,{modelValue:a.value.category_id,"onUpdate:modelValue":t[6]||(t[6]=e=>a.value.category_id=e),items:_(A).list,"item-title":"title","item-value":"id",label:"Category*",density:"compact",variant:"outlined",rules:[e=>!!e||"Category is required"]},null,8,["modelValue","items","rules"])]),l("div",gt,[s(ae,{modelValue:a.value.company_id,"onUpdate:modelValue":t[7]||(t[7]=e=>a.value.company_id=e),items:_(f).list,"item-title":"title","item-value":"id",label:"Company*",density:"compact",variant:"outlined",rules:[e=>!!e||"Company is required"]},null,8,["modelValue","items","rules"])]),l("div",ht,[s(ae,{modelValue:a.value.location_id,"onUpdate:modelValue":t[8]||(t[8]=e=>a.value.location_id=e),items:_(k).list,"item-title":"title","item-value":"id",label:"Location*",density:"compact",variant:"outlined",rules:[e=>!!e||"Location is required"]},null,8,["modelValue","items","rules"])]),l("div",Vt,[s(_(F),{name:"Asset Code",modelValue:a.value.asset_code,"onUpdate:modelValue":t[10]||(t[10]=e=>a.value.asset_code=e)},{default:r(({field:e,errors:v})=>[s(W,q({readonly:"",modelValue:a.value.asset_code,"onUpdate:modelValue":t[9]||(t[9]=y=>a.value.asset_code=y)},e,{label:"Asset Code (Auto Generated)",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",bt,[s(ae,{modelValue:a.value.status_id,"onUpdate:modelValue":t[11]||(t[11]=e=>a.value.status_id=e),items:_(x).assets,disabled:a.value.status_id==2,"item-title":"title","item-value":"id",label:"Asset Status*",density:"compact",variant:"outlined",rules:[e=>!!e||"Asset Status is required"]},null,8,["modelValue","items","disabled","rules"])]),l("div",$t,[s(we,{modelValue:a.value.remarks,"onUpdate:modelValue":t[12]||(t[12]=e=>a.value.remarks=e),density:"compact",label:"Remarks",variant:"outlined"},null,8,["modelValue"])])]),_:1}),s(J,null,{default:r(()=>[V.page=="edit"?(M(),G("div",xt," Additional Info ")):se("",!0),V.page=="edit"?(M(),G("div",wt,[s(H,{class:"mr-2 mb-2",onClick:t[13]||(t[13]=()=>L("specification")),color:g.value=="specification"?"primary":"white"},{default:r(()=>[T("Specification")]),_:1},8,["color"]),s(H,{class:"mr-2 mb-2",onClick:t[14]||(t[14]=()=>L("purchase")),color:g.value=="purchase"?"primary":"white"},{default:r(()=>[T("Purchase")]),_:1},8,["color"]),s(H,{class:"mr-2 mb-2",onClick:t[15]||(t[15]=()=>L("financial")),color:g.value=="financial"?"primary":"white"},{default:r(()=>[T("Financial")]),_:1},8,["color"]),s(H,{class:"mr-2 mb-2",onClick:t[16]||(t[16]=()=>L("warranty")),color:g.value=="warranty"?"primary":"white"},{default:r(()=>[T("Warranty")]),_:1},8,["color"]),s(H,{class:"mr-2 mb-2",onClick:t[17]||(t[17]=()=>L("allotted")),color:g.value=="allotted"?"primary":"white"},{default:r(()=>[T("Allotted")]),_:1},8,["color"]),s(H,{class:"mr-2 mb-2",onClick:t[18]||(t[18]=()=>L("maintenance")),color:g.value=="maintenance"?"primary":"white"},{default:r(()=>[T("Maintenance")]),_:1},8,["color"])])):se("",!0),l("div",St,U(g.value+" Information"),1),oe(l("div",Mt,[s(J,null,{default:r(()=>[l("div",kt,[s(_(F),{name:"Specification",modelValue:a.value.specification,"onUpdate:modelValue":t[20]||(t[20]=e=>a.value.specification=e)},{default:r(({field:e,errors:v})=>[s(W,q({modelValue:a.value.specification,"onUpdate:modelValue":t[19]||(t[19]=y=>a.value.specification=y)},e,{label:"Specification*",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Ct,[s(W,{modelValue:a.value.model,"onUpdate:modelValue":t[21]||(t[21]=e=>a.value.model=e),label:"Model*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),l("div",Dt,[s(W,{modelValue:a.value.brand,"onUpdate:modelValue":t[22]||(t[22]=e=>a.value.brand=e),label:"Brand*",variant:"outlined",density:"compact"},null,8,["modelValue"])]),l("div",Ut,[s(ae,{modelValue:a.value.condition_id,"onUpdate:modelValue":t[23]||(t[23]=e=>a.value.condition_id=e),items:_(x).conditions,"item-title":"title","item-value":"id",label:"Condition*",density:"compact",variant:"outlined",rules:[e=>!!e||"Condition is required"]},null,8,["modelValue","items","rules"])]),l("div",Ot,[s(we,{modelValue:a.value.remarks,"onUpdate:modelValue":t[24]||(t[24]=e=>a.value.remarks=e),label:"Asset Remarks*",density:"compact",variant:"outlined",rows:"2"},null,8,["modelValue"])])]),_:1})],512),[[ie,g.value=="specification"]]),oe(l("div",At,[s(J,null,{default:r(()=>[l("div",Yt,[s(_(F),{name:"Price",modelValue:a.value.price,"onUpdate:modelValue":t[26]||(t[26]=e=>a.value.price=e)},{default:r(({field:e,errors:v})=>[s(W,q({modelValue:a.value.price,"onUpdate:modelValue":t[25]||(t[25]=y=>a.value.price=y)},e,{label:"Price",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",zt,[s(ae,{modelValue:a.value.vendor_id,"onUpdate:modelValue":t[27]||(t[27]=e=>a.value.vendor_id=e),items:_(C).list,"item-title":"title","item-value":"id",label:"Vendor",density:"compact",variant:"outlined",rules:[e=>!!e||"Vendor is required"]},null,8,["modelValue","items","rules"])]),l("div",Nt,[s(_(F),{name:"PO Number",modelValue:a.value.po_number,"onUpdate:modelValue":t[29]||(t[29]=e=>a.value.po_number=e)},{default:r(({field:e,errors:v})=>[s(W,q({modelValue:a.value.po_number,"onUpdate:modelValue":t[28]||(t[28]=y=>a.value.po_number=y)},e,{label:"PO Number",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",jt,[s(_(F),{name:"Purchase Date",modelValue:a.value.purchased_date,"onUpdate:modelValue":t[31]||(t[31]=e=>a.value.purchased_date=e)},{default:r(({field:e,errors:v})=>[s(W,q({type:"date",modelValue:a.value.purchased_date,"onUpdate:modelValue":t[30]||(t[30]=y=>a.value.purchased_date=y)},e,{label:"Purchase Date",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[ie,g.value=="purchase"]]),oe(l("div",Wt,[s(J,null,{default:r(()=>[l("div",Tt,[s(_(F),{name:"Capitalization Price",modelValue:a.value.capitalization_price,"onUpdate:modelValue":t[33]||(t[33]=e=>a.value.capitalization_price=e)},{default:r(({field:e,errors:v})=>[s(W,q({modelValue:a.value.capitalization_price,"onUpdate:modelValue":t[32]||(t[32]=y=>a.value.capitalization_price=y)},e,{label:"Capitalization Price",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Lt,[s(_(F),{name:"Depreciation Percentage",modelValue:a.value.depreciation_percentage,"onUpdate:modelValue":t[35]||(t[35]=e=>a.value.depreciation_percentage=e)},{default:r(({field:e,errors:v})=>[s(W,q({modelValue:a.value.depreciation_percentage,"onUpdate:modelValue":t[34]||(t[34]=y=>a.value.depreciation_percentage=y)},e,{label:"Depreciation Percentage",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",It,[s(_(F),{name:"Scrap Value",modelValue:a.value.scrap_value,"onUpdate:modelValue":t[37]||(t[37]=e=>a.value.scrap_value=e)},{default:r(({field:e,errors:v})=>[s(W,q({modelValue:a.value.scrap_value,"onUpdate:modelValue":t[36]||(t[36]=y=>a.value.scrap_value=y)},e,{label:"Scrap Value",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",qt,[s(_(F),{name:"Scrap Date",modelValue:a.value.scrap_date,"onUpdate:modelValue":t[39]||(t[39]=e=>a.value.scrap_date=e)},{default:r(({field:e,errors:v})=>[s(W,q({type:"date",modelValue:a.value.scrap_date,"onUpdate:modelValue":t[38]||(t[38]=y=>a.value.scrap_date=y)},e,{label:"Scrap Date",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Ft,[s(_(F),{name:"Capitalization Date",modelValue:a.value.capitalization_date,"onUpdate:modelValue":t[41]||(t[41]=e=>a.value.capitalization_date=e)},{default:r(({field:e,errors:v})=>[s(W,q({type:"date",modelValue:a.value.capitalization_date,"onUpdate:modelValue":t[40]||(t[40]=y=>a.value.capitalization_date=y)},e,{label:"Capitalization Date",variant:"outlined",density:"compact","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),l("div",Pt,[s(_(F),{name:"End of Life",modelValue:a.value.end_of_life,"onUpdate:modelValue":t[43]||(t[43]=e=>a.value.end_of_life=e)},{default:r(({field:e,errors:v})=>[s(W,q({type:"date",modelValue:a.value.end_of_life,"onUpdate:modelValue":t[42]||(t[42]=y=>a.value.end_of_life=y)},e,{label:"End of Life",density:"compact",variant:"outlined","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[ie,g.value=="financial"]]),oe(l("div",Ht,[V.page!="add"?(M(),K(at,{key:0,asset:a.value,page:V.page},null,8,["asset","page"])):se("",!0)],512),[[ie,g.value=="warranty"]]),oe(l("div",Rt,[s(rt,{asset:a.value},null,8,["asset"])],512),[[ie,g.value=="allotted"]]),oe(l("div",Bt,[s(nt,{asset:a.value},null,8,["asset"])],512),[[ie,g.value=="maintenance"]]),Et,l("div",Jt,[s(J,null,{default:r(()=>[l("div",Kt,[s(Be,{options:{multiSelect:!0},onSelect:be})])]),_:1}),h.value.length>0?(M(),K(J,{key:0,class:"px-1"},{default:r(()=>[(M(!0),G(ve,null,fe(h.value,(e,v)=>(M(),G("div",{key:e.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[s(H,{style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:_(Ae),size:"26px",color:"error",onClick:()=>ce(e.id)},null,8,["icon","onClick"]),s(le,{onClick:()=>ye(v)},{default:r(()=>[s(Se,{src:S.value+"/file/"+e.path,cover:"","aspect-ratio":"1"},null,8,["src"])]),_:2},1032,["onClick"])]))),128)),s(Ue,{modelValue:X.value,"onUpdate:modelValue":t[45]||(t[45]=e=>X.value=e),width:"95%","max-width":"900"},{default:r(()=>[s(le,{class:"bg-black"},{default:r(()=>[s(Pe,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:Z.value,"onUpdate:modelValue":t[44]||(t[44]=e=>Z.value=e)},{default:r(()=>[(M(!0),G(ve,null,fe(h.value,(e,v)=>(M(),K(He,{key:v,"reverse-transition":"fade",transition:"fade"},{default:r(()=>[l("div",Zt,[s(Se,{src:S.value+"/file/"+e.path},null,8,["src"])])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):(M(),K(J,{key:1},{default:r(()=>[l("div",Gt,[s(Ve,{color:"grey-lighten-4",class:"pa-6 text-center"},{default:r(()=>[T(" Attachment is empty at the moment. ")]),_:1})])]),_:1}))])]),_:1})]),_:1})]),_:1},8,["validation-schema"]),s(We,{options:N.value},null,8,["options"])]),_:1},8,["loading"]))}};export{oa as _};
