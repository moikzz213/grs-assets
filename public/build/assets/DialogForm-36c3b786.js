import{r,O as K,b as u,c as f,l as a,k as t,A as $,K as V,V as A,m as h,t as k,Q as y,e as C,q as T,E as z,F as S,d as E,j as D,y as M,a4 as N,x as O,I as U,P,M as R,z as j,_ as I}from"./app-2bfa4af2.js";import{a as L,c as Q,F as G,b as H}from"./index.esm-c82afba1.js";const J={class:"text-error"},W={class:"d-flex pa-3"},Z={__name:"DialogForm",props:{dataObject:{type:Object,default:{}},addNewDialog:{type:Boolean,default:!1},title:{type:String,default:""},freeForm:{type:Array,default:[]}},emits:["savedResponse"],setup(q,{emit:_}){const s=q,c=r(""),o=r(!1),l=r({}),b=r(s.freeForm),g=()=>{o.value=!1,l.value={},_("cancelled",o.value)},w=()=>{o.value=!1,_("save",l.value),l.value={}},x=r({});b.value.map((d,i)=>{d.required&&(x.value[d.name]=L().required())});let B=Q(x.value);return K(()=>s.addNewDialog,d=>{l.value={},o.value=d,c.value="New "+s.title,s.dataObject.type&&(l.value=s.dataObject,c.value="Edit "+s.title)}),(d,i)=>(u(),f("div",null,[a(I,{width:"600",persistent:"",modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=m=>o.value=m),onKeydown:O(g,["esc"])},{default:t(()=>[a($,{class:"pt-3"},{default:t(()=>[a(V(G),{as:"v-form","validation-schema":V(B)},{default:t(({meta:m})=>[a(A,{class:"text-h6 d-flex"},{default:t(()=>[h(k(c.value),1),a(y),C("small",J,k(d.errorMessage),1),a(y)]),_:1}),a(T,null,{default:t(()=>[a(z,null,{default:t(()=>[(u(!0),f(S,null,E(b.value,(e,p)=>(u(),f("div",{class:"v-col-12",key:p},[a(V(H),{name:e.name,modelValue:l.value[e.name],"onUpdate:modelValue":n=>l.value[e.name]=n},{default:t(({field:n,errors:F})=>[e.type=="text"||e.type=="number"||e.type=="email"?(u(),D(M,N({key:0,type:e.type,autofocus:p===0,modelValue:l.value[e.name],"onUpdate:modelValue":v=>l.value[e.name]=v,density:"compact",variant:"outlined",label:`${e.label}${e.required?"*":" (Optional)"}`,"hide-details":""},n,{onKeydown:O(w,["enter"]),"error-messages":F}),null,16,["type","autofocus","modelValue","onUpdate:modelValue","label","onKeydown","error-messages"])):U("",!0),e.type=="select"?(u(),D(P,N({key:1,autofocus:p===0,modelValue:l.value[e.name],"onUpdate:modelValue":v=>l.value[e.name]=v,density:"compact",variant:"outlined",label:`${e.label}${e.required?"*":""}`,items:e.data,"hide-details":"","item-value":"id","item-title":"title"},n,{"error-messages":F}),null,16,["autofocus","modelValue","onUpdate:modelValue","label","items","error-messages"])):U("",!0)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])]))),128))]),_:1})]),_:1}),a(R,{class:"mt-2"}),C("div",W,[a(y),a(j,{size:"small",text:"cancel",onClick:g,class:"mx-1"}),a(j,{size:"small",color:"primary",onClick:w,disabled:!m.valid},{default:t(()=>[h("Confirm")]),_:2},1032,["disabled"])])]),_:1},8,["validation-schema"])]),_:1})]),_:1},8,["modelValue","onKeydown"])]))}};export{Z as _};
