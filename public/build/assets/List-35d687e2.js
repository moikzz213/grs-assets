import{r as n,i as Z,u as ee,N as te,O as ae,W as le,o as se,j as g,k as i,C as oe,D,b as v,l as s,G as N,A as K,E as T,P as ne,a4 as re,y as ie,x as de,e as l,H as ue,K as u,z as _,m as B,I as x,c as I,d as ce,t as m,Q as pe,R as ve,as as me,at as fe,F as ge,T as ye,U as xe}from"./app-7d553491.js";import{_ as be}from"./ApppageHeader-f3ab52c4.js";import{d as Ce,e as ke}from"./encrypt-ce7765e0.js";import{_ as he}from"./AppSnackBar-53a31e67.js";import{_ as Ve}from"./DialogForm-30b1bc31.js";import{u as _e}from"./categories-c251ffb5.js";import"./index.esm-1d7e1d0b.js";import"./Studio-89acf6d9.js";const we=l("div",{class:"mt-2 mr-2"},"Show",-1),Se={class:"v-col-12"},$e={class:"text-right text-capitalize"},ze={class:"d-flex align-center justify-end"},je={__name:"List",setup(De){const h=n({status:!1,type:"primary",text:null}),o=Z(),L=ee(),w=te(),d=n({loading:!1,data:[]}),S=n(0),U=n(0),y=n(""),G=n([10,20,50,100]),$=n(10),H=()=>{f()},O=()=>{localStorage.setItem("vendor-search",ke(y.value)),f()},J=()=>{y.value="",localStorage.setItem("vendor-search",""),f()},c=n(w.params&&w.params.page?w.params.page:1),V=n([]),q=n(""),E=n(0),p=t=>{d.value.loading=!0,V.value[0]=t,E.value%2?V.value[1]="DESC":V.value[1]="ASC",E.value++,q.value=JSON.stringify(V.value),f()},f=async()=>{d.value.loading=!0,await D(o.token).get("/api/vendors/all?page="+c.value+"&show="+$.value+"&search="+y.value+"&sort="+q.value).then(t=>{S.value=t.data.last_page?t.data.last_page:t.data.length,c.value=t.data.current_page?t.data.current_page:c.value,U.value=t.data.total?t.data.total:t.data.length,d.value.data=t.data.data?t.data.data:t.data,d.value.loading=!1}).catch(t=>{d.value.loading=!1})};ae(c,(t,e)=>{c.value&&t!=e&&(L.push({name:"PaginatedVendors",params:{page:c.value}}).catch(r=>{}),f(c.value))});const M=t=>{b.value={},k.value=t},Q=async t=>{k.value=!1,t.profile_id=o.user.profile.id,await D(o.token).post("/api/vendors/store-update/data",t).then(e=>{h.value={status:!0,type:"success",text:e.data.message},f()}).catch(e=>{d.value.loading=!1,console.log(e)})},z=_e();z.list.length==0&&z.getCategories(o.token);const b=n({}),W=le(()=>[{name:"category_id",label:"Category",required:!0,type:"select",data:z.list},{name:"title",label:"Vendor Name",required:!0,type:"text"},{name:"brand",label:"Brand",required:!1,type:"text"},{name:"origin",label:"Origin",required:!1,type:"text"},{name:"contact_name",label:"Name",required:!0,type:"text"},{name:"designation",label:"Designation",required:!1,type:"text"},{name:"contact_email",label:"Email",required:!0,type:"email"},{name:"contact_no",label:"Contact",required:!1,type:"number"},{name:"address",label:"Address",required:!1,type:"text"},{name:"remarks",label:"Remarks",required:!1,type:"textarea"}]),X=t=>{b.value=Object.assign({},t),b.value.type="vendor",k.value=!0},C=n(!1),A=async(t,e)=>{h.value={status:!0,type:"info",text:"Please wait..."},C.value=!0;let r={id:t,status:e,profile_id:o.user.profile.id};await D(o.token).post("/api/vendors/status-change/data",r).then(a=>{setTimeout(()=>{h.value={status:!0,type:"success",text:a.data.message},f(),C.value=!1},600)}).catch(a=>{d.value.loading=!1})},k=n(!1),Y=()=>{b.value="",k.value=!0};return se(()=>{let t=localStorage.getItem("vendor-search");t&&(y.value=Ce(t)),f()}),(t,e)=>(v(),g(oe,null,{default:i(()=>[s(be,{title:"Vendor List"}),s(T,{class:"mb-3"},{default:i(()=>[s(N,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:i(()=>[s(K,{class:"px-5"},{default:i(()=>[s(T,null,{default:i(()=>[s(N,{class:"v-col-6 v-col-md-2 v-col-sm-6 d-flex my-2"},{default:i(()=>[we,s(ne,{items:G.value,modelValue:$.value,"onUpdate:modelValue":[e[0]||(e[0]=r=>$.value=r),H],variant:"outlined",density:"compact","hide-details":"",label:"Entry"},null,8,["items","modelValue"])]),_:1}),s(re),s(N,{class:"v-col-6 v-col-md-3 v-col-sm-6 my-2"},{default:i(()=>[s(ie,{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=r=>y.value=r),variant:"outlined",density:"compact",clearable:"",label:"Search",type:"text","hide-details":"","onClick:appendOuter":O,onKeydown:de(O,["enter"]),"onClick:clear":e[2]||(e[2]=r=>J("search"))},null,8,["modelValue","onKeydown"])]),_:1})]),_:1})]),_:1})]),_:1}),l("div",Se,[s(K,{loading:d.value.loading},{default:i(()=>[s(ue,null,{default:i(()=>{var r;return[l("thead",null,[l("tr",null,[l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[3]||(e[3]=a=>p("category_id"))}," Category "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[4]||(e[4]=a=>p("title"))}," Vendors "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[5]||(e[5]=a=>p("brand"))}," Brand "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[6]||(e[6]=a=>p("origin"))}," Origin "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[7]||(e[7]=a=>p("contact_name"))}," ContactName "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[8]||(e[8]=a=>p("contact_email"))}," Email "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[9]||(e[9]=a=>p("contact_no"))}," Contact "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[10]||(e[10]=a=>p("address"))}," Address "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[11]||(e[11]=a=>p("status"))}," Status "),l("th",$e,[u(o).user.role=="superadmin"||(r=u(o).capabilities)!=null&&r.includes("add")?(v(),g(_,{key:0,size:"small",color:"primary",onClick:Y},{default:i(()=>[B("Add New")]),_:1})):x("",!0)])])]),l("tbody",null,[(v(!0),I(ge,null,ce(d.value.data,a=>{var P,R,j,F;return v(),I("tr",{key:a.id},[l("td",null,m((P=a.category)==null?void 0:P.title),1),l("td",null,m(a.title),1),l("td",null,m(a.brand),1),l("td",null,m(a.origin),1),l("td",null,m(a.contact_name),1),l("td",null,m(a.contact_email),1),l("td",null,m(a.contact_no),1),l("td",null,m(a.address),1),l("td",null,[s(pe,{class:"text-uppercase",size:"small",color:`${a.status=="active"?"success":"error"}`},{default:i(()=>[B(m(a.status),1)]),_:2},1032,["color"])]),l("td",null,[l("div",ze,[u(o).user.role=="superadmin"||(R=u(o).capabilities)!=null&&R.includes("edit")?(v(),g(_,{key:0,loading:C.value,onClick:()=>X(a),icon:u(ve),title:"Edit",density:"compact",class:"mx-2"},null,8,["loading","onClick","icon"])):x("",!0),a.status=="active"&&(u(o).user.role=="superadmin"||(j=u(o).capabilities)!=null&&j.includes("delete"))?(v(),g(_,{key:1,density:"compact",loading:C.value,icon:u(me),onClick:()=>A(a.id,"disabled"),title:"Disable",class:"mx-2 text-error"},null,8,["loading","icon","onClick"])):x("",!0),a.status=="disabled"&&(u(o).user.role=="superadmin"||(F=u(o).capabilities)!=null&&F.includes("delete"))?(v(),g(_,{key:2,loading:C.value,density:"compact",onClick:()=>A(a.id,"active"),icon:u(fe),title:"Enable",class:"mx-2 text-success"},null,8,["loading","onClick","icon"])):x("",!0)])])])}),128))])]}),_:1}),d.value.data.length==0?(v(),g(ye,{key:0,class:"pa-3 text-center w-100"},{default:i(()=>[B("No records found")]),_:1})):x("",!0)]),_:1},8,["loading"]),S.value>1?(v(),g(xe,{key:0,modelValue:c.value,"onUpdate:modelValue":e[12]||(e[12]=r=>c.value=r),class:"my-4",length:S.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable",disabled:d.value.loading},null,8,["modelValue","length","disabled"])):x("",!0)])]),_:1}),s(Ve,{"free-form":W.value,"add-new-dialog":k.value,title:"Vendor","data-object":b.value,onCancelled:M,onSave:Q},null,8,["free-form","add-new-dialog","data-object"]),s(he,{options:h.value},null,8,["options"])]),_:1}))}};export{je as default};
