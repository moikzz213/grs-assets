import{r as h,i as z,j as d,k as l,C as T,K as N,b as u,l as a,N as V,A as x,q as C,G as n,z as _,m as f,I as g,D as b,J as F,c as A,d as B,F as D,f as c,t as U,y as P}from"./app-85a535ad.js";import{_ as L}from"./AppPageHeader-db166ab0.js";import{_ as K}from"./AppSnackBar-b3e641cd.js";const j=c("div",{class:"v-col-1"},"#",-1),q=c("div",{class:"v-col-4 text-uppercase"},"Page Title",-1),E=c("div",{class:"v-col-7 text-uppercase"},"Page Slug",-1),G=c("div",{class:"v-col-9 my-0 py-0"},null,-1),I={class:"v-col-1"},J={class:"v-col-4"},M={class:"v-col-4"},O={class:"v-col-3 my-auto"},Y={__name:"Slugs",setup(R){const r=h([{title:"",slug:""}]),o=z(),v=h(!1),w=()=>{r.value.push({title:"",slug:""})},m=h({loading:!0}),k=h({status:!1,type:"info",text:null});(async()=>{await N(o.token).get("/api/fetch/pages-slug").then(i=>{r.value=i.data,m.value.loading=!1}).catch(i=>{m.value.loading=!1,console.log(i)})})();const $=i=>{let t=r.value;t.splice(i,1),r.value=[...t]},S=async function(){v.value=!0;let i=!1,s={data:r.value.map((e,p)=>(delete e.id,delete e.created_at,delete e.updated_at,delete e.link,(!e.slug||!e.title)&&(i=!0),e)),author:o.user.profile.id};if(i){k.value={status:!0,type:"error",text:"Fill-up the fields"},setTimeout(()=>{v.value=!1},1e3);return}await N(o.token).post("/api/store-page/settings",s).then(e=>{k.value={status:!0,type:"success",text:e.data.message},v.value=!1}).catch(e=>{v.value=!1,console.log(e)})};return(i,t)=>(u(),d(T,null,{default:l(()=>[a(L,{title:"Page List"}),a(b,{class:"mb-3"},{default:l(()=>[a(V,{class:"v-col-12 mt-1 col-sm-12"},{default:l(()=>[a(x,{class:"px-5",loading:m.value.loading},{default:l(()=>[a(C,null,{default:l(()=>{var s,e;return[n(o).user.role=="superadmin"||(s=n(o).capabilities)!=null&&s.includes("add")?(u(),d(_,{key:0,onClick:t[0]||(t[0]=p=>w()),size:"small",color:"primary"},{default:l(()=>[f("Add New")]),_:1})):g("",!0),n(o).user.role=="superadmin"||(e=n(o).capabilities)!=null&&e.includes("edit")?(u(),d(_,{key:1,onClick:t[1]||(t[1]=p=>S()),loading:v.value,size:"small",color:"secondary",class:"mx-5"},{default:l(()=>[f("Save")]),_:1},8,["loading"])):g("",!0)]}),_:1})]),_:1},8,["loading"])]),_:1}),a(V,{class:"v-col-12 mt-1 col-sm-12"},{default:l(()=>[a(x,{class:"px-5",loading:m.value.loading},{default:l(()=>[a(C,null,{default:l(()=>[a(b,null,{default:l(()=>[j,q,E,G,a(F)]),_:1}),(u(!0),A(D,null,B(r.value,(s,e)=>(u(),d(b,{key:e,class:"parent-row-show"},{default:l(()=>{var p;return[c("div",I,U(e+1),1),c("div",J,[a(P,{"hide-details":"",label:"Page Title here",variant:"outlined",modelValue:s.title,"onUpdate:modelValue":y=>s.title=y,density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),c("div",M,[a(P,{"hide-details":"",modelValue:s.slug,"onUpdate:modelValue":y=>s.slug=y,label:"Slug here",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),c("div",O,[n(o).user.role=="superadmin"||(p=n(o).capabilities)!=null&&p.includes("delete")?(u(),d(_,{key:0,onClick:y=>$(e),size:"small",color:"error",class:"mx-1 show-hover"},{default:l(()=>[f("Delete")]),_:2},1032,["onClick"])):g("",!0)]),a(F)]}),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1}),r.value.length>10?(u(),d(V,{key:0,class:"v-col-12 mt-1 col-sm-12"},{default:l(()=>[a(x,{class:"px-5",loading:m.value.loading},{default:l(()=>[a(C,null,{default:l(()=>{var s,e;return[(s=n(o).capabilities)!=null&&s.includes("add")?(u(),d(_,{key:0,onClick:t[2]||(t[2]=p=>w()),size:"small",color:"primary"},{default:l(()=>[f("Add New")]),_:1})):g("",!0),(e=n(o).capabilities)!=null&&e.includes("edit")?(u(),d(_,{key:1,onClick:t[3]||(t[3]=p=>S()),loading:v.value,size:"small",color:"secondary",class:"mx-5"},{default:l(()=>[f("Save")]),_:1},8,["loading"])):g("",!0)]}),_:1})]),_:1},8,["loading"])]),_:1})):g("",!0)]),_:1}),a(K,{options:k.value},null,8,["options"])]),_:1}))}};export{Y as default};
