import{r as l,a as Y,u as Z,I as aa,J as ea,K as ta,c as m,w as u,m as la,n as B,o as p,d as s,v as D,k as K,s as L,L as sa,a3 as oa,i as na,h as da,b as o,x as ua,E as r,j as k,e as N,y as g,p as I,q as ia,t as P,M as ra,N as ca,as as pa,at as va,F as ma,P as fa,Q as ga}from"./app-f95926f8.js";import{_ as ya}from"./ApppageHeader-6bb2d712.js";import{d as ha,e as ba}from"./encrypt-9df2372a.js";import{_ as _a}from"./AppSnackBar-e1c08ab4.js";import{_ as xa}from"./DialogForm-12b2a8f1.js";import"./index.esm-d065b8fa.js";import"./Studio-fb21d27f.js";const ka=o("div",{class:"mt-2 mr-2"},"Show",-1),Va={class:"v-col-12"},Ca={class:"text-right text-capitalize"},wa={class:"d-flex align-center justify-end"},ja={__name:"List",setup(Sa){const _=l({status:!1,type:"primary",text:null}),n=Y(),T=Z(),V=aa(),i=l({loading:!1,data:[]}),C=l(0),U=l(0),f=l(""),q=l([10,20,50,100]),w=l(10),J=()=>{v()},E=()=>{localStorage.setItem("brand-search",ba(f.value)),v()},M=()=>{f.value="",localStorage.setItem("brand-search",""),v()},c=l(V.params&&V.params.page?V.params.page:1),x=l([]),O=l(""),$=l(0),S=a=>{i.value.loading=!0,x.value[0]=a,$.value%2?x.value[1]="DESC":x.value[1]="ASC",$.value++,O.value=JSON.stringify(x.value),v()},v=async()=>{i.value.loading=!0,await B(n.token).get("/api/brands/all?page="+c.value+"&show="+w.value+"&search="+f.value+"&sort="+O.value).then(a=>{C.value=a.data.last_page?a.data.last_page:a.data.length,c.value=a.data.current_page?a.data.current_page:c.value,U.value=a.data.total?a.data.total:a.data.length,i.value.data=a.data.data?a.data.data:a.data,i.value.loading=!1}).catch(a=>{i.value.loading=!1,console.log(a)})};ea(c,(a,e)=>{c.value&&a!=e&&(T.push({name:"PaginatedBrands",params:{page:c.value}}).catch(d=>{}),v(c.value))});const Q=a=>{y.value={},b.value=a},G=async a=>{b.value=!1,a.profile_id=n.user.profile.id,await B(n.token).post("/api/brands/store-update/data",a).then(e=>{_.value={status:!0,type:"success",text:e.data.message},v()}).catch(e=>{i.value.loading=!1,console.log(e)})},y=l({}),H=l([{name:"title",label:"Brand",required:!0,type:"text"}]),W=a=>{y.value=Object.assign({},a),y.value.type="brand",b.value=!0},h=l(!1),j=async(a,e)=>{_.value={status:!0,type:"info",text:"Please wait..."},h.value=!0;let d={id:a,status:e,profile_id:n.user.profile.id};await B(n.token).post("/api/brands/status-change/data",d).then(t=>{setTimeout(()=>{_.value={status:!0,type:"success",text:t.data.message},v(),h.value=!1},600)}).catch(t=>{i.value.loading=!1,console.log(t)})},b=l(!1),X=()=>{y.value="",b.value=!0};return ta(()=>{let a=localStorage.getItem("brand-search");a&&(f.value=ha(a)),v()}),(a,e)=>(p(),m(la,null,{default:u(()=>[s(ya,{title:"Brand List"}),s(L,{class:"mb-3"},{default:u(()=>[s(D,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:u(()=>[s(K,{class:"px-5"},{default:u(()=>[s(L,null,{default:u(()=>[s(D,{class:"v-col-6 v-col-md-2 v-col-sm-6 d-flex my-2"},{default:u(()=>[ka,s(sa,{items:q.value,modelValue:w.value,"onUpdate:modelValue":[e[0]||(e[0]=d=>w.value=d),J],variant:"outlined",density:"compact","hide-details":"",label:"Entry"},null,8,["items","modelValue"])]),_:1}),s(oa),s(D,{class:"v-col-6 v-col-md-3 v-col-sm-6 my-2"},{default:u(()=>[s(na,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=d=>f.value=d),variant:"outlined",density:"compact",clearable:"",label:"Search",type:"text","hide-details":"","onClick:appendOuter":E,onKeydown:da(E,["enter"]),"onClick:clear":e[2]||(e[2]=d=>M("search"))},null,8,["modelValue","onKeydown"])]),_:1})]),_:1})]),_:1})]),_:1}),o("div",Va,[s(K,{loading:i.value.loading},{default:u(()=>[s(ua,null,{default:u(()=>{var d;return[o("thead",null,[o("tr",null,[o("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[3]||(e[3]=t=>S("title"))}," Brand "),o("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[4]||(e[4]=t=>S("profile_id"))}," Updated By "),o("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[5]||(e[5]=t=>S("status"))}," Status "),o("th",Ca,[r(n).user.role=="superadmin"||(d=r(n).capabilities)!=null&&d.includes("add")?(p(),m(k,{key:0,size:"small",color:"primary",onClick:X},{default:u(()=>[N("Add New")]),_:1})):g("",!0)])])]),o("tbody",null,[(p(!0),I(ma,null,ia(i.value.data,t=>{var z,A,R,F;return p(),I("tr",{key:t.id},[o("td",null,P(t.title),1),o("td",null,P((z=t.profile)==null?void 0:z.display_name),1),o("td",null,[s(ra,{class:"text-uppercase",size:"small",color:`${t.status=="active"?"success":"error"}`},{default:u(()=>[N(P(t.status),1)]),_:2},1032,["color"])]),o("td",null,[o("div",wa,[r(n).user.role=="superadmin"||(A=r(n).capabilities)!=null&&A.includes("edit")?(p(),m(k,{key:0,loading:h.value,onClick:()=>W(t),icon:r(ca),title:"Edit",density:"compact",class:"mx-2"},null,8,["loading","onClick","icon"])):g("",!0),t.status=="active"&&(r(n).user.role=="superadmin"||(R=r(n).capabilities)!=null&&R.includes("delete"))?(p(),m(k,{key:1,density:"compact",loading:h.value,icon:r(pa),onClick:()=>j(t.id,"disabled"),title:"Disable",class:"mx-2 text-error"},null,8,["loading","icon","onClick"])):g("",!0),t.status=="disabled"&&(r(n).user.role=="superadmin"||(F=r(n).capabilities)!=null&&F.includes("delete"))?(p(),m(k,{key:2,loading:h.value,density:"compact",onClick:()=>j(t.id,"active"),icon:r(va),title:"Enable",class:"mx-2 text-success"},null,8,["loading","onClick","icon"])):g("",!0)])])])}),128))])]}),_:1}),i.value.data.length==0?(p(),m(fa,{key:0,class:"pa-3 text-center w-100"},{default:u(()=>[N("No records found")]),_:1})):g("",!0)]),_:1},8,["loading"]),C.value>1?(p(),m(ga,{key:0,modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=d=>c.value=d),class:"my-4",length:C.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable",disabled:i.value.loading},null,8,["modelValue","length","disabled"])):g("",!0)])]),_:1}),s(xa,{"free-form":H.value,"add-new-dialog":b.value,title:"Brand","data-object":y.value,onCancelled:Q,onSave:G},null,8,["free-form","add-new-dialog","data-object"]),s(_a,{options:_.value},null,8,["options"])]),_:1}))}};export{ja as default};
