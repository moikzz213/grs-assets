import{a as Ye,r as p,I as Qe,u as $e,T as X,K as Ge,J as pe,o as i,c as _,w as d,d as o,v as Ke,k as S,V as He,b as t,t as n,p as V,y as h,ag as _e,E as m,H as Z,f as $,s as g,j as C,e as O,L as M,i as j,q as L,F as R,U as me,X as fe,W as G,P as Je,_ as he,D as ee,O as We,Y as Xe,Z as Ze,ae as et,aE as ye,aF as ge,aG as Ve,aH as we,aI as tt,m as at,n as I}from"./app-89df49be.js";import{_ as lt}from"./ApppageHeader-6d023923.js";import{_ as be}from"./Studio-a08a97dc.js";import{_ as st}from"./AppSnackBar-591fdd93.js";import{u as ke}from"./formatDate-b9aad8c5.js";import{r as xe}from"./generateRandomString-02c0ba3b.js";const ot={key:0,class:"text-error text-h6"},dt={class:"col-12 v-col-md-4"},it={key:0,class:"v-col-12 v-col-md-8"},ut={key:0,class:"text-right no-print"},nt={class:"v-col-12 v-col-md-6"},rt={class:"v-col-12 v-col-md-6"},ct={class:"v-col-12 v-col-md-6"},vt={class:"v-col-12 v-col-md-6"},pt={class:"v-col-12"},_t={class:"wd-100"},mt={class:"wd-60"},ft={class:"wd-40"},ht={class:"wd-60"},yt={class:"wd-40"},gt={class:"wd-100"},Vt={class:"v-col-12"},wt=t("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),bt=t("div",{class:"wd-15"},"ASSET CODE",-1),kt=t("div",{class:"wd-5"},"QTY",-1),xt=t("div",{class:"wd-10"},"UOM",-1),At=t("div",{class:"wd-10"},"WEIGHT",-1),Tt=t("div",{class:"wd-10"},"VALUE",-1),St=t("div",{class:"wd-15"},"REASON FOR REQUEST",-1),Ct={class:"wd-30"},Ut={class:"wd-15"},qt={class:"wd-5"},Et={class:"wd-10"},Ot={class:"wd-10"},jt={class:"wd-10"},Rt={class:"wd-15"},Dt={class:"v-col-12 v-col-md-1 px-1"},Nt={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},Ft={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},Lt={class:"v-col-12 pt-0 pb-0"},It={class:"v-col-12 v-col-md-3"},Pt={class:"v-col-12 v-col-md-2"},Bt={class:"v-col-12 v-col-md-1"},Mt={class:"v-col-12 v-col-md-1"},zt={class:"v-col-12 v-col-md-1"},Yt={class:"v-col-12 v-col-md-1"},Qt={class:"v-col-12 v-col-md-2 d-flex"},$t=t("div",null,"Additional File can be upload here",-1),Gt=["data"],Kt={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},Ht=t("div",null,"APPROVAL SETUP",-1),Jt={key:0,class:"no-print"},Wt=t("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),Xt={class:"v-col-12 v-col-md-6"},Zt=t("div",{class:"v-col-12 v-col-md-1"},"Status",-1),ea=t("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),ta=t("div",{class:"wd-20"},"Requestor",-1),aa={class:"wd-50"},la=t("div",{class:"wd-10"},"Status",-1),sa=t("div",{class:"wd-20"},"Date Approved",-1),oa={class:"wd-20"},da={class:"wd-50"},ia={class:"wd-10"},ua={class:"wd-20"},na={class:"v-col-12 v-col-md-2"},ra={class:"v-col-12 v-col-md-7 d-flex"},ca={class:"my-auto"},va={key:0,class:"v-col-12"},pa={class:"v-col-12 text-error"},_a=t("div",{class:"v-col-12 v-col-md-12 text-info no-print"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),wa={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(Ae,{emit:Te}){const U=Ae,y=Ye(),K=p(!1),q=Qe(),Se=$e(),r=p({}),x=p(!1),b=p([{qty:1,attachment:{}}]),Ce=p(new Date),P=p(window.location.origin),Ue=(s,l)=>{b.value[s].attachment=l[0]},k=p([]),qe=s=>{let l=null;s.map(e=>{l=k.value.find(a=>a.id==e.id),l||k.value.push(e)})},Ee=s=>{k.value=k.value.filter(l=>l.id!==s)},H=p(1),D=p("image"),Oe=(s,l)=>{let e=s.path.split(".");D.value=e[e.length-1],H.value=l,N.value=!0},N=p(!1),te=p(1),je=s=>{te.value=s,N.value=!0},Re=s=>{b.value[s].attachment=""},J=s=>{if(s=="approve")return"Approved By";if(s=="reviewer")return"Reviewed By";if(s=="receiver")return"Received By";if(s=="transport")return"Trasport Arranged By";if(s=="releasing")return"Released By";if(s=="verify")return"Verified By"},ae=p(""),le=p([]),De=async()=>{await I(y.token).get("/api/fetch/approval-setups/non-paginated/data/request").then(s=>{var l,e;le.value=s.data,ae.value=(e=(l=s.data.filter(a=>a.id==c.value.request_type_id))==null?void 0:l[0])==null?void 0:e.title}).catch(s=>{})},B=p({}),se=p([]),Ne=async()=>{await I(y.token).get("/api/fetch/companies").then(s=>{se.value=s.data}).catch(s=>{})},oe=p(""),de=p(""),W=p([]),Fe=async()=>{await I(y.token).get("/api/fetch/locations/non-paginated/data").then(s=>{var l,e,a,f;W.value=s.data,oe.value=(e=(l=s.data.filter(w=>w.id==c.value.transferred_from))==null?void 0:l[0])==null?void 0:e.title,de.value=(f=(a=s.data.filter(w=>w.id==c.value.transferred_to))==null?void 0:a[0])==null?void 0:f.title}).catch(s=>{})},Le=()=>{b.value.push({qty:1,attachment:{}}),F()},Ie=(s,l)=>{b.value.splice(l,1),F()},ie=p("Note: Administrator needs to setup signatories first."),Pe=X(()=>k.value.map(s=>s.id)),Be=()=>{B.value={status:!0,type:"info",text:"Please wait..."};let s=b.value.map((e,a)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),l={data:r.value,assets:s,approval:A.value,profile_id:y.user.profile.id,type:"request",role:y.user.profile.role,additionalFiles:Pe.value};I(y.token).post("/api/request-asset/store-update/data",l).then(e=>{let a="",f="";e.data.message?(a=e.data.message,f="success"):e.data.error&&(a=e.data.error,f="error"),B.value={status:!0,type:f,text:a},q.params.id||setTimeout(()=>{Se.push({name:"EditRequestAsset",params:{id:e.data.id}}).catch(w=>{})},800)}).catch(e=>{B.value={status:!0,type:"error",text:"Failed to update data, kindly refresh the page and check fields if it's empty"}})},A=p([]),z=p(!0),ue=async()=>{await I(y.token).get("/api/fetch/request-asset/approval-setup-fetch/"+r.value.request_type_id).then(s=>{var l,e,a,f,w,v;A.value=(l=s.data)==null?void 0:l.stages,q.params.id&&A.value.length>0&&(A.value.map((T,E)=>(T.profile_id=u.value[E].profile_id,T.status=u.value[E].status,T.date_approved=u.value[E].date_approved,T.reason_rejected=u.value[E].reason_rejected,T)),A.value.length>1&&(A.value[u.value.length-1]={id:u.value[u.value.length-1].id,profile_id:u.value[u.value.length-1].profile_id,status:u.value[u.value.length-1].status,date_approved:u.value[u.value.length-1].date_approved,status:u.value[u.value.length-1].status,reason_rejected:"",types:u.value[u.value.length-1].approval_type,sort:u.value[u.value.length-1].orders,request_asset_id:u.value[u.value.length-1].request_asset_id,signatures:[{id:(e=u.value[u.value.length-1])==null?void 0:e.profile.id,display_name:(a=u.value[u.value.length-1])==null?void 0:a.profile.display_name,first_name:(f=u.value[u.value.length-1])==null?void 0:f.profile.first_name,last_name:(w=u.value[u.value.length-1])==null?void 0:w.profile.last_name}]})),((v=s.data)==null?void 0:v.stages.length)>0?z.value=!0:z.value=!1}).catch(s=>{})},F=()=>{let s=!1;K.value=!1,r.value.company_id&&r.value.request_type_id&&r.value.subject&&r.value.transferred_from&&r.value.transferred_to&&(s=!0);let l=!0;b.value.map(a=>{a.item_description&&a.reason_for_request||(l=!1)});let e=!0;A.value.map(a=>{a.profile_id||(e=!1)}),e&&l&&s&&(K.value=!0)},ne=s=>{let l={status:s,profile_id:y.user.profile.id,ID:c.value.id};I(y.token).post("/api/request-asset/change-request/data",l).then(e=>{B.value={status:!0,type:"success",text:e.data.message},c.value.status=s,Te("saved",e.data.message)}).catch(e=>{})},re=(s,l=6)=>{let e="00000"+s;return e.substring(e.length-l)},u=p([]),c=p({}),Y=p({});Ge(()=>{var s,l;if(De().then(()=>{Ne().then(()=>{Fe()})}),q.params.id){x.value=!0;let e=U.objectdata;c.value=e,r.value.company_id=e.company_id,r.value.request_type_id=e.request_type_id,r.value.subject=e.subject,r.value.transferred_from=e.transferred_from,r.value.transferred_to=e.transferred_to,r.value.id=e.id,r.value.requestor_id=e.profile_id,u.value=e.request_approvals,b.value=e.items,Y.value=(l=(s=e.request_approvals)==null?void 0:s.filter(a=>a.status=="awaiting-approval"))==null?void 0:l[0],k.value=e.attachment,ue()}else r.value.company_id=y.user.profile.company_id}),pe(r.value,async(s,l)=>{F()}),pe(b.value,async(s,l)=>{F()});const Q=X(()=>y.user.role=="receiving-releasing"||y.user.role=="facility"),Me=p("https://assets.grandiose.ae"),ze=X(()=>{var v,T,E,ce,ve;let s=null,l=Me.value+"/pv/employee-signatory",e=xe(50),a=xe(50),f=95,w=99;return((T=(v=y.user)==null?void 0:v.profile)==null?void 0:T.id)==((E=Y.value)==null?void 0:E.profile_id)&&(f=(ce=Y.value)==null?void 0:ce.profile_id,w=(ve=Y.value)==null?void 0:ve.orders),c.value&&(s=l+"/transfer/approvals?o="+w+"&key="+e+"&pid="+f+"&pv="+a+"&id="+c.value.id),s});return(s,l)=>(i(),_(at,null,{default:d(()=>[o(lt,{title:U.headertitle,class:"no-print"},null,8,["title"]),o(g,{class:"mb-3"},{default:d(()=>[o(Ke,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[o(S,null,{default:d(()=>[o(He,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:d(()=>[t("div",null,n(U.headertitle),1),z.value?h("",!0):(i(),V("div",ot,n(ie.value),1)),x.value?(i(),V("div",{key:1,class:_e(c.value.status=="cancelled"?"text-error":c.value.status=="complete"?"text-success":"")}," STATUS ("+n(c.value.status)+") ",3)):h("",!0),t("div",null,"DATE: "+n(m(ke)(Ce.value)),1)]),_:1}),o(Z),o($,null,{default:d(()=>[o(g,{class:"no-print"},{default:d(()=>[x.value?(i(),V("div",{key:0,class:_e(`${c.value.status=="complete"?"v-col-12":"v-col-md-12"}`)},[o(g,null,{default:d(()=>[t("div",dt," REQUEST NO: SN-5"+n(re(c.value.id)),1),Q.value?h("",!0):(i(),V("div",it,[x.value&&(c.value.status=="pending"||c.value.status=="cancelled")?(i(),V("div",ut,[c.value.status=="pending"?(i(),_(C,{key:0,onClick:l[0]||(l[0]=e=>ne("cancelled")),color:"warning"},{default:d(()=>[O("Cancel request")]),_:1})):h("",!0),c.value.status=="cancelled"?(i(),_(C,{key:1,onClick:l[1]||(l[1]=e=>ne("pending")),size:"small",color:"info"},{default:d(()=>[O("Change status to Pending")]),_:1})):h("",!0)])):h("",!0)]))]),_:1})],2)):h("",!0),t("div",nt,[o(M,{items:le.value,modelValue:r.value.request_type_id,"onUpdate:modelValue":[l[2]||(l[2]=e=>r.value.request_type_id=e),ue],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:x.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),t("div",rt,[o(M,{items:se.value,modelValue:r.value.company_id,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),t("div",ct,[o(M,{items:W.value,modelValue:r.value.transferred_from,"onUpdate:modelValue":l[4]||(l[4]=e=>r.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),t("div",vt,[o(M,{items:W.value,modelValue:r.value.transferred_to,"onUpdate:modelValue":l[5]||(l[5]=e=>r.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"])]),t("div",pt,[o(j,{modelValue:r.value.subject,"onUpdate:modelValue":l[6]||(l[6]=e=>r.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),o(g,{class:"for-print-flex mx-2 mb-1"},{default:d(()=>{var e,a;return[t("div",_t," REQUEST NO: SN-5"+n(re(c.value.id)),1),t("div",mt," TYPE OF REQUEST: "+n(ae.value),1),t("div",ft," COMPANY: "+n((a=(e=c.value)==null?void 0:e.company)==null?void 0:a.title),1),t("div",ht," LOCATION FROM: "+n(oe.value),1),t("div",yt," LOCATION TO: "+n(de.value),1),t("div",gt," SUBJECT: "+n(c.value.subject),1)]}),_:1})]),_:1})]),_:1}),o(S,{class:"my-2"},{default:d(()=>[o($,null,{default:d(()=>[Q.value?h("",!0):(i(),_(g,{key:0},{default:d(()=>{var e;return[t("div",Vt,[c.value.status!="complete"&&(!m(q).params.id||((e=U.objectdata)==null?void 0:e.status)=="pending"||m(y).user.profile.role=="superadmin"||m(y).user.profile.role=="administrator")?(i(),_(C,{key:0,color:"primary",class:"no-print",onClick:Le},{default:d(()=>[O("Add")]),_:1})):h("",!0)])]}),_:1})),o(g,{class:"for-print-flex mx-2 header mb-1 mt-0"},{default:d(()=>[wt,bt,kt,xt,At,Tt,St]),_:1}),(i(!0),V(R,null,L(b.value,(e,a)=>(i(),_(g,{key:a,class:"for-print-flex mx-2 row-bordered mb-1"},{default:d(()=>[t("div",Ct,n(e.item_description),1),t("div",Ut,n(e.asset_code),1),t("div",qt,n(e.qty),1),t("div",Et,n(e.uom),1),t("div",Ot,n(e.weight),1),t("div",jt,n(e.item_value),1),t("div",Rt,n(e.reason_for_request),1)]),_:2},1024))),128)),(i(!0),V(R,null,L(b.value,(e,a)=>(i(),_(g,{key:a,class:"no-print"},{default:d(()=>{var f,w;return[t("div",Dt,[(f=e.attachment)!=null&&f.id?(i(),_(g,{key:0,class:"px-1"},{default:d(()=>[t("div",Nt,[o(j,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":v=>e.attachment.id=v},null,8,["modelValue","onUpdate:modelValue"]),o(C,{style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:m(me),size:"16px",color:"error",onClick:()=>Re(a,e.attachment.id)},null,8,["icon","onClick"]),o(S,{onClick:()=>je(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),o(fe,{modelValue:N.value,"onUpdate:modelValue":l[7]||(l[7]=v=>N.value=v),width:"95%","max-width":"900"},{default:d(()=>[o(S,{class:"bg-black"},{default:d(()=>[t("div",Ft,[o(G,{src:P.value+"/file/"+te.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(i(),_(g,{key:1,class:"mt-0"},{default:d(()=>[t("div",Lt,[o(Je,{color:"grey-lighten-4",class:"text-center"},{default:d(()=>[o(be,{options:{multiSelect:!1,type:"request-asset"},onSelect:v=>Ue(a,v)},null,8,["onSelect"])]),_:2},1024)])]),_:2},1024))]),t("div",It,[o(he,{modelValue:e.item_description,"onUpdate:modelValue":[v=>e.item_description=v,F],variant:"outlined",density:"compact","hide-details":"",clearable:"",rows:"2",label:"ITEM DESC*"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Pt,[o(j,{modelValue:e.asset_code,"onUpdate:modelValue":v=>e.asset_code=v,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Bt,[o(j,{type:"number",modelValue:e.qty,"onUpdate:modelValue":v=>e.qty=v,variant:"outlined",density:"compact","hide-details":"",label:"QTY"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Mt,[o(j,{modelValue:e.uom,"onUpdate:modelValue":v=>e.uom=v,variant:"outlined",density:"compact","hide-details":"",label:"UOM"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",zt,[o(j,{type:"number",modelValue:e.weight,"onUpdate:modelValue":v=>e.weight=v,variant:"outlined",density:"compact","hide-details":"",label:"WGT(KG)"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Yt,[o(j,{type:"number",modelValue:e.item_value,"onUpdate:modelValue":v=>e.item_value=v,variant:"outlined",density:"compact","hide-details":"",label:"VALUE"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Qt,[o(he,{modelValue:e.reason_for_request,"onUpdate:modelValue":v=>e.reason_for_request=v,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON"},null,8,["modelValue","onUpdate:modelValue"]),!x.value||x.value&&m(y).user.profile.id==U.objectdata.profile_id&&((w=U.objectdata)==null?void 0:w.status)=="pending"?(i(),_(ee,{key:0,size:"small",onClick:()=>Ie(e.id,a),icon:m(We),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):h("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),r.value.request_type_id==2?(i(),_(S,{key:0},{default:d(()=>[Q.value?h("",!0):(i(),_($,{key:0},{default:d(()=>{var e;return[t("div",null,[$t,o(be,{options:{multiSelect:!0,type:"request-asset"},onSelect:qe})]),((e=k.value)==null?void 0:e.length)>0?(i(),_(g,{key:0,class:"px-1 mt-4"},{default:d(()=>[(i(!0),V(R,null,L(k.value,(a,f)=>(i(),V("div",{key:a.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[x.value&&(c.value.status=="pending"||c.value.status=="cancelled")?(i(),_(C,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:m(me),size:"20px",color:"error",onClick:()=>Ee(a.id)},null,8,["icon","onClick"])):h("",!0),O(" "+n(a.mime)+" ",1),o(S,{onClick:()=>Oe(a,f)},{default:d(()=>[a.mime=="image/jpeg"||a.mime=="image/png"?(i(),_(G,{key:0,src:P.value+"/file/"+a.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(i(),_(G,{key:1,src:P.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),o(fe,{modelValue:N.value,"onUpdate:modelValue":l[9]||(l[9]=a=>N.value=a),width:"95%","max-width":"900"},{default:d(()=>[o(S,{class:"bg-black"},{default:d(()=>[o(Xe,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:H.value,"onUpdate:modelValue":l[8]||(l[8]=a=>H.value=a)},{default:d(()=>[(i(!0),V(R,null,L(k.value,(a,f)=>(i(),_(Ze,{key:f,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[t("div",{style:et(`${D.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[D.value=="jpg"||D.value=="jpeg"||D.value=="png"?(i(),_(G,{key:0,src:P.value+"/file/"+a.path},null,8,["src"])):h("",!0),D.value=="pdf"?(i(),V("object",{key:1,data:P.value+"/file/"+a.path,type:"application/pdf",width:"100%",height:"800px"},null,8,Gt)):h("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):h("",!0)]}),_:1}))]),_:1})):h("",!0),o(S,{class:"my-2"},{default:d(()=>[o($,null,{default:d(()=>[o(g,null,{default:d(()=>[t("div",Kt,[Ht,m(q).params.id?(i(),V("div",Jt,[o(C,{color:"info",size:"small",target:"_blank",href:ze.value},{default:d(()=>[O("View Approval Page")]),_:1},8,["href"])])):h("",!0)]),o(Z)]),_:1}),o(g,{class:"no-print"},{default:d(()=>{var e,a;return[Wt,t("div",Xt,n((a=(e=c.value)==null?void 0:e.profile)==null?void 0:a.display_name),1),Zt,ea]}),_:1}),o(g,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:d(()=>{var e,a;return[ta,t("div",aa,n((a=(e=c.value)==null?void 0:e.profile)==null?void 0:a.display_name),1),la,sa]}),_:1}),(i(!0),V(R,null,L(u.value,e=>(i(),_(g,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:d(()=>{var a;return[t("div",oa,n(J(e.approval_type)),1),t("div",da,n((a=e==null?void 0:e.profile)==null?void 0:a.display_name),1),t("div",ia,[e.status?(i(),_(ee,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?m(ye):e.status=="pending"?m(ge):e.status=="reject"?m(Ve):m(we),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):h("",!0)]),t("div",ua,n(e.date_approved),1)]}),_:2},1024))),128)),z.value?(i(),V(R,{key:0},[(i(!0),V(R,null,L(A.value,(e,a)=>(i(),_(g,{class:"no-print",key:e.id},{default:d(()=>[t("div",na,n(e.types?J(e.types):J(e.approval_type)),1),t("div",ra,[o(M,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[f=>e.profile_id=f,F],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),o(C,{variant:"text",size:"x-small"},{default:d(()=>[e.status?(i(),_(ee,{key:0,class:"mx-2 my-3 no-print",icon:e.status=="awaiting-approval"?m(ye):e.status=="pending"?m(ge):e.status=="reject"?m(Ve):m(we),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):h("",!0),o(tt,{activator:"parent",location:"top","max-width":"400"},{default:d(()=>[O(n(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)]),t("div",ca,n(e.date_approved?m(ke)(e.date_approved):""),1)]),_:2},1024))),128)),o(g,null,{default:d(()=>{var e;return[o(Z),Q.value?h("",!0):(i(),V("div",va,[(!m(q).params.id||((e=U.objectdata)==null?void 0:e.status)=="pending"||m(y).user.profile.role=="asset-supervisor"||m(y).user.profile.role=="superadmin"||m(y).user.profile.role=="administrator")&&c.value.status!="complete"?(i(),_(C,{key:0,disabled:!K.value,onClick:Be,class:"no-print",color:"primary"},{default:d(()=>[O(n(m(q).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):h("",!0)]))]}),_:1})],64)):(i(),_(g,{key:1,class:"no-print"},{default:d(()=>[t("div",pa,n(ie.value),1)]),_:1})),o(g,null,{default:d(()=>[_a]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(st,{options:B.value},null,8,["options"])]),_:1}))}};export{wa as _};
