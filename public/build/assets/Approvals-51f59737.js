import{G as Ie,r as h,c as V,w as p,m as Pe,o as a,s as A,b as e,d as s,e as r,j as ve,z as d,t as c,y,E as P,p as o,ad as _e,q as ee,C as w,ah as xe,k as D,Q as be,R as pe,az as De,U as I,i as M,ae as z,aA as le,aB as ae,aC as Ve,aD as we,F as se,aE as $e,S as Ne,T as Be,ac as H,f as Le,Z as Fe,_ as Ee}from"./app-955573a2.js";import{u as ye}from"./formatDate-b9aad8c5.js";import{_ as Me}from"./AppSnackBar-35a969cb.js";const ze={class:"v-col-12 v-col-md-3 mt-auto font-weight-bold"},He={class:"d-flex"},Ke=e("div",{class:"mr-2"},"FROM:",-1),Ge={class:"d-flex"},Ye=e("div",{class:"mr-6 pr-2"},"TO:",-1),Qe={class:"v-col-12 v-col-md-6 text-center"},Je=e("img",{src:"/assets/images/grandiose-logo.jpg",style:{"max-height":"100px"}},null,-1),We=e("br",null,null,-1),Xe={class:"v-col-12 v-col-md-3 mt-auto approval-date font-weight-bold"},Ze=e("br",null,null,-1),el=e("div",{class:"v-col-1 v-col-md-1 py-1"},"IMG",-1),ll=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM DESC",-1),al=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ASSET NO",-1),sl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"QTY",-1),tl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"UOM",-1),ol=e("div",{class:"v-col-1 v-col-md-1 py-1"},"WEIGHT",-1),rl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM VALUE",-1),dl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"COUNTRY OF ORIGIN",-1),cl=e("div",{class:"v-col-2 v-col-md-2 py-1"},[r(" REMARKS"),e("br"),r("REASON FOR REQUEST ")],-1),nl={class:"v-col-2 v-col-md-2 py-1 d-flex justify-space-between"},il={style:{position:"relative"}},ul={key:0,class:"checkbox-notice"},vl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},_l={key:0},pl={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},yl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},hl={key:1,class:"bg-light-gray d-flex flex-column-reverse flex-start-end border-bottom"},fl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},ml={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},kl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},gl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},xl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},bl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},Vl={key:0,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},wl={key:1,class:"v-col-12 v-col-md-2 py-1 d-flex"},El={key:0},Cl=e("strong",null," Asset Supervisor - Projects",-1),Al=e("br",null,null,-1),ql={key:0},Rl={key:2,class:"v-col-12 v-col-md-2 py-1"},Tl={key:0},jl=e("strong",null," Asset Supervisor - Projects",-1),Ul=e("br",null,null,-1),Ol={style:{"text-wrap":"wrap"}},Sl={key:1},Il=e("strong",null," Commercial Manager - Projects",-1),Pl=e("br",null,null,-1),Dl={style:{"text-wrap":"wrap"}},$l={key:2},Nl=e("strong",null," Transport",-1),Bl=e("br",null,null,-1),Ll={style:{"text-wrap":"wrap"}},Fl={key:3},Ml=e("strong",null," Releasing",-1),zl=e("br",null,null,-1),Hl={style:{"text-wrap":"wrap"}},Kl={key:3,class:"v-col-12 v-col-md-2 py-1"},Gl={key:0},Yl=e("strong",null," Asset Supervisor - Projects",-1),Ql=e("br",null,null,-1),Jl={style:{"text-wrap":"wrap"}},Wl={key:1},Xl=e("strong",null," Commercial Manager - Projects",-1),Zl=e("br",null,null,-1),ea={style:{"text-wrap":"wrap"}},la={key:2},aa=e("strong",null," Transport",-1),sa=e("br",null,null,-1),ta={style:{"text-wrap":"wrap"}},oa={key:4,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},ra={key:0},da=e("strong",null," Asset Supervisor - Projects",-1),ca=e("br",null,null,-1),na={style:{"text-wrap":"wrap"}},ia={key:1},ua=e("strong",null," Commercial Manager - Projects",-1),va=e("br",null,null,-1),_a={style:{"text-wrap":"wrap"}},pa={key:2},ya=e("strong",null," Transport",-1),ha=e("br",null,null,-1),fa={style:{"text-wrap":"wrap"}},ma={key:3},ka=e("strong",null," Releasing",-1),ga=e("br",null,null,-1),xa={style:{"text-wrap":"wrap"}},ba={key:0,class:"my-auto"},Va={class:"pa-0 ma-0 v-col-1 my-auto",style:{position:"relative"}},wa={key:0,class:"checkbox-notice"},Ea={key:5,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between ssss"},Ca={key:0,style:{"border-bottom":"1px solid #000000"},class:"pa-1"},Aa={key:0},qa=e("strong",null," Asset Supervisor - Projects",-1),Ra=e("br",null,null,-1),Ta={style:{"text-wrap":"wrap"}},ja={key:1},Ua=e("strong",null," Commercial Manager - Projects",-1),Oa=e("br",null,null,-1),Sa={style:{"text-wrap":"wrap"}},Ia={key:2},Pa=e("strong",null," Transport",-1),Da=e("br",null,null,-1),$a={style:{"text-wrap":"wrap"}},Na={key:3},Ba=e("strong",null," Releasing",-1),La=e("br",null,null,-1),Fa={style:{"text-wrap":"wrap"}},Ma={key:4},za=e("strong",null," Receiver",-1),Ha={style:{"text-wrap":"wrap"}},Ka={key:1},Ga={key:2},Ya={key:3},Qa={key:0,class:"v-col-12 text-center font-weight-bold text-info"},Ja=e("br",null,null,-1),Wa={key:1,class:"v-col-12 text-center font-weight-bold text-info"},Xa={key:0,class:"ml-5 d-flex"},Za=e("div",{class:"px-2 mr-5"},"|",-1),es={key:1,class:"ml-6"},ls={class:"v-col-12 px-0 my-0"},as=["data"],ss={class:"v-col-12 v-col-md-3 pa-0 mb-4"},ts=e("div",{class:"text-center py-1 font-weight-bold"}," Requested By ",-1),os={class:"text-center py-1"},rs={class:"text-center py-1"},ds={class:"text-center text-caption"},cs={key:0},ns={key:0,class:"d-flex"},is=["onClick"],us=["onClick"],vs={key:1},_s=["onClick"],ps=["onClick"],ys={class:"text-center py-1"},hs={class:"text-center py-1"},fs={class:"text-center text-caption"},ms={key:2,class:"v-col-12 text-caption",style:{border:"1px solid red","border-radius":"5px"}},ks={class:"v-col-12 text-center"},gs=e("div",{class:"v-col-12 text-center mt-3 font-weight-bold"}," REASON FOR REJECTION ",-1),xs={class:"v-col-12"},Cs={__name:"Approvals",setup(bs){const u=Ie(),he=h(!0),v=h({}),te=h({}),g=h(!1),oe=h(!1),re=h(!1),de=h(!1),R=h(!1),$=h([]),K=h(!1),N=h(""),G=h(!1),Ce=h(u.query.id),m=h(""),ce=h(0),X=h([]),fe=async()=>{let _={id:u.query.id,profile_id:u.query.pid,order:u.query.o};if(!u.query.id||!u.query.pv){he.value=!1;return}await axios.post("/api/pv/fetch/request-assets/data",_).then(i=>{var k,T,j,x,q,Q,J,l,b,E,C;if(v.value=i.data,!v.value.access){he.value=!1;return}m.value=(T=(k=i.data)==null?void 0:k.data)==null?void 0:T.status,ce.value=(x=(j=i.data)==null?void 0:j.data)==null?void 0:x.request_type_id,X.value=(Q=(q=i.data)==null?void 0:q.data)==null?void 0:Q.attachment,((b=(l=(J=v.value)==null?void 0:J.data)==null?void 0:l.request_approvals)==null?void 0:b.length)>0&&(g.value=v.value.data.request_approvals.filter(n=>{var t;return n.profile_id==u.query.pid&&n.orders==u.query.o&&n.status=="awaiting-approval"&&((t=n.profile)==null?void 0:t.role)=="asset-supervisor"})[0],oe.value=v.value.data.request_approvals.filter(n=>n.profile_id==u.query.pid&&n.orders==u.query.o&&n.status=="awaiting-approval"&&n.approval_type=="releasing")[0],re.value=v.value.data.request_approvals.filter(n=>n.profile_id==u.query.pid&&n.orders==u.query.o&&n.status=="awaiting-approval"&&n.approval_type=="transport")[0],de.value=v.value.data.request_approvals.filter(n=>{var t;return n.profile_id==u.query.pid&&n.orders==u.query.o&&n.status=="awaiting-approval"&&((t=n.profile)==null?void 0:t.role)=="commercial-manager"})[0],R.value=v.value.data.request_approvals.filter(n=>n.profile_id==u.query.pid&&n.orders==u.query.o&&n.status=="awaiting-approval"&&n.approval_type=="receiver")[0],ue.value=v.value.data.request_approvals[v.value.data.request_approvals.length-1].approval_type,(R.value||g.value)&&m.value!="cancelled"&&(G.value=!0)),$.value=(C=(E=v.value)==null?void 0:E.data)==null?void 0:C.items}).catch(i=>{console.log(i.response.data)})},ne=h(1),B=h("image"),Ae=(_,i)=>{let k=_.path.split(".");B.value=k[k.length-1],ne.value=i,L.value=!0},qe=()=>{window.print()},ie=h(window.location.origin),L=h(!1),me=h(1),Re=_=>{me.value=_,L.value=!0},ue=h(""),ke=h({}),Te=_=>{K.value=!0,ke.value=_},je=()=>{K.value=!1,N.value=""},Z=(_,i=null)=>{if(K.value=!1,!(m.value=="cancelled"||_.status=="reject")&&(_.status=="awaiting-approval"||_.status=="reject")&&u.query.pid==_.profile_id&&u.query.o==_.orders){te.value={status:!0,type:"info",text:"Please wait..."};let k=[];(g.value||de.value||R.value||oe.value||re.value)&&(k=$.value.map((x,q)=>(delete x.created_at,delete x.assets,delete x.updated_at,delete x.attachment,x)));let T={},j="";N.value&&i&&(j=N.value),T={profile_id:u.query.pid,id:u.query.id,order:u.query.o,type:v.value.data.types,assets:k,is_reject:j,requestor_id:v.value.data.profile_id},axios.post("/api/pv/store/request-asset/approve-data",T).then(x=>{let q="success";x.data.success||(q="error"),te.value={status:!0,type:q,text:x.data.message},G.value=!1,setTimeout(()=>{fe()},500)}).catch(x=>{console.log(x.response.data)});return}},Ue=_=>{if(_=="approve")return"Approved";if(_=="reviewer")return"Reviewed";if(_=="receiver")return"Received";if(_=="transport")return"Transport Arranged";if(_=="releasing")return"Released";if(_=="verify")return"Verified"},Oe=()=>{let _=R.value;G.value=!1,$.value.map(i=>{_?i.is_received=Y.value:i.is_available=Y.value})},Se=(_,i=6)=>{let k="00000"+_;return k.substring(k.length-i)},ge=()=>{let _=!0,i=R.value;$.value.map(k=>{i?k.is_received||(_=!1):k.is_available||(_=!1)}),Y.value=_},Y=h(!1);return fe(),(_,i)=>(a(),V(Pe,{style:{"max-width":"90%"},class:"mt-0 pt-0"},{default:p(()=>{var k,T,j,x,q,Q,J;return[((k=$.value)==null?void 0:k.length)>0?(a(),V(A,{key:0,class:"mt-0 pt-0 no-print mt-2"},{default:p(()=>[e("div",null,[s(ve,{color:"primary",size:"small",onClick:qe},{default:p(()=>[r("Print")]),_:1})])]),_:1})):d("",!0),s(A,{class:"mt-0 pt-0"},{default:p(()=>{var l,b,E,C,n,t,U,O,S;return[e("div",ze,[e("div",He,[Ke,e("div",null,c((b=(l=v.value.data)==null?void 0:l.transfer_from)==null?void 0:b.title),1)]),e("div",Ge,[Ye,e("div",null,c((C=(E=v.value.data)==null?void 0:E.transfer_to)==null?void 0:C.title),1)])]),e("div",Qe,[Je,We,e("strong",null,c((t=(n=v.value.data)==null?void 0:n.setup)==null?void 0:t.title),1)]),e("div",Xe,[r(" SN-"+c(((O=(U=v.value)==null?void 0:U.data)==null?void 0:O.types)=="request"?"5":"3")+c(Se(Ce.value)),1),Ze,r(" "+c(y(ye)((S=v.value.data)==null?void 0:S.created_at)),1)])]}),_:1}),s(P,{class:"my-5"}),s(A,null,{default:p(()=>[el,ll,al,sl,tl,ol,rl,dl,cl,e("div",nl,[r(" REMARKS "),e("div",il,[G.value?(a(),o("div",ul)):d("",!0),g.value||R.value?(a(),V(_e,{key:1,modelValue:Y.value,"onUpdate:modelValue":[i[0]||(i[0]=l=>Y.value=l),Oe],class:"pa-0 ma-0 v-col-1","hide-details":"",disabled:m.value=="cancelled",variant:"underlined",density:"compact"},null,8,["modelValue","disabled"])):d("",!0)])])]),_:1}),(a(!0),o(se,null,ee($.value,(l,b)=>(a(),V(A,{class:"mt-1 approval-form-pr",key:l.id},{default:p(()=>{var E,C,n,t,U,O,S,W,F;return[e("div",vl,[(E=l.attachment)!=null&&E.id?(a(),o("div",_l,[s(D,{onClick:()=>Re(l),maxHeight:"40",variant:"text",class:"ma-2"},{default:p(()=>[s(w,{size:"large",icon:y(xe),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"]),s(pe,{modelValue:L.value,"onUpdate:modelValue":i[1]||(i[1]=f=>L.value=f),width:"95%","max-width":"900"},{default:p(()=>[s(D,{class:"bg-black"},{default:p(()=>[e("div",pl,[s(be,{src:ie.value+"/file/"+me.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])])):(a(),V(D,{key:1,maxHeight:"40",variant:"text",class:"ma-2"},{default:p(()=>[s(w,{size:"large",icon:y(De)},null,8,["icon"])]),_:1})),s(I,{value:l.item_description,variant:"underlined",density:"compact","hide-details":"",rows:"2",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0},null,8,["value"])]),e("div",yl,[g.value&&m.value!="cancelled"?(a(),V(M,{key:0,modelValue:l.asset_code,"onUpdate:modelValue":f=>l.asset_code=f,variant:"underlined",density:"compact","hide-details":"",readonly:!g.value||m.value=="cancelled",class:z(`${!g.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])):(a(),o("div",hl,c(l.asset_code),1))]),e("div",fl,[s(M,{value:l.qty,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",ml,[s(M,{value:l.uom,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0},null,8,["value"])]),e("div",kl,[s(M,{modelValue:l.weight,"onUpdate:modelValue":f=>l.weight=f,variant:"underlined",density:"compact","hide-details":"",readonly:!g.value||m.value=="cancelled",class:z(`${!g.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",gl,[s(M,{modelValue:l.item_value,"onUpdate:modelValue":f=>l.item_value=f,variant:"underlined",density:"compact","hide-details":"",readonly:!g.value||m.value=="cancelled",class:z(`${!g.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",xl,[s(M,{modelValue:l.country_of_origin,"onUpdate:modelValue":f=>l.country_of_origin=f,variant:"underlined",density:"compact","hide-details":"",readonly:!g.value||m.value=="cancelled",class:z(`${!g.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",bl,[s(I,{value:l.reason_for_request,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0,rows:"2"},null,8,["value"])]),g.value?(a(),o("div",Vl,[s(I,{modelValue:l.remarks,"onUpdate:modelValue":f=>l.remarks=f,variant:"underlined",density:"compact","hide-details":"",class:z(["text-remarks",`${m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`]),placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue","class"]),s(_e,{disabled:m.value=="cancelled",modelValue:l.is_available,"onUpdate:modelValue":[f=>l.is_available=f,ge],class:"pa-0 ma-0 v-col-1","hide-details":"",variant:"underlined",density:"compact"},null,8,["disabled","modelValue","onUpdate:modelValue"])])):d("",!0),de.value?(a(),o("div",wl,[e("div",null,[l.remarks?(a(),o("div",El,[Cl,r(),Al,e("p",null,c(l.remarks),1),r(" ------- ")])):d("",!0),s(I,{modelValue:l.remarks_commercial,"onUpdate:modelValue":f=>l.remarks_commercial=f,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(n=(C=v.value)==null?void 0:C.data)!=null&&n.is_available?(a(),o("div",ql,[s(w,{style:{position:"absolute",right:"60px"},class:"mt-3",icon:l.is_available?y(le):y(ae),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0)])):oe.value?(a(),o("div",Rl,[e("div",null,[l.remarks?(a(),o("div",Tl,[jl,r(),Ul,e("pre",Ol,c(l.remarks),1),r(" ------- ")])):d("",!0),l.remarks_commercial?(a(),o("div",Sl,[Il,r(),Pl,e("pre",Dl,c(l.remarks_commercial),1),r(" ------- ")])):d("",!0),l.remarks_transport?(a(),o("div",$l,[Nl,r(),Bl,e("pre",Ll,c(l.remarks_transport),1),r(" ------- ")])):d("",!0),l.remarks_release?(a(),o("div",Fl,[Ml,r(),zl,e("pre",Hl,c(l.remarks_release),1),r(" ------- ")])):d("",!0)]),s(I,{modelValue:l.remarks_release,"onUpdate:modelValue":f=>l.remarks_release=f,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):re.value?(a(),o("div",Kl,[e("div",null,[l.remarks?(a(),o("div",Gl,[Yl,r(),Ql,e("pre",Jl,c(l.remarks),1),r(" ------- ")])):d("",!0),l.remarks_commercial?(a(),o("div",Wl,[Xl,r(),Zl,e("pre",ea,c(l.remarks_commercial),1),r(" ------- ")])):d("",!0),l.remarks_transport?(a(),o("div",la,[aa,r(),sa,e("pre",ta,c(l.remarks_transport),1),r(" ------- ")])):d("",!0)]),s(I,{modelValue:l.remarks_transport,"onUpdate:modelValue":f=>l.remarks_transport=f,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):R.value?(a(),o("div",oa,[e("div",null,[e("div",null,[l.remarks?(a(),o("div",ra,[da,r(),ca,e("pre",na,c(l.remarks),1),r(" ------- ")])):d("",!0),l.remarks_commercial?(a(),o("div",ia,[ua,va,e("pre",_a,c(l.remarks_commercial),1),r(" ------- ")])):d("",!0),l.remarks_transport?(a(),o("div",pa,[ya,r(),ha,e("pre",fa,c(l.remarks_transport),1),r(" ------- ")])):d("",!0),l.remarks_release?(a(),o("div",ma,[ka,r(),ga,e("pre",xa,c(l.remarks_release),1),r(" ------- ")])):d("",!0)]),s(I,{modelValue:l.remarks_receive,"onUpdate:modelValue":f=>l.remarks_receive=f,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(U=(t=v.value)==null?void 0:t.data)!=null&&U.is_available?(a(),o("div",ba,[s(w,{class:"mt-3",icon:l.is_available?y(le):y(ae),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),e("div",Va,[G.value?(a(),o("div",wa)):d("",!0),s(_e,{modelValue:l.is_received,"onUpdate:modelValue":[f=>l.is_received=f,ge],"hide-details":"",variant:"underlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])])])):g.value?d("",!0):(a(),o("div",Ea,[l.remarks||l.remarks_commercial||l.remarks_release||l.remarks_receive||l.remarks_transport?(a(),o("div",Ca,[l.remarks?(a(),o("div",Aa,[qa,r(),Ra,e("pre",Ta,c(l.remarks),1),r(" ------- ")])):d("",!0),l.remarks_commercial?(a(),o("div",ja,[Ua,r(),Oa,e("pre",Sa,c(l.remarks_commercial),1),r(" ------- ")])):d("",!0),l.remarks_transport?(a(),o("div",Ia,[Pa,r(),Da,e("pre",$a,c(l.remarks_transport),1),r(" ------- ")])):d("",!0),l.remarks_release?(a(),o("div",Na,[Ba,r(),La,e("pre",Fa,c(l.remarks_release),1),r(" ------- ")])):d("",!0),l.remarks_receive?(a(),o("div",Ma,[za,e("pre",Ha,c(l.remarks_receive),1)])):d("",!0)])):(a(),o("div",Ka)),(S=(O=v.value)==null?void 0:O.data)!=null&&S.is_available?(a(),o("div",Ga,[s(w,{class:"mt-3",icon:l.is_available?y(le):y(ae),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),((F=(W=v.value)==null?void 0:W.data)==null?void 0:F.status)=="complete"&&ue.value=="receiver"?(a(),o("div",Ya,[s(w,{class:"mt-3",icon:l.is_received?y(Ve):y(we),color:`${l.is_received?"success":"error"}`},null,8,["icon","color"])])):d("",!0)]))]}),_:2},1024))),128)),g.value?(a(),V(A,{key:1,class:"mt-3"},{default:p(()=>[m.value!=="cancelled"?(a(),o("div",Qa,[r(" YOU CAN UPDATE SOME DATA AND"),Ja,r(" PLEASE TICK CHECKBOX IF ASSET IS AVAILABLE BEFORE CLICKING THE APPROVE BUTTON ")])):(a(),o("div",Wa," THIS REQUEST HAS BEEN CANCELLED. "))]),_:1})):d("",!0),(j=(T=v.value)==null?void 0:T.data)!=null&&j.is_available&&m.value!=="cancelled"?(a(),V(A,{key:2,class:"mt-6 mb-2"},{default:p(()=>[s(D,{variant:"text",class:"v-col-12 text-center pt-2 font-weight-bold pb-0 d-flex justify-center"},{default:p(()=>{var l;return[e("div",null,[s(w,{icon:y(le),color:"success"},null,8,["icon"]),r(" AVAILABLE "),s(w,{icon:y(ae),color:"error",class:"ml-5"},null,8,["icon"]),r(" NOT AVAILABLE ")]),R.value?(a(),o("div",Xa,[Za,e("div",null,[s(w,{icon:y($e)},null,8,["icon"]),r(" TICK RECEIVED ASSETS "),s(P,{thickness:8,color:"error",class:"divider-notice"})])])):d("",!0),((l=v.value.data)==null?void 0:l.status)=="complete"&&ue.value=="receiver"?(a(),o("div",es,[s(w,{icon:y(Ve),color:"success"},null,8,["icon"]),r(" RECEIVED "),s(w,{icon:y(we),color:"error",class:"ml-5"},null,8,["icon"]),r(" NOT RECEIVE ")])):d("",!0)]}),_:1})]),_:1})):d("",!0),s(A,{class:"mt-3"},{default:p(()=>[e("div",ls,[s(P),s(P)])]),_:1}),ce.value==2&&((x=X.value)==null?void 0:x.length)>0?(a(),V(A,{key:3,class:"my-3 d-flex justify-center"},{default:p(()=>[(a(!0),o(se,null,ee(X.value,(l,b)=>(a(),o("div",{key:l.id,class:"pa-2",style:{position:"relative"}},[s(D,{onClick:()=>Ae(l,b)},{default:p(()=>[s(w,{size:"large",icon:y(xe),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"])]))),128)),s(pe,{modelValue:L.value,"onUpdate:modelValue":i[3]||(i[3]=l=>L.value=l),width:"95%","max-width":"900"},{default:p(()=>[s(D,{class:"bg-black"},{default:p(()=>[s(Ne,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:ne.value,"onUpdate:modelValue":i[2]||(i[2]=l=>ne.value=l)},{default:p(()=>[(a(!0),o(se,null,ee(X.value,(l,b)=>(a(),V(Be,{key:b,"reverse-transition":"fade",transition:"fade"},{default:p(()=>[e("div",{style:H(`${B.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[B.value=="jpg"||B.value=="jpeg"||B.value=="png"?(a(),V(be,{key:0,src:ie.value+"/file/"+l.path},null,8,["src"])):d("",!0),B.value=="pdf"?(a(),o("object",{key:1,data:ie.value+"/file/"+l.path,type:"application/pdf",width:"100%",height:"800px"},null,8,as)):d("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):d("",!0),((q=v.value.data)==null?void 0:q.request_approvals.length)>0?(a(),V(A,{key:4},{default:p(()=>{var l,b,E,C,n;return[e("div",ss,[e("div",{class:"text-center mx-2 py-4 font-weight-bold",style:H(`${m.value=="cancelled"?"color: red;":"color: rgb(3, 167, 3);"} border: 1px solid #ccc; font-size: 17px;`)},c(m.value=="cancelled"?"CANCELLED":"APPROVED"),5),ts,e("div",os,c((b=(l=v.value.data)==null?void 0:l.profile)==null?void 0:b.display_name),1),e("div",rs,c((C=(E=v.value.data)==null?void 0:E.profile)==null?void 0:C.designation),1),e("div",ds,c(y(ye)((n=v.value.data)==null?void 0:n.created_at)),1)]),(a(!0),o(se,null,ee(v.value.data.request_approvals,t=>{var U,O,S,W;return a(),o("div",{class:"v-col-12 v-col-md-3 pa-0 mb-4",key:t.id},[(t.profile.ecode=="100884"||t.profile.ecode=="102587"||t.profile.ecode=="100316"||((U=t.profile)==null?void 0:U.role)=="commercial-manager"||((O=t.profile)==null?void 0:O.role)=="technical-operation"&&ce.value==2)&&y(u).query.pid==t.profile_id&&y(u).query.o==t.orders?(a(),o("div",cs,[t.status=="awaiting-approval"?(a(),o("div",ns,[e("div",{onClick:F=>Te(t),class:"cursor-pointer text-center py-5 v-col-6",style:H(`border:1px solid #ccc; ${y(u).query.pid==t.profile_id&&y(u).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":"background-color: none;"}`)}," REJECT ",12,is),e("div",{onClick:F=>Z(t,"reject"),class:"cursor-pointer text-center py-5 v-col-6",style:H(`border:1px solid #ccc; ${y(u).query.pid==t.profile_id&&y(u).query.o==t.orders?"background-color: rgb(3, 167, 3);color:#fff;":"background-color: none"}`)}," APPROVE ",12,us)])):t.status=="reject"||t.status=="done"||t.status=="pending"?(a(),o("div",vs,[e("div",{onClick:F=>Z(t),class:"cursor-pointer text-center mx-2 py-5",style:H(`border:1px solid #ccc; ${t.status=="reject"&&y(u).query.pid==t.profile_id&&y(u).query.o==t.orders?"background-color: gray; color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},c(t.status=="done"?"APPROVED":t.status=="reject"?"REJECTED":"CLICK TO APPROVE"),13,_s)])):d("",!0)])):(a(),o("div",{key:1,onClick:F=>Z(t),class:"cursor-pointer text-center mx-2 py-5",style:H(`border:1px solid #ccc; ${m.value!="cancelled"&&t.status=="awaiting-approval"&&y(u).query.pid==t.profile_id&&y(u).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},c(t.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,ps)),e("div",{class:z(`text-center py-1 font-weight-bold ${t.status=="reject"?"text-error text-uppercase":""}`)},c(t.status=="reject"?"Rejected":Ue(t.approval_type))+" By ",3),e("div",ys,c((S=t.profile)==null?void 0:S.display_name),1),e("div",hs,c((W=t.profile)==null?void 0:W.designation),1),e("div",fs,c(t.date_approved?y(ye)(t.date_approved):""),1),t.reason_rejected?(a(),o("div",ms,[r(" Reason rejected "),s(P,{class:"my-2"}),r(" "+c(t.reason_rejected),1)])):d("",!0)])}),128))]}),_:1})):d("",!0),((J=(Q=v.value)==null?void 0:Q.data)==null?void 0:J.status)!=="complete"?(a(),V(A,{key:5,class:"no-print"},{default:p(()=>[e("div",ks,[s(P),r(" You will receive a notification once you click the approve button. "),s(P)])]),_:1})):d("",!0),s(pe,{width:"500",modelValue:K.value,"onUpdate:modelValue":i[6]||(i[6]=l=>K.value=l),persistent:""},{default:p(()=>[s(D,null,{default:p(()=>[s(Le,null,{default:p(()=>[s(A,null,{default:p(()=>[gs,e("div",xs,[s(I,{modelValue:N.value,"onUpdate:modelValue":i[4]||(i[4]=l=>N.value=l),label:"STATE YOUR REASON HERE",variant:"outlined"},null,8,["modelValue"])])]),_:1})]),_:1}),s(Fe,null,{default:p(()=>[s(Ee),s(ve,{onClick:je},{default:p(()=>[r("Cancel")]),_:1}),s(ve,{color:"success",disabled:!N.value,onClick:i[5]||(i[5]=l=>Z(ke.value,"reject"))},{default:p(()=>[r("Confirm")]),_:1},8,["disabled"]),s(Ee)]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Me,{options:te.value},null,8,["options"])]}),_:1}))}};export{Cs as default};
