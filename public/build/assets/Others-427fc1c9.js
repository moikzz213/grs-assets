import{r as d,H as w,O as P,o as i,c as f,w as s,d as u,j as x,X as R,e as V,t as T,$ as q,p as C,F as N,q as A,a0 as H,a1 as X,C as G,y as h,a2 as J,a3 as K,a4 as Q,a5 as W,a as Y,V as Z,b as g,a6 as ee,z as $,E as te,f as ae,s as O,i as U,k as le,a7 as se,a8 as oe,a9 as ue,m as ne}from"./app-a06332a8.js";import{_ as ie}from"./ApppageHeader-d5c96615.js";import{u as re}from"./status-93f4dce5.js";const ce={__name:"AppStatusDropDown",props:{loading:{type:Boolean,default:!1},list:{type:Array,default:[]},currentState:{type:Object,default:null}},emits:["update"],setup(k,{emit:o}){const t=k,l=d([]),n=d("");l.value=t.list,w(()=>t.list,e=>{l.value=[...l.value,...e.list]}),n.value=t.currentState.status,w(()=>t.currentState,e=>{n.value=e.status});const p=d(!1);w(()=>t.loading,e=>{p.value=e});const y=P(()=>l.value.filter(e=>e.title==n.value)[0]),_=e=>{n.value!=e.title&&(n.value=e.title,o("update",{state:y.value.title,model_id:t.currentState.id}))};return(e,c)=>(i(),f(K,null,{activator:s(({props:m})=>[u(x,R({loading:p.value,block:"",color:y.value.color},m),{default:s(()=>[V(T(y.value.title),1)]),_:2},1040,["loading","color"])]),default:s(()=>[u(q,null,{default:s(()=>[(i(!0),C(N,null,A(l.value,(m,B)=>(i(),f(H,{key:B,value:B,onClick:()=>_(m)},{default:s(()=>[u(X,{class:"text-capitalize"},{default:s(()=>[u(G,{icon:h(J),color:m.color},null,8,["icon","color"]),V(" "+T(m.title),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1}))}},de={__name:"AppSnackbar",props:{options:{type:Object,default:null}},setup(k){const o=k,t=d({status:!1,type:"primary",text:"Default Message"});return w(()=>o.options,l=>{t.value={...t.value,...l}}),(l,n)=>(i(),f(Q,{modelValue:t.value.status,"onUpdate:modelValue":n[1]||(n[1]=p=>t.value.status=p),color:t.value.type},{actions:s(()=>[u(x,{color:"white",variant:"text",onClick:n[0]||(n[0]=p=>t.value=!1)},{default:s(()=>[V(" Close ")]),_:1})]),default:s(()=>[V(T(t.value.text)+" ",1)]),_:1},8,["modelValue","color"]))}},pe={class:"v-col-12 v-col-md-8"},ve={class:"d-flex align-center"},ye={class:"text-capitalize"},fe={class:"v-col"},_e={class:"v-col"},me={key:0,class:"v-col"},he={class:"v-col px-3 d-flex align-center justify-center",style:{width:"100%","max-width":"150px","min-width":"150px"}},Ve={key:0,style:{position:"absolute",top:"25%",left:"25%"}},ke={__name:"StatusType",props:{type:{type:String,default:""}},setup(k){const o=k,{mobile:t}=W(),l=Y(),n=d({}),p=d(!1),y=d(""),_=d([]),e=re(),c=d(e.statusListByType);e.list.length<1&&e.getStatuses(l.token).then(()=>{e.filterStatusByType(o.type).then(()=>{c.value=e.statusListByType})}),w(()=>o.type,r=>{e.filterStatusByType(o.type).then(()=>{c.value=e.statusListByType})});const m=(r,v)=>{_.value=[r,v],p.value=!0,y.value=c.value[v][r]},B=()=>{_.value[0]=="color"?c.value[_.value[1]].color=y.value:c.value[_.value[1]].bgcolor=y.value,p.value=!1},j=()=>{c.value.push({title:null,type:null,status:"active",type:o.type,notification_interval:o.type=="urgency"?1:null})},I=r=>{c.value=c.value.filter(function(v,a){return a!==r})},L=d(!1),D=d([]),z=d([{title:"active",color:"success"},{title:"disabled",color:"error"}]),E=r=>{D.value.push(r.model_id);let v={id:r.model_id,type:o.type,status:r.state};e.updateStatus(v,l.token).then(a=>{e.getStatuses(l.token).then(()=>{e.filterStatusByType(o.type).then(()=>{c.value=e.statusListByType,D.value=[],n.value={status:!0,type:"success",text:"Status has been saved"}})})}).catch(a=>{D.value=[],n.value={status:!0,type:"error",text:"Error while updating status"}})},F=P(()=>{let r=!0;return c.value.map(v=>{(!v.title||v.title.length==0)&&(r=!1)}),r}),M=()=>{L.value=!0;let r={list:c.value};e.saveStatusList(r,l.token).then(()=>{e.getStatuses(l.token).then(()=>{e.filterStatusByType(o.type).then(()=>{c.value=e.statusListByType,L.value=!1,n.value={status:!0,type:"success",text:"Status list has been saved"}})})}).catch(v=>{L.value=!1,n.value={status:!0,type:"error",text:"Error while saving status list"}})};return(r,v)=>(i(),C("div",pe,[u(le,null,{default:s(()=>[u(Z,null,{default:s(()=>{var a,S;return[g("div",ve,[h(l).user.role=="superadmin"||(a=h(l).capabilities)!=null&&a.includes("add")?(i(),f(x,{key:0,icon:h(ee),onClick:j,size:"x-small",color:"white",class:"mr-3"},null,8,["icon"])):$("",!0),g("div",ye,T(o.type.replace("-"," "))+" List ",1),h(l).user.role=="superadmin"||(S=h(l).capabilities)!=null&&S.includes("edit")?(i(),f(x,{key:1,disabled:!F.value,loading:L.value,onClick:M,color:"primary",class:"ml-auto"},{default:s(()=>[V("Save")]),_:1},8,["disabled","loading"])):$("",!0)])]}),_:1}),u(te),u(ae,null,{default:s(()=>[(i(!0),C(N,null,A(c.value,(a,S)=>(i(),f(O,{key:S},{default:s(()=>[g("div",fe,[u(U,{"hide-details":"auto",modelValue:a.title,"onUpdate:modelValue":b=>a.title=b,label:`${o.type.charAt(0).toUpperCase()+o.type.slice(1)} Title`,variant:"outlined",density:"compact",disabled:a.id<10},null,8,["modelValue","onUpdate:modelValue","label","disabled"])]),g("div",_e,[u(U,{"hide-details":"auto",modelValue:a.color,"onUpdate:modelValue":b=>a.color=b,label:"Color",variant:"outlined",density:"compact",onClick:b=>m("color",S),clearable:""},null,8,["modelValue","onUpdate:modelValue","onClick"])]),o.type=="urgency"?(i(),C("div",me,[u(U,{"hide-details":"auto",modelValue:a.notification_interval,"onUpdate:modelValue":b=>a.notification_interval=b,label:`${h(t)?"Notif. (days)":"Notification Interval (days)"} `,variant:"outlined",density:"compact",disabled:a.id<10},null,8,["modelValue","onUpdate:modelValue","label","disabled"])])):$("",!0),g("div",he,[a.id?(i(),f(ce,{key:0,onUpdate:E,list:z.value,"current-state":a,loading:D.value.includes(a.id)==!0},null,8,["list","current-state","loading"])):(i(),f(x,{key:1,block:"",color:"error",onClick:()=>I(S)},{default:s(()=>[V(" remove ")]),_:2},1032,["onClick"]))])]),_:2},1024))),128))]),_:1})]),_:1}),p.value?se((i(),C("div",Ve,[u(ue,{modelValue:y.value,"onUpdate:modelValue":v[0]||(v[0]=a=>y.value=a),elevation:"15","hide-inputs":"","show-swatches":""},null,8,["modelValue"])])),[[oe,B]]):$("",!0),u(de,{options:n.value},null,8,["options"])]))}},Se={class:"v-col py-0"},xe={__name:"Others",setup(k){const o=d(["asset","condition-type","incident-type","incident","maintenance","urgency"]),t=d("");return t.value="asset",(l,n)=>(i(),f(ne,null,{default:s(()=>[u(ie,{title:"Others - Status Setup"}),u(O,{class:"mt-5"},{default:s(()=>[g("div",Se,[(i(!0),C(N,null,A(o.value,(p,y)=>(i(),f(x,{class:"mr-3 mb-3",key:y,color:`${t.value==p?"primary":"white"}`,onClick:_=>t.value=p},{default:s(()=>[V(T(p.replace("-"," ")),1)]),_:2},1032,["color","onClick"]))),128))])]),_:1}),u(O,{class:"mb-3"},{default:s(()=>[u(ke,{type:t.value},null,8,["type"])]),_:1})]),_:1}))}};export{xe as default};
