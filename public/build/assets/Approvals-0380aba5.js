import{G as Pe,r as f,c as V,w as p,m as $e,o as a,s as q,b as e,d as s,e as r,j as ve,z as d,t as n,y,E as D,p as o,ad as _e,q as te,C as w,ah as xe,k as N,Q as be,R as pe,az as De,U as P,i as Y,ae as G,aA as oe,aB as re,aC as Ve,aD as we,F as de,aE as Ne,S as Be,T as Le,ac as Q,f as Fe,Z as Me,_ as Ee}from"./app-d4dc0ab9.js";import{u as ye}from"./formatDate-b9aad8c5.js";import{_ as ze}from"./AppSnackBar-9141c4ac.js";const He={class:"v-col-12 v-col-md-3 mt-auto font-weight-bold"},Ke={class:"d-flex"},Ye=e("div",{class:"mr-2"},"FROM:",-1),Ge={class:"d-flex"},Qe=e("div",{class:"mr-6 pr-2"},"TO:",-1),Je={class:"v-col-12 v-col-md-6 text-center"},We=e("img",{src:"/assets/images/grandiose-logo.jpg",style:{"max-height":"100px"}},null,-1),Xe=e("br",null,null,-1),Ze={class:"v-col-12 v-col-md-3 mt-auto approval-date font-weight-bold"},el=e("br",null,null,-1),ll=e("div",{class:"v-col-1 v-col-md-1 py-1"},"IMG",-1),al=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM DESC",-1),sl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ASSET NO",-1),tl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"QTY",-1),ol=e("div",{class:"v-col-1 v-col-md-1 py-1"},"UOM",-1),rl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"WEIGHT",-1),dl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"ITEM VALUE",-1),nl=e("div",{class:"v-col-1 v-col-md-1 py-1"},"COUNTRY OF ORIGIN",-1),cl=e("div",{class:"v-col-2 v-col-md-2 py-1"},[r(" REMARKS"),e("br"),r("REASON FOR REQUEST ")],-1),il={class:"v-col-2 v-col-md-2 py-1 d-flex justify-space-between"},ul={style:{position:"relative"}},vl={key:0,class:"checkbox-notice"},_l={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},pl={key:0},yl={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},hl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},fl={key:1,class:"bg-light-gray d-flex flex-column-reverse flex-start-end border-bottom"},ml={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},kl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},gl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},xl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},bl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},Vl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},wl={key:0,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},El={key:1,class:"v-col-12 v-col-md-2 py-1 d-flex"},Al={key:0},Cl=e("strong",null," Asset Supervisor - Projects",-1),ql=e("br",null,null,-1),Rl={key:0},Tl={key:2,class:"v-col-12 v-col-md-2 py-1"},jl={key:0},Ul=e("strong",null," Asset Supervisor - Projects",-1),Ol=e("br",null,null,-1),Il={style:{"text-wrap":"wrap"}},Sl={key:1},Pl=e("strong",null," Commercial Manager - Projects",-1),$l=e("br",null,null,-1),Dl={style:{"text-wrap":"wrap"}},Nl={key:2},Bl=e("strong",null," Transport",-1),Ll=e("br",null,null,-1),Fl={style:{"text-wrap":"wrap"}},Ml={key:3},zl=e("strong",null," Releasing",-1),Hl=e("br",null,null,-1),Kl={style:{"text-wrap":"wrap"}},Yl={key:3,class:"v-col-12 v-col-md-2 py-1"},Gl={key:0},Ql=e("strong",null," Asset Supervisor - Projects",-1),Jl=e("br",null,null,-1),Wl={style:{"text-wrap":"wrap"}},Xl={key:1},Zl=e("strong",null," Commercial Manager - Projects",-1),ea=e("br",null,null,-1),la={style:{"text-wrap":"wrap"}},aa={key:2},sa=e("strong",null," Transport",-1),ta=e("br",null,null,-1),oa={style:{"text-wrap":"wrap"}},ra={key:4,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},da={key:0},na=e("strong",null," Asset Supervisor - Projects",-1),ca=e("br",null,null,-1),ia={style:{"text-wrap":"wrap"}},ua={key:1},va=e("strong",null," Commercial Manager - Projects",-1),_a=e("br",null,null,-1),pa={style:{"text-wrap":"wrap"}},ya={key:2},ha=e("strong",null," Transport",-1),fa=e("br",null,null,-1),ma={style:{"text-wrap":"wrap"}},ka={key:3},ga=e("strong",null," Releasing",-1),xa=e("br",null,null,-1),ba={style:{"text-wrap":"wrap"}},Va={key:0,class:"my-auto"},wa={class:"pa-0 ma-0 v-col-1 my-auto",style:{position:"relative"}},Ea={key:0,class:"checkbox-notice"},Aa={key:5,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between ssss"},Ca={key:0,style:{"border-bottom":"1px solid #000000"},class:"pa-1"},qa={key:0},Ra=e("strong",null," Asset Supervisor - Projects",-1),Ta=e("br",null,null,-1),ja={style:{"text-wrap":"wrap"}},Ua={key:1},Oa=e("strong",null," Commercial Manager - Projects",-1),Ia=e("br",null,null,-1),Sa={style:{"text-wrap":"wrap"}},Pa={key:2},$a=e("strong",null," Transport",-1),Da=e("br",null,null,-1),Na={style:{"text-wrap":"wrap"}},Ba={key:3},La=e("strong",null," Releasing",-1),Fa=e("br",null,null,-1),Ma={style:{"text-wrap":"wrap"}},za={key:4},Ha=e("strong",null," Receiver",-1),Ka={style:{"text-wrap":"wrap"}},Ya={key:1},Ga={key:2},Qa={key:3},Ja={key:0,class:"v-col-12 text-center font-weight-bold text-info"},Wa=e("br",null,null,-1),Xa={key:1,class:"v-col-12 text-center font-weight-bold text-info"},Za={key:0,class:"ml-5 d-flex"},es=e("div",{class:"px-2 mr-5"},"|",-1),ls={key:1,class:"ml-6"},as={class:"v-col-12 px-0 my-0"},ss=["data"],ts={class:"v-col-12 v-col-md-3 pa-0 mb-4"},os=e("div",{class:"text-center py-1 font-weight-bold"}," Requested By ",-1),rs={class:"text-center py-1"},ds={class:"text-center py-1"},ns={class:"text-center text-caption"},cs={key:0},is={key:0,class:"d-flex"},us=["onClick"],vs=["onClick"],_s={key:1},ps=["onClick"],ys=["onClick"],hs={class:"text-center py-1"},fs={class:"text-center py-1"},ms={class:"text-center text-caption"},ks={key:2,class:"v-col-12 text-caption",style:{border:"1px solid red","border-radius":"5px"}},gs={class:"v-col-12 text-center"},xs=e("div",{class:"v-col-12 text-center mt-3 font-weight-bold"}," REASON FOR REJECTION ",-1),bs={class:"v-col-12"},Cs={__name:"Approvals",setup(Vs){const v=Pe(),he=f(!0),_=f({}),T=f({}),g=f(!1),B=f(!1),L=f(!1),F=f(!1),j=f(!1),$=f([]),J=f(!1),M=f(""),W=f(!1),Ae=f(v.query.id),m=f(""),ne=f(0),ae=f([]),fe=async()=>{let i={id:v.query.id,profile_id:v.query.pid,order:v.query.o};if(!v.query.id||!v.query.pv){he.value=!1;return}await axios.post("/api/pv/fetch/request-assets/data",i).then(c=>{var k,E,U,x,R,Z,ee,l,b,A,C;if(_.value=c.data,!_.value.access){he.value=!1;return}m.value=(E=(k=c.data)==null?void 0:k.data)==null?void 0:E.status,ne.value=(x=(U=c.data)==null?void 0:U.data)==null?void 0:x.request_type_id,ae.value=(Z=(R=c.data)==null?void 0:R.data)==null?void 0:Z.attachment,((b=(l=(ee=_.value)==null?void 0:ee.data)==null?void 0:l.request_approvals)==null?void 0:b.length)>0&&(g.value=_.value.data.request_approvals.filter(u=>{var t;return u.profile_id==v.query.pid&&u.orders==v.query.o&&u.status=="awaiting-approval"&&((t=u.profile)==null?void 0:t.role)=="asset-supervisor"})[0],B.value=_.value.data.request_approvals.filter(u=>u.profile_id==v.query.pid&&u.orders==v.query.o&&u.status=="awaiting-approval"&&u.approval_type=="releasing")[0],L.value=_.value.data.request_approvals.filter(u=>u.profile_id==v.query.pid&&u.orders==v.query.o&&u.status=="awaiting-approval"&&u.approval_type=="transport")[0],F.value=_.value.data.request_approvals.filter(u=>{var t;return u.profile_id==v.query.pid&&u.orders==v.query.o&&u.status=="awaiting-approval"&&((t=u.profile)==null?void 0:t.role)=="commercial-manager"})[0],j.value=_.value.data.request_approvals.filter(u=>u.profile_id==v.query.pid&&u.orders==v.query.o&&u.status=="awaiting-approval"&&u.approval_type=="receiver")[0],ue.value=_.value.data.request_approvals[_.value.data.request_approvals.length-1].approval_type,(j.value||g.value)&&m.value!="cancelled"&&(W.value=!0)),$.value=(C=(A=_.value)==null?void 0:A.data)==null?void 0:C.items}).catch(c=>{console.log(c.response.data)})},ce=f(1),z=f("image"),Ce=(i,c)=>{let k=i.path.split(".");z.value=k[k.length-1],ce.value=c,H.value=!0},qe=()=>{window.print()},ie=f(window.location.origin),H=f(!1),me=f(1),Re=i=>{me.value=i,H.value=!0},ue=f(""),ke=f({}),Te=i=>{J.value=!0,ke.value=i},je=()=>{J.value=!1,M.value=""},Ue=(i,c)=>{if(i.length<11||_.value.data.types!=="request"||(T.value={status:!1},i.split("-").length<3))return!1;T.value={status:!0,type:"info",text:"Validating asset code..."},axios.get("/api/fetch-asset-info/by/asset-code-validation/"+i).then(E=>{setTimeout(()=>{if(!E.data.status){T.value={status:!0,type:"error",text:"Asset Code is invalid"};return}if(E.data.status.title==="In-Used"){T.value={status:!0,type:"error",text:"Asset is currently In-Used. You cannot use this asset code."},$.value[c].asset_code="";return}T.value={status:!0,type:"success",text:"Asset is available."}},1e3)})},se=(i,c=null)=>{if(J.value=!1,!(m.value=="cancelled"||i.status=="reject")&&(i.status=="awaiting-approval"||i.status=="reject")&&v.query.pid==i.profile_id&&v.query.o==i.orders){T.value={status:!0,type:"info",text:"Please wait..."};let k=[];(g.value||F.value||j.value||B.value||L.value)&&(k=$.value.map((x,R)=>(delete x.created_at,delete x.assets,delete x.updated_at,delete x.attachment,x)));let E={},U="";M.value&&c&&(U=M.value),E={profile_id:v.query.pid,id:v.query.id,order:v.query.o,type:_.value.data.types,assets:k,is_reject:U,requestor_id:_.value.data.profile_id},axios.post("/api/pv/store/request-asset/approve-data",E).then(x=>{let R="success";x.data.success||(R="error"),T.value={status:!0,type:R,text:x.data.message},W.value=!1,setTimeout(()=>{fe()},500)}).catch(x=>{console.log(x.response.data)});return}},Oe=i=>{if(i=="approve")return"Approved";if(i=="reviewer")return"Reviewed";if(i=="receiver")return"Received";if(i=="transport")return"Transport Arranged";if(i=="releasing")return"Released";if(i=="verify")return"Verified"},Ie=()=>{let i=j.value;W.value=!1,$.value.map(c=>{i?c.is_received=X.value:c.is_available=X.value})},Se=(i,c=6)=>{let k="00000"+i;return k.substring(k.length-c)},ge=()=>{let i=!0,c=j.value;$.value.map(k=>{c?k.is_received||(i=!1):k.is_available||(i=!1)}),X.value=i},X=f(!1);return fe(),(i,c)=>(a(),V($e,{style:{"max-width":"90%"},class:"mt-0 pt-0"},{default:p(()=>{var k,E,U,x,R,Z,ee;return[((k=$.value)==null?void 0:k.length)>0?(a(),V(q,{key:0,class:"mt-0 pt-0 no-print mt-2"},{default:p(()=>[e("div",null,[s(ve,{color:"primary",size:"small",onClick:qe},{default:p(()=>[r("Print")]),_:1})])]),_:1})):d("",!0),s(q,{class:"mt-0 pt-0"},{default:p(()=>{var l,b,A,C,u,t,O,I,S;return[e("div",He,[e("div",Ke,[Ye,e("div",null,n((b=(l=_.value.data)==null?void 0:l.transfer_from)==null?void 0:b.title),1)]),e("div",Ge,[Qe,e("div",null,n((C=(A=_.value.data)==null?void 0:A.transfer_to)==null?void 0:C.title),1)])]),e("div",Je,[We,Xe,e("strong",null,n((t=(u=_.value.data)==null?void 0:u.setup)==null?void 0:t.title),1)]),e("div",Ze,[r(" SN-"+n(((I=(O=_.value)==null?void 0:O.data)==null?void 0:I.types)=="request"?"5":"3")+n(Se(Ae.value)),1),el,r(" "+n(y(ye)((S=_.value.data)==null?void 0:S.created_at)),1)])]}),_:1}),s(D,{class:"my-5"}),s(q,null,{default:p(()=>[ll,al,sl,tl,ol,rl,dl,nl,cl,e("div",il,[r(" REMARKS "),e("div",ul,[W.value?(a(),o("div",vl)):d("",!0),g.value||j.value?(a(),V(_e,{key:1,modelValue:X.value,"onUpdate:modelValue":[c[0]||(c[0]=l=>X.value=l),Ie],class:"pa-0 ma-0 v-col-1","hide-details":"",disabled:m.value=="cancelled",variant:"underlined",density:"compact"},null,8,["modelValue","disabled"])):d("",!0)])])]),_:1}),(a(!0),o(de,null,te($.value,(l,b)=>(a(),V(q,{class:"mt-1 approval-form-pr",key:l.id},{default:p(()=>{var A,C,u,t,O,I,S,le,K;return[e("div",_l,[(A=l.attachment)!=null&&A.id?(a(),o("div",pl,[s(N,{onClick:()=>Re(l),maxHeight:"40",variant:"text",class:"ma-2"},{default:p(()=>[s(w,{size:"large",icon:y(xe),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"]),s(pe,{modelValue:H.value,"onUpdate:modelValue":c[1]||(c[1]=h=>H.value=h),width:"95%","max-width":"900"},{default:p(()=>[s(N,{class:"bg-black"},{default:p(()=>[e("div",yl,[s(be,{src:ie.value+"/file/"+me.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])])):(a(),V(N,{key:1,maxHeight:"40",variant:"text",class:"ma-2"},{default:p(()=>[s(w,{size:"large",icon:y(De)},null,8,["icon"])]),_:1})),s(P,{value:l.item_description,variant:"underlined",density:"compact","hide-details":"",rows:"2",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0},null,8,["value"])]),e("div",hl,[(g.value||F.value||B.value||L.value)&&m.value!="cancelled"?(a(),V(Y,{key:0,modelValue:l.asset_code,"onUpdate:modelValue":[h=>l.asset_code=h,h=>Ue(l.asset_code,b)],variant:"underlined",density:"compact","hide-details":"",readonly:!g.value&&!F.value&&!B.value&&!L.value||m.value=="cancelled",class:G(`${!g.value&&!F.value&&!B.value&&!L.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])):(a(),o("div",fl,n(l.asset_code),1))]),e("div",ml,[s(Y,{value:l.qty,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",kl,[s(Y,{value:l.uom,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0},null,8,["value"])]),e("div",gl,[s(Y,{modelValue:l.weight,"onUpdate:modelValue":h=>l.weight=h,variant:"underlined",density:"compact","hide-details":"",readonly:!g.value||m.value=="cancelled",class:G(`${!g.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",xl,[s(Y,{modelValue:l.item_value,"onUpdate:modelValue":h=>l.item_value=h,variant:"underlined",density:"compact","hide-details":"",readonly:!g.value||m.value=="cancelled",class:G(`${!g.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",bl,[s(Y,{modelValue:l.country_of_origin,"onUpdate:modelValue":h=>l.country_of_origin=h,variant:"underlined",density:"compact","hide-details":"",readonly:!g.value||m.value=="cancelled",class:G(`${!g.value||m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",Vl,[s(P,{value:l.reason_for_request,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0,rows:"2"},null,8,["value"])]),g.value?(a(),o("div",wl,[s(P,{modelValue:l.remarks,"onUpdate:modelValue":h=>l.remarks=h,variant:"underlined",density:"compact","hide-details":"",class:G(["text-remarks",`${m.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`]),placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue","class"]),s(_e,{disabled:m.value=="cancelled",modelValue:l.is_available,"onUpdate:modelValue":[h=>l.is_available=h,ge],class:"pa-0 ma-0 v-col-1","hide-details":"",variant:"underlined",density:"compact"},null,8,["disabled","modelValue","onUpdate:modelValue"])])):d("",!0),F.value?(a(),o("div",El,[e("div",null,[l.remarks?(a(),o("div",Al,[Cl,r(),ql,e("p",null,n(l.remarks),1),r(" ------- ")])):d("",!0),s(P,{modelValue:l.remarks_commercial,"onUpdate:modelValue":h=>l.remarks_commercial=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(u=(C=_.value)==null?void 0:C.data)!=null&&u.is_available?(a(),o("div",Rl,[s(w,{style:{position:"absolute",right:"60px"},class:"mt-3",icon:l.is_available?y(oe):y(re),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0)])):B.value?(a(),o("div",Tl,[e("div",null,[l.remarks?(a(),o("div",jl,[Ul,r(),Ol,e("pre",Il,n(l.remarks),1),r(" ------- ")])):d("",!0),l.remarks_commercial?(a(),o("div",Sl,[Pl,r(),$l,e("pre",Dl,n(l.remarks_commercial),1),r(" ------- ")])):d("",!0),l.remarks_transport?(a(),o("div",Nl,[Bl,r(),Ll,e("pre",Fl,n(l.remarks_transport),1),r(" ------- ")])):d("",!0),l.remarks_release?(a(),o("div",Ml,[zl,r(),Hl,e("pre",Kl,n(l.remarks_release),1),r(" ------- ")])):d("",!0)]),s(P,{modelValue:l.remarks_release,"onUpdate:modelValue":h=>l.remarks_release=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):L.value?(a(),o("div",Yl,[e("div",null,[l.remarks?(a(),o("div",Gl,[Ql,r(),Jl,e("pre",Wl,n(l.remarks),1),r(" ------- ")])):d("",!0),l.remarks_commercial?(a(),o("div",Xl,[Zl,r(),ea,e("pre",la,n(l.remarks_commercial),1),r(" ------- ")])):d("",!0),l.remarks_transport?(a(),o("div",aa,[sa,r(),ta,e("pre",oa,n(l.remarks_transport),1),r(" ------- ")])):d("",!0)]),s(P,{modelValue:l.remarks_transport,"onUpdate:modelValue":h=>l.remarks_transport=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):j.value?(a(),o("div",ra,[e("div",null,[e("div",null,[l.remarks?(a(),o("div",da,[na,r(),ca,e("pre",ia,n(l.remarks),1),r(" ------- ")])):d("",!0),l.remarks_commercial?(a(),o("div",ua,[va,_a,e("pre",pa,n(l.remarks_commercial),1),r(" ------- ")])):d("",!0),l.remarks_transport?(a(),o("div",ya,[ha,r(),fa,e("pre",ma,n(l.remarks_transport),1),r(" ------- ")])):d("",!0),l.remarks_release?(a(),o("div",ka,[ga,r(),xa,e("pre",ba,n(l.remarks_release),1),r(" ------- ")])):d("",!0)]),s(P,{modelValue:l.remarks_receive,"onUpdate:modelValue":h=>l.remarks_receive=h,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(O=(t=_.value)==null?void 0:t.data)!=null&&O.is_available?(a(),o("div",Va,[s(w,{class:"mt-3",icon:l.is_available?y(oe):y(re),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),e("div",wa,[W.value?(a(),o("div",Ea)):d("",!0),s(_e,{modelValue:l.is_received,"onUpdate:modelValue":[h=>l.is_received=h,ge],"hide-details":"",variant:"underlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])])])):g.value?d("",!0):(a(),o("div",Aa,[l.remarks||l.remarks_commercial||l.remarks_release||l.remarks_receive||l.remarks_transport?(a(),o("div",Ca,[l.remarks?(a(),o("div",qa,[Ra,r(),Ta,e("pre",ja,n(l.remarks),1),r(" ------- ")])):d("",!0),l.remarks_commercial?(a(),o("div",Ua,[Oa,r(),Ia,e("pre",Sa,n(l.remarks_commercial),1),r(" ------- ")])):d("",!0),l.remarks_transport?(a(),o("div",Pa,[$a,r(),Da,e("pre",Na,n(l.remarks_transport),1),r(" ------- ")])):d("",!0),l.remarks_release?(a(),o("div",Ba,[La,r(),Fa,e("pre",Ma,n(l.remarks_release),1),r(" ------- ")])):d("",!0),l.remarks_receive?(a(),o("div",za,[Ha,e("pre",Ka,n(l.remarks_receive),1)])):d("",!0)])):(a(),o("div",Ya)),(S=(I=_.value)==null?void 0:I.data)!=null&&S.is_available?(a(),o("div",Ga,[s(w,{class:"mt-3",icon:l.is_available?y(oe):y(re),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):d("",!0),((K=(le=_.value)==null?void 0:le.data)==null?void 0:K.status)=="complete"&&ue.value=="receiver"?(a(),o("div",Qa,[s(w,{class:"mt-3",icon:l.is_received?y(Ve):y(we),color:`${l.is_received?"success":"error"}`},null,8,["icon","color"])])):d("",!0)]))]}),_:2},1024))),128)),g.value?(a(),V(q,{key:1,class:"mt-3"},{default:p(()=>[m.value!=="cancelled"?(a(),o("div",Ja,[r(" YOU CAN UPDATE SOME DATA AND"),Wa,r(" PLEASE TICK CHECKBOX IF ASSET IS AVAILABLE BEFORE CLICKING THE APPROVE BUTTON ")])):(a(),o("div",Xa," THIS REQUEST HAS BEEN CANCELLED. "))]),_:1})):d("",!0),(U=(E=_.value)==null?void 0:E.data)!=null&&U.is_available&&m.value!=="cancelled"?(a(),V(q,{key:2,class:"mt-6 mb-2"},{default:p(()=>[s(N,{variant:"text",class:"v-col-12 text-center pt-2 font-weight-bold pb-0 d-flex justify-center"},{default:p(()=>{var l;return[e("div",null,[s(w,{icon:y(oe),color:"success"},null,8,["icon"]),r(" AVAILABLE "),s(w,{icon:y(re),color:"error",class:"ml-5"},null,8,["icon"]),r(" NOT AVAILABLE ")]),j.value?(a(),o("div",Za,[es,e("div",null,[s(w,{icon:y(Ne)},null,8,["icon"]),r(" TICK RECEIVED ASSETS "),s(D,{thickness:8,color:"error",class:"divider-notice"})])])):d("",!0),((l=_.value.data)==null?void 0:l.status)=="complete"&&ue.value=="receiver"?(a(),o("div",ls,[s(w,{icon:y(Ve),color:"success"},null,8,["icon"]),r(" RECEIVED "),s(w,{icon:y(we),color:"error",class:"ml-5"},null,8,["icon"]),r(" NOT RECEIVE ")])):d("",!0)]}),_:1})]),_:1})):d("",!0),s(q,{class:"mt-3"},{default:p(()=>[e("div",as,[s(D),s(D)])]),_:1}),ne.value==2&&((x=ae.value)==null?void 0:x.length)>0?(a(),V(q,{key:3,class:"my-3 d-flex justify-center"},{default:p(()=>[(a(!0),o(de,null,te(ae.value,(l,b)=>(a(),o("div",{key:l.id,class:"pa-2",style:{position:"relative"}},[s(N,{onClick:()=>Ce(l,b)},{default:p(()=>[s(w,{size:"large",icon:y(xe),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"])]))),128)),s(pe,{modelValue:H.value,"onUpdate:modelValue":c[3]||(c[3]=l=>H.value=l),width:"95%","max-width":"900"},{default:p(()=>[s(N,{class:"bg-black"},{default:p(()=>[s(Be,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:ce.value,"onUpdate:modelValue":c[2]||(c[2]=l=>ce.value=l)},{default:p(()=>[(a(!0),o(de,null,te(ae.value,(l,b)=>(a(),V(Le,{key:b,"reverse-transition":"fade",transition:"fade"},{default:p(()=>[e("div",{style:Q(`${z.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[z.value=="jpg"||z.value=="jpeg"||z.value=="png"?(a(),V(be,{key:0,src:ie.value+"/file/"+l.path},null,8,["src"])):d("",!0),z.value=="pdf"?(a(),o("object",{key:1,data:ie.value+"/file/"+l.path,type:"application/pdf",width:"100%",height:"800px"},null,8,ss)):d("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):d("",!0),((R=_.value.data)==null?void 0:R.request_approvals.length)>0?(a(),V(q,{key:4},{default:p(()=>{var l,b,A,C,u;return[e("div",ts,[e("div",{class:"text-center mx-2 py-4 font-weight-bold",style:Q(`${m.value=="cancelled"?"color: red;":"color: rgb(3, 167, 3);"} border: 1px solid #ccc; font-size: 17px;`)},n(m.value=="cancelled"?"CANCELLED":"APPROVED"),5),os,e("div",rs,n((b=(l=_.value.data)==null?void 0:l.profile)==null?void 0:b.display_name),1),e("div",ds,n((C=(A=_.value.data)==null?void 0:A.profile)==null?void 0:C.designation),1),e("div",ns,n(y(ye)((u=_.value.data)==null?void 0:u.created_at)),1)]),(a(!0),o(de,null,te(_.value.data.request_approvals,t=>{var O,I,S,le;return a(),o("div",{class:"v-col-12 v-col-md-3 pa-0 mb-4",key:t.id},[(t.profile.ecode=="100884"||t.profile.ecode=="102587"||t.profile.ecode=="100316"||((O=t.profile)==null?void 0:O.role)=="commercial-manager"||((I=t.profile)==null?void 0:I.role)=="technical-operation"&&ne.value==2)&&y(v).query.pid==t.profile_id&&y(v).query.o==t.orders?(a(),o("div",cs,[t.status=="awaiting-approval"?(a(),o("div",is,[e("div",{onClick:K=>Te(t),class:"cursor-pointer text-center py-5 v-col-6",style:Q(`border:1px solid #ccc; ${y(v).query.pid==t.profile_id&&y(v).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":"background-color: none;"}`)}," REJECT ",12,us),e("div",{onClick:K=>se(t,"reject"),class:"cursor-pointer text-center py-5 v-col-6",style:Q(`border:1px solid #ccc; ${y(v).query.pid==t.profile_id&&y(v).query.o==t.orders?"background-color: rgb(3, 167, 3);color:#fff;":"background-color: none"}`)}," APPROVE ",12,vs)])):t.status=="reject"||t.status=="done"||t.status=="pending"?(a(),o("div",_s,[e("div",{onClick:K=>se(t),class:"cursor-pointer text-center mx-2 py-5",style:Q(`border:1px solid #ccc; ${t.status=="reject"&&y(v).query.pid==t.profile_id&&y(v).query.o==t.orders?"background-color: gray; color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},n(t.status=="done"?"APPROVED":t.status=="reject"?"REJECTED":"CLICK TO APPROVE"),13,ps)])):d("",!0)])):(a(),o("div",{key:1,onClick:K=>se(t),class:"cursor-pointer text-center mx-2 py-5",style:Q(`border:1px solid #ccc; ${m.value!="cancelled"&&t.status=="awaiting-approval"&&y(v).query.pid==t.profile_id&&y(v).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},n(t.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,ys)),e("div",{class:G(`text-center py-1 font-weight-bold ${t.status=="reject"?"text-error text-uppercase":""}`)},n(t.status=="reject"?"Rejected":Oe(t.approval_type))+" By ",3),e("div",hs,n((S=t.profile)==null?void 0:S.display_name),1),e("div",fs,n((le=t.profile)==null?void 0:le.designation),1),e("div",ms,n(t.date_approved?y(ye)(t.date_approved):""),1),t.reason_rejected?(a(),o("div",ks,[r(" Reason rejected "),s(D,{class:"my-2"}),r(" "+n(t.reason_rejected),1)])):d("",!0)])}),128))]}),_:1})):d("",!0),((ee=(Z=_.value)==null?void 0:Z.data)==null?void 0:ee.status)!=="complete"?(a(),V(q,{key:5,class:"no-print"},{default:p(()=>[e("div",gs,[s(D),r(" You will receive a notification once you click the approve button. "),s(D)])]),_:1})):d("",!0),s(pe,{width:"500",modelValue:J.value,"onUpdate:modelValue":c[6]||(c[6]=l=>J.value=l),persistent:""},{default:p(()=>[s(N,null,{default:p(()=>[s(Fe,null,{default:p(()=>[s(q,null,{default:p(()=>[xs,e("div",bs,[s(P,{modelValue:M.value,"onUpdate:modelValue":c[4]||(c[4]=l=>M.value=l),label:"STATE YOUR REASON HERE",variant:"outlined"},null,8,["modelValue"])])]),_:1})]),_:1}),s(Me,null,{default:p(()=>[s(Ee),s(ve,{onClick:je},{default:p(()=>[r("Cancel")]),_:1}),s(ve,{color:"success",disabled:!M.value,onClick:c[5]||(c[5]=l=>se(ke.value,"reject"))},{default:p(()=>[r("Confirm")]),_:1},8,["disabled"]),s(Ee)]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(ze,{options:T.value},null,8,["options"])]}),_:1}))}};export{Cs as default};
