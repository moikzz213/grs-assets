import{r as _,i as X,j as c,k as n,C as Z,K as G,b as u,l as i,N as w,A as T,q as D,D as g,f as v,G as t,z as h,a5 as S,I as p,m as U,J as I,c as A,d as N,F as z,E as O,a6 as E,a7 as P,O as R,y as B,a8 as F,a9 as L,W as K}from"./app-e6ee8903.js";import{_ as ee}from"./ApppageHeader-351ea199.js";import{_ as te}from"./AppSnackBar-7d97a8b2.js";const le={class:"v-col-12 text-uppercase font-weight-bold d-flex"},ae=v("div",{class:"mr-3 my-auto"},"STATUS LIST",-1),se={class:"v-col-5 py-2 d-flex"},ie={class:"v-col-5 py-2"},oe={class:"v-col-2 my-auto"},ne={class:"v-col-12 text-uppercase font-weight-bold d-flex"},ue=v("div",{class:"mr-3 my-auto"},"CONDITION LIST",-1),de={class:"v-col-5 py-2 d-flex"},ce={class:"v-col-5 py-2"},re={class:"v-col-2 my-auto"},ve={class:"v-col-12 text-uppercase font-weight-bold d-flex"},pe=v("div",{class:"mr-3 my-auto"},"INCIDENT TYPE LIST",-1),me={class:"v-col-5 py-2 d-flex"},ye={class:"v-col-5 py-2"},fe={class:"v-col-2 my-auto"},be={__name:"Others",setup(_e){const m=_([]),y=_([]),f=_([]),o=X(),V=_(!1),J=_([{id:"asset",value:"Asset"},{id:"maintenance",value:"Maintenance"},{id:"incident",value:"Incident"}]),M=_([{id:"condition-type",value:"Asset"}]),W=_([{id:"incident-type",value:"Incident"}]),Y=()=>{m.value.push({title:null,type:null})},H=()=>{y.value.push({title:null,type:"condition-type"})},Q=()=>{f.value.push({title:null,type:"incident-type"})},k=_({loading:!0}),b=_({status:!1,type:"info",text:null}),j=async()=>{m.value=[],y.value=[],f.value=[],await G(o.token).get("/api/fetch-global/setup-status").then(d=>{d.data.length>0&&d.data.map(a=>{a.type=="condition-type"?y.value.push(a):a.type=="incident-type"?f.value.push(a):m.value.push(a)}),k.value.loading=!1}).catch(d=>{k.value.loading=!1})};j();const x=async(d,a,e)=>{if(a.id){b.value={status:!0,type:"info",text:"Please wait..."};let l={type:"status",item:a,profile_id:o.user.profile.id};q(l)}else if(e=="status"){let l=m.value;l.splice(d,1),m.value=[...l]}else if(e=="condition"){let l=y.value;l.splice(d,1),y.value=[...l]}else{let l=f.value;l.splice(d,1),f.value=[...l]}},C=d=>{if(b.value={status:!0,type:"info",text:"Please wait..."},d=="status"){if(m.value.length==0)return;$(m.value)}else if(d=="condition"){if(y.value.length==0)return;$(y.value)}else if(d=="incident"){if(f.value.length==0)return;$(f.value)}},$=d=>{let a=[],e=[];if(d.map((s,r)=>{s.title&&s.type&&(delete s.profile_id,s.profile_id=o.user.profile.id,s.id?(delete s.created_at,delete s.updated_at,a.push(s)):e.push(s))}),e.length==0&&a.length==0){b.value={status:!0,type:"error",text:"Kindly fill-up the fields."};return}let l={type:"store-update",new:e,update:a,profile_id:o.user.profile.id};q(l)},q=d=>{G(o.token).post("/api/store-update/setup-status",d).then(a=>{j().then(()=>{b.value={status:!0,type:"success",text:a.data.message}})}).catch(a=>{k.value.loading=!1})};return(d,a)=>(u(),c(Z,null,{default:n(()=>[i(ee,{title:"Others - Status Setup"}),i(g,{class:"mb-3"},{default:n(()=>[i(w,{class:"v-col-12 v-col-md-6 mt-1 col-sm-12"},{default:n(()=>[i(T,{class:"px-5",loading:k.value.loading},{default:n(()=>[i(D,null,{default:n(()=>[i(g,{class:"mb-2"},{default:n(()=>{var e,l;return[v("div",le,[ae,t(o).user.role=="superadmin"||(e=t(o).capabilities)!=null&&e.includes("add")?(u(),c(h,{key:0,icon:t(S),onClick:a[0]||(a[0]=s=>Y()),size:"x-small",color:"primary"},null,8,["icon"])):p("",!0),(t(o).user.role=="superadmin"||(l=t(o).capabilities)!=null&&l.includes("edit"))&&m.value.length>0?(u(),c(h,{key:1,loading:V.value,onClick:a[1]||(a[1]=s=>C("status")),size:"small",color:"secondary",class:"mx-5"},{default:n(()=>[U("Save")]),_:1},8,["loading"])):p("",!0)]),i(I)]}),_:1}),(u(!0),A(z,null,N(m.value,(e,l)=>(u(),c(g,{key:l,class:"parent-row-show"},{default:n(()=>{var s;return[v("div",se,[e.id?(u(),c(O,{key:0,title:`${e.status=="active"?"Active":"Disabled"}`,icon:`${e.status=="active"?t(E):t(P)}`,color:`${e.status=="active"?"success":"error"}`,class:"my-auto mr-2"},null,8,["title","icon","color"])):p("",!0),i(R,{"hide-details":"auto",label:"Type",variant:"outlined",modelValue:e.type,"onUpdate:modelValue":r=>e.type=r,items:J.value,"item-title":"value","item-value":"id",density:"compact"},null,8,["modelValue","onUpdate:modelValue","items"])]),v("div",ie,[i(B,{"hide-details":"auto",modelValue:e.title,"onUpdate:modelValue":r=>e.title=r,label:"Status Title",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),v("div",oe,[t(o).user.role=="superadmin"||(s=t(o).capabilities)!=null&&s.includes("delete")?(u(),c(h,{key:0,title:`${e.id?e.status=="active"?"Click to disable":"Click to enable":"Remove row"}`,icon:`${e.id?e.status=="active"?t(F):t(L):t(K)}`,onClick:r=>x(l,e,"status"),size:"x-small",color:`${e&&e.status=="disabled"?"success":"error"}`,class:"mx-1 show-hover"},null,8,["title","icon","onClick","color"])):p("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1}),i(w,{class:"v-col-12 v-col-md-6 mt-1 col-sm-12"},{default:n(()=>[i(T,{class:"px-5",loading:k.value.loading},{default:n(()=>[i(D,null,{default:n(()=>[i(g,{class:"mb-2"},{default:n(()=>{var e,l;return[v("div",ne,[ue,t(o).user.role=="superadmin"||(e=t(o).capabilities)!=null&&e.includes("add")?(u(),c(h,{key:0,icon:t(S),onClick:a[2]||(a[2]=s=>H()),size:"x-small",color:"primary"},null,8,["icon"])):p("",!0),(t(o).user.role=="superadmin"||(l=t(o).capabilities)!=null&&l.includes("edit"))&&y.value.length>0?(u(),c(h,{key:1,loading:V.value,onClick:a[3]||(a[3]=s=>C("condition")),size:"small",color:"secondary",class:"mx-5"},{default:n(()=>[U("Save")]),_:1},8,["loading"])):p("",!0)]),i(I)]}),_:1}),(u(!0),A(z,null,N(y.value,(e,l)=>(u(),c(g,{key:l,class:"parent-row-show"},{default:n(()=>{var s;return[v("div",de,[e.id?(u(),c(O,{key:0,title:`${e.status=="active"?"Active":"Disabled"}`,icon:`${e.status=="active"?t(E):t(P)}`,color:`${e.status=="active"?"success":"error"}`,class:"my-auto mr-2"},null,8,["title","icon","color"])):p("",!0),i(R,{"hide-details":"auto",label:"Type",variant:"outlined",modelValue:e.type,"onUpdate:modelValue":r=>e.type=r,items:M.value,"item-title":"value","item-value":"id",density:"compact"},null,8,["modelValue","onUpdate:modelValue","items"])]),v("div",ce,[i(B,{"hide-details":"auto",modelValue:e.title,"onUpdate:modelValue":r=>e.title=r,label:"Condition Title",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),v("div",re,[t(o).user.role=="superadmin"||(s=t(o).capabilities)!=null&&s.includes("delete")?(u(),c(h,{key:0,title:`${e.id?e.status=="active"?"Click to disable":"Click to enable":"Remove row"}`,icon:`${e.id?e.status=="active"?t(F):t(L):t(K)}`,onClick:r=>x(l,e,"condition"),size:"x-small",color:`${e&&e.status=="disabled"?"success":"error"}`,class:"mx-1 show-hover"},null,8,["title","icon","onClick","color"])):p("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1}),i(w,{class:"v-col-12 v-col-md-6 mt-1 col-sm-12"},{default:n(()=>[i(T,{class:"px-5",loading:k.value.loading},{default:n(()=>[i(D,null,{default:n(()=>[i(g,{class:"mb-2"},{default:n(()=>{var e,l;return[v("div",ve,[pe,t(o).user.role=="superadmin"||(e=t(o).capabilities)!=null&&e.includes("add")?(u(),c(h,{key:0,icon:t(S),onClick:a[4]||(a[4]=s=>Q()),size:"x-small",color:"primary"},null,8,["icon"])):p("",!0),(t(o).user.role=="superadmin"||(l=t(o).capabilities)!=null&&l.includes("edit"))&&f.value.length>0?(u(),c(h,{key:1,loading:V.value,onClick:a[5]||(a[5]=s=>C("incident")),size:"small",color:"secondary",class:"mx-5"},{default:n(()=>[U("Save")]),_:1},8,["loading"])):p("",!0)]),i(I)]}),_:1}),(u(!0),A(z,null,N(f.value,(e,l)=>(u(),c(g,{key:l,class:"parent-row-show"},{default:n(()=>{var s;return[v("div",me,[e.id?(u(),c(O,{key:0,title:`${e.status=="active"?"Active":"Disabled"}`,icon:`${e.status=="active"?t(E):t(P)}`,color:`${e.status=="active"?"success":"error"}`,class:"my-auto mr-2"},null,8,["title","icon","color"])):p("",!0),i(R,{"hide-details":"auto",label:"Type",variant:"outlined",modelValue:e.type,"onUpdate:modelValue":r=>e.type=r,items:W.value,"item-title":"value","item-value":"id",density:"compact"},null,8,["modelValue","onUpdate:modelValue","items"])]),v("div",ye,[i(B,{"hide-details":"auto",modelValue:e.title,"onUpdate:modelValue":r=>e.title=r,label:"Incident Title",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),v("div",fe,[t(o).user.role=="superadmin"||(s=t(o).capabilities)!=null&&s.includes("delete")?(u(),c(h,{key:0,title:`${e.id?e.status=="active"?"Click to disable":"Click to enable":"Remove row"}`,icon:`${e.id?e.status=="active"?t(F):t(L):t(K)}`,onClick:r=>x(l,e,"incident"),size:"x-small",color:`${e&&e.status=="disabled"?"success":"error"}`,class:"mx-1 show-hover"},null,8,["title","icon","onClick","color"])):p("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),i(te,{options:b.value},null,8,["options"])]),_:1}))}};export{be as default};
