import{a as D,r as f,H as na,O as H,o as h,c as x,w as n,d as a,V as E,e as k,f as q,y as c,b as B,a3 as $,j as F,X as p,t as G,$ as J,p as N,F as W,q as Y,a0 as Z,a1 as Q,C as X,a2 as aa,E as ta,i as V,W as oa,z as ia,k as K,n as z,G as la,J as ea}from"./app-a06332a8.js";import{c as O,a as I,F as j,b as y,e as sa}from"./index.esm-a0a4363f.js";const ma={class:"d-flex"},ra=B("div",{class:"mb-2 text-body-2 mr-2 mt-2"},"Status",-1),da=B("div",{class:"mb-2 text-body-2 mr-2 mt-2 ml-5"},"At Work?",-1),ua=B("div",{class:"mb-5 mt-3 bg-info pa-1"},"Note: Email reliever will only work if it's on leave",-1),ca={key:0,class:"mb-4"},ba={__name:"AccountForm",props:["user"],emits:["saved"],setup(A,{emit:T}){var u,i,U,m;const r=A,_=D(),e=f({loading:!1,data:Object.assign({},r.user)}),S=f(!0);e.value.data.on_leave=(i=(u=r.user)==null?void 0:u.profile)==null?void 0:i.on_leave,e.value.data.email_reliever=(m=(U=r.user)==null?void 0:U.profile)==null?void 0:m.email_reliever,na(()=>r.user,t=>{console.log("props.user",t),S.value=!1,e.value.data=t});const l=f([{title:"active",color:"success"},{title:"inactive",color:"error"}]),d=f([{title:"working",color:"success"},{title:"onleave",color:"error"}]),P=H(()=>{let t="";return e.value.data.status=="active"&&(t="success"),e.value.data.status=="inactive"&&(t="error"),t}),L=H(()=>{let t="";return(e.value.data.on_leave=="working"||e.value.data.on_leave==0)&&(t="success"),(e.value.data.on_leave=="onleave"||e.value.data.on_leave==1)&&(t="error"),t}),w=t=>{e.value.data.status=t},g=t=>{e.value.data.on_leave=t},R=f([{title:"Asset Supervisor-Project",value:"asset-supervisor"},{title:"Commercial Manager-Project",value:"commercial-manager"},{title:"Facility Team",value:"facility"},{title:"Normal",value:"normal"},{title:"Technical Operation",value:"technical-operation"},{title:"Receiving/Releasing/Transport",value:"receiving-releasing"}]);let b=O({email:I().email()});const C=async()=>{let t=e.value.data;e.value.loading=!0,t.profile&&(t=t.profile,t.email_reliever=e.value.data.email_reliever,t.on_leave=e.value.data.on_leave),t.profile_id=_.user.profile.id,await z(_.token).post("/api/account/profile/save",t).then(s=>{e.value.loading=!1,T("saved",s.data.message)}).catch(s=>{e.value.loading=!1})};return(t,s)=>(h(),x(K,null,{default:n(()=>[a(E,{class:"text-primary text-capitalize mb-3"},{default:n(()=>[k("Account Settings")]),_:1}),a(q,null,{default:n(()=>[a(c(j),{as:"v-form","validation-schema":c(b)},{default:n(()=>[B("div",ma,[ra,a($,{disabled:S.value},{activator:n(({props:o})=>[a(F,p(o,{class:"mb-1",color:P.value}),{default:n(()=>[k(G(e.value.data.status),1)]),_:2},1040,["color"])]),default:n(()=>[a(J,{density:"compact"},{default:n(()=>[(h(!0),N(W,null,Y(l.value,(o,v)=>(h(),x(Z,{key:v,value:v,onClick:()=>w(o.title)},{default:n(()=>[a(Q,{class:"text-overline d-flex align-center"},{default:n(()=>[a(X,{color:o.color,icon:c(aa),class:"mr-1"},null,8,["color","icon"]),B("div",null,G(o.title),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1},8,["disabled"]),da,a($,null,{activator:n(({props:o})=>[a(F,p(o,{class:"mb-1",color:L.value}),{default:n(()=>[k(G(e.value.data.on_leave==0||e.value.data.on_leave=="working"?"Working":"onLeave"),1)]),_:2},1040,["color"])]),default:n(()=>[a(J,{density:"compact"},{default:n(()=>[(h(!0),N(W,null,Y(d.value,(o,v)=>(h(),x(Z,{key:v,value:v,onClick:()=>g(o.title)},{default:n(()=>[a(Q,{class:"text-overline d-flex align-center"},{default:n(()=>[a(X,{color:o.color,icon:c(aa),class:"mr-1"},null,8,["color","icon"]),B("div",null,G(o.title),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})]),a(ta),ua,a(V,p({modelValue:e.value.data.username,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value.data.username=o)},t.field,{label:"Username",variant:"outlined",density:"compact","hide-details":"",class:"mb-2",disabled:!0}),null,16,["modelValue"]),a(c(y),{name:"email",modelValue:e.value.data.email,"onUpdate:modelValue":s[2]||(s[2]=o=>e.value.data.email=o)},{default:n(({field:o,errors:v})=>[a(V,p({modelValue:e.value.data.email,"onUpdate:modelValue":s[1]||(s[1]=M=>e.value.data.email=M)},o,{label:"Email",variant:"outlined",density:"compact","hide-details":"",class:"mb-2","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(c(y),{name:"reliever",modelValue:e.value.data.email_reliever,"onUpdate:modelValue":s[4]||(s[4]=o=>e.value.data.email_reliever=o)},{default:n(({field:o,errors:v})=>[a(V,p({modelValue:e.value.data.email_reliever,"onUpdate:modelValue":s[3]||(s[3]=M=>e.value.data.email_reliever=M)},o,{label:"Email Reliever (Optional)",variant:"outlined",density:"compact","hide-details":"",class:"mb-2","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(c(y),{name:"contact",modelValue:e.value.data.contact,"onUpdate:modelValue":s[6]||(s[6]=o=>e.value.data.contact=o)},{default:n(({field:o,errors:v})=>[a(V,p({modelValue:e.value.data.contact,"onUpdate:modelValue":s[5]||(s[5]=M=>e.value.data.contact=M)},o,{type:"number",density:"compact","hide-details":"",label:"Contact number",variant:"outlined",class:"mb-2","error-messages":v}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(c(y),{name:"role",modelValue:e.value.data.role,"onUpdate:modelValue":s[8]||(s[8]=o=>e.value.data.role=o)},{default:n(({field:o,errors:v})=>[a(oa,p({modelValue:e.value.data.role,"onUpdate:modelValue":s[7]||(s[7]=M=>e.value.data.role=M)},o,{items:R.value,label:"Role",density:"compact",disabled:S.value,variant:"outlined",class:"mb-2","error-messages":v}),null,16,["modelValue","items","disabled","error-messages"])]),_:1},8,["modelValue"]),S.value?(h(),N("div",ca," You need to logout to view the updates. ")):ia("",!0),a(F,{color:"primary",size:"large",loading:e.value.loading,onClick:C},{default:n(()=>[k("Save")]),_:1},8,["loading"])]),_:1},8,["validation-schema"])]),_:1})]),_:1}))}},va=[{name:"Afghanistan"},{name:"Åland Islands"},{name:"Albania"},{name:"Algeria"},{name:"American Samoa"},{name:"Andorra"},{name:"Angola"},{name:"Anguilla"},{name:"Antarctica"},{name:"Antigua and Barbuda"},{name:"Argentina"},{name:"Armenia"},{name:"Aruba"},{name:"Australia"},{name:"Austria"},{name:"Azerbaijan"},{name:"Bahamas"},{name:"Bahrain"},{name:"Bangladesh"},{name:"Barbados"},{name:"Belarus"},{name:"Belgium"},{name:"Belize"},{name:"Benin"},{name:"Bermuda"},{name:"Bhutan"},{name:"Bolivia (Plurinational State of)"},{name:"Bonaire, Sint Eustatius and Saba"},{name:"Bosnia and Herzegovina"},{name:"Botswana"},{name:"Bouvet Island"},{name:"Brazil"},{name:"British Indian Ocean Territory"},{name:"Brunei Darussalam"},{name:"Bulgaria"},{name:"Burkina Faso"},{name:"Burundi"},{name:"Cabo Verde"},{name:"Cambodia"},{name:"Cameroon"},{name:"Canada"},{name:"Cayman Islands"},{name:"Central African Republic"},{name:"Chad"},{name:"Chile"},{name:"China"},{name:"Christmas Island"},{name:"Cocos (Keeling) Islands"},{name:"Colombia"},{name:"Comoros"},{name:"Congo (Republic of the)"},{name:"Congo (Democratic Republic of the)"},{name:"Cook Islands"},{name:"Costa Rica"},{name:"Côte d'Ivoire"},{name:"Croatia"},{name:"Cuba"},{name:"Curaçao"},{name:"Cyprus"},{name:"Czech Republic"},{name:"Denmark"},{name:"Djibouti"},{name:"Dominica"},{name:"Dominican Republic"},{name:"Ecuador"},{name:"Egypt"},{name:"El Salvador"},{name:"Equatorial Guinea"},{name:"Eritrea"},{name:"Estonia"},{name:"Ethiopia"},{name:"Falkland Islands (Malvinas)"},{name:"Faroe Islands"},{name:"Fiji"},{name:"Finland"},{name:"France"},{name:"French Guiana"},{name:"French Polynesia"},{name:"French Southern Territories"},{name:"Gabon"},{name:"Gambia"},{name:"Georgia"},{name:"Germany"},{name:"Ghana"},{name:"Gibraltar"},{name:"Greece"},{name:"Greenland"},{name:"Grenada"},{name:"Guadeloupe"},{name:"Guam"},{name:"Guatemala"},{name:"Guernsey"},{name:"Guinea"},{name:"Guinea-Bissau"},{name:"Guyana"},{name:"Haiti"},{name:"Heard Island and McDonald Islands"},{name:"Vatican City State"},{name:"Honduras"},{name:"Hong Kong"},{name:"Hungary"},{name:"Iceland"},{name:"India"},{name:"Indonesia"},{name:"Iran"},{name:"Iraq"},{name:"Ireland"},{name:"Isle of Man"},{name:"Israel"},{name:"Italy"},{name:"Jamaica"},{name:"Japan"},{name:"Jersey"},{name:"Jordan"},{name:"Kazakhstan"},{name:"Kenya"},{name:"Kiribati"},{name:"Korea (Democratic People's Republic of)"},{name:"Korea (Republic of)"},{name:"Kuwait"},{name:"Kyrgyzstan"},{name:"Lao People's Democratic Republic"},{name:"Latvia"},{name:"Lebanon"},{name:"Lesotho"},{name:"Liberia"},{name:"Libya"},{name:"Liechtenstein"},{name:"Lithuania"},{name:"Luxembourg"},{name:"Macao"},{name:"Macedonia (the former Yugoslav Republic of)"},{name:"Madagascar"},{name:"Malawi"},{name:"Malaysia"},{name:"Maldives"},{name:"Mali"},{name:"Malta"},{name:"Marshall Islands"},{name:"Martinique"},{name:"Mauritania"},{name:"Mauritius"},{name:"Mayotte"},{name:"Mexico"},{name:"Micronesia (Federated States of)"},{name:"Moldova (Republic of)"},{name:"Monaco"},{name:"Mongolia"},{name:"Montenegro"},{name:"Montserrat"},{name:"Morocco"},{name:"Mozambique"},{name:"Myanmar"},{name:"Namibia"},{name:"Nauru"},{name:"Nepal"},{name:"Netherlands"},{name:"New Caledonia"},{name:"New Zealand"},{name:"Nicaragua"},{name:"Niger"},{name:"Nigeria"},{name:"Niue"},{name:"Norfolk Island"},{name:"Northern Mariana Islands"},{name:"Norway"},{name:"Oman"},{name:"Pakistan"},{name:"Palau"},{name:"Palestine, State of"},{name:"Panama"},{name:"Papua New Guinea"},{name:"Paraguay"},{name:"Peru"},{name:"Philippines"},{name:"Pitcairn"},{name:"Poland"},{name:"Portugal"},{name:"Puerto Rico"},{name:"Qatar"},{name:"Réunion"},{name:"Romania"},{name:"Russian Federation"},{name:"Rwanda"},{name:"Saint Barthélemy"},{name:"Saint Helena, Ascension and Tristan da Cunha"},{name:"Saint Kitts and Nevis"},{name:"Saint Lucia"},{name:"Saint Martin (French part)"},{name:"Saint Pierre and Miquelon"},{name:"Saint Vincent and the Grenadines"},{name:"Samoa"},{name:"San Marino"},{name:"Sao Tome and Principe"},{name:"Saudi Arabia"},{name:"Senegal"},{name:"Serbia"},{name:"Seychelles"},{name:"Sierra Leone"},{name:"Singapore"},{name:"Sint Maarten (Dutch part)"},{name:"Slovakia"},{name:"Slovenia"},{name:"Solomon Islands"},{name:"Somalia"},{name:"South Africa"},{name:"South Georgia and the South Sandwich Islands"},{name:"South Sudan"},{name:"Spain"},{name:"Sri Lanka"},{name:"Sudan"},{name:"Suriname"},{name:"Svalbard and Jan Mayen"},{name:"Swaziland"},{name:"Sweden"},{name:"Switzerland"},{name:"Syrian Arab Republic"},{name:"Taiwan, Province of China"},{name:"Tajikistan"},{name:"Tanzania, United Republic of"},{name:"Thailand"},{name:"Timor-Leste"},{name:"Togo"},{name:"Tokelau"},{name:"Tonga"},{name:"Trinidad and Tobago"},{name:"Tunisia"},{name:"Turkey"},{name:"Turkmenistan"},{name:"Turks and Caicos Islands"},{name:"Tuvalu"},{name:"Uganda"},{name:"Ukraine"},{name:"United Arab Emirates"},{name:"United Kingdom of Great Britain and Northern Ireland"},{name:"United States Minor Outlying Islands"},{name:"United States of America"},{name:"Uruguay"},{name:"Uzbekistan"},{name:"Vanuatu"},{name:"Venezuela (Bolivarian Republic of)"},{name:"Vietnam"},{name:"Virgin Islands (British)"},{name:"Virgin Islands (U.S.)"},{name:"Wallis and Futuna"},{name:"Western Sahara"},{name:"Yemen"},{name:"Zambia"},{name:"Zimbabwe"}],Va={__name:"ProfileForm",props:["user"],emits:["saved"],setup(A,{emit:T}){var C;const r=A,_=D(),e=la(),S=f([]);S.value=va;const l=f({loading:!1,data:{user_id:e.params.id,display_name:null,dob:null,nationality:null}});l.value.data=Object.assign({},r.user),na(()=>r.user,u=>{l.value.data=Object.assign({},u)});const d=()=>{l.value.data=r.user.profile};(C=r.user)!=null&&C.id&&d();const P=f([]),L=async()=>{await z(_.token).get("/api/fetch/locations/non-paginated/data").then(u=>{P.value=u.data}).catch(u=>{})},w=f([]);(async()=>{await z(_.token).get("/api/fetch/companies").then(u=>{w.value=u.data}).catch(u=>{})})().then(()=>{L()});let R=O({ecode:I().required(),display_name:I().required(),first_name:I().required(),last_name:I().required()});const b=async()=>{var u,i;l.value.loading=!0,l.value.data={...l.value.data,id:(i=(u=r.user)==null?void 0:u.profile)!=null&&i.id?r.user.profile.id:r.user.id,profile_id:_.user.profile.id},await z(_.token).post("/api/account/profile/save",l.value.data).then(U=>{l.value.loading=!1,T("saved",U.data.message)}).catch(U=>{l.value.loading=!1})};return(u,i)=>(h(),x(K,null,{default:n(()=>[a(E,{class:"text-primary text-capitalize"},{default:n(()=>[k("Profile Settings")]),_:1}),a(q,null,{default:n(()=>[a(c(j),{as:"v-form","validation-schema":c(R)},{default:n(({meta:U})=>[a(c(y),{name:"ecode",modelValue:l.value.data.ecode,"onUpdate:modelValue":i[1]||(i[1]=m=>l.value.data.ecode=m)},{default:n(({field:m})=>[a(V,p({modelValue:l.value.data.ecode,"onUpdate:modelValue":i[0]||(i[0]=t=>l.value.data.ecode=t)},m,{label:"Employee ID",density:"compact",variant:"outlined",disabled:!0}),null,16,["modelValue"])]),_:1},8,["modelValue"]),a(c(y),{name:"display_name",modelValue:l.value.data.display_name,"onUpdate:modelValue":i[3]||(i[3]=m=>l.value.data.display_name=m)},{default:n(({field:m,errors:t})=>[a(V,p({modelValue:l.value.data.display_name,"onUpdate:modelValue":i[2]||(i[2]=s=>l.value.data.display_name=s)},m,{label:"Full name",density:"compact",variant:"outlined","error-messages":t}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(c(y),{name:"first_name",modelValue:l.value.data.first_name,"onUpdate:modelValue":i[5]||(i[5]=m=>l.value.data.first_name=m)},{default:n(({field:m,errors:t})=>[a(V,p({modelValue:l.value.data.first_name,"onUpdate:modelValue":i[4]||(i[4]=s=>l.value.data.first_name=s)},m,{label:"First name",density:"compact",variant:"outlined","error-messages":t}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(c(y),{name:"last_name",modelValue:l.value.data.last_name,"onUpdate:modelValue":i[7]||(i[7]=m=>l.value.data.last_name=m)},{default:n(({field:m,errors:t})=>[a(V,p({modelValue:l.value.data.last_name,"onUpdate:modelValue":i[6]||(i[6]=s=>l.value.data.last_name=s)},m,{label:"Last name",density:"compact",variant:"outlined","error-messages":t}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(V,{modelValue:l.value.data.designation,"onUpdate:modelValue":i[8]||(i[8]=m=>l.value.data.designation=m),label:"Designation",density:"compact",variant:"outlined"},null,8,["modelValue"]),a(ea,{label:"Location",items:P.value,modelValue:l.value.data.location_id,"onUpdate:modelValue":i[9]||(i[9]=m=>l.value.data.location_id=m),"item-value":"id","item-title":"title",variant:"outlined",density:"compact",class:"mb-2"},null,8,["items","modelValue"]),a(ea,{label:"Company",items:w.value,modelValue:l.value.data.company_id,"onUpdate:modelValue":i[10]||(i[10]=m=>l.value.data.company_id=m),"item-value":"id","item-title":"title",variant:"outlined",density:"compact",class:"mb-2"},null,8,["items","modelValue"]),a(F,{color:"primary",loading:l.value.loading,onClick:b,disabled:!U.valid},{default:n(()=>[k("Save")]),_:2},1032,["loading","disabled"])]),_:1},8,["validation-schema"])]),_:1})]),_:1}))}},pa={class:"d-flex align-center"},ya={__name:"ChangePassword",props:["user"],emits:["saved"],setup(A,{emit:T}){const r=A,_=la(),e=D(),S=f("grs-asset-wvukt"),l=f("https://users.moikzz.tech"),d=f({status:!1,loading:!1,data:{username:"",password:"",password_confirmation:"",url:S.value}}),P=O({password:I().min(5).required(),password_confirmation:I().required().oneOf([sa("password")],"Passwords do not match")});console.log("props.user",r.user);const L=async()=>{d.value.loading=!0,d.value.data.username=r.user?r.user.ecode:e.user.profile.ecode,await axios.post(l.value+"/api/application/reset-password",d.value.data).then(w=>{T("saved",w.data.msg),d.value={status:!1,loading:!1,data:{username:r.user?r.user.ecode:_.params.ecode,password:"11111111111111111111111",password_confirmation:"11111111111111111111111",url:S.value}}}).catch(w=>{d.value.loading=!1,console.log(w.response.data)})};return(w,g)=>(h(),N("div",null,[a(K,{loading:d.value.loading},{default:n(()=>[a(c(j),{as:"v-form","validation-schema":c(P)},{default:n(({meta:R})=>[a(E,{class:"text-primary text-capitalize mb-3"},{default:n(()=>[k(" Change password ")]),_:1}),a(q,{class:"pb-6"},{default:n(()=>[a(c(y),{name:"password",modelValue:d.value.data.password,"onUpdate:modelValue":g[1]||(g[1]=b=>d.value.data.password=b)},{default:n(({field:b,errors:C})=>[a(V,p({modelValue:d.value.data.password,"onUpdate:modelValue":g[0]||(g[0]=u=>d.value.data.password=u)},b,{label:"Password",type:"password",variant:"outlined",class:"mb-2","error-messages":C}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),a(c(y),{name:"password_confirmation",modelValue:d.value.data.password_confirmation,"onUpdate:modelValue":g[3]||(g[3]=b=>d.value.data.password_confirmation=b)},{default:n(({field:b,errors:C})=>[a(V,p({modelValue:d.value.data.password_confirmation,"onUpdate:modelValue":g[2]||(g[2]=u=>d.value.data.password_confirmation=u)},b,{label:"Confirm Password",type:"password",variant:"outlined",class:"mb-2","error-messages":C}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"]),B("div",pa,[a(F,{disabled:!R.valid,color:"primary",size:"large",onClick:L},{default:n(()=>[k(" Save ")]),_:2},1032,["disabled"])])]),_:2},1024)]),_:1},8,["validation-schema"])]),_:1},8,["loading"])]))}};export{ba as _,Va as a,ya as b};
