import{a as He,r as _,G as Je,u as Ke,P as te,I as We,H as fe,o as i,c as h,w as d,d as s,v as Ze,k as C,V as Xe,b as l,t as m,p as w,y,af as he,C as n,E as ae,f as G,s as g,j as A,e as L,J as B,i as P,q as M,F as R,Q as ye,S as le,R as J,N as et,W as ge,Z as tt,B as K,D as at,M as lt,T as st,U as ot,ad as dt,aF as Ve,aG as we,aH as be,aI as ke,aJ as it,_ as ut,$ as nt,m as rt,n as D}from"./app-c833a56b.js";import{_ as ct}from"./ApppageHeader-770d426e.js";import{_ as xe,r as qe}from"./Studio-b49e96c8.js";import{_ as vt}from"./AppSnackBar-2e220c01.js";import{Q as pt}from"./QrcodeReaderVue3.common-716ba9a0.js";import{u as Se}from"./formatDate-b9aad8c5.js";const _t={key:0,class:"text-error text-h6"},mt={class:"col-12 v-col-md-4"},ft={class:"v-col-12 v-col-md-8"},ht={key:0,class:"text-right no-print"},yt={class:"v-col-12 v-col-md-6"},gt={class:"v-col-12 v-col-md-6"},Vt={class:"v-col-12 v-col-md-6"},wt={class:"v-col-12 v-col-md-6"},bt={class:"v-col-12"},kt={class:"wd-100"},xt={class:"wd-60"},qt={class:"wd-40"},St={class:"wd-60"},Ct={class:"wd-40"},At={class:"wd-100"},Tt={key:0,class:"v-col-12"},Ut=l("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),Et=l("div",{class:"wd-15"},"ASSET CODE",-1),jt=l("div",{class:"wd-5"},"QTY",-1),Ot=l("div",{class:"wd-10"},"UOM",-1),Rt=l("div",{class:"wd-10"},"WEIGHT",-1),Dt=l("div",{class:"wd-10"},"VALUE",-1),It=l("div",{class:"wd-15"},"REASON FOR REQUEST",-1),Nt={class:"wd-30"},Ft={class:"wd-15"},Lt={class:"wd-5"},Bt={class:"wd-10"},Pt={class:"wd-10"},Mt={class:"wd-10"},zt={class:"wd-15"},Qt={class:"v-col-12 v-col-md-1 px-1"},$t={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},Yt={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},Gt={class:"v-col-12 pt-0 pb-0"},Ht={class:"v-col-12 v-col-md-1 custom-width-description"},Jt={class:"v-col-12 v-col-md-2 d-flex"},Kt={class:"v-col-12 v-col-md-1"},Wt={class:"v-col-12 v-col-md-1 custom-width-uom"},Zt={class:"v-col-12 v-col-md-1"},Xt={class:"v-col-12 v-col-md-1"},ea={class:"v-col-12 v-col-md-2 d-flex"},ta={key:0},aa=l("div",null,"Additional File can be upload here",-1),la=["data"],sa={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},oa=l("div",null,"APPROVAL SETUP",-1),da={key:0,class:"no-print"},ia=l("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),ua={class:"v-col-12 v-col-md-6"},na=l("div",{class:"v-col-12 v-col-md-1"},"Status",-1),ra=l("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),ca=l("div",{class:"wd-20"},"Requestor",-1),va={class:"wd-50"},pa=l("div",{class:"wd-10"},"Status",-1),_a=l("div",{class:"wd-20"},"Date Approved",-1),ma={class:"wd-20"},fa={class:"wd-50"},ha={class:"wd-10"},ya={class:"wd-20"},ga={class:"v-col-12 v-col-md-2"},Va={class:"v-col-12 v-col-md-7 d-flex"},wa={class:"my-auto"},ba={class:"v-col-12"},ka={class:"v-col-12 text-error"},xa=l("div",{class:"v-col-12 v-col-md-12 text-info no-print"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),Ea={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(Ce,{emit:Ae}){const T=Ce,v=He(),W=_(!1),x=Je(),Te=Ke(),r=_({}),b=_(!1),k=_([{qty:1,attachment:{}}]),Ue=_(new Date),z=_(window.location.origin),Ee=(o,a)=>{k.value[o].attachment=a[0]},q=_([]),je=o=>{let a=null;o.map(e=>{a=q.value.find(t=>t.id==e.id),a||q.value.push(e)})},Oe=o=>{q.value=q.value.filter(a=>a.id!==o)},Z=_(1),I=_("image"),Re=(o,a)=>{let e=o.path.split(".");I.value=e[e.length-1],Z.value=a,N.value=!0},N=_(!1),se=_(1),De=o=>{se.value=o,N.value=!0},Ie=o=>{k.value[o].attachment=""},X=o=>{if(o=="approve")return"Approved By";if(o=="reviewer")return"Reviewed By";if(o=="receiver")return"Received By";if(o=="transport")return"Transport Arranged By";if(o=="releasing")return"Released By";if(o=="verify")return"Verified By"},oe=_(""),de=_([]),Ne=async()=>{await D(v.token).get("/api/fetch/approval-setups/non-paginated/data/request").then(o=>{var a,e;de.value=o.data,oe.value=(e=(a=o.data.filter(t=>t.id==p.value.request_type_id))==null?void 0:a[0])==null?void 0:e.title}).catch(o=>{})},Q=_({}),ie=_([]),Fe=async()=>{await D(v.token).get("/api/fetch/companies").then(o=>{ie.value=o.data}).catch(o=>{})},$=_(!1),ue=_(0),Le=o=>{ue.value=o,$.value=!0},ne=async(o,a)=>{let e=ue.value;a!==void 0&&(e=a),await D(v.token).get("/api/fetch/asset-info/by/asset-code/"+o).then(t=>{k.value[e].item_description=t.data.asset_name,k.value[e].asset_code=o,$.value=!1}).catch(t=>{})},re=_(""),ce=_(""),ee=_([]),Be=async()=>{await D(v.token).get("/api/fetch/locations/non-paginated/data").then(o=>{var a,e,t,u;ee.value=o.data,re.value=(e=(a=o.data.filter(V=>V.id==p.value.transferred_from))==null?void 0:a[0])==null?void 0:e.title,ce.value=(u=(t=o.data.filter(V=>V.id==p.value.transferred_to))==null?void 0:t[0])==null?void 0:u.title}).catch(o=>{})},Pe=()=>{k.value.push({qty:1,attachment:{}}),U()},Me=(o,a)=>{k.value.splice(a,1),U()},ve=_("Note: Administrator needs to setup signatories first."),ze=te(()=>q.value.map(o=>o.id)),Qe=()=>{Q.value={status:!0,type:"info",text:"Please wait..."};let o=k.value.map((e,t)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),a={data:r.value,assets:o,approval:S.value,profile_id:v.user.profile.id,type:"request",role:v.user.profile.role,additionalFiles:ze.value};D(v.token).post("/api/request-asset/store-update/data",a).then(e=>{let t="",u="";e.data.message?(t=e.data.message,u="success"):e.data.error&&(t=e.data.error,u="error"),Q.value={status:!0,type:u,text:t},x.params.id||setTimeout(()=>{Te.push({name:"EditRequestAsset",params:{id:e.data.id}}).catch(V=>{})},800)}).catch(e=>{Q.value={status:!0,type:"error",text:"Failed to update data, kindly refresh the page and check fields if it's empty"}})},S=_([]),H=_(!0),$e=_(["Nos","Set","Pcs","Pack","Pallet","SqM"]),pe=async()=>{let o=0;x.params.id&&(o=1),await D(v.token).get("/api/fetch/request-asset/approval-setup-fetch/"+r.value.request_type_id+"?isEdit="+o).then(a=>{var e,t,u,V,E,f,Y;S.value=(e=a.data)==null?void 0:e.stages,console.log("approvalSetupList.value 1111",(t=a.data)==null?void 0:t.stages),x.params.id&&S.value.length>0&&(S.value.map((j,O)=>(j.profile_id=c.value[O].profile_id,j.status=c.value[O].status,j.date_approved=c.value[O].date_approved,j.reason_rejected=c.value[O].reason_rejected,j)),S.value.length>1&&(S.value[c.value.length-1]={id:c.value[c.value.length-1].id,profile_id:c.value[c.value.length-1].profile_id,status:c.value[c.value.length-1].status,date_approved:c.value[c.value.length-1].date_approved,status:c.value[c.value.length-1].status,reason_rejected:"",types:c.value[c.value.length-1].approval_type,sort:c.value[c.value.length-1].orders,request_asset_id:c.value[c.value.length-1].request_asset_id,signatures:[{id:(u=c.value[c.value.length-1])==null?void 0:u.profile.id,display_name:(V=c.value[c.value.length-1])==null?void 0:V.profile.display_name,first_name:(E=c.value[c.value.length-1])==null?void 0:E.profile.first_name,last_name:(f=c.value[c.value.length-1])==null?void 0:f.profile.last_name}]})),console.log("approvalSetupList.value",S.value),((Y=a.data)==null?void 0:Y.stages.length)>0?H.value=!0:H.value=!1}).catch(a=>{})},U=()=>{let o=!1;W.value=!1,r.value.company_id&&r.value.request_type_id&&r.value.subject&&r.value.transferred_from&&r.value.transferred_to&&(o=!0);let a=!0;k.value.map(t=>{(!t.item_description||!t.reason_for_request||!t.uom||!t.qty||t.qty<=0)&&(a=!1)});let e=!0;S.value.map(t=>{t.profile_id||(e=!1)}),e&&a&&o&&(W.value=!0)},_e=o=>{let a={status:o,profile_id:v.user.profile.id,ID:p.value.id};D(v.token).post("/api/request-asset/change-request/data",a).then(e=>{Q.value={status:!0,type:"success",text:e.data.message},p.value.status=o,Ae("saved",e.data.message)}).catch(e=>{})},me=(o,a=6)=>{let e="00000"+o;return e.substring(e.length-a)},c=_([]),p=_({}),F=_({});We(()=>{var o,a,e,t;if(Ne().then(()=>{Fe().then(()=>{Be()})}),x.params.id){b.value=!0;let u=T.objectdata;p.value=u,r.value.company_id=u.company_id,r.value.request_type_id=u.request_type_id,r.value.subject=u.subject,r.value.transferred_from=u.transferred_from,r.value.transferred_to=u.transferred_to,r.value.id=u.id,r.value.requestor_id=u.profile_id,c.value=u.request_approvals,k.value=u.items,F.value=(a=(o=u.request_approvals)==null?void 0:o.filter(V=>V.status=="awaiting-approval"))==null?void 0:a[0],!F.value&&u.status=="reject"&&(F.value=(t=(e=u.request_approvals)==null?void 0:e.filter(V=>V.status=="reject"))==null?void 0:t[0]),q.value=u.attachment,pe()}else r.value.company_id=v.user.profile.company_id}),fe(r.value,async(o,a)=>{U()}),fe(k.value,async(o,a)=>{U()}),te(()=>v.user.role=="receiving-releasing"||v.user.role=="facility");const Ye=_("https://assets.grandiose.ae"),Ge=te(()=>{var E,f,Y,j,O;let o=null,a=Ye.value+"/pv/employee-signatory",e=qe(50),t=qe(50),u=95,V=99;return((f=(E=v.user)==null?void 0:E.profile)==null?void 0:f.id)==((Y=F.value)==null?void 0:Y.profile_id)&&(u=(j=F.value)==null?void 0:j.profile_id,V=(O=F.value)==null?void 0:O.orders),p.value&&(o=a+"/transfer/approvals?o="+V+"&key="+e+"&pid="+u+"&pv="+t+"&id="+p.value.id),o});return(o,a)=>(i(),h(rt,null,{default:d(()=>[s(ct,{title:T.headertitle,class:"no-print"},null,8,["title"]),s(g,{class:"mb-3"},{default:d(()=>[s(Ze,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[s(C,null,{default:d(()=>[s(Xe,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:d(()=>[l("div",null,m(T.headertitle),1),H.value?y("",!0):(i(),w("div",_t,m(ve.value),1)),b.value?(i(),w("div",{key:1,class:he(p.value.status=="cancelled"?"text-error":p.value.status=="complete"?"text-success":"")}," STATUS ("+m(p.value.status)+") ",3)):y("",!0),l("div",null,"DATE: "+m(n(Se)(Ue.value)),1)]),_:1}),s(ae),s(G,null,{default:d(()=>[s(g,{class:"no-print"},{default:d(()=>[b.value?(i(),w("div",{key:0,class:he(`${p.value.status=="complete"?"v-col-12":"v-col-md-12"}`)},[s(g,null,{default:d(()=>[l("div",mt," REQUEST NO: SN-5"+m(me(p.value.id)),1),l("div",ft,[b.value&&(p.value.status=="pending"||p.value.status=="cancelled")?(i(),w("div",ht,[r.value.requestor_id==n(v).user.profile.id&&p.value.status=="pending"?(i(),h(A,{key:0,onClick:a[0]||(a[0]=e=>_e("cancelled")),color:"warning"},{default:d(()=>[L("Cancel request")]),_:1})):y("",!0),r.value.requestor_id==n(v).user.profile.id&&p.value.status=="cancelled"?(i(),h(A,{key:1,onClick:a[1]||(a[1]=e=>_e("pending")),size:"small",color:"info"},{default:d(()=>[L("Change status to Pending")]),_:1})):y("",!0)])):y("",!0)])]),_:1})],2)):y("",!0),l("div",yt,[s(B,{items:de.value,modelValue:r.value.request_type_id,"onUpdate:modelValue":[a[2]||(a[2]=e=>r.value.request_type_id=e),pe],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:b.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),l("div",gt,[s(B,{items:ie.value,modelValue:r.value.company_id,"onUpdate:modelValue":a[3]||(a[3]=e=>r.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),l("div",Vt,[s(B,{items:ee.value,modelValue:r.value.transferred_from,"onUpdate:modelValue":a[4]||(a[4]=e=>r.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),l("div",wt,[s(B,{items:ee.value,modelValue:r.value.transferred_to,"onUpdate:modelValue":a[5]||(a[5]=e=>r.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"])]),l("div",bt,[s(P,{modelValue:r.value.subject,"onUpdate:modelValue":a[6]||(a[6]=e=>r.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),s(g,{class:"for-print-flex mx-2 mb-1"},{default:d(()=>{var e,t;return[l("div",kt," REQUEST NO: "+m(p.value.id?"SN-5"+me(p.value.id):""),1),l("div",xt," TYPE OF REQUEST: "+m(oe.value),1),l("div",qt," COMPANY: "+m((t=(e=p.value)==null?void 0:e.company)==null?void 0:t.title),1),l("div",St," LOCATION FROM: "+m(re.value),1),l("div",Ct," LOCATION TO: "+m(ce.value),1),l("div",At," SUBJECT: "+m(p.value.subject),1)]}),_:1})]),_:1})]),_:1}),s(C,{class:"my-2"},{default:d(()=>[s(G,null,{default:d(()=>[s(g,null,{default:d(()=>{var e;return[p.value.status!="complete"&&(!n(x).params.id||r.value.requestor_id==n(v).user.profile.id&&((e=T.objectdata)==null?void 0:e.status)=="pending"||n(v).user.profile.role=="superadmin"||n(v).user.profile.role=="administrator")?(i(),w("div",Tt,[s(A,{size:"small",color:"primary",class:"no-print",onClick:Pe},{default:d(()=>[L("Add")]),_:1})])):y("",!0)]}),_:1}),s(g,{class:"for-print-flex mx-2 header mb-1 mt-0"},{default:d(()=>[Ut,Et,jt,Ot,Rt,Dt,It]),_:1}),(i(!0),w(R,null,M(k.value,(e,t)=>(i(),h(g,{key:t,class:"for-print-flex mx-2 row-bordered mb-1"},{default:d(()=>[l("div",Nt,m(e.item_description),1),l("div",Ft,m(e.asset_code),1),l("div",Lt,m(e.qty),1),l("div",Bt,m(e.uom),1),l("div",Pt,m(e.weight),1),l("div",Mt,m(e.item_value),1),l("div",zt,m(e.reason_for_request),1)]),_:2},1024))),128)),(i(!0),w(R,null,M(k.value,(e,t)=>(i(),h(g,{key:t,class:"no-print"},{default:d(()=>{var u,V,E;return[l("div",Qt,[(u=e.attachment)!=null&&u.id?(i(),h(g,{key:0,class:"px-1"},{default:d(()=>[l("div",$t,[s(P,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":f=>e.attachment.id=f},null,8,["modelValue","onUpdate:modelValue"]),!b.value||b.value&&r.value.requestor_id==n(v).user.profile.id?(i(),h(A,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:n(ye),size:"16px",color:"error",onClick:()=>Ie(t,e.attachment.id)},null,8,["icon","onClick"])):y("",!0),s(C,{onClick:()=>De(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),s(le,{modelValue:N.value,"onUpdate:modelValue":a[7]||(a[7]=f=>N.value=f),width:"95%","max-width":"900"},{default:d(()=>[s(C,{class:"bg-black"},{default:d(()=>[l("div",Yt,[s(J,{src:z.value+"/file/"+se.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(i(),h(g,{key:1,class:"mt-0"},{default:d(()=>[l("div",Gt,[s(et,{color:"grey-lighten-4",class:"text-center"},{default:d(()=>[s(xe,{options:{multiSelect:!1,type:"request-asset"},onSelect:f=>Ee(t,f)},null,8,["onSelect"])]),_:2},1024)])]),_:2},1024))]),l("div",Ht,[s(ge,{modelValue:e.item_description,"onUpdate:modelValue":[f=>e.item_description=f,U],variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"ITEM DESC*"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Jt,[s(P,{modelValue:e.asset_code,"onUpdate:modelValue":f=>e.asset_code=f,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE","append-inner-icon":n(tt),"onClick:appendInner":f=>ne(e.asset_code,t)},null,8,["modelValue","onUpdate:modelValue","append-inner-icon","onClick:appendInner"]),(!n(x).params.id||r.value.requestor_id==n(v).user.profile.id&&((V=T.objectdata)==null?void 0:V.status)=="pending"||n(v).user.profile.role=="superadmin"||n(v).user.profile.role=="administrator")&&p.value.status!="complete"?(i(),h(K,{key:0,onClick:f=>Le(t),class:"ml-2 my-auto",size:"x-small",icon:n(at)},null,8,["onClick","icon"])):y("",!0)]),l("div",Kt,[s(P,{type:"number",modelValue:e.qty,"onUpdate:modelValue":[f=>e.qty=f,U],variant:"outlined",density:"compact","hide-details":"",label:"QTY*"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Wt,[s(B,{items:$e.value,modelValue:e.uom,"onUpdate:modelValue":[f=>e.uom=f,U],variant:"outlined",density:"compact","hide-details":"",label:"UOM*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),l("div",Zt,[s(P,{type:"number",modelValue:e.weight,"onUpdate:modelValue":f=>e.weight=f,variant:"outlined",density:"compact","hide-details":"",disabled:"",label:"WGT(KG)"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Xt,[s(P,{type:"number",modelValue:e.item_value,"onUpdate:modelValue":f=>e.item_value=f,variant:"outlined",density:"compact","hide-details":"",disabled:"",label:"VALUE"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",ea,[s(ge,{modelValue:e.reason_for_request,"onUpdate:modelValue":f=>e.reason_for_request=f,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON*"},null,8,["modelValue","onUpdate:modelValue"]),!b.value||b.value&&n(v).user.profile.id==T.objectdata.profile_id&&((E=T.objectdata)==null?void 0:E.status)=="pending"?(i(),h(K,{key:0,size:"small",onClick:()=>Me(e.id,t),icon:n(lt),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):y("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),r.value.request_type_id==2?(i(),h(C,{key:0},{default:d(()=>[s(G,null,{default:d(()=>{var e;return[!b.value||b.value&&r.value.requestor_id==n(v).user.profile.id?(i(),w("div",ta,[aa,s(xe,{options:{multiSelect:!0,type:"request-asset"},onSelect:je})])):y("",!0),((e=q.value)==null?void 0:e.length)>0?(i(),h(g,{key:1,class:"px-1 mt-4"},{default:d(()=>[(i(!0),w(R,null,M(q.value,(t,u)=>(i(),w("div",{key:t.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[b.value&&(p.value.status=="pending"||p.value.status=="cancelled")?(i(),h(A,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:n(ye),size:"20px",color:"error",onClick:()=>Oe(t.id)},null,8,["icon","onClick"])):y("",!0),s(C,{onClick:()=>Re(t,u)},{default:d(()=>[t.mime=="image/jpeg"||t.mime=="image/png"?(i(),h(J,{key:0,src:z.value+"/file/"+t.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(i(),h(J,{key:1,src:z.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),s(le,{modelValue:N.value,"onUpdate:modelValue":a[9]||(a[9]=t=>N.value=t),width:"95%","max-width":"900"},{default:d(()=>[s(C,{class:"bg-black"},{default:d(()=>[s(st,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:Z.value,"onUpdate:modelValue":a[8]||(a[8]=t=>Z.value=t)},{default:d(()=>[(i(!0),w(R,null,M(q.value,(t,u)=>(i(),h(ot,{key:u,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[l("div",{style:dt(`${I.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[I.value=="jpg"||I.value=="jpeg"||I.value=="png"?(i(),h(J,{key:0,src:z.value+"/file/"+t.path},null,8,["src"])):y("",!0),I.value=="pdf"?(i(),w("object",{key:1,data:z.value+"/file/"+t.path,type:"application/pdf",width:"100%",height:"800px"},null,8,la)):y("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0)]}),_:1})]),_:1})):y("",!0),s(C,{class:"my-2"},{default:d(()=>[s(G,null,{default:d(()=>[s(g,null,{default:d(()=>[l("div",sa,[oa,n(x).params.id?(i(),w("div",da,[s(A,{color:"info",size:"small",target:"_blank",href:Ge.value},{default:d(()=>[L("View Approval Page")]),_:1},8,["href"])])):y("",!0)]),s(ae)]),_:1}),s(g,{class:"no-print"},{default:d(()=>{var e,t;return[ia,l("div",ua,m((t=(e=p.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),na,ra]}),_:1}),s(g,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:d(()=>{var e,t;return[ca,l("div",va,m((t=(e=p.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),pa,_a]}),_:1}),(i(!0),w(R,null,M(c.value,e=>(i(),h(g,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:d(()=>{var t;return[l("div",ma,m(X(e.approval_type)),1),l("div",fa,m((t=e==null?void 0:e.profile)==null?void 0:t.display_name),1),l("div",ha,[e.status?(i(),h(K,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?n(Ve):e.status=="pending"?n(we):e.status=="reject"?n(be):n(ke),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0)]),l("div",ya,m(e.date_approved),1)]}),_:2},1024))),128)),H.value?(i(),w(R,{key:0},[(i(!0),w(R,null,M(S.value,(e,t)=>(i(),h(g,{class:"no-print",key:e.id},{default:d(()=>[l("div",ga,m(e.types?X(e.types):X(e.approval_type)),1),l("div",Va,[s(B,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[u=>e.profile_id=u,U],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),s(A,{variant:"text",size:"x-small"},{default:d(()=>[e.status?(i(),h(K,{key:0,class:"mx-2 my-3 no-print",icon:e.status=="awaiting-approval"?n(Ve):e.status=="pending"?n(we):e.status=="reject"?n(be):n(ke),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0),s(it,{activator:"parent",location:"top","max-width":"400"},{default:d(()=>[L(m(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)]),l("div",wa,m(e.date_approved?n(Se)(e.date_approved):""),1)]),_:2},1024))),128)),s(g,null,{default:d(()=>{var e;return[s(ae),l("div",ba,[(!n(x).params.id||r.value.requestor_id==n(v).user.profile.id&&((e=T.objectdata)==null?void 0:e.status)=="pending"||n(v).user.profile.role=="superadmin"||n(v).user.profile.role=="administrator")&&p.value.status!="complete"?(i(),h(A,{key:0,disabled:!W.value,onClick:Qe,class:"no-print",color:"primary"},{default:d(()=>[L(m(n(x).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):y("",!0)])]}),_:1})],64)):(i(),h(g,{key:1,class:"no-print"},{default:d(()=>[l("div",ka,m(ve.value),1)]),_:1})),s(g,null,{default:d(()=>[xa]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(vt,{options:Q.value},null,8,["options"]),s(le,{width:"500",modelValue:$.value,"onUpdate:modelValue":a[11]||(a[11]=e=>$.value=e)},{default:d(()=>[s(C,null,{default:d(()=>[s(G,null,{default:d(()=>[s(n(pt.QrcodeStream),{onDecode:ne})]),_:1}),s(ut,null,{default:d(()=>[s(nt),s(A,{text:"Close",onClick:a[10]||(a[10]=e=>$.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ea as _};
