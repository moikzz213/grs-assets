import{ad as Le,aa as qe,ae as de,K as Q,L as Ee,i as Se,r as J,M as Me,b as x,j as K,k as i,e as n,l as s,z as P,m as z,E as ke,G as y,a5 as De,A as ie,Q as we,c as G,F as fe,d as _e,t as $,U as be,I as ye,Z as Ce,V as Ue,af as Oe,q as Ae,D as R,y as k,a3 as D,O as ee,u as We,X as Ie,w as ce,v as me,Y as xe,_ as Fe,$ as Pe}from"./app-2c5a49eb.js";import{c as je,a as W,F as Ye,b as C}from"./index.esm-7f8f3b3c.js";import{_ as ze}from"./AppSnackBar-abe71aae.js";import{_ as He}from"./Studio-98788741.js";var Ne={exports:{}};(function(p,v){(function(Z,N){p.exports=N()})(Le,function(){var Z=1e3,N=6e4,S=36e5,b="millisecond",q="second",d="minute",T="hour",L="day",H="week",O="month",A="quarter",u="year",c="date",j="Invalid Date",I=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,te=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,o={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var l=["th","st","nd","rd"],t=e%100;return"["+e+(l[(t-20)%10]||l[t]||l[0])+"]"}},F=function(e,l,t){var m=String(e);return!m||m.length>=l?e:""+Array(l+1-m.length).join(t)+e},$e={s:F,z:function(e){var l=-e.utcOffset(),t=Math.abs(l),m=Math.floor(t/60),r=t%60;return(l<=0?"+":"-")+F(m,2,"0")+":"+F(r,2,"0")},m:function e(l,t){if(l.date()<t.date())return-e(t,l);var m=12*(t.year()-l.year())+(t.month()-l.month()),r=l.clone().add(m,O),f=t-r<0,_=l.clone().add(m+(f?-1:1),O);return+(-(m+(t-r)/(f?r-_:_-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:O,y:u,w:H,d:L,D:c,h:T,m:d,s:q,ms:b,Q:A}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},ae="en",X={};X[ae]=o;var ge="$isDayjsObject",ne=function(e){return e instanceof g||!(!e||!e[ge])},le=function e(l,t,m){var r;if(!l)return ae;if(typeof l=="string"){var f=l.toLowerCase();X[f]&&(r=f),t&&(X[f]=t,r=f);var _=l.split("-");if(!r&&_.length>1)return e(_[0])}else{var h=l.name;X[h]=l,r=h}return!m&&r&&(ae=r),r||!m&&ae},M=function(e,l){if(ne(e))return e.clone();var t=typeof l=="object"?l:{};return t.date=e,t.args=arguments,new g(t)},V=$e;V.l=le,V.i=ne,V.w=function(e,l){return M(e,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var g=function(){function e(t){this.$L=le(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[ge]=!0}var l=e.prototype;return l.parse=function(t){this.$d=function(m){var r=m.date,f=m.utc;if(r===null)return new Date(NaN);if(V.u(r))return new Date;if(r instanceof Date)return new Date(r);if(typeof r=="string"&&!/Z$/i.test(r)){var _=r.match(I);if(_){var h=_[2]-1||0,w=(_[7]||"0").substring(0,3);return f?new Date(Date.UTC(_[1],h,_[3]||1,_[4]||0,_[5]||0,_[6]||0,w)):new Date(_[1],h,_[3]||1,_[4]||0,_[5]||0,_[6]||0,w)}}return new Date(r)}(t),this.init()},l.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},l.$utils=function(){return V},l.isValid=function(){return this.$d.toString()!==j},l.isSame=function(t,m){var r=M(t);return this.startOf(m)<=r&&r<=this.endOf(m)},l.isAfter=function(t,m){return M(t)<this.startOf(m)},l.isBefore=function(t,m){return this.endOf(m)<M(t)},l.$g=function(t,m,r){return V.u(t)?this[m]:this.set(r,t)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(t,m){var r=this,f=!!V.u(m)||m,_=V.p(t),h=function(re,E){var se=V.w(r.$u?Date.UTC(r.$y,E,re):new Date(r.$y,E,re),r);return f?se:se.endOf(L)},w=function(re,E){return V.w(r.toDate()[re].apply(r.toDate("s"),(f?[0,0,0,0]:[23,59,59,999]).slice(E)),r)},U=this.$W,Y=this.$M,B=this.$D,ue="set"+(this.$u?"UTC":"");switch(_){case u:return f?h(1,0):h(31,11);case O:return f?h(1,Y):h(0,Y+1);case H:var oe=this.$locale().weekStart||0,ve=(U<oe?U+7:U)-oe;return h(f?B-ve:B+(6-ve),Y);case L:case c:return w(ue+"Hours",0);case T:return w(ue+"Minutes",1);case d:return w(ue+"Seconds",2);case q:return w(ue+"Milliseconds",3);default:return this.clone()}},l.endOf=function(t){return this.startOf(t,!1)},l.$set=function(t,m){var r,f=V.p(t),_="set"+(this.$u?"UTC":""),h=(r={},r[L]=_+"Date",r[c]=_+"Date",r[O]=_+"Month",r[u]=_+"FullYear",r[T]=_+"Hours",r[d]=_+"Minutes",r[q]=_+"Seconds",r[b]=_+"Milliseconds",r)[f],w=f===L?this.$D+(m-this.$W):m;if(f===O||f===u){var U=this.clone().set(c,1);U.$d[h](w),U.init(),this.$d=U.set(c,Math.min(this.$D,U.daysInMonth())).$d}else h&&this.$d[h](w);return this.init(),this},l.set=function(t,m){return this.clone().$set(t,m)},l.get=function(t){return this[V.p(t)]()},l.add=function(t,m){var r,f=this;t=Number(t);var _=V.p(m),h=function(Y){var B=M(f);return V.w(B.date(B.date()+Math.round(Y*t)),f)};if(_===O)return this.set(O,this.$M+t);if(_===u)return this.set(u,this.$y+t);if(_===L)return h(1);if(_===H)return h(7);var w=(r={},r[d]=N,r[T]=S,r[q]=Z,r)[_]||1,U=this.$d.getTime()+t*w;return V.w(U,this)},l.subtract=function(t,m){return this.add(-1*t,m)},l.format=function(t){var m=this,r=this.$locale();if(!this.isValid())return r.invalidDate||j;var f=t||"YYYY-MM-DDTHH:mm:ssZ",_=V.z(this),h=this.$H,w=this.$m,U=this.$M,Y=r.weekdays,B=r.months,ue=r.meridiem,oe=function(E,se,pe,Ve){return E&&(E[se]||E(m,f))||pe[se].slice(0,Ve)},ve=function(E){return V.s(h%12||12,E,"0")},re=ue||function(E,se,pe){var Ve=E<12?"AM":"PM";return pe?Ve.toLowerCase():Ve};return f.replace(te,function(E,se){return se||function(pe){switch(pe){case"YY":return String(m.$y).slice(-2);case"YYYY":return V.s(m.$y,4,"0");case"M":return U+1;case"MM":return V.s(U+1,2,"0");case"MMM":return oe(r.monthsShort,U,B,3);case"MMMM":return oe(B,U);case"D":return m.$D;case"DD":return V.s(m.$D,2,"0");case"d":return String(m.$W);case"dd":return oe(r.weekdaysMin,m.$W,Y,2);case"ddd":return oe(r.weekdaysShort,m.$W,Y,3);case"dddd":return Y[m.$W];case"H":return String(h);case"HH":return V.s(h,2,"0");case"h":return ve(1);case"hh":return ve(2);case"a":return re(h,w,!0);case"A":return re(h,w,!1);case"m":return String(w);case"mm":return V.s(w,2,"0");case"s":return String(m.$s);case"ss":return V.s(m.$s,2,"0");case"SSS":return V.s(m.$ms,3,"0");case"Z":return _}return null}(E)||_.replace(":","")})},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(t,m,r){var f,_=this,h=V.p(m),w=M(t),U=(w.utcOffset()-this.utcOffset())*N,Y=this-w,B=function(){return V.m(_,w)};switch(h){case u:f=B()/12;break;case O:f=B();break;case A:f=B()/3;break;case H:f=(Y-U)/6048e5;break;case L:f=(Y-U)/864e5;break;case T:f=Y/S;break;case d:f=Y/N;break;case q:f=Y/Z;break;default:f=Y}return r?f:V.a(f)},l.daysInMonth=function(){return this.endOf(O).$D},l.$locale=function(){return X[this.$L]},l.locale=function(t,m){if(!t)return this.$L;var r=this.clone(),f=le(t,m,!0);return f&&(r.$L=f),r},l.clone=function(){return V.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},e}(),a=g.prototype;return M.prototype=a,[["$ms",b],["$s",q],["$m",d],["$H",T],["$W",L],["$M",O],["$y",u],["$D",c]].forEach(function(e){a[e[1]]=function(l){return this.$g(l,e[0],e[1])}}),M.extend=function(e,l){return e.$i||(e(l,g,M),e.$i=!0),M},M.locale=le,M.isDayjs=ne,M.unix=function(e){return M(1e3*e)},M.en=X[ae],M.Ls=X,M.p={},M})})(Ne);var Be=Ne.exports;const he=qe(Be),Te=de("vendors",{state:()=>({vendors:[]}),getters:{list:p=>p.vendors},actions:{async getVendors(p){await Q(p).get("/api/vendor/state/vendor-list").then(v=>{this.vendors=Object.assign([],v.data)}).catch(v=>{console.log("getvendors error: ",v)})}}}),Re={class:"v-col-12 pt-0 pb-2"},Ze=n("thead",null,[n("tr",null,[n("th",{class:"text-left text-primary"},"#"),n("th",{class:"text-left text-primary"},"Title"),n("th",{class:"text-left text-primary"},"Warranty Start"),n("th",{class:"text-left text-primary"},"Warranty End"),n("th",{class:"text-left text-primary"},"Vendor"),n("th",{class:"text-left text-primary"},"Vendor Start"),n("th",{class:"text-left text-primary"},"Vendor End")])],-1),Je=["onClick"],Ge=n("div",{class:"v-col-12 pt-0 pb-2"},"Warranty",-1),Ke={class:"v-col-12 v-col-md-4 pt-0 pb-2"},Qe={class:"v-col-12 v-col-md-4 pt-0 pb-2"},Xe={class:"v-col-12 v-col-md-4 pt-0 pb-2"},et=n("div",{class:"v-col-12 pt-0 pb-2"},"Vendor Warranty",-1),tt={class:"v-col-12 v-col-md-4 pt-0 pb-2"},at={class:"v-col-12 v-col-md-4 pt-0 pb-2"},lt={class:"v-col-12 v-col-md-4 pt-0 pb-2"},st={class:"v-col-12 pt-0 pb-2 d-flex justify-end"},nt={__name:"AssetWarranties",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(p){const v=p,Z=Ee(),N=Se(),S=Te();S.list.length==0&&S.getVendors(N.token);const b=J({}),q=je({"Warranty Title":W().required().max(150),"Warranty Start Date":W().nullable(),"Warranty End Date":W().nullable(),"Vendor Start Date":W().nullable(),"Vendor End Date":W().nullable()}),d=J({status:!1,action:"add",loading:!1,data:{}}),T=J([]);Me(()=>v.asset,A=>{T.value=A.warranty});const L=(A=null)=>{d.value.status=!0,A?(d.value.action="edit",d.value.data=Object.assign({},A)):(d.value.action="add",d.value.data={})},H=async()=>{d.value.loading=!0;let A={id:d.value.data.id,asset_id:Z.params.id,warranty_title:d.value.data.title,warranty_start_date:d.value.data.warranty_start_date,warranty_end_date:d.value.data.warranty_end_date,warranty_vendor_id:d.value.data.vendor_id,vendor_start_date:d.value.data.vendor_start_date,vendor_end_date:d.value.data.vendor_end_date};await Q(N.token).post("/api/asset/save-warranty",A).then(u=>{O().then(()=>{b.value={status:!0,type:"success",text:u.data.message},d.value.loading=!1,d.value.status=!1})}).catch(u=>{d.value.loading=!1,b.value={status:!0,type:"eroor",text:"Error while saving warranty"},console.log("err",u)})},O=async()=>{await Q(N.token).get("/api/asset/warranty/"+Z.params.id).then(A=>{T.value=A.data,d.value.loading=!1}).catch(A=>{d.value.loading=!1,console.log("err",A)})};return(A,u)=>(x(),K(R,null,{default:i(()=>[n("div",Re,[s(P,{onClick:u[0]||(u[0]=()=>L()),class:"mb-3",size:"small"},{default:i(()=>[z(" New Warranty "),s(ke,{class:"ml-2",icon:y(De)},null,8,["icon"])]),_:1}),s(ie,null,{default:i(()=>[s(we,{density:"compact"},{default:i(()=>[Ze,n("tbody",null,[(x(!0),G(fe,null,_e(T.value,(c,j)=>(x(),G("tr",{key:c.id,onClick:()=>L(c),class:"cursor-pointer table-cell-hover"},[n("td",null,$(j+1),1),n("td",null,$(c.title),1),n("td",null,$(c.warranty_start_date&&y(he)(c.warranty_start_date).format("MMM. DD, YYYY")),1),n("td",null,$(c.warranty_end_date&&y(he)(c.warranty_end_date).format("MMM. DD, YYYY")),1),n("td",null,$(c.vendor&&c.vendor.title),1),n("td",null,$(c.vendor_start_date&&y(he)(c.vendor_start_date).format("MMM. DD, YYYY")),1),n("td",null,$(c.vendor_end_date&&y(he)(c.vendor_end_date).format("MMM. DD, YYYY")),1)],8,Je))),128))])]),_:1}),T.value.length==0?(x(),K(be,{key:0,class:"pa-3 text-center"},{default:i(()=>[z("No record at the moment")]),_:1})):ye("",!0)]),_:1})]),s(Ce,{modelValue:d.value.status,"onUpdate:modelValue":u[13]||(u[13]=c=>d.value.status=c),persistent:"",width:"1000"},{default:i(()=>[s(ie,null,{default:i(()=>[s(Ue,{class:"text-capitalize mb-3 d-flex justify-space-between align-center"},{default:i(()=>[z($(d.value.action+" Warranty")+" ",1),s(P,{icon:y(Oe),variant:"flat",size:"small",onClick:u[1]||(u[1]=c=>d.value.status=!1)},null,8,["icon"])]),_:1}),s(Ae,null,{default:i(()=>[s(y(Ye),{as:"v-form","validation-schema":y(q)},{default:i(()=>[s(R,{class:"mb-0"},{default:i(()=>[Ge,n("div",Ke,[s(y(C),{name:"Warranty Title",modelValue:d.value.data.title,"onUpdate:modelValue":u[3]||(u[3]=c=>d.value.data.title=c)},{default:i(({field:c,errors:j})=>[s(k,D({modelValue:d.value.data.title,"onUpdate:modelValue":u[2]||(u[2]=I=>d.value.data.title=I)},c,{label:"Warranty Title",variant:"outlined",density:"compact","error-messages":j}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",Qe,[s(y(C),{name:"Warranty Start Date",modelValue:d.value.data.warranty_start_date,"onUpdate:modelValue":u[5]||(u[5]=c=>d.value.data.warranty_start_date=c)},{default:i(({field:c,errors:j})=>[s(k,D({type:"date",modelValue:d.value.data.warranty_start_date,"onUpdate:modelValue":u[4]||(u[4]=I=>d.value.data.warranty_start_date=I)},c,{label:"Warranty Start Date",variant:"outlined",density:"compact","error-messages":j}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",Xe,[s(y(C),{name:"Warranty End Date",modelValue:d.value.data.warranty_end_date,"onUpdate:modelValue":u[7]||(u[7]=c=>d.value.data.warranty_end_date=c)},{default:i(({field:c,errors:j})=>[s(k,D({type:"date",modelValue:d.value.data.warranty_end_date,"onUpdate:modelValue":u[6]||(u[6]=I=>d.value.data.warranty_end_date=I)},c,{label:"Warranty End Date",variant:"outlined",density:"compact","error-messages":j}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),et,n("div",tt,[s(ee,{modelValue:d.value.data.vendor_id,"onUpdate:modelValue":u[8]||(u[8]=c=>d.value.data.vendor_id=c),items:y(S).list,"item-title":"title","item-value":"id",label:"Vendor Warranty",density:"compact",variant:"outlined",rules:[c=>!!c||"Vendor Warranty is required"]},null,8,["modelValue","items","rules"])]),n("div",at,[s(y(C),{name:"Vendor Start Date",modelValue:d.value.data.vendor_start_date,"onUpdate:modelValue":u[10]||(u[10]=c=>d.value.data.vendor_start_date=c)},{default:i(({field:c,errors:j})=>[s(k,D({type:"date",modelValue:d.value.data.vendor_start_date,"onUpdate:modelValue":u[9]||(u[9]=I=>d.value.data.vendor_start_date=I)},c,{label:"Vendor Start Date",variant:"outlined",density:"compact","error-messages":j}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",lt,[s(y(C),{name:"Vendor End Date",modelValue:d.value.data.vendor_end_date,"onUpdate:modelValue":u[12]||(u[12]=c=>d.value.data.vendor_end_date=c)},{default:i(({field:c,errors:j})=>[s(k,D({type:"date",modelValue:d.value.data.vendor_end_date,"onUpdate:modelValue":u[11]||(u[11]=I=>d.value.data.vendor_end_date=I)},c,{label:"Vendor End Date",variant:"outlined",density:"compact","error-messages":j}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",st,[s(P,{color:"primary",loading:d.value.loading,onClick:H},{default:i(()=>[z("Save")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["validation-schema"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(ze,{options:b.value},null,8,["options"])]),_:1}))}},ot={class:"v-col-12 pt-0 pb-2"},rt=n("thead",null,[n("tr",null,[n("th",{class:"text-left text-primary"},"INC ID"),n("th",{class:"text-left text-primary"},"Location"),n("th",{class:"text-left text-primary"},"Handled by"),n("th",{class:"text-left text-primary"},"Service Type"),n("th",{class:"text-left text-primary"},"Date Start"),n("th",{class:"text-left text-primary"},"Date End"),n("th",{class:"text-left text-primary"},"Cost"),n("th",{class:"text-left text-primary"},"Status"),n("th",{class:"text-left text-primary"},"Remarks")])],-1),it={__name:"AssetMaintenances",props:{asset:{type:Object,default:null}},setup(p){const v=p;We();const Z=()=>{};return(N,S)=>(x(),K(R,null,{default:i(()=>[n("div",ot,[s(P,{onClick:Z,class:"mb-3",size:"small"},{default:i(()=>[z(" New Maintenance "),s(ke,{class:"ml-2",icon:y(De)},null,8,["icon"])]),_:1}),s(ie,null,{default:i(()=>[s(we,{density:"compact"},{default:i(()=>[rt,n("tbody",null,[(x(!0),G(fe,null,_e(v.asset.maintenance,(b,q)=>(x(),G("tr",{key:b.id},[n("td",null,$(b.id),1),n("td",null,$(b.location),1),n("td",null,$(b.handle_by),1),n("td",null,$(b.service_type),1),n("td",null,$(b.date_start),1),n("td",null,$(b.date_closed),1),n("td",null,$(b.cost),1),n("td",null,$(b.status),1),n("td",null,$(b.remarks),1)]))),128))])]),_:1}),v.asset.maintenance&&v.asset.maintenance.length==0?(x(),K(be,{key:0,class:"pa-3 text-center"},{default:i(()=>[z("No record at the moment")]),_:1})):ye("",!0)]),_:1})])]),_:1}))}},dt={class:"v-col-12 pt-0 pb-2"},ut=n("thead",null,[n("tr",null,[n("th",{class:"text-left text-primary"},"#"),n("th",{class:"text-left text-primary"},"Alloted to"),n("th",{class:"text-left text-primary"},"Remarks")])],-1),ct={__name:"AssetAllotedLocations",props:{asset:{type:Object,default:null}},setup(p){const v=p;return(Z,N)=>(x(),K(R,null,{default:i(()=>[n("div",dt,[s(ie,null,{default:i(()=>[s(we,{density:"compact"},{default:i(()=>[ut,n("tbody",null,[(x(!0),G(fe,null,_e(v.asset.allotted_informations,(S,b)=>(x(),G("tr",{key:S.id},[n("td",null,$(b+1),1),n("td",null,$(S.title),1),n("td",null,$(S.remarks),1)]))),128))])]),_:1}),v.asset.allotted_informations&&v.asset.allotted_informations.length==0?(x(),K(be,{key:0,class:"pa-3 text-center"},{default:i(()=>[z("No record at the moment")]),_:1})):ye("",!0)]),_:1})])]),_:1}))}},mt=de("companies",{state:()=>({companies:[]}),getters:{list:p=>p.companies},actions:{async getCompanies(p){await Q(p).get("/api/company/state/list").then(v=>{this.companies=Object.assign([],v.data)}).catch(v=>{console.log("getCompanies error: ",v)})}}}),vt=de("categories",{state:()=>({categories:[]}),getters:{list:p=>p.categories},actions:{async getCategories(p){await Q(p).get("/api/category/state/category-list").then(v=>{this.categories=Object.assign([],v.data)}).catch(v=>{console.log("getCategories error: ",v)})}}}),pt=de("locations",{state:()=>({locations:[]}),getters:{list:p=>p.locations},actions:{async getLocations(p){await Q(p).get("/api/location/state/location-list").then(v=>{this.locations=Object.assign([],v.data)}).catch(v=>{console.log("getlocations error: ",v)})}}}),ft=de("brands",{state:()=>({brands:[]}),getters:{list:p=>p.brands},actions:{async getBrands(p){await Q(p).get("/api/brand/state/brand-list").then(v=>{this.brands=Object.assign([],v.data)}).catch(v=>{console.log("getbrands error: ",v)})}}}),_t=de("models",{state:()=>({models:[]}),getters:{list:p=>p.models},actions:{async getModels(p){await Q(p).get("/api/model/state/model-list").then(v=>{this.models=Object.assign([],v.data)}).catch(v=>{console.log("getModels error: ",v)})}}}),yt=de("status",{state:()=>({status:[]}),getters:{list:p=>p.status,conditions:p=>p.status.filter(v=>v.type=="condition-type"),assets:p=>p.status.filter(v=>v.type=="asset")},actions:{async getStatuses(p){await Q(p).get("/api/vendor/state/status-list").then(v=>{this.status=Object.assign([],v.data)}).catch(v=>{console.log("getstatus error: ",v)})}}}),gt={class:"text-primary text-capitalize"},Vt={class:"d-flex align-center"},ht=n("div",{class:"v-col-12 font-weight-bold"},"Asset Info",-1),bt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},$t={class:"v-col-12 v-col-md-6 pt-0 pb-2"},wt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},xt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},St={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Mt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},kt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Dt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ct={key:0,class:"v-col-12 pt-0 font-weight-bold"},Ut={key:1,class:"v-col-12 pt-0"},Ot={class:"v-col-12 pt-0 text-capitalize"},At={class:"v-col-12"},Wt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},jt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Yt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},zt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Nt={class:"v-col-12"},Tt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Lt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},qt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Et={class:"v-col-12 v-col-md-6 pt-0 pb-2"},It={class:"v-col-12"},Ft={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Pt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ht={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Bt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Rt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Zt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Jt={class:"v-col-12 mb-6"},Gt={class:"v-col-12 mb-6"},Kt={class:"v-col-12 mb-6"},Qt=n("div",{class:"v-col-12 pt-0 font-weight-bold"},"Attachment",-1),Xt={class:"v-col-12 pt-0"},ea={class:"v-col-12 pb-2"},ta={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},aa={class:"v-col-12 pt-0 pb-2"},ra={__name:"AssetForm",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(p){const v=p,Z=We(),N=J({}),S=Se(),b=mt();b.list.length==0&&b.getCompanies(S.token);const q=vt();q.list.length==0&&q.getCategories(S.token);const d=pt();d.list.length==0&&d.getLocations(S.token);const T=ft();T.list.length==0&&T.getBrands(S.token);const L=_t();L.list.length==0&&L.getModels(S.token);const H=yt();(H.list.length==0||H.conditions.length==0)&&H.getStatuses(S.token);const O=Te();O.list.length==0&&O.getVendors(S.token);const A=J(window.location.origin),u=J("specification"),c=g=>{u.value=g};let j=je({Name:W().required().max(150),"Serial Number":W().max(80).nullable(),"Asset Code":W().max(50).nullable(),"Section code":W().max(30).nullable(),Category:W().required(),Company:W().required(),Location:W().required(),"Asset Status":W().required(),Specification:W().max(120).nullable(),Brand:W().required(),Model:W().required(),Condition:W().required()});const I=()=>{console.log("import")},te=J(!1),o=J({}),F=J([]),$e=Ie(()=>F.value.map(g=>g.id)),ae=g=>{o.value=Object.assign({},g),F.value=g&&g.attachments?Object.assign([],g.attachments):[],g&&g.financial_information&&(o.value.capitalization_price=g.financial_information.capitalization_price,o.value.depreciation_percentage=g.financial_information.depreciation_percentage,o.value.scrap_value=g.financial_information.scrap_value,o.value.scrap_date=g.financial_information.scrap_date,o.value.capitalization_date=g.financial_information.capitalization_date,o.value.end_of_life=g.financial_information.end_of_life)};ae(v.asset),Me(()=>v.asset,g=>{ae(g)});const X=async()=>{te.value=!0,o.value.file_ids=$e.value,o.value.company_code=b.list.filter(g=>g.id==o.value.company_id)[0].code,o.value.category_code=q.list.filter(g=>g.id==o.value.category_id)[0].code,o.value.financial_information_id=o.value.financial_information?o.value.financial_information.id:null,await Q(S.token).post("/api/asset/save",o.value).then(g=>{N.value={status:!0,type:"success",text:g.data.message},te.value=!1,v.page=="add"&&Z.push({name:"edit-asset",params:{id:g.data.asset.id}}).catch(a=>{console.log("router.push",a)})}).catch(g=>{console.log("saveAsset",g),N.value={status:!0,type:"error",text:"Error while saving asset"},te.value=!1})},ge=g=>{let a=null;g.map(e=>{a=F.value.find(l=>l.id==e.id),a||F.value.push(e)})},ne=J(!1),le=J(1),M=g=>{le.value=g,ne.value=!0},V=g=>{F.value=F.value.filter(a=>a.id!==g)};return(g,a)=>(x(),K(ie,{loading:te.value,"max-width":"1600px",class:"mx-auto elevation-0"},{default:i(()=>[s(y(Ye),{as:"v-form","validation-schema":y(j)},{default:i(()=>[s(Ue,{class:"pb-6 pt-3 d-flex align-center justify-space-between"},{default:i(()=>[n("div",gt,$(v.page+" Asset"),1),n("div",Vt,[s(P,{color:"primary",class:"mr-3",loading:te.value,onClick:I},{default:i(()=>[z("Import Assets")]),_:1},8,["loading"]),s(P,{color:"primary",loading:te.value,onClick:X},{default:i(()=>[z("Save")]),_:1},8,["loading"])])]),_:1}),s(Ae,null,{default:i(()=>[s(R,null,{default:i(()=>[ht,n("div",bt,[s(y(C),{name:"Name",modelValue:o.value.asset_name,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.asset_name=e)},{default:i(({field:e,errors:l})=>[s(k,D({modelValue:o.value.asset_name,"onUpdate:modelValue":a[0]||(a[0]=t=>o.value.asset_name=t)},e,{label:"Name",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",$t,[s(y(C),{name:"Serial Number",modelValue:o.value.serial_number,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.serial_number=e)},{default:i(({field:e,errors:l})=>[s(k,D({modelValue:o.value.serial_number,"onUpdate:modelValue":a[2]||(a[2]=t=>o.value.serial_number=t)},e,{label:"Serial Number",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",wt,[s(y(C),{name:"Section code",modelValue:o.value.section_code,"onUpdate:modelValue":a[5]||(a[5]=e=>o.value.section_code=e)},{default:i(({field:e,errors:l})=>[s(k,D({modelValue:o.value.section_code,"onUpdate:modelValue":a[4]||(a[4]=t=>o.value.section_code=t)},e,{label:"Section code (optional)",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",xt,[s(ee,{modelValue:o.value.category_id,"onUpdate:modelValue":a[6]||(a[6]=e=>o.value.category_id=e),items:y(q).list,"item-title":"title","item-value":"id",label:"Category",density:"compact",variant:"outlined",rules:[e=>!!e||"Category is required"]},null,8,["modelValue","items","rules"])]),n("div",St,[s(ee,{modelValue:o.value.company_id,"onUpdate:modelValue":a[7]||(a[7]=e=>o.value.company_id=e),items:y(b).list,"item-title":"title","item-value":"id",label:"Company",density:"compact",variant:"outlined",rules:[e=>!!e||"Company is required"]},null,8,["modelValue","items","rules"])]),n("div",Mt,[s(ee,{modelValue:o.value.location_id,"onUpdate:modelValue":a[8]||(a[8]=e=>o.value.location_id=e),items:y(d).list,"item-title":"title","item-value":"id",label:"Location",density:"compact",variant:"outlined",rules:[e=>!!e||"Location is required"]},null,8,["modelValue","items","rules"])]),n("div",kt,[s(y(C),{name:"Asset Code",modelValue:o.value.asset_code,"onUpdate:modelValue":a[10]||(a[10]=e=>o.value.asset_code=e)},{default:i(({field:e,errors:l})=>[s(k,D({readonly:"",modelValue:o.value.asset_code,"onUpdate:modelValue":a[9]||(a[9]=t=>o.value.asset_code=t)},e,{label:"Asset Code (Auto Generated)",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",Dt,[s(ee,{modelValue:o.value.status_id,"onUpdate:modelValue":a[11]||(a[11]=e=>o.value.status_id=e),items:y(H).assets,"item-title":"title","item-value":"id",label:"Asset Status",density:"compact",variant:"outlined",rules:[e=>!!e||"Asset Status is required"]},null,8,["modelValue","items","rules"])])]),_:1}),s(R,null,{default:i(()=>[v.page=="edit"?(x(),G("div",Ct," Additional Info ")):ye("",!0),v.page=="edit"?(x(),G("div",Ut,[s(P,{class:"mr-2 mb-2",onClick:a[12]||(a[12]=()=>c("specification")),color:u.value=="specification"?"primary":"white"},{default:i(()=>[z("Specification")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:a[13]||(a[13]=()=>c("purchase")),color:u.value=="purchase"?"primary":"white"},{default:i(()=>[z("Purchase")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:a[14]||(a[14]=()=>c("financial")),color:u.value=="financial"?"primary":"white"},{default:i(()=>[z("Financial")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:a[15]||(a[15]=()=>c("warranty")),color:u.value=="warranty"?"primary":"white"},{default:i(()=>[z("Warranty")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:a[16]||(a[16]=()=>c("allotted")),color:u.value=="allotted"?"primary":"white"},{default:i(()=>[z("Allotted")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:a[17]||(a[17]=()=>c("maintenance")),color:u.value=="maintenance"?"primary":"white"},{default:i(()=>[z("Maintenance")]),_:1},8,["color"])])):ye("",!0),n("div",Ot,$(u.value+" Information"),1),ce(n("div",At,[s(R,null,{default:i(()=>[n("div",Wt,[s(y(C),{name:"Specification",modelValue:o.value.specification,"onUpdate:modelValue":a[19]||(a[19]=e=>o.value.specification=e)},{default:i(({field:e,errors:l})=>[s(k,D({modelValue:o.value.specification,"onUpdate:modelValue":a[18]||(a[18]=t=>o.value.specification=t)},e,{label:"Specification",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",jt,[s(ee,{modelValue:o.value.model_id,"onUpdate:modelValue":a[20]||(a[20]=e=>o.value.model_id=e),items:y(L).list,"item-title":"title","item-value":"id",label:"Model",density:"compact",variant:"outlined",rules:[e=>!!e||"Model is required"]},null,8,["modelValue","items","rules"])]),n("div",Yt,[s(ee,{modelValue:o.value.brand_id,"onUpdate:modelValue":a[21]||(a[21]=e=>o.value.brand_id=e),items:y(T).list,"item-title":"title","item-value":"id",label:"Brand",density:"compact",variant:"outlined",rules:[e=>!!e||"Brand is required"]},null,8,["modelValue","items","rules"])]),n("div",zt,[s(ee,{modelValue:o.value.condition_id,"onUpdate:modelValue":a[22]||(a[22]=e=>o.value.condition_id=e),items:y(H).conditions,"item-title":"title","item-value":"id",label:"Condition",density:"compact",variant:"outlined",rules:[e=>!!e||"Condition is required"]},null,8,["modelValue","items","rules"])])]),_:1})],512),[[me,u.value=="specification"]]),ce(n("div",Nt,[s(R,null,{default:i(()=>[n("div",Tt,[s(y(C),{name:"Price",modelValue:o.value.price,"onUpdate:modelValue":a[24]||(a[24]=e=>o.value.price=e)},{default:i(({field:e,errors:l})=>[s(k,D({modelValue:o.value.price,"onUpdate:modelValue":a[23]||(a[23]=t=>o.value.price=t)},e,{label:"Price",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",Lt,[s(ee,{modelValue:o.value.vendor_id,"onUpdate:modelValue":a[25]||(a[25]=e=>o.value.vendor_id=e),items:y(O).list,"item-title":"title","item-value":"id",label:"Vendor",density:"compact",variant:"outlined",rules:[e=>!!e||"Vendor is required"]},null,8,["modelValue","items","rules"])]),n("div",qt,[s(y(C),{name:"PO Number",modelValue:o.value.po_number,"onUpdate:modelValue":a[27]||(a[27]=e=>o.value.po_number=e)},{default:i(({field:e,errors:l})=>[s(k,D({modelValue:o.value.po_number,"onUpdate:modelValue":a[26]||(a[26]=t=>o.value.po_number=t)},e,{label:"PO Number",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",Et,[s(y(C),{name:"Purchase Date",modelValue:o.value.purchased_date,"onUpdate:modelValue":a[29]||(a[29]=e=>o.value.purchased_date=e)},{default:i(({field:e,errors:l})=>[s(k,D({type:"date",modelValue:o.value.purchased_date,"onUpdate:modelValue":a[28]||(a[28]=t=>o.value.purchased_date=t)},e,{label:"Purchase Date",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[me,u.value=="purchase"]]),ce(n("div",It,[s(R,null,{default:i(()=>[n("div",Ft,[s(y(C),{name:"Capitalization Price",modelValue:o.value.capitalization_price,"onUpdate:modelValue":a[31]||(a[31]=e=>o.value.capitalization_price=e)},{default:i(({field:e,errors:l})=>[s(k,D({modelValue:o.value.capitalization_price,"onUpdate:modelValue":a[30]||(a[30]=t=>o.value.capitalization_price=t)},e,{label:"Capitalization Price",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",Pt,[s(y(C),{name:"Depreciation Percentage",modelValue:o.value.depreciation_percentage,"onUpdate:modelValue":a[33]||(a[33]=e=>o.value.depreciation_percentage=e)},{default:i(({field:e,errors:l})=>[s(k,D({modelValue:o.value.depreciation_percentage,"onUpdate:modelValue":a[32]||(a[32]=t=>o.value.depreciation_percentage=t)},e,{label:"Depreciation Percentage",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",Ht,[s(y(C),{name:"Scrap Value",modelValue:o.value.scrap_value,"onUpdate:modelValue":a[35]||(a[35]=e=>o.value.scrap_value=e)},{default:i(({field:e,errors:l})=>[s(k,D({modelValue:o.value.scrap_value,"onUpdate:modelValue":a[34]||(a[34]=t=>o.value.scrap_value=t)},e,{label:"Scrap Value",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",Bt,[s(y(C),{name:"Scrap Date",modelValue:o.value.scrap_date,"onUpdate:modelValue":a[37]||(a[37]=e=>o.value.scrap_date=e)},{default:i(({field:e,errors:l})=>[s(k,D({type:"date",modelValue:o.value.scrap_date,"onUpdate:modelValue":a[36]||(a[36]=t=>o.value.scrap_date=t)},e,{label:"Scrap Date",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",Rt,[s(y(C),{name:"Capitalization Date",modelValue:o.value.capitalization_date,"onUpdate:modelValue":a[39]||(a[39]=e=>o.value.capitalization_date=e)},{default:i(({field:e,errors:l})=>[s(k,D({type:"date",modelValue:o.value.capitalization_date,"onUpdate:modelValue":a[38]||(a[38]=t=>o.value.capitalization_date=t)},e,{label:"Capitalization Date",variant:"outlined",density:"compact","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),n("div",Zt,[s(y(C),{name:"End of Life",modelValue:o.value.end_of_life,"onUpdate:modelValue":a[41]||(a[41]=e=>o.value.end_of_life=e)},{default:i(({field:e,errors:l})=>[s(k,D({type:"date",modelValue:o.value.end_of_life,"onUpdate:modelValue":a[40]||(a[40]=t=>o.value.end_of_life=t)},e,{label:"End of Life",density:"compact",variant:"outlined","error-messages":l}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[me,u.value=="financial"]]),ce(n("div",Jt,[s(nt,{asset:o.value,page:v.page},null,8,["asset","page"])],512),[[me,u.value=="warranty"]]),ce(n("div",Gt,[s(ct,{asset:o.value},null,8,["asset"])],512),[[me,u.value=="allotted"]]),ce(n("div",Kt,[s(it,{asset:o.value},null,8,["asset"])],512),[[me,u.value=="maintenance"]]),Qt,n("div",Xt,[s(R,null,{default:i(()=>[n("div",ea,[s(He,{options:{multiSelect:!0},onSelect:ge})])]),_:1}),F.value.length>0?(x(),K(R,{key:0,class:"px-1"},{default:i(()=>[(x(!0),G(fe,null,_e(F.value,(e,l)=>(x(),G("div",{key:e.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[s(P,{style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:y(Oe),size:"26px",color:"error",onClick:()=>V(e.id)},null,8,["icon","onClick"]),s(ie,{onClick:()=>M(l)},{default:i(()=>[s(xe,{src:A.value+"/file/"+e.path,cover:"","aspect-ratio":"1"},null,8,["src"])]),_:2},1032,["onClick"])]))),128)),s(Ce,{modelValue:ne.value,"onUpdate:modelValue":a[43]||(a[43]=e=>ne.value=e),width:"95%","max-width":"900"},{default:i(()=>[s(ie,{class:"bg-black"},{default:i(()=>[s(Fe,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:le.value,"onUpdate:modelValue":a[42]||(a[42]=e=>le.value=e)},{default:i(()=>[(x(!0),G(fe,null,_e(F.value,(e,l)=>(x(),K(Pe,{key:l,"reverse-transition":"fade",transition:"fade"},{default:i(()=>[n("div",ta,[s(xe,{src:A.value+"/file/"+e.path},null,8,["src"])])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):(x(),K(R,{key:1},{default:i(()=>[n("div",aa,[s(be,{color:"grey-lighten-4",class:"pa-6 text-center"},{default:i(()=>[z(" Attachment is empty at the moment. ")]),_:1})])]),_:1}))])]),_:1})]),_:1})]),_:1},8,["validation-schema"]),s(ze,{options:N.value},null,8,["options"])]),_:1},8,["loading"]))}};export{ra as _};
