import{d as p,J as b,R as A,o as r,f as y,w as l,g as i,m as S,_ as z,h as m,t as C,a3 as E,c as x,F as $,y as N,a4 as F,a5 as M,D as R,E as f,a6 as P,a7 as q,a8 as H,a9 as J,e as G,V as K,b as g,aa as Q,C as L,H as W,i as X,z as D,l as U,q as Y,v as Z}from"./app-0d23d45f.js";import{_ as tt}from"./ApppageHeader-18a51581.js";import{u as et}from"./status-2f68f0f4.js";const at={__name:"AppStatusDropDown",props:{loading:{type:Boolean,default:!1},list:{type:Array,default:[]},currentState:{type:Object,default:null}},emits:["update"],setup(h,{emit:s}){const e=h,a=p([]),u=p("");a.value=e.list,b(()=>e.list,c=>{a.value=[...a.value,...c.list]}),u.value=e.currentState.status,b(()=>e.currentState,c=>{u.value=c.status});const t=p(!1);b(()=>e.loading,c=>{t.value=c});const o=A(()=>a.value.filter(c=>c.title==u.value)[0]),T=c=>{u.value!=c.title&&(u.value=c.title,s("update",{state:o.value.title,model_id:e.currentState.id}))};return(c,V)=>(r(),y(q,null,{activator:l(({props:v})=>[i(S,z({loading:t.value,block:"",color:o.value.color},v),{default:l(()=>[m(C(o.value.title),1)]),_:2},1040,["loading","color"])]),default:l(()=>[i(E,null,{default:l(()=>[(r(!0),x($,null,N(a.value,(v,w)=>(r(),y(F,{key:w,value:w,onClick:()=>T(v)},{default:l(()=>[i(M,{class:"text-capitalize"},{default:l(()=>[i(R,{icon:f(P),color:v.color},null,8,["icon","color"]),m(" "+C(v.title),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1}))}},lt={__name:"AppSnackbar",props:{options:{type:Object,default:null}},setup(h){const s=h,e=p({status:!1,type:"primary",text:"Default Message"});return b(()=>s.options,a=>{e.value={...e.value,...a}}),(a,u)=>(r(),y(H,{modelValue:e.value.status,"onUpdate:modelValue":u[1]||(u[1]=t=>e.value.status=t),color:e.value.type},{actions:l(()=>[i(S,{color:"white",variant:"text",onClick:u[0]||(u[0]=t=>e.value=!1)},{default:l(()=>[m(" Close ")]),_:1})]),default:l(()=>[m(C(e.value.text)+" ",1)]),_:1},8,["modelValue","color"]))}},st={class:"v-col-12 v-col-md-8"},ut={class:"d-flex align-center"},ot={class:"text-capitalize"},nt={class:"v-col"},it={key:0,class:"v-col"},rt={class:"v-col px-3 d-flex align-center justify-center",style:{width:"100%","max-width":"150px","min-width":"150px"}},ct={__name:"StatusType",props:{type:{type:String,default:""}},setup(h){const s=h,{mobile:e}=J(),a=G(),u=p({}),t=et(),o=p(t.statusListByType);t.list.length<1&&t.getStatuses(a.token).then(()=>{t.filterStatusByType(s.type).then(()=>{o.value=t.statusListByType})}),b(()=>s.type,d=>{t.filterStatusByType(s.type).then(()=>{o.value=t.statusListByType})});const T=()=>{o.value.push({title:null,type:null,status:"active",type:s.type,notification_interval:s.type=="urgency"?1:null})},c=d=>{o.value=o.value.filter(function(_,n){return n!==d})},V=p(!1),v=p([]),w=p([{title:"active",color:"success"},{title:"disabled",color:"error"}]),O=d=>{v.value.push(d.model_id);let _={id:d.model_id,type:s.type,status:d.state};t.updateStatus(_,a.token).then(n=>{t.getStatuses(a.token).then(()=>{t.filterStatusByType(s.type).then(()=>{o.value=t.statusListByType,v.value=[],u.value={status:!0,type:"success",text:"Status has been saved"}})})}).catch(n=>{v.value=[],u.value={status:!0,type:"error",text:"Error while updating status"}})},I=A(()=>{let d=!0;return o.value.map(_=>{(!_.title||_.title.length==0)&&(d=!1)}),d}),j=()=>{V.value=!0;let d={list:o.value};t.saveStatusList(d,a.token).then(()=>{t.getStatuses(a.token).then(()=>{t.filterStatusByType(s.type).then(()=>{o.value=t.statusListByType,V.value=!1,u.value={status:!0,type:"success",text:"Status list has been saved"}})})}).catch(_=>{V.value=!1,u.value={status:!0,type:"error",text:"Error while saving status list"}})};return(d,_)=>(r(),x("div",st,[i(Y,null,{default:l(()=>[i(K,null,{default:l(()=>{var n,k;return[g("div",ut,[f(a).user.role=="superadmin"||(n=f(a).capabilities)!=null&&n.includes("add")?(r(),y(S,{key:0,icon:f(Q),onClick:T,size:"x-small",color:"white",class:"mr-3"},null,8,["icon"])):L("",!0),g("div",ot,C(s.type.replace("-"," "))+" List",1),f(a).user.role=="superadmin"||(k=f(a).capabilities)!=null&&k.includes("edit")?(r(),y(S,{key:1,disabled:!I.value,loading:V.value,onClick:j,color:"primary",class:"ml-auto"},{default:l(()=>[m("Save")]),_:1},8,["disabled","loading"])):L("",!0)])]}),_:1}),i(W),i(X,null,{default:l(()=>[(r(!0),x($,null,N(o.value,(n,k)=>(r(),y(D,{key:k},{default:l(()=>[g("div",nt,[i(U,{"hide-details":"auto",modelValue:n.title,"onUpdate:modelValue":B=>n.title=B,label:`${s.type.charAt(0).toUpperCase()+s.type.slice(1)} Title`,variant:"outlined",density:"compact",disabled:n.id<10},null,8,["modelValue","onUpdate:modelValue","label","disabled"])]),s.type=="urgency"?(r(),x("div",it,[i(U,{"hide-details":"auto",modelValue:n.notification_interval,"onUpdate:modelValue":B=>n.notification_interval=B,label:`${f(e)?"Notif. (days)":"Notification Interval (days)"} `,variant:"outlined",density:"compact",disabled:n.id<10},null,8,["modelValue","onUpdate:modelValue","label","disabled"])])):L("",!0),g("div",rt,[n.id?(r(),y(at,{key:0,onUpdate:O,list:w.value,"current-state":n,loading:v.value.includes(n.id)==!0},null,8,["list","current-state","loading"])):(r(),y(S,{key:1,block:"",color:"error",onClick:()=>c(k)},{default:l(()=>[m(" remove ")]),_:2},1032,["onClick"]))])]),_:2},1024))),128))]),_:1})]),_:1}),i(lt,{options:u.value},null,8,["options"])]))}},dt={class:"v-col py-0"},_t={__name:"Others",setup(h){const s=p(["asset","condition-type","incident-type","incident","maintenance","urgency"]),e=p("");return e.value="asset",(a,u)=>(r(),y(Z,null,{default:l(()=>[i(tt,{title:"Others - Status Setup"}),i(D,{class:"mt-5"},{default:l(()=>[g("div",dt,[(r(!0),x($,null,N(s.value,(t,o)=>(r(),y(S,{class:"mr-3 mb-3",key:o,color:`${e.value==t?"primary":"white"}`,onClick:T=>e.value=t},{default:l(()=>[m(C(t.replace("-"," ")),1)]),_:2},1032,["color","onClick"]))),128))])]),_:1}),i(D,{class:"mb-3"},{default:l(()=>[i(ct,{type:e.value},null,8,["type"])]),_:1})]),_:1}))}};export{_t as default};
