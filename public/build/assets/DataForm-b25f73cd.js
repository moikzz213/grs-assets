import{a as He,r as m,G as Je,u as Ke,P as X,I as We,H as fe,o as i,c as h,w as d,d as o,v as Ze,k as q,V as Xe,b as l,t as f,p as w,y,af as he,C as n,E as ee,f as $,s as g,j as C,e as F,J as B,i as L,q as P,F as O,Q as ye,S as te,R as G,N as et,W as ge,Z as tt,B as H,D as at,M as lt,T as st,U as ot,ad as dt,aF as Ve,aG as we,aH as be,aI as ke,aJ as it,_ as ut,$ as nt,m as rt,n as R}from"./app-f3958e63.js";import{_ as ct}from"./ApppageHeader-6d4c5de1.js";import{_ as xe,r as qe}from"./Studio-18951fd5.js";import{_ as vt}from"./AppSnackBar-77751115.js";import{Q as pt}from"./QrcodeReaderVue3.common-5da692a4.js";import{u as Ce}from"./formatDate-b9aad8c5.js";const _t={key:0,class:"text-error text-h6"},mt={class:"col-12 v-col-md-4"},ft={class:"v-col-12 v-col-md-8"},ht={key:0,class:"text-right no-print"},yt={class:"v-col-12 v-col-md-6"},gt={class:"v-col-12 v-col-md-6"},Vt={class:"v-col-12 v-col-md-6"},wt={class:"v-col-12 v-col-md-6"},bt={class:"v-col-12"},kt={class:"wd-100"},xt={class:"wd-60"},qt={class:"wd-40"},Ct={class:"wd-60"},St={class:"wd-40"},At={class:"wd-100"},Tt={key:0,class:"v-col-12"},Ut=l("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),jt=l("div",{class:"wd-15"},"ASSET CODE",-1),Et=l("div",{class:"wd-5"},"QTY",-1),Ot=l("div",{class:"wd-10"},"UOM",-1),Rt=l("div",{class:"wd-10"},"WEIGHT",-1),Dt=l("div",{class:"wd-10"},"VALUE",-1),Nt=l("div",{class:"wd-15"},"REASON FOR REQUEST",-1),It={class:"wd-30"},Ft={class:"wd-15"},Bt={class:"wd-5"},Lt={class:"wd-10"},Pt={class:"wd-10"},Mt={class:"wd-10"},zt={class:"wd-15"},Qt={class:"v-col-12 v-col-md-1 px-1"},$t={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},Yt={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},Gt={class:"v-col-12 pt-0 pb-0"},Ht={class:"v-col-12 v-col-md-1 custom-width-description"},Jt={class:"v-col-12 v-col-md-2 d-flex"},Kt={class:"v-col-12 v-col-md-1"},Wt={class:"v-col-12 v-col-md-1 custom-width-uom"},Zt={class:"v-col-12 v-col-md-1"},Xt={class:"v-col-12 v-col-md-1"},ea={class:"v-col-12 v-col-md-2 d-flex"},ta={key:0},aa=l("div",null,"Additional File can be upload here",-1),la=["data"],sa={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},oa=l("div",null,"APPROVAL SETUP",-1),da={key:0,class:"no-print"},ia=l("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),ua={class:"v-col-12 v-col-md-6"},na=l("div",{class:"v-col-12 v-col-md-1"},"Status",-1),ra=l("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),ca=l("div",{class:"wd-20"},"Requestor",-1),va={class:"wd-50"},pa=l("div",{class:"wd-10"},"Status",-1),_a=l("div",{class:"wd-20"},"Date Approved",-1),ma={class:"wd-20"},fa={class:"wd-50"},ha={class:"wd-10"},ya={class:"wd-20"},ga={class:"v-col-12 v-col-md-2"},Va={class:"v-col-12 v-col-md-7 d-flex"},wa={class:"my-auto"},ba={class:"v-col-12"},ka={class:"v-col-12 text-error"},xa=l("div",{class:"v-col-12 v-col-md-12 text-info no-print"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),ja={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(Se,{emit:Ae}){const S=Se,p=He(),J=m(!1),A=Je(),Te=Ke(),r=m({}),b=m(!1),k=m([{qty:1,attachment:{}}]),Ue=m(new Date),M=m(window.location.origin),je=(s,a)=>{k.value[s].attachment=a[0]},x=m([]),Ee=s=>{let a=null;s.map(e=>{a=x.value.find(t=>t.id==e.id),a||x.value.push(e)})},Oe=s=>{x.value=x.value.filter(a=>a.id!==s)},K=m(1),D=m("image"),Re=(s,a)=>{let e=s.path.split(".");D.value=e[e.length-1],K.value=a,N.value=!0},N=m(!1),ae=m(1),De=s=>{ae.value=s,N.value=!0},Ne=s=>{k.value[s].attachment=""},W=s=>{if(s=="approve")return"Approved By";if(s=="reviewer")return"Reviewed By";if(s=="receiver")return"Received By";if(s=="transport")return"Transport Arranged By";if(s=="releasing")return"Released By";if(s=="verify")return"Verified By"},le=m(""),se=m([]),Ie=async()=>{await R(p.token).get("/api/fetch/approval-setups/non-paginated/data/request").then(s=>{var a,e;se.value=s.data,le.value=(e=(a=s.data.filter(t=>t.id==_.value.request_type_id))==null?void 0:a[0])==null?void 0:e.title}).catch(s=>{})},z=m({}),oe=m([]),Fe=async()=>{await R(p.token).get("/api/fetch/companies").then(s=>{oe.value=s.data}).catch(s=>{})},Q=m(!1),de=m(0),Be=s=>{de.value=s,Q.value=!0},ie=async(s,a)=>{let e=de.value;a!==void 0&&(e=a),await R(p.token).get("/api/fetch/asset-info/by/asset-code/"+s).then(t=>{k.value[e].item_description=t.data.asset_name,k.value[e].asset_code=s,Q.value=!1}).catch(t=>{})},ue=m(""),ne=m(""),Z=m([]),Le=async()=>{await R(p.token).get("/api/fetch/locations/non-paginated/data").then(s=>{var a,e,t,u;Z.value=s.data,ue.value=(e=(a=s.data.filter(V=>V.id==_.value.transferred_from))==null?void 0:a[0])==null?void 0:e.title,ne.value=(u=(t=s.data.filter(V=>V.id==_.value.transferred_to))==null?void 0:t[0])==null?void 0:u.title}).catch(s=>{})},Pe=()=>{k.value.push({qty:1,attachment:{}}),U()},Me=(s,a)=>{k.value.splice(a,1),U()},re=m("Note: Administrator needs to setup signatories first."),ze=X(()=>x.value.map(s=>s.id)),Qe=()=>{z.value={status:!0,type:"info",text:"Please wait..."};let s=k.value.map((e,t)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),a={data:r.value,assets:s,approval:T.value,profile_id:p.user.profile.id,type:"request",role:p.user.profile.role,additionalFiles:ze.value};R(p.token).post("/api/request-asset/store-update/data",a).then(e=>{let t="",u="";e.data.message?(t=e.data.message,u="success"):e.data.error&&(t=e.data.error,u="error"),z.value={status:!0,type:u,text:t},A.params.id||setTimeout(()=>{Te.push({name:"EditRequestAsset",params:{id:e.data.id}}).catch(V=>{})},800)}).catch(e=>{z.value={status:!0,type:"error",text:"Failed to update data, kindly refresh the page and check fields if it's empty"}})},T=m([]),Y=m(!0),$e=m(["Nos","Set","Pcs","Pack","Pallet","SqM"]),ce=async()=>{await R(p.token).get("/api/fetch/request-asset/approval-setup-fetch/"+r.value.request_type_id).then(s=>{var a,e,t,u,V,j;T.value=(a=s.data)==null?void 0:a.stages,A.params.id&&T.value.length>0&&(T.value.map((v,E)=>(v.profile_id=c.value[E].profile_id,v.status=c.value[E].status,v.date_approved=c.value[E].date_approved,v.reason_rejected=c.value[E].reason_rejected,v)),T.value.length>1&&(T.value[c.value.length-1]={id:c.value[c.value.length-1].id,profile_id:c.value[c.value.length-1].profile_id,status:c.value[c.value.length-1].status,date_approved:c.value[c.value.length-1].date_approved,status:c.value[c.value.length-1].status,reason_rejected:"",types:c.value[c.value.length-1].approval_type,sort:c.value[c.value.length-1].orders,request_asset_id:c.value[c.value.length-1].request_asset_id,signatures:[{id:(e=c.value[c.value.length-1])==null?void 0:e.profile.id,display_name:(t=c.value[c.value.length-1])==null?void 0:t.profile.display_name,first_name:(u=c.value[c.value.length-1])==null?void 0:u.profile.first_name,last_name:(V=c.value[c.value.length-1])==null?void 0:V.profile.last_name}]})),((j=s.data)==null?void 0:j.stages.length)>0?Y.value=!0:Y.value=!1}).catch(s=>{})},U=()=>{let s=!1;J.value=!1,r.value.company_id&&r.value.request_type_id&&r.value.subject&&r.value.transferred_from&&r.value.transferred_to&&(s=!0);let a=!0;k.value.map(t=>{(!t.item_description||!t.reason_for_request||!t.uom||!t.qty||t.qty<=0)&&(a=!1)});let e=!0;T.value.map(t=>{t.profile_id||(e=!1)}),e&&a&&s&&(J.value=!0)},ve=s=>{let a={status:s,profile_id:p.user.profile.id,ID:_.value.id};R(p.token).post("/api/request-asset/change-request/data",a).then(e=>{z.value={status:!0,type:"success",text:e.data.message},_.value.status=s,Ae("saved",e.data.message)}).catch(e=>{})},pe=(s,a=6)=>{let e="00000"+s;return e.substring(e.length-a)},c=m([]),_=m({}),I=m({});We(()=>{var s,a,e,t;if(Ie().then(()=>{Fe().then(()=>{Le()})}),A.params.id){b.value=!0;let u=S.objectdata;_.value=u,r.value.company_id=u.company_id,r.value.request_type_id=u.request_type_id,r.value.subject=u.subject,r.value.transferred_from=u.transferred_from,r.value.transferred_to=u.transferred_to,r.value.id=u.id,r.value.requestor_id=u.profile_id,c.value=u.request_approvals,k.value=u.items,I.value=(a=(s=u.request_approvals)==null?void 0:s.filter(V=>V.status=="awaiting-approval"))==null?void 0:a[0],!I.value&&u.status=="reject"&&(I.value=(t=(e=u.request_approvals)==null?void 0:e.filter(V=>V.status=="reject"))==null?void 0:t[0]),x.value=u.attachment,ce()}else r.value.company_id=p.user.profile.company_id}),fe(r.value,async(s,a)=>{U()}),fe(k.value,async(s,a)=>{U()}),X(()=>p.user.role=="receiving-releasing"||p.user.role=="facility");const Ye=m("https://assets.grandiose.ae"),Ge=X(()=>{var j,v,E,_e,me;let s=null,a=Ye.value+"/pv/employee-signatory",e=qe(50),t=qe(50),u=95,V=99;return((v=(j=p.user)==null?void 0:j.profile)==null?void 0:v.id)==((E=I.value)==null?void 0:E.profile_id)&&(u=(_e=I.value)==null?void 0:_e.profile_id,V=(me=I.value)==null?void 0:me.orders),_.value&&(s=a+"/transfer/approvals?o="+V+"&key="+e+"&pid="+u+"&pv="+t+"&id="+_.value.id),s});return(s,a)=>(i(),h(rt,null,{default:d(()=>[o(ct,{title:S.headertitle,class:"no-print"},null,8,["title"]),o(g,{class:"mb-3"},{default:d(()=>[o(Ze,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[o(q,null,{default:d(()=>[o(Xe,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:d(()=>[l("div",null,f(S.headertitle),1),Y.value?y("",!0):(i(),w("div",_t,f(re.value),1)),b.value?(i(),w("div",{key:1,class:he(_.value.status=="cancelled"?"text-error":_.value.status=="complete"?"text-success":"")}," STATUS ("+f(_.value.status)+") ",3)):y("",!0),l("div",null,"DATE: "+f(n(Ce)(Ue.value)),1)]),_:1}),o(ee),o($,null,{default:d(()=>[o(g,{class:"no-print"},{default:d(()=>[b.value?(i(),w("div",{key:0,class:he(`${_.value.status=="complete"?"v-col-12":"v-col-md-12"}`)},[o(g,null,{default:d(()=>[l("div",mt," REQUEST NO: SN-5"+f(pe(_.value.id)),1),l("div",ft,[b.value&&(_.value.status=="pending"||_.value.status=="cancelled")?(i(),w("div",ht,[r.value.requestor_id==n(p).user.profile.id&&_.value.status=="pending"?(i(),h(C,{key:0,onClick:a[0]||(a[0]=e=>ve("cancelled")),color:"warning"},{default:d(()=>[F("Cancel request")]),_:1})):y("",!0),r.value.requestor_id==n(p).user.profile.id&&_.value.status=="cancelled"?(i(),h(C,{key:1,onClick:a[1]||(a[1]=e=>ve("pending")),size:"small",color:"info"},{default:d(()=>[F("Change status to Pending")]),_:1})):y("",!0)])):y("",!0)])]),_:1})],2)):y("",!0),l("div",yt,[o(B,{items:se.value,modelValue:r.value.request_type_id,"onUpdate:modelValue":[a[2]||(a[2]=e=>r.value.request_type_id=e),ce],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:b.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),l("div",gt,[o(B,{items:oe.value,modelValue:r.value.company_id,"onUpdate:modelValue":a[3]||(a[3]=e=>r.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),l("div",Vt,[o(B,{items:Z.value,modelValue:r.value.transferred_from,"onUpdate:modelValue":a[4]||(a[4]=e=>r.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),l("div",wt,[o(B,{items:Z.value,modelValue:r.value.transferred_to,"onUpdate:modelValue":a[5]||(a[5]=e=>r.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"])]),l("div",bt,[o(L,{modelValue:r.value.subject,"onUpdate:modelValue":a[6]||(a[6]=e=>r.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),o(g,{class:"for-print-flex mx-2 mb-1"},{default:d(()=>{var e,t;return[l("div",kt," REQUEST NO: "+f(_.value.id?"SN-5"+pe(_.value.id):""),1),l("div",xt," TYPE OF REQUEST: "+f(le.value),1),l("div",qt," COMPANY: "+f((t=(e=_.value)==null?void 0:e.company)==null?void 0:t.title),1),l("div",Ct," LOCATION FROM: "+f(ue.value),1),l("div",St," LOCATION TO: "+f(ne.value),1),l("div",At," SUBJECT: "+f(_.value.subject),1)]}),_:1})]),_:1})]),_:1}),o(q,{class:"my-2"},{default:d(()=>[o($,null,{default:d(()=>[o(g,null,{default:d(()=>{var e;return[_.value.status!="complete"&&(!n(A).params.id||r.value.requestor_id==n(p).user.profile.id&&((e=S.objectdata)==null?void 0:e.status)=="pending"||n(p).user.profile.role=="superadmin"||n(p).user.profile.role=="administrator")?(i(),w("div",Tt,[o(C,{size:"small",color:"primary",class:"no-print",onClick:Pe},{default:d(()=>[F("Add")]),_:1})])):y("",!0)]}),_:1}),o(g,{class:"for-print-flex mx-2 header mb-1 mt-0"},{default:d(()=>[Ut,jt,Et,Ot,Rt,Dt,Nt]),_:1}),(i(!0),w(O,null,P(k.value,(e,t)=>(i(),h(g,{key:t,class:"for-print-flex mx-2 row-bordered mb-1"},{default:d(()=>[l("div",It,f(e.item_description),1),l("div",Ft,f(e.asset_code),1),l("div",Bt,f(e.qty),1),l("div",Lt,f(e.uom),1),l("div",Pt,f(e.weight),1),l("div",Mt,f(e.item_value),1),l("div",zt,f(e.reason_for_request),1)]),_:2},1024))),128)),(i(!0),w(O,null,P(k.value,(e,t)=>(i(),h(g,{key:t,class:"no-print"},{default:d(()=>{var u,V,j;return[l("div",Qt,[(u=e.attachment)!=null&&u.id?(i(),h(g,{key:0,class:"px-1"},{default:d(()=>[l("div",$t,[o(L,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":v=>e.attachment.id=v},null,8,["modelValue","onUpdate:modelValue"]),!b.value||b.value&&r.value.requestor_id==n(p).user.profile.id?(i(),h(C,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:n(ye),size:"16px",color:"error",onClick:()=>Ne(t,e.attachment.id)},null,8,["icon","onClick"])):y("",!0),o(q,{onClick:()=>De(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),o(te,{modelValue:N.value,"onUpdate:modelValue":a[7]||(a[7]=v=>N.value=v),width:"95%","max-width":"900"},{default:d(()=>[o(q,{class:"bg-black"},{default:d(()=>[l("div",Yt,[o(G,{src:M.value+"/file/"+ae.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(i(),h(g,{key:1,class:"mt-0"},{default:d(()=>[l("div",Gt,[o(et,{color:"grey-lighten-4",class:"text-center"},{default:d(()=>[o(xe,{options:{multiSelect:!1,type:"request-asset"},onSelect:v=>je(t,v)},null,8,["onSelect"])]),_:2},1024)])]),_:2},1024))]),l("div",Ht,[o(ge,{modelValue:e.item_description,"onUpdate:modelValue":[v=>e.item_description=v,U],variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"ITEM DESC*"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Jt,[o(L,{modelValue:e.asset_code,"onUpdate:modelValue":v=>e.asset_code=v,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE","append-inner-icon":n(tt),"onClick:appendInner":v=>ie(e.asset_code,t)},null,8,["modelValue","onUpdate:modelValue","append-inner-icon","onClick:appendInner"]),(!n(A).params.id||r.value.requestor_id==n(p).user.profile.id&&((V=S.objectdata)==null?void 0:V.status)=="pending"||n(p).user.profile.role=="superadmin"||n(p).user.profile.role=="administrator")&&_.value.status!="complete"?(i(),h(H,{key:0,onClick:v=>Be(t),class:"ml-2 my-auto",size:"x-small",icon:n(at)},null,8,["onClick","icon"])):y("",!0)]),l("div",Kt,[o(L,{type:"number",modelValue:e.qty,"onUpdate:modelValue":[v=>e.qty=v,U],variant:"outlined",density:"compact","hide-details":"",label:"QTY*"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Wt,[o(B,{items:$e.value,modelValue:e.uom,"onUpdate:modelValue":[v=>e.uom=v,U],variant:"outlined",density:"compact","hide-details":"",label:"UOM*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),l("div",Zt,[o(L,{type:"number",modelValue:e.weight,"onUpdate:modelValue":v=>e.weight=v,variant:"outlined",density:"compact","hide-details":"",disabled:"",label:"WGT(KG)"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Xt,[o(L,{type:"number",modelValue:e.item_value,"onUpdate:modelValue":v=>e.item_value=v,variant:"outlined",density:"compact","hide-details":"",disabled:"",label:"VALUE"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",ea,[o(ge,{modelValue:e.reason_for_request,"onUpdate:modelValue":v=>e.reason_for_request=v,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON*"},null,8,["modelValue","onUpdate:modelValue"]),!b.value||b.value&&n(p).user.profile.id==S.objectdata.profile_id&&((j=S.objectdata)==null?void 0:j.status)=="pending"?(i(),h(H,{key:0,size:"small",onClick:()=>Me(e.id,t),icon:n(lt),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):y("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),r.value.request_type_id==2?(i(),h(q,{key:0},{default:d(()=>[o($,null,{default:d(()=>{var e;return[!b.value||b.value&&r.value.requestor_id==n(p).user.profile.id?(i(),w("div",ta,[aa,o(xe,{options:{multiSelect:!0,type:"request-asset"},onSelect:Ee})])):y("",!0),((e=x.value)==null?void 0:e.length)>0?(i(),h(g,{key:1,class:"px-1 mt-4"},{default:d(()=>[(i(!0),w(O,null,P(x.value,(t,u)=>(i(),w("div",{key:t.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[b.value&&(_.value.status=="pending"||_.value.status=="cancelled")?(i(),h(C,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:n(ye),size:"20px",color:"error",onClick:()=>Oe(t.id)},null,8,["icon","onClick"])):y("",!0),o(q,{onClick:()=>Re(t,u)},{default:d(()=>[t.mime=="image/jpeg"||t.mime=="image/png"?(i(),h(G,{key:0,src:M.value+"/file/"+t.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(i(),h(G,{key:1,src:M.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),o(te,{modelValue:N.value,"onUpdate:modelValue":a[9]||(a[9]=t=>N.value=t),width:"95%","max-width":"900"},{default:d(()=>[o(q,{class:"bg-black"},{default:d(()=>[o(st,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:K.value,"onUpdate:modelValue":a[8]||(a[8]=t=>K.value=t)},{default:d(()=>[(i(!0),w(O,null,P(x.value,(t,u)=>(i(),h(ot,{key:u,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[l("div",{style:dt(`${D.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[D.value=="jpg"||D.value=="jpeg"||D.value=="png"?(i(),h(G,{key:0,src:M.value+"/file/"+t.path},null,8,["src"])):y("",!0),D.value=="pdf"?(i(),w("object",{key:1,data:M.value+"/file/"+t.path,type:"application/pdf",width:"100%",height:"800px"},null,8,la)):y("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0)]}),_:1})]),_:1})):y("",!0),o(q,{class:"my-2"},{default:d(()=>[o($,null,{default:d(()=>[o(g,null,{default:d(()=>[l("div",sa,[oa,n(A).params.id?(i(),w("div",da,[o(C,{color:"info",size:"small",target:"_blank",href:Ge.value},{default:d(()=>[F("View Approval Page")]),_:1},8,["href"])])):y("",!0)]),o(ee)]),_:1}),o(g,{class:"no-print"},{default:d(()=>{var e,t;return[ia,l("div",ua,f((t=(e=_.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),na,ra]}),_:1}),o(g,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:d(()=>{var e,t;return[ca,l("div",va,f((t=(e=_.value)==null?void 0:e.profile)==null?void 0:t.display_name),1),pa,_a]}),_:1}),(i(!0),w(O,null,P(c.value,e=>(i(),h(g,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:d(()=>{var t;return[l("div",ma,f(W(e.approval_type)),1),l("div",fa,f((t=e==null?void 0:e.profile)==null?void 0:t.display_name),1),l("div",ha,[e.status?(i(),h(H,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?n(Ve):e.status=="pending"?n(we):e.status=="reject"?n(be):n(ke),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0)]),l("div",ya,f(e.date_approved),1)]}),_:2},1024))),128)),Y.value?(i(),w(O,{key:0},[(i(!0),w(O,null,P(T.value,(e,t)=>(i(),h(g,{class:"no-print",key:e.id},{default:d(()=>[l("div",ga,f(e.types?W(e.types):W(e.approval_type)),1),l("div",Va,[o(B,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[u=>e.profile_id=u,U],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),o(C,{variant:"text",size:"x-small"},{default:d(()=>[e.status?(i(),h(H,{key:0,class:"mx-2 my-3 no-print",icon:e.status=="awaiting-approval"?n(Ve):e.status=="pending"?n(we):e.status=="reject"?n(be):n(ke),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):y("",!0),o(it,{activator:"parent",location:"top","max-width":"400"},{default:d(()=>[F(f(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)]),l("div",wa,f(e.date_approved?n(Ce)(e.date_approved):""),1)]),_:2},1024))),128)),o(g,null,{default:d(()=>{var e;return[o(ee),l("div",ba,[(!n(A).params.id||r.value.requestor_id==n(p).user.profile.id&&((e=S.objectdata)==null?void 0:e.status)=="pending"||n(p).user.profile.role=="superadmin"||n(p).user.profile.role=="administrator")&&_.value.status!="complete"?(i(),h(C,{key:0,disabled:!J.value,onClick:Qe,class:"no-print",color:"primary"},{default:d(()=>[F(f(n(A).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):y("",!0)])]}),_:1})],64)):(i(),h(g,{key:1,class:"no-print"},{default:d(()=>[l("div",ka,f(re.value),1)]),_:1})),o(g,null,{default:d(()=>[xa]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(vt,{options:z.value},null,8,["options"]),o(te,{width:"500",modelValue:Q.value,"onUpdate:modelValue":a[11]||(a[11]=e=>Q.value=e)},{default:d(()=>[o(q,null,{default:d(()=>[o($,null,{default:d(()=>[o(n(pt.QrcodeStream),{onDecode:ie})]),_:1}),o(ut,null,{default:d(()=>[o(nt),o(C,{text:"Close",onClick:a[10]||(a[10]=e=>Q.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{ja as _};
