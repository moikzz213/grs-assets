import{r as s,i as Y,u as Z,L as ee,M as ae,o as te,j as f,k as d,C as le,K as N,b as p,l as o,N as $,A as F,D as K,O as se,P as oe,y as ne,x as ie,f as l,Q as de,G as u,z as V,m as z,I as x,c as L,d as re,F as ue,R as ce,S as pe,t as g,T as ve,U as me,a7 as fe,ac as ge}from"./app-85a535ad.js";import{_ as ye}from"./AppPageHeader-db166ab0.js";import{d as xe,e as he}from"./encrypt-971c7126.js";import{_ as _e}from"./AppSnackBar-b3e641cd.js";import{_ as be}from"./DialogForm-cd5b22f1.js";import"./index.esm-8ca19a7b.js";const ke=l("div",{class:"mt-2 mr-2"},"Show",-1),Ce={class:"v-col-12"},Ve={class:"text-right text-capitalize"},we={class:"d-flex align-center justify-end"},Ee={__name:"List",setup(Se){const k=s({status:!1,type:"primary",text:null}),n=Y(),T=Z(),w=ee(),r=s({loading:!1,data:[]}),S=s(0),U=s(0),y=s(""),I=s([10,20,50,100]),D=s(10),M=()=>{v()},B=()=>{localStorage.setItem("vendor-search",he(y.value)),v()},G=()=>{y.value="",localStorage.setItem("vendor-search",""),v()},c=s(w.params&&w.params.page?w.params.page:1),C=s([]),A=s(""),E=s(0),m=a=>{r.value.loading=!0,C.value[0]=a,E.value%2?C.value[1]="DESC":C.value[1]="ASC",E.value++,A.value=JSON.stringify(C.value),v()},v=async()=>{r.value.loading=!0,await N(n.token).get("/api/vendors/all?page="+c.value+"&show="+D.value+"&search="+y.value+"&sort="+A.value).then(a=>{S.value=a.data.last_page?a.data.last_page:a.data.length,c.value=a.data.current_page?a.data.current_page:c.value,U.value=a.data.total?a.data.total:a.data.length,r.value.data=a.data.data?a.data.data:a.data,r.value.loading=!1}).catch(a=>{r.value.loading=!1})};ae(c,(a,e)=>{c.value&&a!=e&&(T.push({name:"PaginatedVendors",params:{page:c.value}}).catch(i=>{}),v(c.value))});const J=a=>{h.value={},b.value=a},Q=async a=>{b.value=!1,a.profile_id=n.user.profile.id,await N(n.token).post("/api/vendors/store-update/data",a).then(e=>{k.value={status:!0,type:"success",text:e.data.message},v()}).catch(e=>{r.value.loading=!1,console.log(e)})},h=s({}),H=s([{name:"title",label:"Vendor",required:!0,type:"text"},{name:"contact_name",label:"Name",required:!0,type:"text"},{name:"contact_email",label:"Email",required:!0,type:"email"},{name:"contact_no",label:"Contact",required:!1,type:"number"},{name:"address",label:"Address",required:!1,type:"text"}]),W=a=>{h.value=Object.assign({},a),h.value.type="vendor",b.value=!0},_=s(!1),O=async(a,e)=>{k.value={status:!0,type:"info",text:"Please wait..."},_.value=!0;let i={id:a,status:e,profile_id:n.user.profile.id};await N(n.token).post("/api/vendors/status-change/data",i).then(t=>{setTimeout(()=>{k.value={status:!0,type:"success",text:t.data.message},v(),_.value=!1},600)}).catch(t=>{r.value.loading=!1})},b=s(!1),X=()=>{h.value="",b.value=!0};return te(()=>{let a=localStorage.getItem("vendor-search");a&&(y.value=xe(a)),v()}),(a,e)=>(p(),f(le,null,{default:d(()=>[o(ye,{title:"Vendor List"}),o(K,{class:"mb-3"},{default:d(()=>[o($,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[o(F,{class:"px-5"},{default:d(()=>[o(K,null,{default:d(()=>[o($,{class:"v-col-6 v-col-md-2 v-col-sm-6 d-flex my-2"},{default:d(()=>[ke,o(se,{items:I.value,modelValue:D.value,"onUpdate:modelValue":[e[0]||(e[0]=i=>D.value=i),M],variant:"outlined",density:"compact","hide-details":"",label:"Entry"},null,8,["items","modelValue"])]),_:1}),o(oe),o($,{class:"v-col-6 v-col-md-3 v-col-sm-6 my-2"},{default:d(()=>[o(ne,{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=i=>y.value=i),variant:"outlined",density:"compact",clearable:"",label:"Search",type:"text","hide-details":"","onClick:appendOuter":B,onKeydown:ie(B,["enter"]),"onClick:clear":e[2]||(e[2]=i=>G("search"))},null,8,["modelValue","onKeydown"])]),_:1})]),_:1})]),_:1})]),_:1}),l("div",Ce,[o(F,{loading:r.value.loading},{default:d(()=>[o(de,null,{default:d(()=>{var i;return[l("thead",null,[l("tr",null,[l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[3]||(e[3]=t=>m("title"))}," Vendors "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[4]||(e[4]=t=>m("contact_name"))}," Name "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[5]||(e[5]=t=>m("contact_email"))}," Email "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[6]||(e[6]=t=>m("contact_no"))}," Contact "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[7]||(e[7]=t=>m("address"))}," Address "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[8]||(e[8]=t=>m("profile_id"))}," Updated By "),l("th",{class:"text-left text-capitalize cursor-pointer",onClick:e[9]||(e[9]=t=>m("status"))}," Status "),l("th",Ve,[u(n).user.role=="superadmin"||(i=u(n).capabilities)!=null&&i.includes("add")?(p(),f(V,{key:0,size:"small",color:"primary",onClick:X},{default:d(()=>[z("Add New")]),_:1})):x("",!0)])])]),l("tbody",null,[(p(!0),L(ue,null,re(r.value.data,t=>{var P,j,R,q;return p(),L("tr",{key:t.id},[l("td",null,g(t.title),1),l("td",null,g(t.contact_name),1),l("td",null,g(t.contact_email),1),l("td",null,g(t.contact_no),1),l("td",null,g(t.address),1),l("td",null,g((P=t.profile)==null?void 0:P.display_name),1),l("td",null,[o(ve,{class:"text-uppercase",size:"small",color:`${t.status=="active"?"success":"error"}`},{default:d(()=>[z(g(t.status),1)]),_:2},1032,["color"])]),l("td",null,[l("div",we,[u(n).user.role=="superadmin"||(j=u(n).capabilities)!=null&&j.includes("edit")?(p(),f(V,{key:0,loading:_.value,onClick:()=>W(t),icon:u(me),title:"Edit",density:"compact",class:"mx-2"},null,8,["loading","onClick","icon"])):x("",!0),t.status=="active"&&(u(n).user.role=="superadmin"||(R=u(n).capabilities)!=null&&R.includes("delete"))?(p(),f(V,{key:1,density:"compact",loading:_.value,icon:u(fe),onClick:()=>O(t.id,"disabled"),title:"Disable",class:"mx-2 text-error"},null,8,["loading","icon","onClick"])):x("",!0),t.status=="disabled"&&(u(n).user.role=="superadmin"||(q=u(n).capabilities)!=null&&q.includes("delete"))?(p(),f(V,{key:2,loading:_.value,density:"compact",onClick:()=>O(t.id,"active"),icon:u(ge),title:"Enable",class:"mx-2 text-success"},null,8,["loading","onClick","icon"])):x("",!0)])])])}),128))])]}),_:1}),r.value.data.length==0?(p(),f(ce,{key:0,class:"pa-3 text-center w-100"},{default:d(()=>[z("No records found")]),_:1})):x("",!0)]),_:1},8,["loading"]),S.value>1?(p(),f(pe,{key:0,modelValue:c.value,"onUpdate:modelValue":e[10]||(e[10]=i=>c.value=i),class:"my-4",length:S.value,"total-visible":8,variant:"elevated","active-color":"primary",density:"comfortable",disabled:r.value.loading},null,8,["modelValue","length","disabled"])):x("",!0)])]),_:1}),o(be,{"free-form":H.value,"add-new-dialog":b.value,title:"Vendor","data-object":h.value,onCancelled:J,onSave:Q},null,8,["free-form","add-new-dialog","data-object"]),o(_e,{options:k.value},null,8,["options"])]),_:1}))}};export{Ee as default};
