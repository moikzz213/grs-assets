import{I as Ue,r as m,c as V,w as n,m as Oe,o as s,s as C,b as e,d as a,e as o,j as re,y as p,t as _,E as y,H as L,af as de,p as r,q as W,D as A,ai as he,k as S,W as ge,X as ce,ay as Ie,_ as P,ag as F,i as M,az as ne,aA as ie,aB as xe,aC as ke,F as X,aD as Se,Y as Pe,Z as De,ae as z,f as Ne,a2 as $e,a3 as be}from"./app-f0f033b0.js";import{u as ue}from"./formatDate-b9aad8c5.js";import{_ as Be}from"./AppSnackBar-aadc0303.js";const Le={class:"v-col-3 mt-auto font-weight-bold"},Fe={class:"d-flex"},Me=e("div",{class:"mr-2"},"FROM:",-1),ze={class:"d-flex"},He=e("div",{class:"mr-6 pr-2"},"TO:",-1),Ke={class:"v-col-6 text-center"},Ye=e("img",{src:"/assets/images/grandiose-logo.jpg",style:{"max-height":"100px"}},null,-1),Ge=e("br",null,null,-1),Qe={class:"v-col-3 mt-auto font-weight-bold text-right"},Je=e("br",null,null,-1),We=e("div",{class:"v-col-12 v-col-md-1 py-1"},"IMG",-1),Xe=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ITEM DESC",-1),Ze=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ASSET NO",-1),el=e("div",{class:"v-col-12 v-col-md-1 py-1"},"QTY",-1),ll=e("div",{class:"v-col-12 v-col-md-1 py-1"},"UOM",-1),al=e("div",{class:"v-col-12 v-col-md-1 py-1"},"WEIGHT",-1),sl=e("div",{class:"v-col-12 v-col-md-1 py-1"},"ITEM VALUE",-1),tl=e("div",{class:"v-col-12 v-col-md-1 py-1"},"COUNTRY OF ORIGIN",-1),ol=e("div",{class:"v-col-12 v-col-md-2 py-1"},[o(" REMARKS"),e("br"),o("REASON FOR REQUEST ")],-1),rl={class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},dl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},cl={key:0},nl={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},il={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},ul={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},vl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},pl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},_l={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},yl={class:"v-col-12 v-col-md-1 py-1 px-1 d-flex"},fl={class:"v-col-12 v-col-md-2 py-1 px-1 d-flex"},ml={key:0,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},hl={key:1,class:"v-col-12 v-col-md-2 py-1 d-flex"},gl={key:0},xl=e("strong",null," Asset Supervisor - Projects",-1),kl=e("br",null,null,-1),bl={key:2,class:"v-col-12 v-col-md-2 py-1"},Vl={key:0},wl=e("strong",null," Asset Supervisor - Projects",-1),El=e("br",null,null,-1),Cl={style:{"text-wrap":"wrap"}},Al={key:1},ql=e("strong",null," Commercial Manager - Projects",-1),Rl=e("br",null,null,-1),jl={style:{"text-wrap":"wrap"}},Tl={key:2},Ul=e("strong",null," Releasing",-1),Ol=e("br",null,null,-1),Il={style:{"text-wrap":"wrap"}},Sl={key:3,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},Pl={key:0},Dl=e("strong",null," Asset Supervisor - Projects",-1),Nl=e("br",null,null,-1),$l={style:{"text-wrap":"wrap"}},Bl={key:1},Ll=e("strong",null," Commercial Manager - Projects",-1),Fl=e("br",null,null,-1),Ml={style:{"text-wrap":"wrap"}},zl={key:2},Hl=e("strong",null," Releasing",-1),Kl=e("br",null,null,-1),Yl={style:{"text-wrap":"wrap"}},Gl={key:0,class:"my-auto"},Ql={key:4,class:"v-col-12 v-col-md-2 py-1 d-flex justify-space-between"},Jl={key:0,style:{"border-bottom":"1px solid #000000"},class:"pa-1"},Wl={key:0},Xl=e("strong",null," Asset Supervisor - Projects",-1),Zl=e("br",null,null,-1),ea={style:{"text-wrap":"wrap"}},la={key:1},aa=e("strong",null," Commercial Manager - Projects",-1),sa=e("br",null,null,-1),ta={style:{"text-wrap":"wrap"}},oa={key:2},ra=e("strong",null," Releasing",-1),da=e("br",null,null,-1),ca={style:{"text-wrap":"wrap"}},na={key:3},ia=e("strong",null," Receiver",-1),ua={style:{"text-wrap":"wrap"}},va={key:1},pa={key:2},_a={key:3},ya={key:0,class:"v-col-12 text-center font-weight-bold text-info"},fa=e("br",null,null,-1),ma={key:1,class:"v-col-12 text-center font-weight-bold text-info"},ha={key:0,class:"ml-5 d-flex"},ga=e("div",{class:"px-2 mr-5"},"|",-1),xa={key:1,class:"ml-6"},ka={class:"v-col-12 px-0 my-0"},ba=["data"],Va={class:"v-col-12 v-col-md-3 pa-0 mb-4"},wa=e("div",{class:"text-center py-1 font-weight-bold"}," Requested By ",-1),Ea={class:"text-center py-1"},Ca={class:"text-center py-1"},Aa={class:"text-center text-caption"},qa={key:0},Ra={key:0,class:"d-flex"},ja=["onClick"],Ta=["onClick"],Ua={key:1},Oa=["onClick"],Ia=["onClick"],Sa={class:"text-center py-1"},Pa={class:"text-center py-1"},Da={class:"text-center text-caption"},Na={key:2,class:"v-col-12 text-caption",style:{border:"1px solid red","border-radius":"5px"}},$a={class:"v-col-12 text-center"},Ba=e("div",{class:"v-col-12 text-center mt-3 font-weight-bold"}," REASON FOR REJECTION ",-1),La={class:"v-col-12"},Ka={__name:"Approvals",setup(Fa){const c=Ue(),ve=m(!0),i=m({}),Z=m({}),k=m(!1),ee=m(!1),le=m(!1),R=m(!1),D=m([]),H=m(!1),N=m(""),ae=m(!1),Ve=m(c.query.id),h=m(""),pe=m(0),Q=m([]),_e=async()=>{let u={id:c.query.id,profile_id:c.query.pid,order:c.query.o};if(!c.query.id||!c.query.pv){ve.value=!1;return}await axios.post("/api/pv/fetch/request-assets/data",u).then(d=>{var g,j,T,x,q,Y,G,l,b,w,E;if(i.value=d.data,!i.value.access){ve.value=!1;return}h.value=(j=(g=d.data)==null?void 0:g.data)==null?void 0:j.status,pe.value=(x=(T=d.data)==null?void 0:T.data)==null?void 0:x.request_type_id,Q.value=(Y=(q=d.data)==null?void 0:q.data)==null?void 0:Y.attachment,((b=(l=(G=i.value)==null?void 0:G.data)==null?void 0:l.request_approvals)==null?void 0:b.length)>0&&(k.value=i.value.data.request_approvals.filter(v=>{var t;return v.profile_id==c.query.pid&&v.orders==c.query.o&&v.status=="awaiting-approval"&&((t=v.profile)==null?void 0:t.role)=="asset-supervisor"})[0],ee.value=i.value.data.request_approvals.filter(v=>v.profile_id==c.query.pid&&v.orders==c.query.o&&v.status=="awaiting-approval"&&v.approval_type=="releasing")[0],le.value=i.value.data.request_approvals.filter(v=>{var t;return v.profile_id==c.query.pid&&v.orders==c.query.o&&v.status=="awaiting-approval"&&((t=v.profile)==null?void 0:t.role)=="commercial-manager"})[0],R.value=i.value.data.request_approvals.filter(v=>v.profile_id==c.query.pid&&v.orders==c.query.o&&v.status=="awaiting-approval"&&v.approval_type=="receiver")[0],oe.value=i.value.data.request_approvals[i.value.data.request_approvals.length-1].approval_type,(R.value||k.value)&&h.value!="cancelled"&&(ae.value=!0)),D.value=(E=(w=i.value)==null?void 0:w.data)==null?void 0:E.items}).catch(d=>{console.log(d.response.data)})},se=m(1),$=m("image"),we=(u,d)=>{let g=u.path.split(".");$.value=g[g.length-1],se.value=d,B.value=!0},Ee=()=>{window.print()},te=m(window.location.origin),B=m(!1),ye=m(1),Ce=u=>{ye.value=u,B.value=!0},oe=m(""),fe=m({}),Ae=u=>{H.value=!0,fe.value=u},qe=()=>{H.value=!1,N.value=""},J=(u,d=null)=>{if(H.value=!1,h.value!="cancelled"&&(u.status=="awaiting-approval"||u.status=="reject")&&c.query.pid==u.profile_id&&c.query.o==u.orders){Z.value={status:!0,type:"info",text:"Please wait..."};let g=[];(k.value||le.value||R.value||ee.value)&&(g=D.value.map((x,q)=>(delete x.created_at,delete x.assets,delete x.updated_at,delete x.attachment,x)));let j={},T="";N.value&&d&&(T=N.value),j={profile_id:c.query.pid,id:c.query.id,order:c.query.o,type:i.value.data.types,assets:g,is_reject:T,requestor_id:i.value.data.profile_id},axios.post("/api/pv/store/request-asset/approve-data",j).then(x=>{let q="success";x.data.success||(q="error"),Z.value={status:!0,type:q,text:x.data.message},ae.value=!1,setTimeout(()=>{_e()},500)}).catch(x=>{console.log(x.response.data)});return}},Re=u=>{if(u=="approve")return"Approved";if(u=="reviewer")return"Reviewed";if(u=="receiver")return"Received";if(u=="transport")return"Transport Arranged";if(u=="releasing")return"Released";if(u=="verify")return"Verified"},je=()=>{let u=R.value;D.value.map(d=>{u?d.is_received=K.value:d.is_available=K.value})},Te=(u,d=6)=>{let g="00000"+u;return g.substring(g.length-d)},me=()=>{let u=!0,d=R.value;D.value.map(g=>{d?g.is_received||(u=!1):g.is_available||(u=!1)}),K.value=u},K=m(!1);return _e(),(u,d)=>(s(),V(Oe,{style:{"max-width":"90%"},class:"mt-0 pt-0"},{default:n(()=>{var g,j,T,x,q,Y,G;return[((g=D.value)==null?void 0:g.length)>0?(s(),V(C,{key:0,class:"mt-0 pt-0 no-print mt-2"},{default:n(()=>[e("div",null,[a(re,{color:"primary",size:"small",onClick:Ee},{default:n(()=>[o("Print")]),_:1})])]),_:1})):p("",!0),a(C,{class:"mt-0 pt-0"},{default:n(()=>{var l,b,w,E,v,t,U,O,I;return[e("div",Le,[e("div",Fe,[Me,e("div",null,_((b=(l=i.value.data)==null?void 0:l.transfer_from)==null?void 0:b.title),1)]),e("div",ze,[He,e("div",null,_((E=(w=i.value.data)==null?void 0:w.transfer_to)==null?void 0:E.title),1)])]),e("div",Ke,[Ye,Ge,e("strong",null,_((t=(v=i.value.data)==null?void 0:v.setup)==null?void 0:t.title),1)]),e("div",Qe,[o(" SN-"+_(((O=(U=i.value)==null?void 0:U.data)==null?void 0:O.types)=="request"?"5":"3")+_(Te(Ve.value)),1),Je,o(" "+_(y(ue)((I=i.value.data)==null?void 0:I.created_at)),1)])]}),_:1}),a(L,{class:"my-5"}),a(C,null,{default:n(()=>[We,Xe,Ze,el,ll,al,sl,tl,ol,e("div",rl,[o(" REMARKS "),k.value||R.value?(s(),V(de,{key:0,modelValue:K.value,"onUpdate:modelValue":[d[0]||(d[0]=l=>K.value=l),je],class:"pa-0 ma-0 v-col-1","hide-details":"",disabled:h.value=="cancelled",variant:"underlined",density:"compact"},null,8,["modelValue","disabled"])):p("",!0)])]),_:1}),(s(!0),r(X,null,W(D.value,(l,b)=>(s(),V(C,{class:"mt-1 approval-form-pr",key:l.id},{default:n(()=>{var w,E,v,t,U,O,I;return[e("div",dl,[(w=l.attachment)!=null&&w.id?(s(),r("div",cl,[a(S,{onClick:()=>Ce(l),maxHeight:"40",variant:"text",class:"ma-2"},{default:n(()=>[a(A,{size:"large",icon:y(he),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"]),a(ce,{modelValue:B.value,"onUpdate:modelValue":d[1]||(d[1]=f=>B.value=f),width:"95%","max-width":"900"},{default:n(()=>[a(S,{class:"bg-black"},{default:n(()=>[e("div",nl,[a(ge,{src:te.value+"/file/"+ye.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])])):(s(),V(S,{key:1,maxHeight:"40",variant:"text",class:"ma-2"},{default:n(()=>[a(A,{size:"large",icon:y(Ie)},null,8,["icon"])]),_:1})),a(P,{value:l.item_description,variant:"underlined",density:"compact","hide-details":"",rows:"2",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0},null,8,["value"])]),e("div",il,[a(M,{modelValue:l.asset_code,"onUpdate:modelValue":f=>l.asset_code=f,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||h.value=="cancelled",class:F(`${!k.value||h.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",ul,[a(M,{value:l.qty,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",vl,[a(M,{value:l.uom,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",type:"number",readonly:!0},null,8,["value"])]),e("div",pl,[a(M,{modelValue:l.weight,"onUpdate:modelValue":f=>l.weight=f,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||h.value=="cancelled",class:F(`${!k.value||h.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",_l,[a(M,{modelValue:l.item_value,"onUpdate:modelValue":f=>l.item_value=f,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||h.value=="cancelled",class:F(`${!k.value||h.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`)},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",yl,[a(M,{modelValue:l.country_of_origin,"onUpdate:modelValue":f=>l.country_of_origin=f,variant:"underlined",density:"compact","hide-details":"",readonly:!k.value||h.value=="cancelled",class:F(`${!k.value||h.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`),style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","readonly","class"])]),e("div",fl,[a(P,{value:l.reason_for_request,variant:"underlined",density:"compact","hide-details":"",class:"bg-light-gray d-flex flex-column-reverse",readonly:!0,rows:"2"},null,8,["value"])]),k.value?(s(),r("div",ml,[a(P,{modelValue:l.remarks,"onUpdate:modelValue":f=>l.remarks=f,variant:"underlined",density:"compact","hide-details":"",class:F(["text-remarks",`${h.value=="cancelled"?"bg-light-gray d-flex flex-column-reverse":""}`]),placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue","class"]),a(de,{disabled:h.value=="cancelled",modelValue:l.is_available,"onUpdate:modelValue":[f=>l.is_available=f,me],class:"pa-0 ma-0 v-col-1","hide-details":"",variant:"underlined",density:"compact"},null,8,["disabled","modelValue","onUpdate:modelValue"])])):p("",!0),le.value?(s(),r("div",hl,[e("div",null,[l.remarks?(s(),r("div",gl,[xl,o(),kl,e("p",null,_(l.remarks),1),o(" ------- ")])):p("",!0),a(P,{modelValue:l.remarks_commercial,"onUpdate:modelValue":f=>l.remarks_commercial=f,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])])):ee.value?(s(),r("div",bl,[e("div",null,[l.remarks?(s(),r("div",Vl,[wl,o(),El,e("pre",Cl,_(l.remarks),1),o(" ------- ")])):p("",!0),l.remarks_commercial?(s(),r("div",Al,[ql,o(),Rl,e("pre",jl,_(l.remarks_commercial),1),o(" ------- ")])):p("",!0),l.remarks_release?(s(),r("div",Tl,[Ul,o(),Ol,e("pre",Il,_(l.remarks_release),1),o(" ------- ")])):p("",!0)]),a(P,{modelValue:l.remarks_release,"onUpdate:modelValue":f=>l.remarks_release=f,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])])):R.value?(s(),r("div",Sl,[e("div",null,[e("div",null,[l.remarks?(s(),r("div",Pl,[Dl,o(),Nl,e("pre",$l,_(l.remarks),1),o(" ------- ")])):p("",!0),l.remarks_commercial?(s(),r("div",Bl,[Ll,o(),Fl,e("pre",Ml,_(l.remarks_commercial),1),o(" ------- ")])):p("",!0),l.remarks_release?(s(),r("div",zl,[Hl,o(),Kl,e("pre",Yl,_(l.remarks_release),1),o(" ------- ")])):p("",!0)]),a(P,{modelValue:l.remarks_receive,"onUpdate:modelValue":f=>l.remarks_receive=f,variant:"underlined",density:"compact","hide-details":"",class:"text-remarks",placeholder:"Add remarks here",rows:"2"},null,8,["modelValue","onUpdate:modelValue"])]),(v=(E=i.value)==null?void 0:E.data)!=null&&v.is_available?(s(),r("div",Gl,[a(A,{class:"mt-3",icon:l.is_available?y(ne):y(ie),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):p("",!0),a(de,{modelValue:l.is_received,"onUpdate:modelValue":[f=>l.is_received=f,me],class:"pa-0 ma-0 v-col-1 my-auto","hide-details":"",variant:"underlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])])):(s(),r("div",Ql,[l.remarks||l.remarks_commercial||l.remarks_release||l.remarks_receive?(s(),r("div",Jl,[l.remarks?(s(),r("div",Wl,[Xl,o(),Zl,e("pre",ea,_(l.remarks),1),o(" ------- ")])):p("",!0),l.remarks_commercial?(s(),r("div",la,[aa,o(),sa,e("pre",ta,_(l.remarks_commercial),1),o(" ------- ")])):p("",!0),l.remarks_release?(s(),r("div",oa,[ra,o(),da,e("pre",ca,_(l.remarks_release),1),o(" ------- ")])):p("",!0),l.remarks_receive?(s(),r("div",na,[ia,o(),e("pre",ua,_(l.remarks_receive),1)])):p("",!0)])):(s(),r("div",va)),(U=(t=i.value)==null?void 0:t.data)!=null&&U.is_available?(s(),r("div",pa,[a(A,{class:"mt-3",icon:l.is_available?y(ne):y(ie),color:`${l.is_available?"success":"error"}`},null,8,["icon","color"])])):p("",!0),((I=(O=i.value)==null?void 0:O.data)==null?void 0:I.status)=="complete"&&oe.value=="receiver"?(s(),r("div",_a,[a(A,{class:"mt-3",icon:l.is_received?y(xe):y(ke),color:`${l.is_received?"success":"error"}`},null,8,["icon","color"])])):p("",!0)]))]}),_:2},1024))),128)),k.value?(s(),V(C,{key:1,class:"mt-3"},{default:n(()=>[h.value!=="cancelled"?(s(),r("div",ya,[o(" YOU CAN UPDATE SOME DATA AND"),fa,o(" PLEASE TICK CHECKBOX IF ASSET IS AVAILABLE BEFORE CLICKING THE APPROVE BUTTON ")])):(s(),r("div",ma," THIS REQUEST HAS BEEN CANCELLED. "))]),_:1})):p("",!0),(T=(j=i.value)==null?void 0:j.data)!=null&&T.is_available&&h.value!=="cancelled"?(s(),V(C,{key:2,class:"mt-6 mb-2"},{default:n(()=>[a(S,{loading:ae.value,variant:"text",class:"v-col-12 text-center pt-2 font-weight-bold pb-0 d-flex justify-center"},{default:n(()=>{var l;return[e("div",null,[a(A,{icon:y(ne),color:"success"},null,8,["icon"]),o(" AVAILABLE "),a(A,{icon:y(ie),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT AVAILABLE ")]),R.value?(s(),r("div",ha,[ga,a(A,{icon:y(Se)},null,8,["icon"]),o(" TICK RECEIVED ASSETS ")])):p("",!0),((l=i.value.data)==null?void 0:l.status)=="complete"&&oe.value=="receiver"?(s(),r("div",xa,[a(A,{icon:y(xe),color:"success"},null,8,["icon"]),o(" RECEIVED "),a(A,{icon:y(ke),color:"error",class:"ml-5"},null,8,["icon"]),o(" NOT RECEIVE ")])):p("",!0)]}),_:1},8,["loading"])]),_:1})):p("",!0),a(C,{class:"mt-3"},{default:n(()=>[e("div",ka,[a(L),a(L)])]),_:1}),pe.value==2&&((x=Q.value)==null?void 0:x.length)>0?(s(),V(C,{key:3,class:"my-3 d-flex justify-center"},{default:n(()=>[(s(!0),r(X,null,W(Q.value,(l,b)=>(s(),r("div",{key:l.id,class:"pa-2",style:{position:"relative"}},[a(S,{onClick:()=>we(l,b)},{default:n(()=>[a(A,{size:"large",icon:y(he),color:"success"},null,8,["icon"])]),_:2},1032,["onClick"])]))),128)),a(ce,{modelValue:B.value,"onUpdate:modelValue":d[3]||(d[3]=l=>B.value=l),width:"95%","max-width":"900"},{default:n(()=>[a(S,{class:"bg-black"},{default:n(()=>[a(Pe,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:se.value,"onUpdate:modelValue":d[2]||(d[2]=l=>se.value=l)},{default:n(()=>[(s(!0),r(X,null,W(Q.value,(l,b)=>(s(),V(De,{key:b,"reverse-transition":"fade",transition:"fade"},{default:n(()=>[e("div",{style:z(`${$.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[$.value=="jpg"||$.value=="jpeg"||$.value=="png"?(s(),V(ge,{key:0,src:te.value+"/file/"+l.path},null,8,["src"])):p("",!0),$.value=="pdf"?(s(),r("object",{key:1,data:te.value+"/file/"+l.path,type:"application/pdf",width:"100%",height:"800px"},null,8,ba)):p("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):p("",!0),((q=i.value.data)==null?void 0:q.request_approvals.length)>0?(s(),V(C,{key:4},{default:n(()=>{var l,b,w,E,v;return[e("div",Va,[e("div",{class:"text-center mx-2 py-4 font-weight-bold",style:z(`${h.value=="cancelled"?"color: red;":"color: rgb(3, 167, 3);"} border: 1px solid #ccc; font-size: 17px;`)},_(h.value=="cancelled"?"CANCELLED":"APPROVED"),5),wa,e("div",Ea,_((b=(l=i.value.data)==null?void 0:l.profile)==null?void 0:b.display_name),1),e("div",Ca,_((E=(w=i.value.data)==null?void 0:w.profile)==null?void 0:E.designation),1),e("div",Aa,_(y(ue)((v=i.value.data)==null?void 0:v.created_at)),1)]),(s(!0),r(X,null,W(i.value.data.request_approvals,t=>{var U,O,I;return s(),r("div",{class:"v-col-12 v-col-md-3 pa-0 mb-4",key:t.id},[((U=t.profile)==null?void 0:U.role)=="commercial-manager"&&y(c).query.pid==t.profile_id&&y(c).query.o==t.orders?(s(),r("div",qa,[t.status=="awaiting-approval"?(s(),r("div",Ra,[e("div",{onClick:f=>Ae(t),class:"cursor-pointer text-center py-5 v-col-6",style:z(`border:1px solid #ccc; ${y(c).query.pid==t.profile_id&&y(c).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":"background-color: none;"}`)}," REJECT ",12,ja),e("div",{onClick:f=>J(t,"reject"),class:"cursor-pointer text-center py-5 v-col-6",style:z(`border:1px solid #ccc; ${y(c).query.pid==t.profile_id&&y(c).query.o==t.orders?"background-color: rgb(3, 167, 3);color:#fff;":"background-color: none"}`)}," APPROVE ",12,Ta)])):t.status=="reject"||t.status=="done"||t.status=="pending"?(s(),r("div",Ua,[e("div",{onClick:f=>J(t),class:"cursor-pointer text-center mx-2 py-5",style:z(`border:1px solid #ccc; ${t.status=="reject"&&y(c).query.pid==t.profile_id&&y(c).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},_(t.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,Oa)])):p("",!0)])):(s(),r("div",{key:1,onClick:f=>J(t),class:"cursor-pointer text-center mx-2 py-5",style:z(`border:1px solid #ccc; ${h.value!="cancelled"&&t.status=="awaiting-approval"&&y(c).query.pid==t.profile_id&&y(c).query.o==t.orders?"background-color: rgb(182, 3, 3);color:#fff;":t.status=="done"?"background-color: none;color:rgb(3, 167, 3); font-weight:bold;font-size:17px;padding-top:16px !important;padding-bottom:16px !important;":"background-color: gray; color:#fff;"}`)},_(t.status=="done"?"APPROVED":"CLICK TO APPROVE"),13,Ia)),e("div",{class:F(`text-center py-1 font-weight-bold ${t.status=="reject"?"text-error text-uppercase":""}`)},_(t.status=="reject"?"Rejected":Re(t.approval_type))+" By ",3),e("div",Sa,_((O=t.profile)==null?void 0:O.display_name),1),e("div",Pa,_((I=t.profile)==null?void 0:I.designation),1),e("div",Da,_(t.date_approved?y(ue)(t.date_approved):""),1),t.reason_rejected?(s(),r("div",Na,[o(" Reason rejected "),a(L,{class:"my-2"}),o(" "+_(t.reason_rejected),1)])):p("",!0)])}),128))]}),_:1})):p("",!0),((G=(Y=i.value)==null?void 0:Y.data)==null?void 0:G.status)!=="complete"?(s(),V(C,{key:5,class:"no-print"},{default:n(()=>[e("div",$a,[a(L),o(" You will receive a notification once you click the approve button. "),a(L)])]),_:1})):p("",!0),a(ce,{width:"500",modelValue:H.value,"onUpdate:modelValue":d[6]||(d[6]=l=>H.value=l),persistent:""},{default:n(()=>[a(S,null,{default:n(()=>[a(Ne,null,{default:n(()=>[a(C,null,{default:n(()=>[Ba,e("div",La,[a(P,{modelValue:N.value,"onUpdate:modelValue":d[4]||(d[4]=l=>N.value=l),label:"STATE YOUR REASON HERE",variant:"outlined"},null,8,["modelValue"])])]),_:1})]),_:1}),a($e,null,{default:n(()=>[a(be),a(re,{onClick:qe},{default:n(()=>[o("Cancel")]),_:1}),a(re,{color:"success",disabled:!N.value,onClick:d[5]||(d[5]=l=>J(fe.value,"reject"))},{default:n(()=>[o("Confirm")]),_:1},8,["disabled"]),a(be)]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Be,{options:Z.value},null,8,["options"])]}),_:1}))}};export{Ka as default};
