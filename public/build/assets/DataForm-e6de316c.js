import{a as tt,r as p,G as at,u as lt,O as oe,I as st,H as ge,o as i,c as y,w as d,d as o,v as ot,k as O,V as dt,b as s,t as _,p as b,z as g,ae as Ve,y as n,E as de,f as Y,s as V,j as C,e as A,J as F,i as H,q as M,F as L,P as be,R as ie,Q as J,M as it,U as ke,Y as ut,C as Z,D as rt,ag as nt,S as ct,T as vt,ac as pt,aZ as we,a_ as xe,a$ as qe,b0 as Se,b1 as _t,Z as mt,_ as ft,m as ht,n as D}from"./app-94b91173.js";import{_ as yt}from"./ApppageHeader-4c89a53d.js";import{_ as Ce,r as Te}from"./Studio-42281137.js";import{_ as gt}from"./AppSnackBar-62abbed2.js";import{Q as Vt}from"./QrcodeReaderVue3.common-2297b99b.js";import{d as bt,e as kt}from"./encrypt-983f7128.js";import{u as Ae}from"./formatDate-559e9d83.js";const wt={key:0,class:"text-error text-h6"},xt={class:"col-12 v-col-md-4"},qt={class:"v-col-12 v-col-md-8"},St={key:0,class:"text-right no-print"},Ct={class:"v-col-12 v-col-md-6"},Tt={class:"v-col-12 v-col-md-6"},At={class:"v-col-12 v-col-md-6"},Ut={class:"v-col-12 v-col-md-6 d-flex"},jt={class:"v-col-12"},Et={class:"wd-100"},Ot={class:"wd-60"},Dt={class:"wd-40"},Rt={class:"wd-60"},It={class:"wd-40"},Nt={class:"wd-100"},Ft={key:0,class:"v-col-12"},Lt=s("div",{class:"wd-30"},"ITEM DESCRIPTION",-1),Pt=s("div",{class:"wd-15"},"ASSET CODE",-1),zt=s("div",{class:"wd-5"},"QTY",-1),Bt=s("div",{class:"wd-10"},"UOM",-1),Mt=s("div",{class:"wd-10"},"WEIGHT",-1),$t=s("div",{class:"wd-10"},"VALUE",-1),Qt=s("div",{class:"wd-15"},"REASON FOR REQUEST",-1),Yt={class:"wd-30"},Gt={class:"wd-15"},Kt={class:"wd-5"},Ht={class:"wd-10"},Jt={class:"wd-10"},Zt={class:"wd-10"},Wt={class:"wd-15"},Xt={class:"v-col-12 v-col-md-1 px-1"},ea={class:"v-col-12 v-col-md-12 pa-2",style:{position:"relative"}},ta={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},aa={class:"v-col-12 pt-0 pb-0"},la={class:"v-col-12 v-col-md-1 custom-width-description"},sa={class:"v-col-12 v-col-md-2 d-flex"},oa={class:"v-col-12 v-col-md-1"},da={class:"v-col-12 v-col-md-1 custom-width-uom"},ia={class:"v-col-12 v-col-md-1 mt-3"},ua=s("br",null,null,-1),ra=s("small",null,"(KG)",-1),na={class:"v-col-12 v-col-md-1 mt-3"},ca=s("br",null,null,-1),va=s("small",null,"(AED)",-1),pa={class:"v-col-12 v-col-md-2 d-flex"},_a={key:0},ma=s("div",null,"Additional File can be upload here",-1),fa=["data"],ha={class:"v-col-12 font-weight-bold text-uppercase d-flex justify-space-between"},ya=s("div",null,"APPROVAL SETUP",-1),ga={key:0,class:"no-print"},Va=s("div",{class:"v-col-12 v-col-md-2"},"Requestor",-1),ba={class:"v-col-12 v-col-md-6 d-flex"},ka=s("div",{class:"v-col-12 v-col-md-2"},"Date Approved",-1),wa={key:0,class:"v-col-12 v-col-md-2"},xa=s("div",{class:"wd-20"},"Requestor",-1),qa={class:"wd-50"},Sa=s("div",{class:"wd-10"},"Status",-1),Ca=s("div",{class:"wd-20"},"Date Approved",-1),Ta={class:"wd-20"},Aa={class:"wd-50"},Ua={class:"wd-10"},ja={class:"wd-20"},Ea={class:"v-col-12 v-col-md-2"},Oa={class:"v-col-12 v-col-md-6 d-flex"},Da={class:"my-auto v-col-12 v-col-md-2"},Ra={key:0,class:"v-col-12 v-col-md-2"},Ia={class:"v-col-12"},Na={class:"v-col-12 text-error"},Fa=s("div",{class:"v-col-12 v-col-md-12 text-info no-print"}," Note: Once submitted and approval is on-going, you will no longer allowed to update the request. ",-1),Ya={__name:"DataForm",props:{objectdata:{type:Object,default:{}},headertitle:{type:String,default:null}},emits:["deleted"],setup(Ue,{emit:je}){const R=Ue,c=tt(),W=p(!1),U=at(),Ee=lt(),u=p({}),x=p(!1),X=p(!1),q=p([{qty:1,attachment:{}}]),Oe=p(new Date),ee=p(["commercial-manager","superadmin"]),$=p(window.location.origin),De=(l,t)=>{q.value[l].attachment=t[0]},E=p([]),Re=l=>{let t=null;l.map(e=>{t=E.value.find(a=>a.id==e.id),t||E.value.push(e)})},Ie=l=>{E.value=E.value.filter(t=>t.id!==l)},te=p(1),P=p("image"),Ne=(l,t)=>{let e=l.path.split(".");P.value=e[e.length-1],te.value=t,z.value=!0},z=p(!1),ue=p(1),Fe=l=>{ue.value=l,z.value=!0},Le=l=>{q.value[l].attachment=""},ae=l=>{if(l=="approve")return"Approved By";if(l=="reviewer")return"Reviewed By";if(l=="receiver")return"Received By";if(l=="transport")return"Transport Arranged By";if(l=="releasing")return"Released By";if(l=="verify")return"Verified By"},re=p(""),ne=p([]),Pe=async()=>{await D(c.token).get("/api/fetch/approval-setups/non-paginated/data/request").then(l=>{var t,e;ne.value=l.data,re.value=(e=(t=l.data.filter(a=>a.id==m.value.request_type_id))==null?void 0:t[0])==null?void 0:e.title}).catch(l=>{})},S=p({}),ce=p([]),ze=async()=>{await D(c.token).get("/api/fetch/companies").then(l=>{ce.value=l.data}).catch(l=>{})},Q=p(!1),ve=p(0),Be=l=>{ve.value=l,Q.value=!0},pe=async(l,t)=>{let e=ve.value;t!==void 0&&(e=t),await D(c.token).get("/api/fetch/asset-info/by/asset-code/"+l).then(a=>{q.value[e].item_description=a.data.asset_name,q.value[e].asset_code=l,Q.value=!1}).catch(a=>{})},_e=p(""),me=p(""),le=p([]),Me=async()=>{await D(c.token).get("/api/fetch/locations/non-paginated/data").then(l=>{var t,e,a,f;le.value=l.data,_e.value=(e=(t=l.data.filter(w=>w.id==m.value.transferred_from))==null?void 0:t[0])==null?void 0:e.title,me.value=(f=(a=l.data.filter(w=>w.id==m.value.transferred_to))==null?void 0:a[0])==null?void 0:f.title}).catch(l=>{})},$e=()=>{q.value.push({qty:1,attachment:{}}),I()},Qe=()=>{X.value=!0,S.value={status:!0,type:"info",text:"Updating location..."};let l={authID:c.user.profile.id,data:u.value};D(c.token).post("/api/request-update/location",l).then(t=>{setTimeout(()=>{X.value=!1,S.value={status:!0,type:"success",text:"Location updated."}},1e3)}).catch(t=>{})},Ye=(l,t)=>{S.value={status:!0,type:"info",text:"Updating User..."};let e={authID:c.user.profile.id,id:u.value.id,profile_id:l,orders:t};D(c.token).post("/api/request-update/approver",e).then(a=>{setTimeout(()=>{S.value={status:!0,type:"success",text:"User has been updated."}},800)}).catch(a=>{})},Ge=(l,t)=>{q.value.splice(t,1),I()},Ke=()=>{S.value={status:!0,type:"success",text:"Draft has been removed!"},localStorage.removeItem("draft-request"),setTimeout(()=>{location.reload()},500)},He=()=>{S.value={status:!0,type:"info",text:"Please wait..."};let l={data:u.value,assets:q.value,approval:j.value,profile_id:c.user.profile.id,role:c.user.profile.role,type:"request"};localStorage.setItem("draft-request",kt(l)),setTimeout(()=>{K.value=!0,S.value={status:!0,type:"success",text:"Data has been saved to Draft"}},500)},fe=p("Note: Administrator needs to setup signatories first."),Je=oe(()=>E.value.map(l=>l.id)),Ze=()=>{S.value={status:!0,type:"info",text:"Please wait..."};let l=q.value.map((e,a)=>(e.file_id="",e.attachment&&(e.file_id=e.attachment.id),delete e.assets,delete e.updated_at,delete e.created_at,delete e.id,delete e.attachment,e)),t={data:u.value,assets:l,approval:j.value,profile_id:c.user.profile.id,type:"request",role:c.user.profile.role,additionalFiles:Je.value};D(c.token).post("/api/request-asset/store-update/data",t).then(e=>{let a="",f="";e.data.message?(a=e.data.message,f="success"):e.data.error&&(a=e.data.error,f="error"),S.value={status:!0,type:f,text:a},localStorage.removeItem("draft-request"),U.params.id||setTimeout(()=>{Ee.push({name:"EditRequestAsset",params:{id:e.data.id}}).catch(w=>{})},800)}).catch(e=>{S.value={status:!0,type:"error",text:"Failed to update data, kindly refresh the page and check fields if it's empty"}})},j=p([]),G=p(!0),We=p(["Nos","Set","Pcs","Pack","Pallet","SqM"]),se=async()=>{let l=0;U.params.id&&(l=1),await D(c.token).get("/api/fetch/request-asset/approval-setup-fetch/"+u.value.request_type_id+"?isEdit="+l).then(t=>{var e,a,f,w,T,h;u.value.extra_attachment=t.data.enable_attachment,j.value=(e=t.data)==null?void 0:e.stages,U.params.id&&j.value.length>0&&(j.value.map((r,k)=>(r.profile_id=v.value[k].profile_id,r.status=v.value[k].status,r.date_approved=v.value[k].date_approved,r.reason_rejected=v.value[k].reason_rejected,r)),j.value.length>1&&(j.value[v.value.length-1]={id:v.value[v.value.length-1].id,profile_id:v.value[v.value.length-1].profile_id,status:v.value[v.value.length-1].status,date_approved:v.value[v.value.length-1].date_approved,status:v.value[v.value.length-1].status,reason_rejected:"",types:v.value[v.value.length-1].approval_type,sort:v.value[v.value.length-1].orders,request_asset_id:v.value[v.value.length-1].request_asset_id,signatures:[{id:(a=v.value[v.value.length-1])==null?void 0:a.profile.id,display_name:(f=v.value[v.value.length-1])==null?void 0:f.profile.display_name,first_name:(w=v.value[v.value.length-1])==null?void 0:w.profile.first_name,last_name:(T=v.value[v.value.length-1])==null?void 0:T.profile.last_name}]})),((h=t.data)==null?void 0:h.stages.length)>0?G.value=!0:G.value=!1}).catch(t=>{})},K=p(!1),I=()=>{let l=!1;W.value=!1,u.value.company_id&&u.value.request_type_id&&u.value.subject&&u.value.transferred_from&&u.value.transferred_to&&(l=!0);let t=!0;q.value.map(a=>{(!a.item_description||!a.reason_for_request||!a.uom||!a.qty||a.qty<=0)&&(t=!1)});let e=!0;j.value.map(a=>{a.profile_id||(e=!1)}),e&&t&&l&&(W.value=!0)},he=l=>{let t={status:l,profile_id:c.user.profile.id,ID:m.value.id};D(c.token).post("/api/request-asset/change-request/data",t).then(e=>{S.value={status:!0,type:"success",text:e.data.message},m.value.status=l,je("saved",e.data.message)}).catch(e=>{})},ye=(l,t=6)=>{let e="00000"+l;return e.substring(e.length-t)},v=p([]),m=p({}),B=p({});st(()=>{var l,t,e,a,f,w,T,h;if(Pe().then(()=>{ze().then(()=>{Me()})}),U.params.id){x.value=!0;let r=R.objectdata;m.value=r,u.value.company_id=r.company_id,u.value.request_type_id=r.request_type_id,u.value.subject=r.subject,u.value.transferred_from=r.transferred_from,u.value.transferred_to=r.transferred_to,u.value.id=r.id,u.value.requestor_id=r.profile_id,v.value=r.request_approvals,q.value=r.items,B.value=(t=(l=r.request_approvals)==null?void 0:l.filter(k=>k.status=="awaiting-approval"))==null?void 0:t[0],!B.value&&r.status=="reject"&&(B.value=(a=(e=r.request_approvals)==null?void 0:e.filter(k=>k.status=="reject"))==null?void 0:a[0]),E.value=r.attachment,se()}else{u.value.company_id=c.user.profile.company_id;let r=localStorage.getItem("draft-request");r&&(r=bt(r),K.value=!0,u.value.request_type_id=(f=r==null?void 0:r.data)==null?void 0:f.request_type_id,u.value.transferred_from=(w=r==null?void 0:r.data)==null?void 0:w.transferred_from,u.value.transferred_to=(T=r==null?void 0:r.data)==null?void 0:T.transferred_to,u.value.subject=(h=r==null?void 0:r.data)==null?void 0:h.subject,u.value.request_type_id&&se().then(()=>{v.value=r.approval,j.value.map((k,N)=>(k.profile_id=v.value[N].profile_id,k.status=v.value[N].status,k.date_approved=v.value[N].date_approved,k.reason_rejected=v.value[N].reason_rejected,k))}),q.value=r==null?void 0:r.assets)}}),ge(u.value,async(l,t)=>{I()}),ge(q.value,async(l,t)=>{I()}),oe(()=>c.user.role=="receiving-releasing"||c.user.role=="facility");const Xe=p("https://assets.grandiose.ae"),et=oe(()=>{var T,h,r,k,N;let l=null,t=Xe.value+"/pv/employee-signatory",e=Te(50),a=Te(50),f=95,w=99;return((h=(T=c.user)==null?void 0:T.profile)==null?void 0:h.id)==((r=B.value)==null?void 0:r.profile_id)&&(f=(k=B.value)==null?void 0:k.profile_id,w=(N=B.value)==null?void 0:N.orders),m.value&&(l=t+"/transfer/approvals?o="+w+"&key="+e+"&pid="+f+"&pv="+a+"&id="+m.value.id),l});return(l,t)=>(i(),y(ht,null,{default:d(()=>[o(yt,{title:R.headertitle,class:"no-print"},null,8,["title"]),o(V,{class:"mb-3"},{default:d(()=>[o(ot,{class:"v-col-12 mt-1 col-sm-12 py-0"},{default:d(()=>[o(O,null,{default:d(()=>[o(dt,{class:"my-0 ml-3 text-uppercase text-h6 d-flex justify-space-between font-weight-bold"},{default:d(()=>[s("div",null,_(R.headertitle)+" "+_(K.value?"(Draft)":""),1),G.value?g("",!0):(i(),b("div",wt,_(fe.value),1)),x.value?(i(),b("div",{key:1,class:Ve(m.value.status=="cancelled"?"text-error":m.value.status=="complete"?"text-success":"")}," STATUS ("+_(m.value.status)+") ",3)):g("",!0),s("div",null,"DATE: "+_(n(Ae)(Oe.value)),1)]),_:1}),o(de),o(Y,null,{default:d(()=>[o(V,{class:"no-print"},{default:d(()=>[x.value?(i(),b("div",{key:0,class:Ve(`${m.value.status=="complete"?"v-col-12":"v-col-md-12"}`)},[o(V,null,{default:d(()=>[s("div",xt," REQUEST NO: SN-5"+_(ye(m.value.id)),1),s("div",qt,[x.value&&(m.value.status=="pending"||m.value.status=="cancelled")?(i(),b("div",St,[u.value.requestor_id==n(c).user.profile.id&&m.value.status=="pending"?(i(),y(C,{key:0,onClick:t[0]||(t[0]=e=>he("cancelled")),color:"warning"},{default:d(()=>[A("Cancel request")]),_:1})):g("",!0),u.value.requestor_id==n(c).user.profile.id&&m.value.status=="cancelled"?(i(),y(C,{key:1,onClick:t[1]||(t[1]=e=>he("pending")),size:"small",color:"info"},{default:d(()=>[A("Change status to Pending")]),_:1})):g("",!0)])):g("",!0)])]),_:1})],2)):g("",!0),s("div",Ct,[o(F,{items:ne.value,modelValue:u.value.request_type_id,"onUpdate:modelValue":[t[2]||(t[2]=e=>u.value.request_type_id=e),se],variant:"outlined",density:"compact","hide-details":"","item-value":"id",disabled:x.value,"item-title":"title",label:"TYPE OF REQUEST*"},null,8,["items","modelValue","disabled"])]),s("div",Tt,[o(F,{items:ce.value,modelValue:u.value.company_id,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value.company_id=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"COMPANY*"},null,8,["items","modelValue"])]),s("div",At,[o(F,{items:le.value,modelValue:u.value.transferred_from,"onUpdate:modelValue":t[4]||(t[4]=e=>u.value.transferred_from=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION FROM*"},null,8,["items","modelValue"])]),s("div",Ut,[o(F,{items:le.value,modelValue:u.value.transferred_to,"onUpdate:modelValue":t[5]||(t[5]=e=>u.value.transferred_to=e),variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"title",label:"LOCATION TO*"},null,8,["items","modelValue"]),x.value&&ee.value.includes(n(c).user.profile.role)?(i(),y(C,{key:0,size:"small",loading:X.value,onClick:Qe,color:"success",class:"mx-2 my-auto"},{default:d(()=>[A("Save")]),_:1},8,["loading"])):g("",!0)]),s("div",jt,[o(H,{modelValue:u.value.subject,"onUpdate:modelValue":t[6]||(t[6]=e=>u.value.subject=e),variant:"outlined",density:"compact","hide-details":"",clearable:"",label:"SUBJECT*"},null,8,["modelValue"])])]),_:1}),o(V,{class:"for-print-flex mx-2 mb-1"},{default:d(()=>{var e,a;return[s("div",Et," REQUEST NO: "+_(m.value.id?"SN-5"+ye(m.value.id):""),1),s("div",Ot," TYPE OF REQUEST: "+_(re.value),1),s("div",Dt," COMPANY: "+_((a=(e=m.value)==null?void 0:e.company)==null?void 0:a.title),1),s("div",Rt," LOCATION FROM: "+_(_e.value),1),s("div",It," LOCATION TO: "+_(me.value),1),s("div",Nt," SUBJECT: "+_(m.value.subject),1)]}),_:1})]),_:1})]),_:1}),o(O,{class:"my-2"},{default:d(()=>[o(Y,null,{default:d(()=>[o(V,null,{default:d(()=>{var e;return[m.value.status!="complete"&&(!n(U).params.id||u.value.requestor_id==n(c).user.profile.id&&((e=R.objectdata)==null?void 0:e.status)=="pending"||n(c).user.profile.role=="superadmin"||n(c).user.profile.role=="administrator")?(i(),b("div",Ft,[o(C,{size:"small",color:"primary",class:"no-print",onClick:$e},{default:d(()=>[A("Add")]),_:1})])):g("",!0)]}),_:1}),o(V,{class:"for-print-flex mx-2 header mb-1 mt-0"},{default:d(()=>[Lt,Pt,zt,Bt,Mt,$t,Qt]),_:1}),(i(!0),b(L,null,M(q.value,(e,a)=>(i(),y(V,{key:a,class:"for-print-flex mx-2 row-bordered mb-1"},{default:d(()=>[s("div",Yt,_(e.item_description),1),s("div",Gt,_(e.asset_code),1),s("div",Kt,_(e.qty),1),s("div",Ht,_(e.uom),1),s("div",Jt,_(e.weight),1),s("div",Zt,_(e.item_value),1),s("div",Wt,_(e.reason_for_request),1)]),_:2},1024))),128)),(i(!0),b(L,null,M(q.value,(e,a)=>(i(),y(V,{key:a,class:"no-print"},{default:d(()=>{var f,w,T;return[s("div",Xt,[(f=e.attachment)!=null&&f.id?(i(),y(V,{key:0,class:"px-1"},{default:d(()=>[s("div",ea,[o(H,{style:{display:"none"},type:"hidden",class:"hidden",modelValue:e.attachment.id,"onUpdate:modelValue":h=>e.attachment.id=h},null,8,["modelValue","onUpdate:modelValue"]),!x.value||x.value&&u.value.requestor_id==n(c).user.profile.id?(i(),y(C,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:n(be),size:"16px",color:"error",onClick:()=>Le(a,e.attachment.id)},null,8,["icon","onClick"])):g("",!0),o(O,{onClick:()=>Fe(e),maxHeight:"40",style:{"background-image":"url('/assets/images/fav.png')","background-size":"cover",height:"100px",width:"100px"}},null,8,["onClick"])]),o(ie,{modelValue:z.value,"onUpdate:modelValue":t[7]||(t[7]=h=>z.value=h),width:"95%","max-width":"900"},{default:d(()=>[o(O,{class:"bg-black"},{default:d(()=>[s("div",ta,[o(J,{src:$.value+"/file/"+ue.value.attachment.path},null,8,["src"])])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)):(i(),y(V,{key:1,class:"mt-0"},{default:d(()=>[s("div",aa,[o(it,{color:"grey-lighten-4",class:"text-center"},{default:d(()=>[o(Ce,{options:{multiSelect:!1,type:"request-asset",userID:n(c).user.profile.id},onSelect:h=>De(a,h)},null,8,["options","onSelect"])]),_:2},1024)])]),_:2},1024))]),s("div",la,[o(ke,{modelValue:e.item_description,"onUpdate:modelValue":[h=>e.item_description=h,I],variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"ITEM DESC*"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",sa,[o(H,{modelValue:e.asset_code,"onUpdate:modelValue":h=>e.asset_code=h,variant:"outlined",density:"compact","hide-details":"",label:"ASSET CODE","append-inner-icon":n(ut),"onClick:appendInner":h=>pe(e.asset_code,a)},null,8,["modelValue","onUpdate:modelValue","append-inner-icon","onClick:appendInner"]),(!n(U).params.id||u.value.requestor_id==n(c).user.profile.id&&((w=R.objectdata)==null?void 0:w.status)=="pending"||n(c).user.profile.role=="superadmin"||n(c).user.profile.role=="administrator")&&m.value.status!="complete"?(i(),y(Z,{key:0,onClick:h=>Be(a),class:"ml-2 my-auto",size:"x-small",icon:n(rt)},null,8,["onClick","icon"])):g("",!0)]),s("div",oa,[o(H,{type:"number",modelValue:e.qty,"onUpdate:modelValue":[h=>e.qty=h,I],variant:"outlined",density:"compact","hide-details":"",label:"QTY*"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",da,[o(F,{items:We.value,modelValue:e.uom,"onUpdate:modelValue":[h=>e.uom=h,I],variant:"outlined",density:"compact","hide-details":"",label:"UOM*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),s("div",ia,[A(_(e.weight?e.weight:0),1),ua,ra]),s("div",na,[A(_(e.item_value?e.item_value:0),1),ca,va]),s("div",pa,[o(ke,{modelValue:e.reason_for_request,"onUpdate:modelValue":h=>e.reason_for_request=h,variant:"outlined",density:"compact","hide-details":"",rows:"2",label:"REASON*"},null,8,["modelValue","onUpdate:modelValue"]),!x.value||x.value&&n(c).user.profile.id==R.objectdata.profile_id&&((T=R.objectdata)==null?void 0:T.status)=="pending"?(i(),y(Z,{key:0,size:"small",onClick:()=>Ge(e.id,a),icon:n(nt),class:"my-auto ml-2 no-print",color:"error"},null,8,["onClick","icon"])):g("",!0)])]}),_:2},1024))),128))]),_:1})]),_:1}),u.value.extra_attachment?(i(),y(O,{key:0},{default:d(()=>[o(Y,null,{default:d(()=>{var e;return[!x.value||x.value&&u.value.requestor_id==n(c).user.profile.id?(i(),b("div",_a,[ma,o(Ce,{options:{multiSelect:!0,type:"request-asset"},onSelect:Re})])):g("",!0),((e=E.value)==null?void 0:e.length)>0?(i(),y(V,{key:1,class:"px-1 mt-4"},{default:d(()=>[(i(!0),b(L,null,M(E.value,(a,f)=>(i(),b("div",{key:a.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[x.value&&(m.value.status=="pending"||m.value.status=="cancelled")?(i(),y(C,{key:0,style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:n(be),size:"20px",color:"error",onClick:()=>Ie(a.id)},null,8,["icon","onClick"])):g("",!0),o(O,{onClick:()=>Ne(a,f)},{default:d(()=>[a.mime=="image/jpeg"||a.mime=="image/png"?(i(),y(J,{key:0,src:$.value+"/file/"+a.path,cover:"","aspect-ratio":"1"},null,8,["src"])):(i(),y(J,{key:1,src:$.value+"/assets/images/pdf-image.png",cover:"","aspect-ratio":"1"},null,8,["src"]))]),_:2},1032,["onClick"])]))),128)),o(ie,{modelValue:z.value,"onUpdate:modelValue":t[9]||(t[9]=a=>z.value=a),width:"95%","max-width":"900"},{default:d(()=>[o(O,{class:"bg-black"},{default:d(()=>[o(ct,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:te.value,"onUpdate:modelValue":t[8]||(t[8]=a=>te.value=a)},{default:d(()=>[(i(!0),b(L,null,M(E.value,(a,f)=>(i(),y(vt,{key:f,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[s("div",{style:pt(`${P.value=="pdf"?"height: 980px;":"height: 680px;"} 
                                                        width: 100%;
                                                        `),class:"d-flex align-center justify-center"},[P.value=="jpg"||P.value=="jpeg"||P.value=="png"?(i(),y(J,{key:0,src:$.value+"/file/"+a.path},null,8,["src"])):g("",!0),P.value=="pdf"?(i(),b("object",{key:1,data:$.value+"/file/"+a.path,type:"application/pdf",width:"100%",height:"800px"},null,8,fa)):g("",!0)],4)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):g("",!0)]}),_:1})]),_:1})):g("",!0),o(O,{class:"my-2"},{default:d(()=>[o(Y,null,{default:d(()=>[o(V,null,{default:d(()=>[s("div",ha,[ya,n(U).params.id?(i(),b("div",ga,[o(C,{color:"info",size:"small",target:"_blank",href:et.value},{default:d(()=>[A("View Approval Page")]),_:1},8,["href"])])):g("",!0)]),o(de)]),_:1}),o(V,{class:"no-print"},{default:d(()=>{var e,a;return[Va,s("div",ba,_((a=(e=m.value)==null?void 0:e.profile)==null?void 0:a.display_name),1),ka,x.value&&ee.value.includes(n(c).user.profile.role)?(i(),b("div",wa,"Change To")):g("",!0)]}),_:1}),o(V,{class:"for-print-flex mx-2 mt-5 mb-1"},{default:d(()=>{var e,a;return[xa,s("div",qa,_((a=(e=m.value)==null?void 0:e.profile)==null?void 0:a.display_name),1),Sa,Ca]}),_:1}),(i(!0),b(L,null,M(v.value,e=>(i(),y(V,{class:"for-print-flex mx-2 mb-2 mt-0",key:e.id},{default:d(()=>{var a;return[s("div",Ta,_(ae(e.approval_type)),1),s("div",Aa,_((a=e==null?void 0:e.profile)==null?void 0:a.display_name),1),s("div",Ua,[e.status?(i(),y(Z,{key:0,class:"mx-2 my-0",icon:e.status=="awaiting-approval"?n(we):e.status=="pending"?n(xe):e.status=="reject"?n(qe):n(Se),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):g("",!0)]),s("div",ja,_(e.date_approved),1)]}),_:2},1024))),128)),G.value?(i(),b(L,{key:0},[(i(!0),b(L,null,M(j.value,(e,a)=>(i(),y(V,{class:"no-print",key:e.id},{default:d(()=>[s("div",Ea,_(e.types?ae(e.types):ae(e.approval_type)),1),s("div",Oa,[o(F,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[f=>e.profile_id=f,I],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*",disabled:e.status=="done"},null,8,["items","modelValue","onUpdate:modelValue","disabled"]),o(C,{variant:"text",size:"x-small"},{default:d(()=>[e.status?(i(),y(Z,{key:0,class:"mx-2 my-3 no-print",icon:e.status=="awaiting-approval"?n(we):e.status=="pending"?n(xe):e.status=="reject"?n(qe):n(Se),color:e.status=="awaiting-approval"?"info":e.status=="pending"?"":e.status=="reject"?"error":"success"},null,8,["icon","color"])):g("",!0),o(_t,{activator:"parent",location:"top","max-width":"400"},{default:d(()=>[A(_(e.status=="awaiting-approval"?"Awaiting Approval":e.status=="pending"?"Pending":e.status=="reject"?e.reason_rejected:"Already Signed"),1)]),_:2},1024)]),_:2},1024)]),s("div",Da,_(e.date_approved?n(Ae)(e.date_approved):""),1),x.value&&ee.value.includes(n(c).user.profile.role)?(i(),b("div",Ra,[o(F,{items:e.signatures,modelValue:e.profile_id,"onUpdate:modelValue":[f=>e.profile_id=f,f=>Ye(e.profile_id,a)],variant:"outlined",density:"compact","hide-details":"","item-value":"id","item-title":"display_name",label:"SELECT SIGNATORY*"},null,8,["items","modelValue","onUpdate:modelValue"])])):g("",!0)]),_:2},1024))),128)),o(V,null,{default:d(()=>{var e;return[o(de),s("div",Ia,[(!n(U).params.id||u.value.requestor_id==n(c).user.profile.id&&((e=R.objectdata)==null?void 0:e.status)=="pending"||n(c).user.profile.role=="superadmin"||n(c).user.profile.role=="administrator")&&m.value.status!="complete"?(i(),y(C,{key:0,disabled:!W.value,onClick:Ze,class:"no-print",color:"primary"},{default:d(()=>[A(_(n(U).params.id?"Update Request":"Submit For Approval"),1)]),_:1},8,["disabled"])):g("",!0),n(U).params.id?g("",!0):(i(),y(C,{key:1,size:"small",class:"mx-3",onClick:He,color:"warning"},{default:d(()=>[A("Save as Draft")]),_:1})),K.value?(i(),y(C,{key:2,size:"small",class:"mx-3",onClick:Ke,color:"info"},{default:d(()=>[A("Delete Draft")]),_:1})):g("",!0)])]}),_:1})],64)):(i(),y(V,{key:1,class:"no-print"},{default:d(()=>[s("div",Na,_(fe.value),1)]),_:1})),o(V,null,{default:d(()=>[Fa]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(gt,{options:S.value},null,8,["options"]),o(ie,{width:"500",modelValue:Q.value,"onUpdate:modelValue":t[11]||(t[11]=e=>Q.value=e)},{default:d(()=>[o(O,null,{default:d(()=>[o(Y,null,{default:d(()=>[o(n(Vt.QrcodeStream),{onDecode:pe})]),_:1}),o(mt,null,{default:d(()=>[o(ft),o(C,{text:"Close",onClick:t[10]||(t[10]=e=>Q.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ya as _};
