import{ae as Le,ab as Ee,af as re,D as X,N as Fe,i as De,r as R,O as we,b as w,j as K,k as d,e as a,l as s,z as P,m as L,J as ke,K as _,a6 as Ce,A as oe,H as xe,c as G,F as ye,d as ge,t as M,U as $e,I as ie,_ as Ue,V as Oe,Y as Ae,q as We,E as J,y as O,a4 as A,P as ee,u as je,X as Ie,w as me,v as ve,Z as Se,$ as Pe,a0 as Be}from"./app-6087960b.js";import{c as Ye,a as T,F as ze,b as W}from"./index.esm-f1590ece.js";import{_ as Ne}from"./AppSnackBar-481bfd3d.js";import{_ as He}from"./Studio-3d497f38.js";import{u as Me}from"./formatDate-e2fbee14.js";var Te={exports:{}};(function(y,f){(function(B,E){y.exports=E()})(Le,function(){var B=1e3,E=6e4,C=36e5,Y="millisecond",F="second",u="minute",b="hour",x="day",V="week",U="month",D="quarter",m="year",v="date",z="Invalid Date",N=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var n=["th","st","nd","rd"],i=o%100;return"["+o+(n[(i-20)%10]||n[i]||n[0])+"]"}},pe=function(o,n,i){var p=String(o);return!p||p.length>=n?o:""+Array(n+1-p.length).join(i)+o},he={s:pe,z:function(o){var n=-o.utcOffset(),i=Math.abs(n),p=Math.floor(i/60),r=i%60;return(n<=0?"+":"-")+pe(p,2,"0")+":"+pe(r,2,"0")},m:function o(n,i){if(n.date()<i.date())return-o(i,n);var p=12*(i.year()-n.year())+(i.month()-n.month()),r=n.clone().add(p,U),g=i-r<0,h=n.clone().add(p+(g?-1:1),U);return+(-(p+(i-r)/(g?r-h:h-r))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:U,y:m,w:V,d:x,D:v,h:b,m:u,s:F,ms:Y,Q:D}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},ae="en",Q={};Q[ae]=Z;var de="$isDayjsObject",le=function(o){return o instanceof t||!(!o||!o[de])},ue=function o(n,i,p){var r;if(!n)return ae;if(typeof n=="string"){var g=n.toLowerCase();Q[g]&&(r=g),i&&(Q[g]=i,r=g);var h=n.split("-");if(!r&&h.length>1)return o(h[0])}else{var $=n.name;Q[$]=n,r=$}return!p&&r&&(ae=r),r||!p&&ae},k=function(o,n){if(le(o))return o.clone();var i=typeof n=="object"?n:{};return i.date=o,i.args=arguments,new t(i)},c=he;c.l=ue,c.i=le,c.w=function(o,n){return k(o,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var t=function(){function o(i){this.$L=ue(i.locale,null,!0),this.parse(i),this.$x=this.$x||i.x||{},this[de]=!0}var n=o.prototype;return n.parse=function(i){this.$d=function(p){var r=p.date,g=p.utc;if(r===null)return new Date(NaN);if(c.u(r))return new Date;if(r instanceof Date)return new Date(r);if(typeof r=="string"&&!/Z$/i.test(r)){var h=r.match(N);if(h){var $=h[2]-1||0,S=(h[7]||"0").substring(0,3);return g?new Date(Date.UTC(h[1],$,h[3]||1,h[4]||0,h[5]||0,h[6]||0,S)):new Date(h[1],$,h[3]||1,h[4]||0,h[5]||0,h[6]||0,S)}}return new Date(r)}(i),this.init()},n.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},n.$utils=function(){return c},n.isValid=function(){return this.$d.toString()!==z},n.isSame=function(i,p){var r=k(i);return this.startOf(p)<=r&&r<=this.endOf(p)},n.isAfter=function(i,p){return k(i)<this.startOf(p)},n.isBefore=function(i,p){return this.endOf(p)<k(i)},n.$g=function(i,p,r){return c.u(i)?this[p]:this.set(r,i)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(i,p){var r=this,g=!!c.u(p)||p,h=c.p(i),$=function(ne,I){var te=c.w(r.$u?Date.UTC(r.$y,I,ne):new Date(r.$y,I,ne),r);return g?te:te.endOf(x)},S=function(ne,I){return c.w(r.toDate()[ne].apply(r.toDate("s"),(g?[0,0,0,0]:[23,59,59,999]).slice(I)),r)},j=this.$W,q=this.$M,H=this.$D,ce="set"+(this.$u?"UTC":"");switch(h){case m:return g?$(1,0):$(31,11);case U:return g?$(1,q):$(0,q+1);case V:var se=this.$locale().weekStart||0,fe=(j<se?j+7:j)-se;return $(g?H-fe:H+(6-fe),q);case x:case v:return S(ce+"Hours",0);case b:return S(ce+"Minutes",1);case u:return S(ce+"Seconds",2);case F:return S(ce+"Milliseconds",3);default:return this.clone()}},n.endOf=function(i){return this.startOf(i,!1)},n.$set=function(i,p){var r,g=c.p(i),h="set"+(this.$u?"UTC":""),$=(r={},r[x]=h+"Date",r[v]=h+"Date",r[U]=h+"Month",r[m]=h+"FullYear",r[b]=h+"Hours",r[u]=h+"Minutes",r[F]=h+"Seconds",r[Y]=h+"Milliseconds",r)[g],S=g===x?this.$D+(p-this.$W):p;if(g===U||g===m){var j=this.clone().set(v,1);j.$d[$](S),j.init(),this.$d=j.set(v,Math.min(this.$D,j.daysInMonth())).$d}else $&&this.$d[$](S);return this.init(),this},n.set=function(i,p){return this.clone().$set(i,p)},n.get=function(i){return this[c.p(i)]()},n.add=function(i,p){var r,g=this;i=Number(i);var h=c.p(p),$=function(q){var H=k(g);return c.w(H.date(H.date()+Math.round(q*i)),g)};if(h===U)return this.set(U,this.$M+i);if(h===m)return this.set(m,this.$y+i);if(h===x)return $(1);if(h===V)return $(7);var S=(r={},r[u]=E,r[b]=C,r[F]=B,r)[h]||1,j=this.$d.getTime()+i*S;return c.w(j,this)},n.subtract=function(i,p){return this.add(-1*i,p)},n.format=function(i){var p=this,r=this.$locale();if(!this.isValid())return r.invalidDate||z;var g=i||"YYYY-MM-DDTHH:mm:ssZ",h=c.z(this),$=this.$H,S=this.$m,j=this.$M,q=r.weekdays,H=r.months,ce=r.meridiem,se=function(I,te,_e,Ve){return I&&(I[te]||I(p,g))||_e[te].slice(0,Ve)},fe=function(I){return c.s($%12||12,I,"0")},ne=ce||function(I,te,_e){var Ve=I<12?"AM":"PM";return _e?Ve.toLowerCase():Ve};return g.replace(l,function(I,te){return te||function(_e){switch(_e){case"YY":return String(p.$y).slice(-2);case"YYYY":return c.s(p.$y,4,"0");case"M":return j+1;case"MM":return c.s(j+1,2,"0");case"MMM":return se(r.monthsShort,j,H,3);case"MMMM":return se(H,j);case"D":return p.$D;case"DD":return c.s(p.$D,2,"0");case"d":return String(p.$W);case"dd":return se(r.weekdaysMin,p.$W,q,2);case"ddd":return se(r.weekdaysShort,p.$W,q,3);case"dddd":return q[p.$W];case"H":return String($);case"HH":return c.s($,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return ne($,S,!0);case"A":return ne($,S,!1);case"m":return String(S);case"mm":return c.s(S,2,"0");case"s":return String(p.$s);case"ss":return c.s(p.$s,2,"0");case"SSS":return c.s(p.$ms,3,"0");case"Z":return h}return null}(I)||h.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(i,p,r){var g,h=this,$=c.p(p),S=k(i),j=(S.utcOffset()-this.utcOffset())*E,q=this-S,H=function(){return c.m(h,S)};switch($){case m:g=H()/12;break;case U:g=H();break;case D:g=H()/3;break;case V:g=(q-j)/6048e5;break;case x:g=(q-j)/864e5;break;case b:g=q/C;break;case u:g=q/E;break;case F:g=q/B;break;default:g=q}return r?g:c.a(g)},n.daysInMonth=function(){return this.endOf(U).$D},n.$locale=function(){return Q[this.$L]},n.locale=function(i,p){if(!i)return this.$L;var r=this.clone(),g=ue(i,p,!0);return g&&(r.$L=g),r},n.clone=function(){return c.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},o}(),e=t.prototype;return k.prototype=e,[["$ms",Y],["$s",F],["$m",u],["$H",b],["$W",x],["$M",U],["$y",m],["$D",v]].forEach(function(o){e[o[1]]=function(n){return this.$g(n,o[0],o[1])}}),k.extend=function(o,n){return o.$i||(o(n,t,k),o.$i=!0),k},k.locale=ue,k.isDayjs=le,k.unix=function(o){return k(1e3*o)},k.en=Q[ae],k.Ls=Q,k.p={},k})})(Te);var Re=Te.exports;const be=Ee(Re),qe=re("vendors",{state:()=>({vendors:[]}),getters:{list:y=>y.vendors},actions:{async getVendors(y){await X(y).get("/api/vendor/state/vendor-list").then(f=>{this.vendors=Object.assign([],f.data)}).catch(f=>{console.log("getvendors error: ",f)})}}}),Je={class:"v-col-12 pt-0 pb-2"},Ke=a("thead",null,[a("tr",null,[a("th",{class:"text-left text-primary"},"#"),a("th",{class:"text-left text-primary"},"Title"),a("th",{class:"text-left text-primary"},"Warranty Start"),a("th",{class:"text-left text-primary"},"Warranty End"),a("th",{class:"text-left text-primary"},"Vendor"),a("th",{class:"text-left text-primary"},"Vendor Start"),a("th",{class:"text-left text-primary"},"Vendor End")])],-1),Ze=["onClick"],Ge=a("div",{class:"v-col-12 pt-0 pb-2"},"Warranty",-1),Xe={class:"v-col-12 v-col-md-4 pt-0 pb-2"},Qe={class:"v-col-12 v-col-md-4 pt-0 pb-2"},et={class:"v-col-12 v-col-md-4 pt-0 pb-2"},tt=a("div",{class:"v-col-12 pt-0 pb-2"},"Vendor Warranty",-1),at={class:"v-col-12 v-col-md-4 pt-0 pb-2"},lt={class:"v-col-12 v-col-md-4 pt-0 pb-2"},st={class:"v-col-12 v-col-md-4 pt-0 pb-2"},nt={class:"v-col-12 pt-0 pb-2 d-flex justify-end"},ot={__name:"AssetWarranties",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(y){const f=y,B=Fe(),E=De(),C=qe(),Y=R({}),F=Ye({"Warranty Title":T().required().max(150),"Warranty Start Date":T().nullable(),"Warranty End Date":T().nullable(),"Vendor Start Date":T().nullable(),"Vendor End Date":T().nullable()}),u=R({status:!1,action:"add",loading:!1,data:{}}),b=R([]);we(()=>f.asset,D=>{b.value=D.warranty});const x=(D=null)=>{u.value.status=!0,D?(u.value.action="edit",u.value.data=Object.assign({},D)):(u.value.action="add",u.value.data={})},V=async()=>{u.value.loading=!0;let D={id:u.value.data.id,asset_id:B.params.id,warranty_title:u.value.data.title,warranty_start_date:u.value.data.warranty_start_date,warranty_end_date:u.value.data.warranty_end_date,warranty_vendor_id:u.value.data.vendor_id,vendor_start_date:u.value.data.vendor_start_date,vendor_end_date:u.value.data.vendor_end_date};await X(E.token).post("/api/asset/save-warranty",D).then(m=>{U().then(()=>{Y.value={status:!0,type:"success",text:m.data.message},u.value.loading=!1,u.value.status=!1})}).catch(m=>{u.value.loading=!1,Y.value={status:!0,type:"eroor",text:"Error while saving warranty"},console.log("err",m)})},U=async()=>{await X(E.token).get("/api/asset/warranty/"+B.params.id).then(D=>{b.value=D.data,u.value.loading=!1}).catch(D=>{u.value.loading=!1,console.log("err",D)})};return(D,m)=>(w(),K(J,null,{default:d(()=>[a("div",Je,[s(P,{onClick:m[0]||(m[0]=()=>x()),class:"mb-3",size:"small"},{default:d(()=>[L(" New Warranty "),s(ke,{class:"ml-2",icon:_(Ce)},null,8,["icon"])]),_:1}),s(oe,null,{default:d(()=>[s(xe,{density:"compact"},{default:d(()=>[Ke,a("tbody",null,[(w(!0),G(ye,null,ge(b.value,(v,z)=>(w(),G("tr",{key:v.id,onClick:()=>x(v),class:"cursor-pointer table-cell-hover"},[a("td",null,M(z+1),1),a("td",null,M(v.title),1),a("td",null,M(v.warranty_start_date&&_(be)(v.warranty_start_date).format("MMM. DD, YYYY")),1),a("td",null,M(v.warranty_end_date&&_(be)(v.warranty_end_date).format("MMM. DD, YYYY")),1),a("td",null,M(v.vendor&&v.vendor.title),1),a("td",null,M(v.vendor_start_date&&_(be)(v.vendor_start_date).format("MMM. DD, YYYY")),1),a("td",null,M(v.vendor_end_date&&_(be)(v.vendor_end_date).format("MMM. DD, YYYY")),1)],8,Ze))),128))])]),_:1}),b.value.length==0?(w(),K($e,{key:0,class:"pa-3 text-center"},{default:d(()=>[L("No record at the moment")]),_:1})):ie("",!0)]),_:1})]),s(Ue,{modelValue:u.value.status,"onUpdate:modelValue":m[13]||(m[13]=v=>u.value.status=v),persistent:"",width:"1000"},{default:d(()=>[s(oe,null,{default:d(()=>[s(Oe,{class:"text-capitalize mb-3 d-flex justify-space-between align-center"},{default:d(()=>[L(M(u.value.action+" Warranty")+" ",1),s(P,{icon:_(Ae),variant:"flat",size:"small",onClick:m[1]||(m[1]=v=>u.value.status=!1)},null,8,["icon"])]),_:1}),s(We,null,{default:d(()=>[s(_(ze),{as:"v-form","validation-schema":_(F)},{default:d(()=>[s(J,{class:"mb-0"},{default:d(()=>[Ge,a("div",Xe,[s(_(W),{name:"Warranty Title",modelValue:u.value.data.title,"onUpdate:modelValue":m[3]||(m[3]=v=>u.value.data.title=v)},{default:d(({field:v,errors:z})=>[s(O,A({modelValue:u.value.data.title,"onUpdate:modelValue":m[2]||(m[2]=N=>u.value.data.title=N)},v,{label:"Warranty Title",variant:"outlined",density:"compact","error-messages":z}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",Qe,[s(_(W),{name:"Warranty Start Date",modelValue:u.value.data.warranty_start_date,"onUpdate:modelValue":m[5]||(m[5]=v=>u.value.data.warranty_start_date=v)},{default:d(({field:v,errors:z})=>[s(O,A({type:"date",modelValue:u.value.data.warranty_start_date,"onUpdate:modelValue":m[4]||(m[4]=N=>u.value.data.warranty_start_date=N)},v,{label:"Warranty Start Date",variant:"outlined",density:"compact","error-messages":z}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",et,[s(_(W),{name:"Warranty End Date",modelValue:u.value.data.warranty_end_date,"onUpdate:modelValue":m[7]||(m[7]=v=>u.value.data.warranty_end_date=v)},{default:d(({field:v,errors:z})=>[s(O,A({type:"date",modelValue:u.value.data.warranty_end_date,"onUpdate:modelValue":m[6]||(m[6]=N=>u.value.data.warranty_end_date=N)},v,{label:"Warranty End Date",variant:"outlined",density:"compact","error-messages":z}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),tt,a("div",at,[s(ee,{modelValue:u.value.data.vendor_id,"onUpdate:modelValue":m[8]||(m[8]=v=>u.value.data.vendor_id=v),items:_(C).list,"item-title":"title","item-value":"id",label:"Vendor Warranty",density:"compact",variant:"outlined",rules:[v=>!!v||"Vendor Warranty is required"]},null,8,["modelValue","items","rules"])]),a("div",lt,[s(_(W),{name:"Vendor Start Date",modelValue:u.value.data.vendor_start_date,"onUpdate:modelValue":m[10]||(m[10]=v=>u.value.data.vendor_start_date=v)},{default:d(({field:v,errors:z})=>[s(O,A({type:"date",modelValue:u.value.data.vendor_start_date,"onUpdate:modelValue":m[9]||(m[9]=N=>u.value.data.vendor_start_date=N)},v,{label:"Vendor Start Date",variant:"outlined",density:"compact","error-messages":z}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",st,[s(_(W),{name:"Vendor End Date",modelValue:u.value.data.vendor_end_date,"onUpdate:modelValue":m[12]||(m[12]=v=>u.value.data.vendor_end_date=v)},{default:d(({field:v,errors:z})=>[s(O,A({type:"date",modelValue:u.value.data.vendor_end_date,"onUpdate:modelValue":m[11]||(m[11]=N=>u.value.data.vendor_end_date=N)},v,{label:"Vendor End Date",variant:"outlined",density:"compact","error-messages":z}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",nt,[s(P,{color:"primary",loading:u.value.loading,onClick:V},{default:d(()=>[L("Save")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["validation-schema"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Ne,{options:Y.value},null,8,["options"])]),_:1}))}},it={class:"v-col-12 pt-0 pb-2"},rt=a("thead",null,[a("tr",null,[a("th",{class:"text-left text-primary"},"ISR ID"),a("th",{class:"text-left text-primary"},"Urgency"),a("th",{class:"text-left text-primary"},"Priority"),a("th",{class:"text-left text-primary"},"Reported by"),a("th",{class:"text-left text-primary"},"Handled by"),a("th",{class:"text-left text-primary"},"Date Reported"),a("th",{class:"text-left text-primary"},"Date Completed"),a("th",{class:"text-left text-primary"},"Status"),a("th",{class:"text-left text-primary"})])],-1),dt={__name:"AssetMaintenances",props:{asset:{type:Object,default:null}},setup(y){const f=y,B=je(),E=()=>{B.push({name:"NewMaintenance",query:{type:"details",asset_code:u.value.asset_code,asset_id:u.value.id,comp:u.value.company_id,loc:u.value.location_id,title:u.value.asset_name}})},C=b=>{B.push({name:"EditMaintenance",params:{id:b},query:{type:"details",pd:"ox2rKaIYFhBOQW31j6kkiMrJ4KfnYpLmwJhMzBFwPBlVjgGR4g",v:1,vv:"xK2sX1sDL1BBAvmuoPpWoNRgc4wzbdZ9F2OXAKrS3N2g65xNgy"}}).catch(x=>{console.log(x)})},Y=b=>b?b==1?"Normal":b==2?"Medium":"High":"",F=(b,x=5)=>{let V="0000"+b;return V.substring(V.length-x)},u=R({});return we(()=>f.asset,(b,x)=>{u.value=b,console.log("assetDetail.value",u.value)},{deep:!0}),(b,x)=>(w(),K(J,null,{default:d(()=>[a("div",it,[u.value.status_id!=2?(w(),K(P,{key:0,onClick:E,class:"mb-3",size:"small"},{default:d(()=>[L(" New Maintenance "),s(ke,{class:"ml-2",icon:_(Ce)},null,8,["icon"])]),_:1})):ie("",!0),s(oe,null,{default:d(()=>[s(xe,{density:"compact"},{default:d(()=>[rt,a("tbody",null,[(w(!0),G(ye,null,ge(f.asset.maintenance,(V,U)=>{var D,m,v;return w(),G("tr",{key:V.id},[a("td",null,"ISR-2"+M(F(V.id)),1),a("td",null,M(Y(V.urgency)),1),a("td",null,M(Y(V.priority)),1),a("td",null,M((D=V.profile)==null?void 0:D.display_name),1),a("td",null,M((m=V.handle_by)==null?void 0:m.display_name),1),a("td",null,M(_(Me)(V.created_at)),1),a("td",null,M(V.date_closed?_(Me)(V.date_closed):""),1),a("td",null,M((v=V.status)==null?void 0:v.title),1),a("td",null,[s(P,{color:"info",size:"x-small",onClick:z=>C(V.id)},{default:d(()=>[L("Details")]),_:2},1032,["onClick"])])])}),128))])]),_:1}),f.asset.maintenance&&f.asset.maintenance.length==0?(w(),K($e,{key:0,class:"pa-3 text-center"},{default:d(()=>[L("No record at the moment")]),_:1})):ie("",!0)]),_:1})])]),_:1}))}},ut={class:"v-col-12 pt-0 pb-2"},ct=a("thead",null,[a("tr",null,[a("th",{class:"text-left text-primary"},"#"),a("th",{class:"text-left text-primary"},"Alloted to"),a("th",{class:"text-left text-primary"},"Remarks")])],-1),mt={__name:"AssetAllotedLocations",props:{asset:{type:Object,default:null}},setup(y){const f=y;return(B,E)=>(w(),K(J,null,{default:d(()=>[a("div",ut,[s(oe,null,{default:d(()=>[s(xe,{density:"compact"},{default:d(()=>[ct,a("tbody",null,[(w(!0),G(ye,null,ge(f.asset.allotted_informations,(C,Y)=>(w(),G("tr",{key:C.id},[a("td",null,M(Y+1),1),a("td",null,M(C.title),1),a("td",null,M(C.remarks),1)]))),128))])]),_:1}),f.asset.allotted_informations&&f.asset.allotted_informations.length==0?(w(),K($e,{key:0,class:"pa-3 text-center"},{default:d(()=>[L("No record at the moment")]),_:1})):ie("",!0)]),_:1})])]),_:1}))}},vt=re("companies",{state:()=>({companies:[]}),getters:{list:y=>y.companies},actions:{async getCompanies(y){await X(y).get("/api/company/state/list").then(f=>{this.companies=Object.assign([],f.data)}).catch(f=>{console.log("getCompanies error: ",f)})}}}),pt=re("categories",{state:()=>({categories:[]}),getters:{list:y=>y.categories},actions:{async getCategories(y){await X(y).get("/api/category/state/category-list").then(f=>{this.categories=Object.assign([],f.data)}).catch(f=>{console.log("getCategories error: ",f)})}}}),ft=re("locations",{state:()=>({locations:[]}),getters:{list:y=>y.locations},actions:{async getLocations(y){await X(y).get("/api/location/state/location-list").then(f=>{this.locations=Object.assign([],f.data)}).catch(f=>{console.log("getlocations error: ",f)})}}}),_t=re("brands",{state:()=>({brands:[]}),getters:{list:y=>y.brands},actions:{async getBrands(y){await X(y).get("/api/brand/state/brand-list").then(f=>{this.brands=Object.assign([],f.data)}).catch(f=>{console.log("getbrands error: ",f)})}}}),yt=re("models",{state:()=>({models:[]}),getters:{list:y=>y.models},actions:{async getModels(y){await X(y).get("/api/model/state/model-list").then(f=>{this.models=Object.assign([],f.data)}).catch(f=>{console.log("getModels error: ",f)})}}}),gt=re("status",{state:()=>({status:[]}),getters:{list:y=>y.status,conditions:y=>y.status.filter(f=>f.type=="condition-type"),assets:y=>y.status.filter(f=>f.type=="asset")},actions:{async getStatuses(y){await X(y).get("/api/vendor/state/status-list").then(f=>{this.status=Object.assign([],f.data),console.log("this.stats 11",this.status)}).catch(f=>{console.log("getstatus error: ",f)})}}}),ht={class:"text-primary text-capitalize"},Vt={class:"d-flex align-center"},bt=a("div",{class:"v-col-12 font-weight-bold"},"Asset Info",-1),$t={class:"v-col-12 v-col-md-6 pt-0 pb-2"},wt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},xt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},St={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Mt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Dt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},kt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ct={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ut={key:0,class:"v-col-12 pt-0 font-weight-bold"},Ot={key:1,class:"v-col-12 pt-0"},At={class:"v-col-12 pt-0 text-capitalize"},Wt={class:"v-col-12"},jt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Yt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},zt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Nt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Tt={class:"v-col-12"},qt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Lt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Et={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ft={class:"v-col-12 v-col-md-6 pt-0 pb-2"},It={class:"v-col-12"},Pt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Bt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Ht={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Rt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Jt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Kt={class:"v-col-12 v-col-md-6 pt-0 pb-2"},Zt={class:"v-col-12 mb-6"},Gt={class:"v-col-12 mb-6"},Xt={class:"v-col-12 mb-6"},Qt=a("div",{class:"v-col-12 pt-0 font-weight-bold"},"Attachment",-1),ea={class:"v-col-12 pt-0"},ta={class:"v-col-12 pb-2"},aa={style:{height:"680px",width:"100%"},class:"d-flex align-center justify-center"},la={class:"v-col-12 pt-0 pb-2"},da={__name:"AssetForm",props:{page:{type:String,default:"add"},asset:{type:Object,default:null}},setup(y){const f=y,B=je(),E=R({}),C=De(),Y=vt();Y.list.length==0&&Y.getCompanies(C.token);const F=pt();F.list.length==0&&F.getCategories(C.token);const u=ft();u.list.length==0&&u.getLocations(C.token);const b=_t();b.list.length==0&&b.getBrands(C.token);const x=yt();x.list.length==0&&x.getModels(C.token);const V=gt();(V.list.length==0||V.conditions.length==0)&&V.getStatuses(C.token);const U=qe();U.list.length==0&&(console.log("fORM",U.list),U.getVendors(C.token));const D=R(window.location.origin),m=R("specification"),v=c=>{m.value=c};let z=Ye({Name:T().required().max(150),"Serial Number":T().max(80).nullable(),"Asset Code":T().max(50).nullable(),"Section code":T().max(30).nullable(),Category:T().required(),Company:T().required(),Location:T().required(),"Asset Status":T().required(),Specification:T().max(120).nullable(),Brand:T().required(),Model:T().required(),Condition:T().required()});const N=R(!1),l=R({}),Z=R([]),pe=Ie(()=>Z.value.map(c=>c.id)),he=c=>{l.value=Object.assign({},c),Z.value=c&&c.attachments?Object.assign([],c.attachments):[],c&&c.financial_information&&(l.value.capitalization_price=c.financial_information.capitalization_price,l.value.depreciation_percentage=c.financial_information.depreciation_percentage,l.value.scrap_value=c.financial_information.scrap_value,l.value.scrap_date=c.financial_information.scrap_date,l.value.capitalization_date=c.financial_information.capitalization_date,l.value.end_of_life=c.financial_information.end_of_life)};he(f.asset),we(()=>f.asset,c=>{he(c)});const ae=async()=>{N.value=!0,l.value.file_ids=pe.value,l.value.company_code=Y.list.filter(c=>c.id==l.value.company_id)[0].code,l.value.category_code=F.list.filter(c=>c.id==l.value.category_id)[0].code,l.value.financial_information_id=l.value.financial_information?l.value.financial_information.id:null,await X(C.token).post("/api/asset/save",l.value).then(c=>{E.value={status:!0,type:"success",text:c.data.message},N.value=!1,f.page=="add"&&B.push({name:"edit-asset",params:{id:c.data.asset.id}}).catch(t=>{console.log("router.push",t)})}).catch(c=>{console.log("saveAsset",c),E.value={status:!0,type:"error",text:"Error while saving asset"},N.value=!1})},Q=c=>{let t=null;c.map(e=>{t=Z.value.find(o=>o.id==e.id),t||Z.value.push(e)})},de=R(!1),le=R(1),ue=c=>{le.value=c,de.value=!0},k=c=>{Z.value=Z.value.filter(t=>t.id!==c)};return(c,t)=>(w(),K(oe,{loading:N.value,"max-width":"1600px",class:"mx-auto elevation-0"},{default:d(()=>[s(_(ze),{as:"v-form","validation-schema":_(z)},{default:d(()=>[s(Oe,{class:"pb-6 pt-3 d-flex align-center justify-space-between"},{default:d(()=>[a("div",ht,M(f.page+" Asset"),1),a("div",Vt,[s(P,{color:"primary",loading:N.value,onClick:ae},{default:d(()=>[L("Save")]),_:1},8,["loading"])])]),_:1}),s(We,null,{default:d(()=>[s(J,null,{default:d(()=>[bt,a("div",$t,[s(_(W),{name:"Name",modelValue:l.value.asset_name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value.asset_name=e)},{default:d(({field:e,errors:o})=>[s(O,A({modelValue:l.value.asset_name,"onUpdate:modelValue":t[0]||(t[0]=n=>l.value.asset_name=n)},e,{label:"Name*",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",wt,[s(_(W),{name:"Serial Number",modelValue:l.value.serial_number,"onUpdate:modelValue":t[3]||(t[3]=e=>l.value.serial_number=e)},{default:d(({field:e,errors:o})=>[s(O,A({modelValue:l.value.serial_number,"onUpdate:modelValue":t[2]||(t[2]=n=>l.value.serial_number=n)},e,{label:"Serial Number(Optional)",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",xt,[s(_(W),{name:"Section code",modelValue:l.value.section_code,"onUpdate:modelValue":t[5]||(t[5]=e=>l.value.section_code=e)},{default:d(({field:e,errors:o})=>[s(O,A({modelValue:l.value.section_code,"onUpdate:modelValue":t[4]||(t[4]=n=>l.value.section_code=n)},e,{label:"Section code (optional)",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",St,[s(ee,{modelValue:l.value.category_id,"onUpdate:modelValue":t[6]||(t[6]=e=>l.value.category_id=e),items:_(F).list,"item-title":"title","item-value":"id",label:"Category*",density:"compact",variant:"outlined",rules:[e=>!!e||"Category is required"]},null,8,["modelValue","items","rules"])]),a("div",Mt,[s(ee,{modelValue:l.value.company_id,"onUpdate:modelValue":t[7]||(t[7]=e=>l.value.company_id=e),items:_(Y).list,"item-title":"title","item-value":"id",label:"Company*",density:"compact",variant:"outlined",rules:[e=>!!e||"Company is required"]},null,8,["modelValue","items","rules"])]),a("div",Dt,[s(ee,{modelValue:l.value.location_id,"onUpdate:modelValue":t[8]||(t[8]=e=>l.value.location_id=e),items:_(u).list,"item-title":"title","item-value":"id",label:"Location*",density:"compact",variant:"outlined",rules:[e=>!!e||"Location is required"]},null,8,["modelValue","items","rules"])]),a("div",kt,[s(_(W),{name:"Asset Code",modelValue:l.value.asset_code,"onUpdate:modelValue":t[10]||(t[10]=e=>l.value.asset_code=e)},{default:d(({field:e,errors:o})=>[s(O,A({readonly:"",modelValue:l.value.asset_code,"onUpdate:modelValue":t[9]||(t[9]=n=>l.value.asset_code=n)},e,{label:"Asset Code (Auto Generated)",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",Ct,[s(ee,{modelValue:l.value.status_id,"onUpdate:modelValue":t[11]||(t[11]=e=>l.value.status_id=e),items:_(V).assets,disabled:l.value.status_id==2,"item-title":"title","item-value":"id",label:"Asset Status*",density:"compact",variant:"outlined",rules:[e=>!!e||"Asset Status is required"]},null,8,["modelValue","items","disabled","rules"])])]),_:1}),s(J,null,{default:d(()=>[f.page=="edit"?(w(),G("div",Ut," Additional Info ")):ie("",!0),f.page=="edit"?(w(),G("div",Ot,[s(P,{class:"mr-2 mb-2",onClick:t[12]||(t[12]=()=>v("specification")),color:m.value=="specification"?"primary":"white"},{default:d(()=>[L("Specification")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:t[13]||(t[13]=()=>v("purchase")),color:m.value=="purchase"?"primary":"white"},{default:d(()=>[L("Purchase")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:t[14]||(t[14]=()=>v("financial")),color:m.value=="financial"?"primary":"white"},{default:d(()=>[L("Financial")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:t[15]||(t[15]=()=>v("warranty")),color:m.value=="warranty"?"primary":"white"},{default:d(()=>[L("Warranty")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:t[16]||(t[16]=()=>v("allotted")),color:m.value=="allotted"?"primary":"white"},{default:d(()=>[L("Allotted")]),_:1},8,["color"]),s(P,{class:"mr-2 mb-2",onClick:t[17]||(t[17]=()=>v("maintenance")),color:m.value=="maintenance"?"primary":"white"},{default:d(()=>[L("Maintenance")]),_:1},8,["color"])])):ie("",!0),a("div",At,M(m.value+" Information"),1),me(a("div",Wt,[s(J,null,{default:d(()=>[a("div",jt,[s(_(W),{name:"Specification",modelValue:l.value.specification,"onUpdate:modelValue":t[19]||(t[19]=e=>l.value.specification=e)},{default:d(({field:e,errors:o})=>[s(O,A({modelValue:l.value.specification,"onUpdate:modelValue":t[18]||(t[18]=n=>l.value.specification=n)},e,{label:"Specification*",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",Yt,[s(ee,{modelValue:l.value.model_id,"onUpdate:modelValue":t[20]||(t[20]=e=>l.value.model_id=e),items:_(x).list,"item-title":"title","item-value":"id",label:"Model*",density:"compact",variant:"outlined",rules:[e=>!!e||"Model is required"]},null,8,["modelValue","items","rules"])]),a("div",zt,[s(ee,{modelValue:l.value.brand_id,"onUpdate:modelValue":t[21]||(t[21]=e=>l.value.brand_id=e),items:_(b).list,"item-title":"title","item-value":"id",label:"Brand*",density:"compact",variant:"outlined",rules:[e=>!!e||"Brand is required"]},null,8,["modelValue","items","rules"])]),a("div",Nt,[s(ee,{modelValue:l.value.condition_id,"onUpdate:modelValue":t[22]||(t[22]=e=>l.value.condition_id=e),items:_(V).conditions,"item-title":"title","item-value":"id",label:"Condition*",density:"compact",variant:"outlined",rules:[e=>!!e||"Condition is required"]},null,8,["modelValue","items","rules"])])]),_:1})],512),[[ve,m.value=="specification"]]),me(a("div",Tt,[s(J,null,{default:d(()=>[a("div",qt,[s(_(W),{name:"Price",modelValue:l.value.price,"onUpdate:modelValue":t[24]||(t[24]=e=>l.value.price=e)},{default:d(({field:e,errors:o})=>[s(O,A({modelValue:l.value.price,"onUpdate:modelValue":t[23]||(t[23]=n=>l.value.price=n)},e,{label:"Price",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",Lt,[s(ee,{modelValue:l.value.vendor_id,"onUpdate:modelValue":t[25]||(t[25]=e=>l.value.vendor_id=e),items:_(U).list,"item-title":"title","item-value":"id",label:"Vendor",density:"compact",variant:"outlined",rules:[e=>!!e||"Vendor is required"]},null,8,["modelValue","items","rules"])]),a("div",Et,[s(_(W),{name:"PO Number",modelValue:l.value.po_number,"onUpdate:modelValue":t[27]||(t[27]=e=>l.value.po_number=e)},{default:d(({field:e,errors:o})=>[s(O,A({modelValue:l.value.po_number,"onUpdate:modelValue":t[26]||(t[26]=n=>l.value.po_number=n)},e,{label:"PO Number",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",Ft,[s(_(W),{name:"Purchase Date",modelValue:l.value.purchased_date,"onUpdate:modelValue":t[29]||(t[29]=e=>l.value.purchased_date=e)},{default:d(({field:e,errors:o})=>[s(O,A({type:"date",modelValue:l.value.purchased_date,"onUpdate:modelValue":t[28]||(t[28]=n=>l.value.purchased_date=n)},e,{label:"Purchase Date",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[ve,m.value=="purchase"]]),me(a("div",It,[s(J,null,{default:d(()=>[a("div",Pt,[s(_(W),{name:"Capitalization Price",modelValue:l.value.capitalization_price,"onUpdate:modelValue":t[31]||(t[31]=e=>l.value.capitalization_price=e)},{default:d(({field:e,errors:o})=>[s(O,A({modelValue:l.value.capitalization_price,"onUpdate:modelValue":t[30]||(t[30]=n=>l.value.capitalization_price=n)},e,{label:"Capitalization Price",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",Bt,[s(_(W),{name:"Depreciation Percentage",modelValue:l.value.depreciation_percentage,"onUpdate:modelValue":t[33]||(t[33]=e=>l.value.depreciation_percentage=e)},{default:d(({field:e,errors:o})=>[s(O,A({modelValue:l.value.depreciation_percentage,"onUpdate:modelValue":t[32]||(t[32]=n=>l.value.depreciation_percentage=n)},e,{label:"Depreciation Percentage",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",Ht,[s(_(W),{name:"Scrap Value",modelValue:l.value.scrap_value,"onUpdate:modelValue":t[35]||(t[35]=e=>l.value.scrap_value=e)},{default:d(({field:e,errors:o})=>[s(O,A({modelValue:l.value.scrap_value,"onUpdate:modelValue":t[34]||(t[34]=n=>l.value.scrap_value=n)},e,{label:"Scrap Value",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",Rt,[s(_(W),{name:"Scrap Date",modelValue:l.value.scrap_date,"onUpdate:modelValue":t[37]||(t[37]=e=>l.value.scrap_date=e)},{default:d(({field:e,errors:o})=>[s(O,A({type:"date",modelValue:l.value.scrap_date,"onUpdate:modelValue":t[36]||(t[36]=n=>l.value.scrap_date=n)},e,{label:"Scrap Date",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",Jt,[s(_(W),{name:"Capitalization Date",modelValue:l.value.capitalization_date,"onUpdate:modelValue":t[39]||(t[39]=e=>l.value.capitalization_date=e)},{default:d(({field:e,errors:o})=>[s(O,A({type:"date",modelValue:l.value.capitalization_date,"onUpdate:modelValue":t[38]||(t[38]=n=>l.value.capitalization_date=n)},e,{label:"Capitalization Date",variant:"outlined",density:"compact","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])]),a("div",Kt,[s(_(W),{name:"End of Life",modelValue:l.value.end_of_life,"onUpdate:modelValue":t[41]||(t[41]=e=>l.value.end_of_life=e)},{default:d(({field:e,errors:o})=>[s(O,A({type:"date",modelValue:l.value.end_of_life,"onUpdate:modelValue":t[40]||(t[40]=n=>l.value.end_of_life=n)},e,{label:"End of Life",density:"compact",variant:"outlined","error-messages":o}),null,16,["modelValue","error-messages"])]),_:1},8,["modelValue"])])]),_:1})],512),[[ve,m.value=="financial"]]),me(a("div",Zt,[f.page!="add"?(w(),K(ot,{key:0,asset:l.value,page:f.page},null,8,["asset","page"])):ie("",!0)],512),[[ve,m.value=="warranty"]]),me(a("div",Gt,[s(mt,{asset:l.value},null,8,["asset"])],512),[[ve,m.value=="allotted"]]),me(a("div",Xt,[s(dt,{asset:l.value},null,8,["asset"])],512),[[ve,m.value=="maintenance"]]),Qt,a("div",ea,[s(J,null,{default:d(()=>[a("div",ta,[s(He,{options:{multiSelect:!0},onSelect:Q})])]),_:1}),Z.value.length>0?(w(),K(J,{key:0,class:"px-1"},{default:d(()=>[(w(!0),G(ye,null,ge(Z.value,(e,o)=>(w(),G("div",{key:e.id,class:"v-col-12 v-col-md-2 pa-2",style:{position:"relative"}},[s(P,{style:{position:"absolute",top:"0",right:"0","z-index":"1"},icon:_(Ae),size:"26px",color:"error",onClick:()=>k(e.id)},null,8,["icon","onClick"]),s(oe,{onClick:()=>ue(o)},{default:d(()=>[s(Se,{src:D.value+"/file/"+e.path,cover:"","aspect-ratio":"1"},null,8,["src"])]),_:2},1032,["onClick"])]))),128)),s(Ue,{modelValue:de.value,"onUpdate:modelValue":t[43]||(t[43]=e=>de.value=e),width:"95%","max-width":"900"},{default:d(()=>[s(oe,{class:"bg-black"},{default:d(()=>[s(Pe,{"hide-delimiter-background":"","show-arrows":"hover",height:"680px",modelValue:le.value,"onUpdate:modelValue":t[42]||(t[42]=e=>le.value=e)},{default:d(()=>[(w(!0),G(ye,null,ge(Z.value,(e,o)=>(w(),K(Be,{key:o,"reverse-transition":"fade",transition:"fade"},{default:d(()=>[a("div",aa,[s(Se,{src:D.value+"/file/"+e.path},null,8,["src"])])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):(w(),K(J,{key:1},{default:d(()=>[a("div",la,[s($e,{color:"grey-lighten-4",class:"pa-6 text-center"},{default:d(()=>[L(" Attachment is empty at the moment. ")]),_:1})])]),_:1}))])]),_:1})]),_:1})]),_:1},8,["validation-schema"]),s(Ne,{options:E.value},null,8,["options"])]),_:1},8,["loading"]))}};export{da as _};
